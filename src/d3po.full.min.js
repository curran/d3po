!function i(o,s,l){function u(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var a=s[t]={exports:{}};o[t][0].call(a.exports,function(e){return u(o[t][1][e]||e)},a,a.exports,i,o,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=d(e),r=n[0],a=n[1],i=new c(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),o=0,s=0<a?r-4:r,l=0;l<s;l+=4)t=u[e.charCodeAt(l)]<<18|u[e.charCodeAt(l+1)]<<12|u[e.charCodeAt(l+2)]<<6|u[e.charCodeAt(l+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=255&t;2===a&&(t=u[e.charCodeAt(l)]<<2|u[e.charCodeAt(l+1)]>>4,i[o++]=255&t);1===a&&(t=u[e.charCodeAt(l)]<<10|u[e.charCodeAt(l+1)]<<4|u[e.charCodeAt(l+2)]>>2,i[o++]=t>>8&255,i[o++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],i=0,o=n-r;i<o;i+=16383)a.push(l(e,i,o<i+16383?o:i+16383));1==r?(t=e[n-1],a.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],a.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return a.join("")};for(var s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=r.length;a<i;++a)s[a]=r[a],u[r.charCodeAt(a)]=a;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var r,a,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s[(a=r)>>18&63]+s[a>>12&63]+s[a>>6&63]+s[63&a]);return i.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(0<e)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,t|=n=(15<(e>>>=n))<<2,(t|=n=(3<(e>>>=n))<<1)|(e>>>=n)>>1},n.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},n.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,a=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--a;e[t]=r<<a&255}}(a),n.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},n.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},n.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return 1+t|(~t&-~t)-1>>>r(e)+1}},{}],3:[function(e,t,B){(function(d){"use strict";var r=e("base64-js"),i=e("ieee754");B.Buffer=d,B.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},B.INSPECT_MAX_BYTES=50;var n=2147483647;function o(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=d.prototype,t}function d(e,t,n){if("number"!=typeof e)return a(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=o(n),a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(T(e,ArrayBuffer)||e&&T(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=d.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);var a=function(e){if(d.isBuffer(e)){var t=0|c(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?o(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),o(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(a)return r?-1:C(e).length;t=(""+t).toLowerCase(),a=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,a){var i,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(s<n+l&&(n=s-l),i=n;0<=i;i--){for(var d=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function v(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?a<(r=Number(r))&&(r=a):r=a;var i=t.length;i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(q(s))return o;e[n+o]=s}return o}function m(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,l,u=e[a],c=null,d=239<u?4:223<u?3:191<u?2:1;if(a+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[a+1]))&&127<(l=(31&u)<<6|63&i)&&(c=l);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&i)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,d=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=d}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=b));return n}(r)}B.kMaxLength=n,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(e,t,n){return a(e,t,n)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},d.allocUnsafe=function(e){return l(e)},d.allocUnsafeSlow=function(e){return l(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(T(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(T(i,Uint8Array)&&(i=d.from(i)),!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return w(this,t,n);case"base64":return y(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=B.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,a){if(T(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(a<=r&&n<=t)return 0;if(a<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(i,o),l=this.slice(r,a),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){i=l[c],o=u[c];break}return i<o?-1:o<i?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,o,s,l,u,c,d,f,h,p=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return f=t,h=n,F(C(e,(d=this).length-f),d,f,h);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return l=this,u=t,c=n,F(N(e),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,s=n,F(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(e,(i=this).length-o),i,o,s);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function w(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function _(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var a="",i=t;i<n;++i)a+=O(e[i]);return a}function k(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function z(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,a,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function E(e,t,n,r,a){return t=+t,n>>>=0,a||A(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function S(e,t,n,r,a){return t=+t,n>>>=0,a||A(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=d.prototype,r},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},d.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,a=1,i=this[e+--r];0<r&&(a*=256);)i+=this[e+--r]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},d.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=a-1;0<=i;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(i=t;i<n;++i)this[i]=e;else{var o=d.isBuffer(e)?e:d.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var t=/[^+/0-9A-Za-z-_]/g;function O(e){return e<16?"0"+e.toString(16):e.toString(16)}function C(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function N(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:11}],4:[function(e,t,n){"use strict";var i=e("./lib/thunk.js");function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(e){var t=new o;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var r=0;r<n.length;++r){var a=n[r];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[r]="array",t.arrayArgs.push(r),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+r),r<t.pre.args.length&&0<t.pre.args[r].count)throw new Error("cwise: pre() block may not reference array args");if(r<t.post.args.length&&0<t.post.args[r].count)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(r),t.shimArgs.push("scalar"+r);else if("index"===a){if(t.indexArgs.push(r),r<t.pre.args.length&&0<t.pre.args[r].count)throw new Error("cwise: pre() block may not reference array index");if(r<t.body.args.length&&t.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array index");if(r<t.post.args.length&&0<t.post.args[r].count)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(r),r<t.pre.args.length&&t.pre.args[r].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(r<t.body.args.length&&t.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array shape");if(r<t.post.args.length&&t.post.args[r].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[r]);t.argTypes[r]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(r)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}},{"./lib/thunk.js":6}],5:[function(e,t,n){"use strict";var _=e("uniq");function k(e,t,n){var r,a,i=e.length,o=t.arrayArgs.length,s=0<t.indexArgs.length,l=[],u=[],c=0,d=0;for(r=0;r<i;++r)u.push(["i",r,"=0"].join(""));for(a=0;a<o;++a)for(r=0;r<i;++r)d=c,c=e[r],0===r?u.push(["d",a,"s",r,"=t",a,"p",c].join("")):u.push(["d",a,"s",r,"=(t",a,"p",c,"-s",d,"*t",a,"p",d,")"].join(""));for(0<u.length&&l.push("var "+u.join(",")),r=i-1;0<=r;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;r<i;++r){for(d=c,c=e[r],a=0;a<o;++a)l.push(["p",a,"+=d",a,"s",r].join(""));s&&(0<r&&l.push(["index[",d,"]-=s",d].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function z(e,t,n){for(var r=e.body,a=[],i=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var d=t.offsetArgIndex.indexOf(o);c=t.offsetArgs[d].array,u="+q"+d;case"array":u="p"+c+u;var f="l"+o,h="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(a.push(["var ",f,"=",h,".get(",u,")"].join("")),r=r.replace(l,f),i.push([h,".set(",u,",",f,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(a.push(["var ",f,"=",h,".get(",u,")"].join("")),r=r.replace(l,f),s.lvalue&&i.push([h,".set(",u,",",f,")"].join(""))):(a.push(["var ",f,"=",h,"[",u,"]"].join("")),r=r.replace(l,f),s.lvalue&&i.push([h,"[",u,"]=",f].join("")));else{for(var p=[s.name],g=[u],v=0;v<Math.abs(t.arrayBlockIndices[c]);v++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+c+"b"+v);if(l=new RegExp(p.join(""),"g"),u=g.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[h,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}t.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,r=new Array(e.arrayArgs.length),a=new Array(e.arrayArgs.length),i=0;i<e.arrayArgs.length;++i)a[i]=t[2*i],r[i]=t[2*i+1];var o=[],s=[],l=[],u=[],c=[];for(i=0;i<e.arrayArgs.length;++i){e.arrayBlockIndices[i]<0?(l.push(0),u.push(n),o.push(n),s.push(n+e.arrayBlockIndices[i])):(l.push(e.arrayBlockIndices[i]),u.push(e.arrayBlockIndices[i]+n),o.push(0),s.push(e.arrayBlockIndices[i]));for(var d=[],f=0;f<r[i].length;f++)l[i]<=r[i][f]&&r[i][f]<u[i]&&d.push(r[i][f]-l[i]);c.push(d)}var h=["SS"],p=["'use strict'"],g=[];for(f=0;f<n;++f)g.push(["s",f,"=SS[",f,"]"].join(""));for(i=0;i<e.arrayArgs.length;++i){h.push("a"+i),h.push("t"+i),h.push("p"+i);for(f=0;f<n;++f)g.push(["t",i,"p",f,"=t",i,"[",l[i]+f,"]"].join(""));for(f=0;f<Math.abs(e.arrayBlockIndices[i]);++f)g.push(["t",i,"b",f,"=t",i,"[",o[i]+f,"]"].join(""))}for(i=0;i<e.scalarArgs.length;++i)h.push("Y"+i);if(0<e.shapeArgs.length&&g.push("shape=SS.slice(0)"),0<e.indexArgs.length){var v=new Array(n);for(i=0;i<n;++i)v[i]="0";g.push(["index=[",v.join(","),"]"].join(""))}for(i=0;i<e.offsetArgs.length;++i){var m=e.offsetArgs[i],y=[];for(f=0;f<m.offset.length;++f)0!==m.offset[f]&&(1===m.offset[f]?y.push(["t",m.array,"p",f].join("")):y.push([m.offset[f],"*t",m.array,"p",f].join("")));0===y.length?g.push("q"+i+"=0"):g.push(["q",i,"=",y.join("+")].join(""))}var x=_([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for(0<(g=g.concat(x)).length&&p.push("var "+g.join(",")),i=0;i<e.arrayArgs.length;++i)p.push("p"+i+"|=0");3<e.pre.body.length&&p.push(z(e.pre,e,a));var b=z(e.body,e,a),j=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(c);j<n?p.push(function(e,t,n,r){for(var a=t.length,i=n.arrayArgs.length,o=n.blockSize,s=0<n.indexArgs.length,l=[],u=0;u<i;++u)l.push(["var offset",u,"=p",u].join(""));for(u=e;u<a;++u)l.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",o,"){"].join("")),l.push(["s",t[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",t[u],"=",o].join("")),l.push(["j",u,"-=",o,"}"].join("")),s&&l.push(["index[",t[u],"]=j",u].join(""));for(u=0;u<i;++u){for(var c=["offset"+u],d=e;d<a;++d)c.push(["j",d,"*t",u,"p",t[d]].join(""));l.push(["p",u,"=(",c.join("+"),")"].join(""))}for(l.push(k(t,n,r)),u=e;u<a;++u)l.push("}");return l.join("\n")}(j,c[0],e,b)):p.push(k(c[0],e,b)),3<e.post.body.length&&p.push(z(e.post,e,a)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+p.join("\n")+"\n----------");var w=[e.funcName||"unnamed","_cwise_loop_",r[0].join("s"),"m",j,function(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var a=e[r],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[r]="u"+a.charAt(1)+i:t[r]=a.charAt(0)+i,0<r&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}(a)].join("");return new Function(["function ",w,"(",h.join(","),"){",p.join("\n"),"} return ",w].join(""))()}},{uniq:31}],6:[function(e,t,n){"use strict";var d=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],i=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],u=0;u<e.arrayArgs.length;++u){var c=e.arrayArgs[u];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),a.push("t"+c),a.push("r"+c),i.push("t"+c),i.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),0<u&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}for(1<e.arrayArgs.length&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),u=0;u<e.scalarArgs.length;++u)o.push("scalar"+e.scalarArgs[u]);return n.push(["type=[",i.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(d.bind(void 0,e))}},{"./compile.js":5}],7:[function(e,ul,t){!function(){var T={version:"3.5.17"},a=[].slice,d=function(e){return a.call(e)},x=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function q(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(x)try{d(x.documentElement.childNodes)[0].nodeType}catch(e){d=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},i.setProperty=function(e,t,n){o.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function u(e){return null===e?NaN:+e}function c(e){return!isNaN(e)}function e(i){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;i(e[a],t)<0?n=1+a:r=a}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;0<i(e[a],t)?r=a:n=1+a}return n}}}T.ascending=l,T.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},T.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r<n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r<n&&(n=r)}return n},T.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n<r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n<r&&(n=r)}return n},T.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(r<n&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(r<n&&(n=r),a<r&&(a=r))}return[n,a]},T.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)c(n=+e[i])&&(r+=n);else for(;++i<a;)c(n=+t.call(e,e[i],i))&&(r+=n);return r},T.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)c(n=u(e[i]))?r+=n:--o;else for(;++i<a;)c(n=u(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},T.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],i=n-r;return i?a+i*(e[r]-a):a},T.median=function(e,t){var n,r=[],a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)c(n=u(e[i]))&&r.push(n);else for(;++i<a;)c(n=u(t.call(e,e[i],i)))&&r.push(n);if(r.length)return T.quantile(r.sort(l),.5)},T.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)c(n=u(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++l)));else for(;++s<a;)c(n=u(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++l)));if(1<l)return o/(l-1)},T.deviation=function(){var e=T.variance.apply(this,arguments);return e?Math.sqrt(e):e};var f=e(l);function h(e){return e.length}T.bisectLeft=f.left,T.bisect=T.bisectRight=f.right,T.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},T.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},T.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},T.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},T.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=T.min(e,h),r=new Array(n);++t<n;)for(var a,i=-1,o=r[t]=new Array(a);++i<a;)o[i]=e[i][t];return r},T.zip=function(){return T.transpose(arguments)},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t},T.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},T.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},T.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);0<=--a;)for(t=(r=e[a]).length;0<=--t;)n[--o]=r[t];return n};var F=Math.abs;function p(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function y(){this._=Object.create(null)}T.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=function(e){var t=1;for(;e*t%1;)t*=10;return t}(F(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},T.map=function(e,t){var n=new y;if(e instanceof y)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};var g="__proto__",v="\0";function m(e){return(e+="")===g||e[0]===v?v+e:e}function b(e){return(e+="")[0]===v?e.slice(1):e}function j(e){return m(e)in this._}function w(e){return(e=m(e))in this._&&delete this._[e]}function _(){var e=[];for(var t in this._)e.push(b(t));return e}function k(){var e=0;for(var t in this._)++e;return e}function z(){for(var e in this._)return!1;return!0}function M(){this._=Object.create(null)}function B(e){return e}function A(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}function E(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=S.length;n<r;++n){var a=S[n]+t;if(a in e)return a}}p(y,{has:j,get:function(e){return this._[m(e)]},set:function(e,t){return this._[m(e)]=t},remove:w,keys:_,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:k,empty:z,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}}),T.nest=function(){var d,f,h={},p=[],t=[];function g(n,e,r){if(r>=p.length)return f?f.call(h,e):d?e.sort(d):e;for(var t,a,i,o,s=-1,l=e.length,u=p[r++],c=new y;++s<l;)(o=c.get(t=u(a=e[s])))?o.push(a):c.set(t,[a]);return i=n?(a=n(),function(e,t){a.set(e,g(n,t,r))}):(a={},function(e,t){a[e]=g(n,t,r)}),c.forEach(i),a}return h.map=function(e,t){return g(t,e,0)},h.entries=function(e){return function n(e,r){if(r>=p.length)return e;var a=[],i=t[r++];return e.forEach(function(e,t){a.push({key:e,values:n(t,r)})}),i?a.sort(function(e,t){return i(e.key,t.key)}):a}(g(T.map,e,0),0)},h.key=function(e){return p.push(e),h},h.sortKeys=function(e){return t[p.length-1]=e,h},h.sortValues=function(e){return d=e,h},h.rollup=function(e){return f=e,h},h},T.set=function(e){var t=new M;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},p(M,{has:j,add:function(e){return this._[m(e+="")]=!0,e},remove:w,values:_,size:k,empty:z,forEach:function(e){for(var t in this._)e.call(this,b(t))}}),T.behavior={},T.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=A(e,t,t[n]);return e};var S=["webkit","ms","moz","Moz","o","O"];function O(){}function C(){}function N(a){var i=[],o=new y;function e(){for(var e,t=i,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return a}return e.on=function(e,t){var n,r=o.get(e);return arguments.length<2?r&&r.on:(r&&(r.on=null,i=i.slice(0,n=i.indexOf(r)).concat(i.slice(n+1)),o.remove(e)),t&&i.push(o.set(e,{on:t})),a)},e}function P(){T.event.preventDefault()}function I(){for(var e,t=T.event;e=t.sourceEvent;)t=e;return t}function D(a){for(var i=new C,e=0,t=arguments.length;++e<t;)i[arguments[e]]=N(i);return i.of=function(n,r){return function(e){try{var t=e.sourceEvent=T.event;e.target=a,T.event=e,i[e.type].apply(n,r)}finally{T.event=t}}},i}T.dispatch=function(){for(var e=new C,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=N(e);return e},C.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},T.event=null,T.requote=function(e){return e.replace(L,"\\$&")};var L=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function R(e){return V(e,G),e}var U=function(e,t){return t.querySelector(e)},H=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[E(e,"matchesSelector")];return(Y=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(U=function(e,t){return Sizzle(e,t)[0]||null},H=Sizzle,Y=Sizzle.matchesSelector),T.selection=function(){return T.select(x.documentElement)};var G=T.selection.prototype=[];function X(e){return"function"==typeof e?e:function(){return U(e,this)}}function Z(e){return"function"==typeof e?e:function(){return H(e,this)}}G.select=function(e){var t,n,r,a,i=[];e=X(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return R(i)},G.selectAll=function(e){var t,n,r=[];e=Z(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=d(e.call(n,n.__data__,s,a))),t.parentNode=n);return R(r)};var J="http://www.w3.org/1999/xhtml",W={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(t,n){return t=T.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function K(e){return e.trim().replace(/\s+/g," ")}function $(e){return new RegExp("(?:^|\\s+)"+T.requote(e)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(n,r){var a=(n=ee(n).map(ne)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<a;)n[e](this,t)}:function(){for(var e=-1;++e<a;)n[e](this,r)}}function ne(r){var a=$(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(a.lastIndex=0,a.test(n)||e.setAttribute("class",K(n+" "+r))):e.setAttribute("class",K(n.replace(a," ")))}}function re(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function ae(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ie(n){return"function"==typeof n?n:(n=T.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===J&&e.documentElement.namespaceURI===J?e.createElement(n):e.createElementNS(t,n)}}function oe(){var e=this.parentNode;e&&e.removeChild(this)}function se(e){return{__data__:e}}function le(e){return function(){return Y(this,e)}}function ue(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function ce(e){return V(e,de),e}T.ns={prefix:W,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),W.hasOwnProperty(n)?{space:W[n],local:e}:e}},G.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=T.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(Q(t,e[t]));return this}return this.each(Q(e,t))},G.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ee(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!$(e[a]).test(t))return!1;return!0}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},G.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(re(n,e[n],t));return this}if(r<2){var a=this.node();return q(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(re(e,t,n))},G.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))},G.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},G.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},G.append=function(e){return e=ie(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},G.insert=function(e,t){return e=ie(e),t=X(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},G.remove=function(){return this.each(oe)},G.data=function(e,p){var t,n,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(t=this[0]).length);++r<a;)(n=t[r])&&(e[r]=n.__data__);return e}function i(e,t){var n,r,a,i=e.length,o=t.length,s=Math.min(i,o),l=new Array(o),u=new Array(o),c=new Array(i);if(p){var d,f=new y,h=new Array(i);for(n=-1;++n<i;)(r=e[n])&&(f.has(d=p.call(r,r.__data__,n))?c[n]=r:f.set(d,r),h[n]=d);for(n=-1;++n<o;)(r=f.get(d=p.call(t,a=t[n],n)))?!0!==r&&((l[n]=r).__data__=a):u[n]=se(a),f.set(d,!0);for(n=-1;++n<i;)n in h&&!0!==f.get(h[n])&&(c[n]=e[n])}else{for(n=-1;++n<s;)r=e[n],a=t[n],r?(r.__data__=a,l[n]=r):u[n]=se(a);for(;n<o;++n)u[n]=se(t[n]);for(;n<i;++n)c[n]=e[n]}u.update=l,u.parentNode=l.parentNode=c.parentNode=e.parentNode,g.push(u),v.push(l),m.push(c)}var g=ce([]),v=R([]),m=R([]);if("function"==typeof e)for(;++r<a;)i(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<a;)i(t=this[r],e);return v.enter=function(){return g},v.exit=function(){return m},v},G.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},G.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=le(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return R(a)},G.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];0<=--a;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},G.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},G.each=function(r){return ue(this,function(e,t,n){r.call(e,e.__data__,t,n)})},G.call=function(e){var t=d(arguments);return e.apply(t[0]=this,t),this},G.empty=function(){return!this.node()},G.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},G.size=function(){var e=0;return ue(this,function(){++e}),e};var de=[];function fe(a,t,n){var r="__on"+a,e=a.indexOf("."),i=pe;0<e&&(a=a.slice(0,e));var o=he.get(a);function s(){var e=this[r];e&&(this.removeEventListener(a,e,e.$),delete this[r])}return o&&(a=o,i=ge),e?t?function(){var e=i(t,d(arguments));s.call(this),this.addEventListener(a,this[r]=e,e.$=n),e._=t}:s:t?O:function(){var e,t=new RegExp("^__on([^.]+)"+T.requote(a)+"$");for(var n in this)if(e=n.match(t)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}}T.selection.enter=ce,(T.selection.enter.prototype=de).append=G.append,de.empty=G.empty,de.node=G.node,de.call=G.call,de.size=G.size,de.select=function(e){for(var t,n,r,a,i,o=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;)(i=a[u])?(t.push(r[u]=n=e.call(a.parentNode,i.__data__,u,s)),n.__data__=i.__data__):t.push(null)}return R(o)},de.insert=function(e,t){return arguments.length<2&&(t=function(o){var s,l;return function(e,t,n){var r,a=o[n].update,i=a.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=a[s])&&++s<i;);return r}}(this)),G.insert.call(this,e,t)},T.select=function(e){var t;return"string"==typeof e?(t=[U(e,x)]).parentNode=x.documentElement:(t=[e]).parentNode=s(e),R([t])},T.selectAll=function(e){var t;return"string"==typeof e?(t=d(H(e,x))).parentNode=x.documentElement:(t=d(e)).parentNode=null,R([t])},G.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(fe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(fe(e,t,n))};var he=T.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pe(n,r){return function(e){var t=T.event;T.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{T.event=t}}}function ge(e,t){var n=pe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}x&&he.forEach(function(e){"on"+e in x&&he.remove(e)});var ve,me=0;function ye(e){var n=".dragsuppress-"+ ++me,r="click"+n,a=T.select(q(e)).on("touchmove"+n,P).on("dragstart"+n,P).on("selectstart"+n,P);if(null==ve&&(ve=!("onselectstart"in e)&&E(e.style,"userSelect")),ve){var i=s(e).style,o=i[ve];i[ve]="none"}return function(e){if(a.on(n,null),ve&&(i[ve]=o),e){function t(){a.on(r,null)}a.on(r,function(){P(),t()},!0),setTimeout(t,0)}}}T.mouse=function(e){return be(e,I())};var xe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function be(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(xe<0){var a=q(e);if(a.scrollX||a.scrollY){var i=(n=T.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xe=!(i.f||i.e),n.remove()}}return xe?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function je(){return T.event.changedTouches[0].identifier}T.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=I().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return be(e,r)},T.behavior.drag=function(){var g=D(n,"drag","dragstart","dragend"),v=null,e=r(O,T.mouse,q,"mousemove","mouseup"),t=r(je,T.touch,B,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(c,d,f,h,p){return function(){var r,e=T.event.target.correspondingElement||T.event.target,a=this.parentNode,i=g.of(this,arguments),o=0,s=c(),t=".drag"+(null==s?"":"-"+s),n=T.select(f(e)).on(h+t,function(){var e,t,n=d(a,s);if(!n)return;e=n[0]-u[0],t=n[1]-u[1],o|=e|t,i({type:"drag",x:(u=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t})}).on(p+t,function(){if(!d(a,s))return;n.on(h+t,null).on(p+t,null),l(o),i({type:"dragend"})}),l=ye(e),u=d(a,s);r=v?[(r=v.apply(this,arguments)).x-u[0],r.y-u[1]]:[0,0],i({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(v=e,n):v},T.rebind(n,g,"on")},T.touches=function(n,e){return arguments.length<2&&(e=I().touches),e?d(e).map(function(e){var t=be(n,e);return t.identifier=e.identifier,t}):[]};var we=1e-6,_e=we*we,ke=Math.PI,ze=2*ke,Me=ze-we,Ae=ke/2,Ee=ke/180,Se=180/ke;function Oe(e){return 0<e?1:e<0?-1:0}function Ce(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Ne(e){return 1<e?0:e<-1?ke:Math.acos(e)}function Fe(e){return 1<e?Ae:e<-1?-Ae:Math.asin(e)}function Te(e){return((e=Math.exp(e))+1/e)/2}function qe(e){return(e=Math.sin(e/2))*e}var Be=Math.SQRT2;T.interpolateZoom=function(e,t){var n,a,i=e[0],o=e[1],s=e[2],r=t[0],l=t[1],u=t[2],c=r-i,d=l-o,f=c*c+d*d;if(f<_e)a=Math.log(u/s)/Be,n=function(e){return[i+e*c,o+e*d,s*Math.exp(Be*e*a)]};else{var h=Math.sqrt(f),p=(u*u-s*s+4*f)/(2*s*2*h),g=(u*u-s*s-4*f)/(2*u*2*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);a=(m-v)/Be,n=function(e){var t=e*a,n=Te(v),r=s/(2*h)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Be*t+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+r*c,o+r*d,s*n/Te(Be*t+v)]}}return n.duration=1e3*a,n},T.behavior.zoom=function(){var t,l,n,r,b,a,i,o,s,j={x:0,y:0,k:1},u=[960,500],c=De,d=250,f=0,w="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",_="touchstart.zoom",k=D(g,"zoomstart","zoom","zoomend");function g(e){e.on(w,N).on(Ie+".zoom",m).on("dblclick.zoom",y).on(_,F)}function z(e){return[(e[0]-j.x)/j.k,(e[1]-j.y)/j.k]}function M(e){j.k=Math.max(c[0],Math.min(c[1],e))}function A(e,t){t=function(e){return[e[0]*j.k+j.x,e[1]*j.k+j.y]}(t),j.x+=e[0]-t[0],j.y+=e[1]-t[1]}function E(e,t,n,r){e.__chart__={x:j.x,y:j.y,k:j.k},M(Math.pow(2,r)),A(l=t,n),e=T.select(e),0<d&&(e=e.transition().duration(d)),e.call(g.event)}function v(){i&&i.domain(a.range().map(function(e){return(e-j.x)/j.k}).map(a.invert)),s&&s.domain(o.range().map(function(e){return(e-j.y)/j.k}).map(o.invert))}function S(e){f++||e({type:"zoomstart"})}function O(e){v(),e({type:"zoom",scale:j.k,translate:[j.x,j.y]})}function C(e){--f||(e({type:"zoomend"}),l=null)}function N(){var e=this,t=k.of(e,arguments),n=0,r=T.select(q(e)).on(h,function(){n=1,A(T.mouse(e),a),O(t)}).on(p,function(){r.on(h,null).on(p,null),i(n),C(t)}),a=z(T.mouse(e)),i=ye(e);Ns.call(e),S(t)}function F(){var u,c=this,d=k.of(c,arguments),f={},h=0,a=".zoom-"+T.event.changedTouches[0].identifier,p="touchmove"+a,g="touchend"+a,v=[],i=T.select(c),o=ye(c);function m(){var e=T.touches(c);return u=j.k,e.forEach(function(e){e.identifier in f&&(f[e.identifier]=z(e))}),e}function e(){var e=T.event.target;T.select(e).on(p,y).on(g,x),v.push(e);for(var t=T.event.changedTouches,n=0,r=t.length;n<r;++n)f[t[n].identifier]=null;var a=m(),i=Date.now();if(1===a.length){if(i-b<500){var o=a[0];E(c,o,f[o.identifier],Math.floor(Math.log(j.k)/Math.LN2)+1),P()}b=i}else if(1<a.length){o=a[0];var s=a[1],l=o[0]-s[0],u=o[1]-s[1];h=l*l+u*u}}function y(){var e,t,n,r,a=T.touches(c);Ns.call(c);for(var i=0,o=a.length;i<o;++i,r=null)if(n=a[i],r=f[n.identifier]){if(t)break;e=n,t=r}if(r){var s=(s=n[0]-e[0])*s+(s=n[1]-e[1])*s,l=h&&Math.sqrt(s/h);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],M(l*u)}b=null,A(e,t),O(d)}function x(){if(T.event.touches.length){for(var e=T.event.changedTouches,t=0,n=e.length;t<n;++t)delete f[e[t].identifier];for(var r in f)return void m()}T.selectAll(v).on(a,null),i.on(w,N).on(_,F),o(),C(d)}e(),S(d),i.on(w,null).on(_,e)}function m(){var e=k.of(this,arguments);r?clearTimeout(r):(Ns.call(this),t=z(l=n||T.mouse(this)),S(e)),r=setTimeout(function(){r=null,C(e)},50),P(),M(Math.pow(2,.002*Pe())*j.k),A(l,t),O(e)}function y(){var e=T.mouse(this),t=Math.log(j.k)/Math.LN2;E(this,e,z(e),T.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Ie=Ie||("onwheel"in x?(Pe=function(){return-T.event.deltaY*(T.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(Pe=function(){return T.event.wheelDelta},"mousewheel"):(Pe=function(){return-T.event.detail},"MozMousePixelScroll")),g.event=function(e){e.each(function(){var s=k.of(this,arguments),t=j;qs?T.select(this).transition().each("start.zoom",function(){j=this.__chart__||{x:0,y:0,k:1},S(s)}).tween("zoom:zoom",function(){var r=u[0],e=u[1],a=l?l[0]:r/2,i=l?l[1]:e/2,o=T.interpolateZoom([(a-j.x)/j.k,(i-j.y)/j.k,r/j.k],[(a-t.x)/t.k,(i-t.y)/t.k,r/t.k]);return function(e){var t=o(e),n=r/t[2];this.__chart__=j={x:a-t[0]*n,y:i-t[1]*n,k:n},O(s)}}).each("interrupt.zoom",function(){C(s)}).each("end.zoom",function(){C(s)}):(this.__chart__=j,S(s),O(s),C(s))})},g.translate=function(e){return arguments.length?(j={x:+e[0],y:+e[1],k:j.k},v(),g):[j.x,j.y]},g.scale=function(e){return arguments.length?(j={x:j.x,y:j.y,k:null},M(+e),v(),g):j.k},g.scaleExtent=function(e){return arguments.length?(c=null==e?De:[+e[0],+e[1]],g):c},g.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],g):n},g.size=function(e){return arguments.length?(u=e&&[+e[0],+e[1]],g):u},g.duration=function(e){return arguments.length?(d=+e,g):d},g.x=function(e){return arguments.length?(a=(i=e).copy(),j={x:0,y:0,k:1},g):i},g.y=function(e){return arguments.length?(o=(s=e).copy(),j={x:0,y:0,k:1},g):s},T.rebind(g,k,"on")};var Pe,Ie,De=[0,1/0];function Le(){}function Ve(e,t,n){return this instanceof Ve?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ve?new Ve(e.h,e.s,e.l):ut(""+e,ct,Ve):new Ve(e,t,n)}(T.color=Le).prototype.toString=function(){return this.rgb()+""};var Re=(T.hsl=Ve).prototype=new Le;function Ue(e,t,n){var r,a;function i(e){return Math.round(255*function(e){return 360<e?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new at(i(e+120),i(e),i(e-120))}function He(e,t,n){return this instanceof He?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.c,e.l):et(e instanceof Xe?e.l:(e=dt((e=T.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new He(e,t,n)}Re.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ve(this.h,this.s,this.l/e)},Re.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ve(this.h,this.s,e*this.l)},Re.rgb=function(){return Ue(this.h,this.s,this.l)};var Ye=(T.hcl=He).prototype=new Le;function Ge(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Xe(n,Math.cos(e*=Ee)*t,Math.sin(e)*t)}function Xe(e,t,n){return this instanceof Xe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Xe?new Xe(e.l,e.a,e.b):e instanceof He?Ge(e.h,e.c,e.l):dt((e=at(e)).r,e.g,e.b):new Xe(e,t,n)}Ye.brighter=function(e){return new He(this.h,this.c,Math.min(100,this.l+Ze*(arguments.length?e:1)))},Ye.darker=function(e){return new He(this.h,this.c,Math.max(0,this.l-Ze*(arguments.length?e:1)))},Ye.rgb=function(){return Ge(this.h,this.c,this.l).rgb()},T.lab=Xe;var Ze=18,Je=.95047,We=1,Qe=1.08883,Ke=Xe.prototype=new Le;function $e(e,t,n){var r=(e+16)/116,a=r+t/500,i=r-n/200;return new at(rt(3.2404542*(a=tt(a)*Je)-1.5371385*(r=tt(r)*We)-.4985314*(i=tt(i)*Qe)),rt(-.969266*a+1.8760108*r+.041556*i),rt(.0556434*a-.2040259*r+1.0572252*i))}function et(e,t,n){return 0<e?new He(Math.atan2(n,t)*Se,Math.sqrt(t*t+n*n),e):new He(NaN,NaN,e)}function tt(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function nt(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function at(e,t,n){return this instanceof at?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof at?new at(e.r,e.g,e.b):ut(""+e,at,Ue):new at(e,t,n)}function it(e){return new at(e>>16,e>>8&255,255&e)}function ot(e){return it(e)+""}Ke.brighter=function(e){return new Xe(Math.min(100,this.l+Ze*(arguments.length?e:1)),this.a,this.b)},Ke.darker=function(e){return new Xe(Math.max(0,this.l-Ze*(arguments.length?e:1)),this.a,this.b)},Ke.rgb=function(){return $e(this.l,this.a,this.b)};var st=(T.rgb=at).prototype=new Le;function lt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ut(e,t,n){var r,a,i,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(ht(a[0]),ht(a[1]),ht(a[2]))}return(i=pt.get(e))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&i)>>4,o|=o>>4,s=240&i,s|=s>>4,l=15&i,l|=l<<4):7===e.length&&(o=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),t(o,s,l))}function ct(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,l=(o+i)/2;return s?(a=l<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=0<l&&l<1?0:r),new Ve(r,a,l)}function dt(e,t,n){var r=nt((.4124564*(e=ft(e))+.3575761*(t=ft(t))+.1804375*(n=ft(n)))/Je),a=nt((.2126729*e+.7151522*t+.072175*n)/We);return Xe(116*a-16,500*(r-a),200*(a-nt((.0193339*e+.119192*t+.9503041*n)/Qe)))}function ft(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}st.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new at(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new at(30,30,30)},st.darker=function(e){return new at((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},st.hsl=function(){return ct(this.r,this.g,this.b)},st.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var pt=T.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function gt(e){return"function"==typeof e?e:function(){return e}}function vt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),mt(e,t,r,n)}}function mt(a,i,n,e){var o={},s=T.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function t(){var e,t=u.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(u)||200<=t&&t<300||304===t){try{e=n.call(o,u)}catch(e){return void s.error.call(o,e)}s.load.call(o,e)}else s.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(a)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=T.event;T.event=e;try{s.progress.call(o,u)}finally{T.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(i=null==e?null:e+"",o):i},o.responseType=function(e){return arguments.length?(c=e,o):c},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(d(arguments)))}}),o.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,a,!0),null==i||"accept"in l||(l.accept=i+",*/*"),u.setRequestHeader)for(var r in l)u.setRequestHeader(r,l[r]);return null!=i&&u.overrideMimeType&&u.overrideMimeType(i),null!=c&&(u.responseType=c),null!=n&&o.on("error",n).on("load",function(e){n(null,e)}),s.beforesend.call(o,u),u.send(null==t?null:t),o},o.abort=function(){return u.abort(),o},T.rebind(o,s,"on"),null==e?o:o.get(function(n){return 1===n.length?function(e,t){n(null==e?t:null)}:n}(e))}pt.forEach(function(e,t){pt.set(e,it(t))}),T.functor=gt,T.xhr=vt(B),T.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=mt(e,i,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(u).join(a)}function u(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var a;return o.parseRows(e,function(e,t){if(a)return a(e,t-1);var n=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");a=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(a,e){var t,i,o={},s={},n=[],l=a.length,u=0,r=0;function c(){if(l<=u)return s;if(i)return i=!1,o;var e=u;if(34===a.charCodeAt(e)){for(var t=e;t++<l;)if(34===a.charCodeAt(t)){if(34!==a.charCodeAt(t+1))break;++t}return u=t+2,13===(n=a.charCodeAt(t+1))?(i=!0,10===a.charCodeAt(t+2)&&++u):10===n&&(i=!0),a.slice(e+1,t).replace(/""/g,'"')}for(;u<l;){var n,r=1;if(10===(n=a.charCodeAt(u++)))i=!0;else if(13===n)i=!0,10===a.charCodeAt(u)&&(++u,++r);else if(n!==f)continue;return a.slice(e,u-r)}return a.slice(e)}for(;(t=c())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=c();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new M,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(u).join(a)].concat(e.map(function(t){return r.map(function(e){return u(t[e])}).join(a)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},T.csv=T.dsv(",","text/csv"),T.tsv=T.dsv("\t","text/tab-separated-values");var yt,xt,bt,jt,wt=this[E(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function _t(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var a={c:e,t:n+t,n:null};return xt?xt.n=a:yt=a,xt=a,bt||(jt=clearTimeout(jt),bt=1,wt(kt)),a}function kt(){var e=zt(),t=Mt()-e;24<t?(isFinite(t)&&(clearTimeout(jt),jt=setTimeout(kt,t)),bt=0):(bt=1,wt(kt))}function zt(){for(var e=Date.now(),t=yt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Mt(){for(var e,t=yt,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:yt=t.n;return xt=e,n}function At(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}T.timer=function(){_t.apply(this,arguments)},T.timer.flush=function(){zt(),Mt()},T.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Et=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*F(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});T.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=T.round(e,At(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Et[8+n/3]};var St=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ot=T.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=T.round(e,At(e,t))).toFixed(Math.max(0,Math.min(20,At(e*(1+1e-15),t))))}});function Ct(e){return e+""}var Nt=T.time={},Ft=Date;function Tt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Tt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qt.setUTCDate.apply(this._,arguments)},setDay:function(){qt.setUTCDay.apply(this._,arguments)},setFullYear:function(){qt.setUTCFullYear.apply(this._,arguments)},setHours:function(){qt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qt.setUTCSeconds.apply(this._,arguments)},setTime:function(){qt.setTime.apply(this._,arguments)}};var qt=Date.prototype;function Bt(r,i,o){function e(e){var t=r(e),n=a(t,1);return e-t<n-e?t:n}function s(e){return i(e=r(new Ft(e-1)),1),e}function a(e,t){return i(e=new Ft(+e),t),e}function l(e,t,n){var r=s(e),a=[];if(1<n)for(;r<t;)o(r)%n||a.push(new Date(+r)),i(r,1);else for(;r<t;)a.push(new Date(+r)),i(r,1);return a}(r.floor=r).round=e,r.ceil=s,r.offset=a,r.range=l;var t=r.utc=Pt(r);return(t.floor=t).round=Pt(e),t.ceil=Pt(s),t.offset=Pt(a),t.range=function(e,t,n){try{var r=new(Ft=Tt);return r._=e,l(r,t,n)}finally{Ft=Date}},r}function Pt(r){return function(e,t){try{var n=new(Ft=Tt);return n._=e,r(n,t)._}finally{Ft=Date}}}Nt.year=Bt(function(e){return(e=Nt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Nt.years=Nt.year.range,Nt.years.utc=Nt.year.utc.range,Nt.day=Bt(function(e){var t=new Ft(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Nt.days=Nt.day.range,Nt.days.utc=Nt.day.utc.range,Nt.dayOfYear=function(e){var t=Nt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=Nt[e]=Bt(function(e){return(e=Nt.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=Nt.year(e).getDay();return Math.floor((Nt.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});Nt[e+"s"]=t.range,Nt[e+"s"].utc=t.utc.range,Nt[e+"OfYear"]=function(e){var t=Nt.year(e).getDay();return Math.floor((Nt.dayOfYear(e)+(t+n)%7)/7)}}),Nt.week=Nt.sunday,Nt.weeks=Nt.sunday.range,Nt.weeks.utc=Nt.sunday.utc.range,Nt.weekOfYear=Nt.sundayOfYear;var It={"-":"",_:" ",0:"0"},Dt=/^\s*\d+/,Lt=/^%/;function Vt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Rt(e){return new RegExp("^(?:"+e.map(T.requote).join("|")+")","i")}function Ut(e){for(var t=new y,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ht(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Yt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Gt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.y=function(e){return e+(68<e?1900:2e3)}(+r[0]),n+r[0].length):-1}function Jt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Wt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Kt(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function $t(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function en(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function tn(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function nn(e,t,n){Dt.lastIndex=0;var r=Dt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rn(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",r=F(t)/60|0,a=F(t)%60;return n+Vt(r,"0",2)+Vt(a,"0",2)}function an(e,t,n){Lt.lastIndex=0;var r=Lt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function on(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}T.locale=function(e){return{numberFormat:function(e){var k=e.decimal,s=e.thousands,l=e.grouping,r=e.currency,z=l&&s?function(e,t){for(var n=e.length,r=[],a=0,i=l[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Math.max(1,t-o)),r.push(e.substring(n-=i,n+i)),!((o+=i+1)>t));)i=l[a=(a+1)%l.length];return r.reverse().join(s)}:B;return function(e){var t=St.exec(e),c=t[1]||" ",d=t[2]||">",f=t[3]||"-",n=t[4]||"",h=t[5],p=+t[6],g=t[7],v=t[8],m=t[9],y=1,x="",b="",j=!1,w=!0;switch(v=v&&+v.substring(1),(h||"0"===c&&"="===d)&&(h=c="0",d="="),m){case"n":g=!0,m="g";break;case"%":y=100,b="%",m="f";break;case"p":y=100,b="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(x="0"+m.toLowerCase());case"c":w=!1;case"d":j=!0,v=0;break;case"s":y=-1,m="r"}"$"===n&&(x=r[0],b=r[1]),"r"!=m||v||(m="g"),null!=v&&("g"==m?v=Math.max(1,Math.min(21,v)):"e"!=m&&"f"!=m||(v=Math.max(0,Math.min(20,v)))),m=Ot.get(m)||Ct;var _=h&&g;return function(e){var t=b;if(j&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===f?"":f;if(y<0){var r=T.formatPrefix(e,v);e=r.scale(e),t=r.symbol+b}else e*=y;var a,i,o=(e=m(e,v)).lastIndexOf(".");if(o<0){var s=w?e.lastIndexOf("e"):-1;i=s<0?(a=e,""):(a=e.substring(0,s),e.substring(s))}else a=e.substring(0,o),i=k+e.substring(o+1);!h&&g&&(a=z(a,1/0));var l=x.length+a.length+i.length+(_?0:n.length),u=l<p?new Array(l=p-l+1).join(c):"";return _&&(a=z(u+a,u.length?p-i.length:1/0)),n+=x,e=a+i,("<"===d?n+e+u:">"===d?u+n+e:"^"===d?u.substring(0,l>>=1)+n+e+u.substring(l):n+(_?e:u+e))+t}}}(e),timeFormat:function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function u(s){var l=s.length;function e(e){for(var t,n,r,a=[],i=-1,o=0;++i<l;)37===s.charCodeAt(i)&&(a.push(s.slice(o,i)),null!=(n=It[t=s.charAt(++i)])&&(t=s.charAt(++i)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),a.push(t),o=i+1);return a.push(s.slice(o,i)),a.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Ft!==Tt,r=new(n?Tt:Ft);return"j"in t?r.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),r.setFullYear(t.y,0,1),r.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(r.getDay()+5)%7:t.w+7*t.U-(r.getDay()+6)%7)):r.setFullYear(t.y,t.m,t.d),r.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?r._:r},e.toString=function(){return s},e}function c(e,t,n,r){for(var a,i,o,s=0,l=t.length,u=n.length;s<l;){if(u<=r)return-1;if(37===(a=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=j[o in It?t.charAt(s++):o])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}u.multi=(u.utc=function(e){var n=u(e);function t(e){try{var t=new(Ft=Tt);return t._=e,n(t)}finally{Ft=Date}}return t.parse=function(e){try{Ft=Tt;var t=n.parse(e);return t&&t._}finally{Ft=Date}},t.toString=n.toString,t}).multi=on;var d=T.map(),f=Rt(i),h=Ut(i),p=Rt(o),g=Ut(o),v=Rt(s),m=Ut(s),y=Rt(l),x=Ut(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:u(t),d:function(e,t){return Vt(e.getDate(),t,2)},e:function(e,t){return Vt(e.getDate(),t,2)},H:function(e,t){return Vt(e.getHours(),t,2)},I:function(e,t){return Vt(e.getHours()%12||12,t,2)},j:function(e,t){return Vt(1+Nt.dayOfYear(e),t,3)},L:function(e,t){return Vt(e.getMilliseconds(),t,3)},m:function(e,t){return Vt(e.getMonth()+1,t,2)},M:function(e,t){return Vt(e.getMinutes(),t,2)},p:function(e){return a[+(12<=e.getHours())]},S:function(e,t){return Vt(e.getSeconds(),t,2)},U:function(e,t){return Vt(Nt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Vt(Nt.mondayOfYear(e),t,2)},x:u(n),X:u(r),y:function(e,t){return Vt(e.getFullYear()%100,t,2)},Y:function(e,t){return Vt(e.getFullYear()%1e4,t,4)},Z:rn,"%":function(){return"%"}},j={a:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){f.lastIndex=0;var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return c(e,b.c.toString(),t,n)},d:Qt,e:Qt,H:$t,I:$t,j:Kt,L:nn,m:Wt,M:en,p:function(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:tn,U:Yt,w:Ht,W:Gt,x:function(e,t,n){return c(e,b.x.toString(),t,n)},X:function(e,t,n){return c(e,b.X.toString(),t,n)},y:Zt,Y:Xt,Z:Jt,"%":an};return u}(e)}};var sn=T.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}T.format=sn.numberFormat,T.geo={},ln.prototype={s:0,t:0,add:function(e){cn(e,this.t,un),cn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new ln;function cn(e,t,n){var r=n.s=e+t,a=r-e,i=r-a;n.t=e-i+(t-a)}function dn(e,t){e&&hn.hasOwnProperty(e.type)&&hn[e.type](e,t)}T.geo.stream=function(e,t){e&&fn.hasOwnProperty(e.type)?fn[e.type](e,t):dn(e,t)};var fn={Feature:function(e,t){dn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)dn(n[r].geometry,t)}},hn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){pn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)pn(n[r],t,0)},Polygon:function(e,t){gn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)gn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)dn(n[r],t)}};function pn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function gn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)pn(e[n],t,1);t.polygonEnd()}T.geo.area=function(e){return vn=0,T.geo.stream(e,Vn),vn};var vn,mn,yn,xn,bn,jn,wn,_n,kn,zn,Mn,An,En,Sn,On,Cn,Nn,Fn,Tn,qn,Bn,Pn,In,Dn,Ln=new ln,Vn={sphere:function(){vn+=4*ke},point:O,lineStart:O,lineEnd:O,polygonStart:function(){Ln.reset(),Vn.lineStart=Rn},polygonEnd:function(){var e=2*Ln;vn+=e<0?4*ke+e:e,Vn.lineStart=Vn.lineEnd=Vn.point=O}};function Rn(){var n,r,c,d,f;function a(e,t){t=t*Ee/2+ke/4;var n=(e*=Ee)-c,r=0<=n?1:-1,a=r*n,i=Math.cos(t),o=Math.sin(t),s=f*o,l=d*i+s*Math.cos(a),u=s*r*Math.sin(a);Ln.add(Math.atan2(u,l)),c=e,d=i,f=o}Vn.point=function(e,t){Vn.point=a,c=(n=e)*Ee,d=Math.cos(t=(r=t)*Ee/2+ke/4),f=Math.sin(t)},Vn.lineEnd=function(){a(n,r)}}function Un(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Yn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Gn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Xn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Zn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Jn(e){return[Math.atan2(e[1],e[0]),Fe(e[2])]}function Wn(e,t){return F(e[0]-t[0])<we&&F(e[1]-t[1])<we}function Qn(e,t){Mn.push(An=[mn=e,xn=e]),t<yn&&(yn=t),bn<t&&(bn=t)}function Kn(e,t){var n=Un([e*Ee,t*Ee]);if(kn){var r=Yn(kn,n),a=Yn([r[1],-r[0],0],r);Zn(a),a=Jn(a);var i=e-jn,o=0<i?1:-1,s=a[0]*Se*o,l=180<F(i);if(l^(o*jn<s&&s<o*e)){var u=a[1]*Se;bn<u&&(bn=u)}else if(l^(o*jn<(s=(s+360)%360-180)&&s<o*e)){(u=-a[1]*Se)<yn&&(yn=u)}else t<yn&&(yn=t),bn<t&&(bn=t);l?e<jn?ar(mn,e)>ar(mn,xn)&&(xn=e):ar(e,xn)>ar(mn,xn)&&(mn=e):mn<=xn?(e<mn&&(mn=e),xn<e&&(xn=e)):jn<e?ar(mn,e)>ar(mn,xn)&&(xn=e):ar(e,xn)>ar(mn,xn)&&(mn=e)}else Qn(e,t);kn=n,jn=e}function $n(){En.point=Kn}function er(){An[0]=mn,An[1]=xn,En.point=Qn,kn=null}function tr(e,t){if(kn){var n=e-jn;zn+=180<F(n)?n+(0<n?360:-360):n}else wn=e,_n=t;Vn.point(e,t),Kn(e,t)}function nr(){Vn.lineStart()}function rr(){tr(wn,_n),Vn.lineEnd(),F(zn)>we&&(mn=-(xn=180)),An[0]=mn,An[1]=xn,kn=null}function ar(e,t){return(t-=e)<0?t+360:t}function ir(e,t){return e[0]-t[0]}function or(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}T.geo.bounds=(En={point:Qn,lineStart:$n,lineEnd:er,polygonStart:function(){En.point=tr,En.lineStart=nr,En.lineEnd=rr,zn=0,Vn.polygonStart()},polygonEnd:function(){Vn.polygonEnd(),En.point=Qn,En.lineStart=$n,En.lineEnd=er,Ln<0?(mn=-(xn=180),yn=-(bn=90)):we<zn?bn=90:zn<-we&&(yn=-90),An[0]=mn,An[1]=xn}},function(e){if(bn=xn=-(mn=yn=1/0),Mn=[],T.geo.stream(e,En),a=Mn.length){Mn.sort(ir);for(var t=1,n=[s=Mn[0]];t<a;++t)or((i=Mn[t])[0],s)||or(i[1],s)?(ar(s[0],i[1])>ar(s[0],s[1])&&(s[1]=i[1]),ar(i[0],s[1])>ar(s[0],s[1])&&(s[0]=i[0])):n.push(s=i);for(var r,a,i,o=-1/0,s=(t=0,n[a=n.length-1]);t<=a;s=i,++t)i=n[t],(r=ar(s[1],i[0]))>o&&(o=r,mn=i[0],xn=s[1])}return Mn=An=null,mn===1/0||yn===1/0?[[NaN,NaN],[NaN,NaN]]:[[mn,yn],[xn,bn]]}),T.geo.centroid=function(e){Sn=On=Cn=Nn=Fn=Tn=qn=Bn=Pn=In=Dn=0,T.geo.stream(e,sr);var t=Pn,n=In,r=Dn,a=t*t+n*n+r*r;return a<_e&&(t=Tn,n=qn,r=Bn,On<we&&(t=Cn,n=Nn,r=Fn),(a=t*t+n*n+r*r)<_e)?[NaN,NaN]:[Math.atan2(n,t)*Se,Fe(r/Math.sqrt(a))*Se]};var sr={sphere:O,point:lr,lineStart:cr,lineEnd:dr,polygonStart:function(){sr.lineStart=fr},polygonEnd:function(){sr.lineStart=cr}};function lr(e,t){e*=Ee;var n=Math.cos(t*=Ee);ur(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ur(e,t,n){Cn+=(e-Cn)/++Sn,Nn+=(t-Nn)/Sn,Fn+=(n-Fn)/Sn}function cr(){var s,l,u;function r(e,t){e*=Ee;var n=Math.cos(t*=Ee),r=n*Math.cos(e),a=n*Math.sin(e),i=Math.sin(t),o=Math.atan2(Math.sqrt((o=l*i-u*a)*o+(o=u*r-s*i)*o+(o=s*a-l*r)*o),s*r+l*a+u*i);On+=o,Tn+=o*(s+(s=r)),qn+=o*(l+(l=a)),Bn+=o*(u+(u=i)),ur(s,l,u)}sr.point=function(e,t){e*=Ee;var n=Math.cos(t*=Ee);s=n*Math.cos(e),l=n*Math.sin(e),u=Math.sin(t),sr.point=r,ur(s,l,u)}}function dr(){sr.point=lr}function fr(){var r,a,h,p,g;function i(e,t){e*=Ee;var n=Math.cos(t*=Ee),r=n*Math.cos(e),a=n*Math.sin(e),i=Math.sin(t),o=p*i-g*a,s=g*r-h*i,l=h*a-p*r,u=Math.sqrt(o*o+s*s+l*l),c=h*r+p*a+g*i,d=u&&-Ne(c)/u,f=Math.atan2(u,c);Pn+=d*o,In+=d*s,Dn+=d*l,On+=f,Tn+=f*(h+(h=r)),qn+=f*(p+(p=a)),Bn+=f*(g+(g=i)),ur(h,p,g)}sr.point=function(e,t){r=e,a=t,sr.point=i,e*=Ee;var n=Math.cos(t*=Ee);h=n*Math.cos(e),p=n*Math.sin(e),g=Math.sin(t),ur(h,p,g)},sr.lineEnd=function(){i(r,a),sr.lineEnd=dr,sr.point=lr}}function hr(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function pr(){return!0}function gr(e,t,n,r,s){var l=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Wn(n,r)){s.lineStart();for(var a=0;a<t;++a)s.point((n=e[a])[0],n[1]);s.lineEnd()}else{var i=new mr(n,e,null,!0),o=new mr(n,null,i,!1);i.o=o,l.push(i),u.push(o),o=new mr(r,null,i=new mr(r,e,null,!1),!0),i.o=o,l.push(i),u.push(o)}}}),u.sort(t),vr(l),vr(u),l.length){for(var a=0,i=n,o=u.length;a<o;++a)u[a].e=i=!i;for(var c,d,f=l[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,o=c.length;a<o;++a)s.point((d=c[a])[0],d[1]);else r(h.x,h.n.x,1,s);h=h.n}else{if(p)for(a=(c=h.p.z).length-1;0<=a;--a)s.point((d=c[a])[0],d[1]);else r(h.x,h.p.x,-1,s);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);s.lineEnd()}}}function vr(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function mr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function yr(y,x,b,j){return function(r,o){var s,a=x(o),t=r.invert(j[0],j[1]),n={point:i,lineStart:l,lineEnd:u,polygonStart:function(){n.point=g,n.lineStart=v,n.lineEnd=m,s=[],c=[]},polygonEnd:function(){n.point=i,n.lineStart=l,n.lineEnd=u,s=T.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;Ln.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(c)for(var d=u[0],f=d[0],h=d[1]/2+ke/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0);var m=(e=u[v])[0],y=e[1]/2+ke/4,x=Math.sin(y),b=Math.cos(y),j=m-f,w=0<=j?1:-1,_=w*j,k=ke<_,z=p*x;if(Ln.add(Math.atan2(z*w*Math.sin(_),g*b+z*Math.cos(_))),i+=k?j+w*ze:j,k^n<=f^n<=m){var M=Yn(Un(d),Un(e));Zn(M);var A=Yn(a,M);Zn(A);var E=(k^0<=j?-1:1)*Fe(A[2]);(E<r||r===E&&(M[0]||M[1]))&&(o+=k^0<=j?1:-1)}if(!v++)break;f=m,p=x,g=b,d=e}}return(i<-we||i<we&&Ln<-we)^1&o}(t,c);s.length?(p||(o.polygonStart(),p=!0),gr(s,jr,e,b,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=c=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function i(e,t){var n=r(e,t);y(e=n[0],t=n[1])&&o.point(e,t)}function e(e,t){var n=r(e,t);a.point(n[0],n[1])}function l(){n.point=e,a.lineStart()}function u(){n.point=i,a.lineEnd()}var c,d,f=br(),h=x(f),p=!1;function g(e,t){d.push([e,t]);var n=r(e,t);h.point(n[0],n[1])}function v(){h.lineStart(),d=[]}function m(){g(d[0][0],d[0][1]),h.lineEnd();var e,t=h.clean(),n=f.buffer(),r=n.length;if(d.pop(),c.push(d),d=null,r)if(1&t){var a,i=-1;if(0<(r=(e=n[0]).length-1)){for(p||(o.polygonStart(),p=!0),o.lineStart();++i<r;)o.point((a=e[i])[0],a[1]);o.lineEnd()}}else 1<r&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(xr))}return n}}function xr(e){return 1<e.length}function br(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:O,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function jr(e,t){return((e=e.x)[0]<0?e[1]-Ae-we:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-we:Ae-t[1])}var wr=yr(pr,function(a){var i,o=NaN,s=NaN,l=NaN;return{lineStart:function(){a.lineStart(),i=1},point:function(e,t){var n=0<e?ke:-ke,r=F(e-o);F(r-ke)<we?(a.point(o,s=0<(s+t)/2?Ae:-Ae),a.point(l,s),a.lineEnd(),a.lineStart(),a.point(n,s),a.point(e,s),i=0):l!==n&&ke<=r&&(F(o-l)<we&&(o-=l*we),F(e-n)<we&&(e-=n*we),s=function(e,t,n,r){var a,i,o=Math.sin(e-n);return F(o)>we?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+r)/2}(o,s,e,t),a.point(l,s),a.lineEnd(),a.lineStart(),a.point(n,s),i=0),a.point(o=e,s=t),l=n},lineEnd:function(){a.lineEnd(),o=s=NaN},clean:function(){return 2-i}}},function(e,t,n,r){var a;if(null==e)a=n*Ae,r.point(-ke,a),r.point(0,a),r.point(ke,a),r.point(ke,0),r.point(ke,-a),r.point(0,-a),r.point(-ke,-a),r.point(-ke,0),r.point(-ke,a);else if(F(e[0]-t[0])>we){var i=e[0]<t[0]?ke:-ke;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])},[-ke,-ke/2]);function _r(c,d,f,h){return function(e){var t,n=e.a,r=e.b,a=n.x,i=n.y,o=0,s=1,l=r.x-a,u=r.y-i;if(t=c-a,l||!(0<t)){if(t/=l,l<0){if(t<o)return;t<s&&(s=t)}else if(0<l){if(s<t)return;o<t&&(o=t)}if(t=f-a,l||!(t<0)){if(t/=l,l<0){if(s<t)return;o<t&&(o=t)}else if(0<l){if(t<o)return;t<s&&(s=t)}if(t=d-i,u||!(0<t)){if(t/=u,u<0){if(t<o)return;t<s&&(s=t)}else if(0<u){if(s<t)return;o<t&&(o=t)}if(t=h-i,u||!(t<0)){if(t/=u,u<0){if(s<t)return;o<t&&(o=t)}else if(0<u){if(t<o)return;t<s&&(s=t)}return 0<o&&(e.a={x:a+o*l,y:i+o*u}),s<1&&(e.b={x:a+s*l,y:i+s*u}),e}}}}}}var kr=1e9;function zr(b,j,w,_){return function(a){var r,c,i,o,s,l,u,d,f,h,p,g=a,e=br(),v=_r(b,j,w,_),t={point:n,lineStart:function(){t.point=x,c&&c.push(i=[]);h=!0,f=!1,u=d=NaN},lineEnd:function(){r&&(x(o,s),l&&f&&e.rejoin(),r.push(e.buffer()));t.point=n,f&&a.lineEnd()},polygonStart:function(){a=e,r=[],c=[],p=!0},polygonEnd:function(){a=g,r=T.merge(r);var e=function(e){for(var t=0,n=c.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=c[a],l=s.length,u=s[0];o<l;++o)i=s[o],u[1]<=r?i[1]>r&&0<Ce(u,i,e)&&++t:i[1]<=r&&Ce(u,i,e)<0&&--t,u=i;return 0!==t}([b,_]),t=p&&e,n=r.length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),m(null,null,1,a),a.lineEnd()),n&&gr(r,z,e,m,a),a.polygonEnd()),r=c=i=null}};function m(e,t,n,r){var a=0,i=0;if(null==e||(a=k(e,n))!==(i=k(t,n))||M(e,t)<0^0<n)for(;r.point(0===a||3===a?b:w,1<a?_:j),(a=(a+n+4)%4)!==i;);else r.point(t[0],t[1])}function y(e,t){return b<=e&&e<=w&&j<=t&&t<=_}function n(e,t){y(e,t)&&a.point(e,t)}function x(e,t){var n=y(e=Math.max(-kr,Math.min(kr,e)),t=Math.max(-kr,Math.min(kr,t)));if(c&&i.push([e,t]),h)o=e,s=t,h=!1,(l=n)&&(a.lineStart(),a.point(e,t));else if(n&&f)a.point(e,t);else{var r={a:{x:u,y:d},b:{x:e,y:t}};v(r)?(f||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),p=!1):n&&(a.lineStart(),a.point(e,t),p=!1)}u=e,d=t,f=n}return t};function k(e,t){return F(e[0]-b)<we?0<t?0:3:F(e[0]-w)<we?0<t?2:1:F(e[1]-j)<we?0<t?1:0:0<t?3:2}function z(e,t){return M(e.x,t.x)}function M(e,t){var n=k(e,1),r=k(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function Mr(e){var t=0,n=ke/3,r=Wr(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*ke/180,n=e[1]*ke/180):[t/ke*180,n/ke*180]},a}function Ar(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),i=Math.sqrt(a)/r;function o(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),i-n*Math.cos(e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,Fe((a-(e*e+n*n)*r*r)/(2*r))]},o}T.geo.clipExtent=function(){var t,n,r,a,i,o,s={stream:function(e){return i&&(i.valid=!1),(i=o(e)).valid=!0,i},extent:function(e){return arguments.length?(o=zr(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),i&&(i.valid=!1,i=null),s):[[t,n],[r,a]]}};return s.extent([[0,0],[960,500]])},(T.geo.conicEqualArea=function(){return Mr(Ar)}).raw=Ar,T.geo.albers=function(){return T.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},T.geo.albersUsa=function(){var r,a,i,o,s=T.geo.albers(),l=T.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=T.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){r=[e,t]}};function d(e){var t=e[0],n=e[1];return r=null,a(t,n),r||(i(t,n),r)||o(t,n),r}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(.12<=a&&a<.234&&-.425<=r&&r<-.214?l:.166<=a&&a<.234&&-.214<=r&&r<-.115?u:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),a=u.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),a.point(e,t)},sphere:function(){n.sphere(),r.sphere(),a.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),a.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),a.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),a.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),a.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return a=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(c).point,i=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+we,r+.12*t+we],[n-.214*t-we,r+.234*t-we]]).stream(c).point,o=u.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+we,r+.166*t+we],[n-.115*t-we,r+.234*t-we]]).stream(c).point,d},d.scale(1070)};var Er,Sr,Or,Cr,Nr,Fr,Tr={point:O,lineStart:O,lineEnd:O,polygonStart:function(){Sr=0,Tr.lineStart=qr},polygonEnd:function(){Tr.lineStart=Tr.lineEnd=Tr.point=O,Er+=F(Sr/2)}};function qr(){var n,r,a,i;function o(e,t){Sr+=i*e-a*t,a=e,i=t}Tr.point=function(e,t){Tr.point=o,n=a=e,r=i=t},Tr.lineEnd=function(){o(n,r)}}var Br={point:function(e,t){e<Or&&(Or=e);Nr<e&&(Nr=e);t<Cr&&(Cr=t);Fr<t&&(Fr=t)},lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O};function Pr(){var n=Ir(4.5),r=[],a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return n=Ir(e),a},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),a.point=i}function i(e,t){r.push("L",e,",",t)}function o(){a.point=e}function s(){r.push("Z")}return a}function Ir(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Dr,Lr={point:Vr,lineStart:Rr,lineEnd:Ur,polygonStart:function(){Lr.lineStart=Hr},polygonEnd:function(){Lr.point=Vr,Lr.lineStart=Rr,Lr.lineEnd=Ur}};function Vr(e,t){Cn+=e,Nn+=t,++Fn}function Rr(){var i,o;function n(e,t){var n=e-i,r=t-o,a=Math.sqrt(n*n+r*r);Tn+=a*(i+e)/2,qn+=a*(o+t)/2,Bn+=a,Vr(i=e,o=t)}Lr.point=function(e,t){Lr.point=n,Vr(i=e,o=t)}}function Ur(){Lr.point=Vr}function Hr(){var n,r,i,o;function a(e,t){var n=e-i,r=t-o,a=Math.sqrt(n*n+r*r);Tn+=a*(i+e)/2,qn+=a*(o+t)/2,Bn+=a,Pn+=(a=o*e-i*t)*(i+e),In+=a*(o+t),Dn+=3*a,Vr(i=e,o=t)}Lr.point=function(e,t){Lr.point=a,Vr(n=i=e,r=o=t)},Lr.lineEnd=function(){a(n,r)}}function Yr(n){var r=4.5,a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(e){return r=e,a},result:O};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,ze)}function t(e,t){n.moveTo(e,t),a.point=i}function i(e,t){n.lineTo(e,t)}function o(){a.point=e}function s(){n.closePath()}return a}function Gr(S){var O=.5,C=Math.cos(30*Ee),j=16;function t(e){return(j?function(a){var n,r,i,o,s,l,u,c,d,f,h,p,g={point:e,lineStart:t,lineEnd:m,polygonStart:function(){a.polygonStart(),g.lineStart=y},polygonEnd:function(){a.polygonEnd(),g.lineStart=t}};function e(e,t){e=S(e,t),a.point(e[0],e[1])}function t(){c=NaN,g.point=v,a.lineStart()}function v(e,t){var n=Un([e,t]),r=S(e,t);N(c,d,u,f,h,p,c=r[0],d=r[1],u=e,f=n[0],h=n[1],p=n[2],j,a),a.point(c,d)}function m(){g.point=e,a.lineEnd()}function y(){t(),g.point=x,g.lineEnd=b}function x(e,t){v(n=e,t),r=c,i=d,o=f,s=h,l=p,g.point=v}function b(){N(c,d,u,f,h,p,r,i,n,o,s,l,j,a),(g.lineEnd=m)()}return g}:function(n){return Zr(n,function(e,t){e=S(e,t),n.point(e[0],e[1])})})(e)}function N(e,t,n,r,a,i,o,s,l,u,c,d,f,h){var p=o-e,g=s-t,v=p*p+g*g;if(4*O<v&&f--){var m=r+u,y=a+c,x=i+d,b=Math.sqrt(m*m+y*y+x*x),j=Math.asin(x/=b),w=F(F(x)-1)<we||F(n-l)<we?(n+l)/2:Math.atan2(y,m),_=S(w,j),k=_[0],z=_[1],M=k-e,A=z-t,E=g*M-p*A;(O<E*E/v||.3<F((p*M+g*A)/v-.5)||r*u+a*c+i*d<C)&&(N(e,t,n,r,a,i,k,z,w,m/=b,y/=b,x,f,h),h.point(k,z),N(k,z,w,m,y,x,o,s,l,u,c,d,f,h))}}return t.precision=function(e){return arguments.length?(j=0<(O=e*e)&&16,t):Math.sqrt(O)},t}function Xr(e){this.stream=e}function Zr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Jr(e){return Wr(function(){return e})()}function Wr(e){var n,t,r,a,i,o,s=Gr(function(e,t){return[(e=n(e,t))[0]*l+a,i-e[1]*l]}),l=150,u=480,c=250,d=0,f=0,h=0,p=0,g=0,v=wr,m=B,y=null,x=null;function b(e){return[(e=r(e[0]*Ee,e[1]*Ee))[0]*l+a,i-e[1]*l]}function j(e){return(e=r.invert((e[0]-a)/l,(i-e[1])/l))&&[e[0]*Se,e[1]*Se]}function w(){r=hr(t=ea(h,p,g),n);var e=n(d,f);return a=u-e[0]*l,i=c+e[1]*l,_()}function _(){return o&&(o.valid=!1,o=null),b}return b.stream=function(e){return o&&(o.valid=!1),(o=Qr(v(t,s(m(e))))).valid=!0,o},b.clipAngle=function(e){return arguments.length?(v=null==e?(y=e,wr):function(a){var M=Math.cos(a),h=0<M,p=F(M)>we;return yr(g,function(s){var l,u,c,d,f;return{lineStart:function(){d=c=!1,f=1},point:function(e,t){var n,r=[e,t],a=g(e,t),i=h?a?0:m(e,t):a?m(e+(e<0?ke:-ke),t):0;if(!l&&(d=c=a)&&s.lineStart(),a!==c&&(n=v(l,r),(Wn(l,n)||Wn(r,n))&&(r[0]+=we,r[1]+=we,a=g(r[0],r[1]))),a!==c)f=0,a?(s.lineStart(),n=v(r,l),s.point(n[0],n[1])):(n=v(l,r),s.point(n[0],n[1]),s.lineEnd()),l=n;else if(p&&l&&h^a){var o;i&u||!(o=v(r,l,!0))||(f=0,h?(s.lineStart(),s.point(o[0][0],o[0][1]),s.point(o[1][0],o[1][1]),s.lineEnd()):(s.point(o[1][0],o[1][1]),s.lineEnd(),s.lineStart(),s.point(o[0][0],o[0][1])))}!a||l&&Wn(l,r)||s.point(r[0],r[1]),l=r,c=a,u=i},lineEnd:function(){c&&s.lineEnd(),l=null},clean:function(){return f|(d&&c)<<1}}},aa(a,6*Ee),h?[0,-a]:[-ke,a-ke]);function g(e,t){return Math.cos(e)*Math.cos(t)>M}function v(e,t,n){var r=[1,0,0],a=Yn(Un(e),Un(t)),i=Hn(a,a),o=a[0],s=i-o*o;if(!s)return!n&&e;var l=M*i/s,u=-M*o/s,c=Yn(r,a),d=Xn(r,l);Gn(d,Xn(a,u));var f=c,h=Hn(d,f),p=Hn(f,f),g=h*h-p*(Hn(d,d)-1);if(!(g<0)){var v=Math.sqrt(g),m=Xn(f,(-h-v)/p);if(Gn(m,d),m=Jn(m),!n)return m;var y,x=e[0],b=t[0],j=e[1],w=t[1];b<x&&(y=x,x=b,b=y);var _=b-x,k=F(_-ke)<we;if(!k&&w<j&&(y=j,j=w,w=y),k||_<we?k?0<j+w^m[1]<(F(m[0]-x)<we?j:w):j<=m[1]&&m[1]<=w:ke<_^(x<=m[0]&&m[0]<=b)){var z=Xn(f,(-h+v)/p);return Gn(z,d),[m,Jn(z)]}}}function m(e,t){var n=h?a:ke-a,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}((y=+e)*Ee),_()):y},b.clipExtent=function(e){return arguments.length?(m=(x=e)?zr(e[0][0],e[0][1],e[1][0],e[1][1]):B,_()):x},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(u=+e[0],c=+e[1],w()):[u,c]},b.center=function(e){return arguments.length?(d=e[0]%360*Ee,f=e[1]%360*Ee,w()):[d*Se,f*Se]},b.rotate=function(e){return arguments.length?(h=e[0]%360*Ee,p=e[1]%360*Ee,g=2<e.length?e[2]%360*Ee:0,w()):[h*Se,p*Se,g*Se]},T.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&j,w()}}function Qr(n){return Zr(n,function(e,t){n.point(e*Ee,t*Ee)})}function Kr(e,t){return[e,t]}function $r(e,t){return[ke<e?e-ze:e<-ke?e+ze:e,t]}function ea(e,t,n){return e?t||n?hr(na(e),ra(t,n)):na(e):t||n?ra(t,n):$r}function ta(n){return function(e,t){return[ke<(e+=n)?e-ze:e<-ke?e+ze:e,t]}}function na(e){var t=ta(e);return t.invert=ta(-e),t}function ra(e,t){var s=Math.cos(e),l=Math.sin(e),u=Math.cos(t),c=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,a=Math.sin(e)*n,i=Math.sin(t),o=i*s+r*l;return[Math.atan2(a*u-o*c,r*s-i*l),Fe(o*u+a*c)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,a=Math.sin(e)*n,i=Math.sin(t),o=i*u-a*c;return[Math.atan2(a*u+i*c,r*s+o*l),Fe(o*s-r*l)]},n}function aa(s,l){var u=Math.cos(s),c=Math.sin(s);return function(e,t,n,r){var a=n*l;null!=e?(e=ia(u,e),t=ia(u,t),(0<n?e<t:t<e)&&(e+=n*ze)):(e=s+n*ze,t=s-.5*a);for(var i,o=e;0<n?t<o:o<t;o-=a)r.point((i=Jn([u,-c*Math.cos(o),-c*Math.sin(o)]))[0],i[1])}}function ia(e,t){var n=Un(t);n[0]-=e,Zn(n);var r=Ne(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-we)%(2*Math.PI)}function oa(e,t,n){var r=T.range(e,t-we,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function sa(e,t,n){var r=T.range(e,t-we,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function la(e){return e.source}function ua(e){return e.target}T.geo.path=function(){var t,n,r,a,i,o=4.5;function s(e){return e&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=r(a)),T.geo.stream(e,i)),a.result()}function l(){return i=null,s}return s.area=function(e){return Er=0,T.geo.stream(e,r(Tr)),Er},s.centroid=function(e){return Cn=Nn=Fn=Tn=qn=Bn=Pn=In=Dn=0,T.geo.stream(e,r(Lr)),Dn?[Pn/Dn,In/Dn]:Bn?[Tn/Bn,qn/Bn]:Fn?[Cn/Fn,Nn/Fn]:[NaN,NaN]},s.bounds=function(e){return Nr=Fr=-(Or=Cr=1/0),T.geo.stream(e,r(Br)),[[Or,Cr],[Nr,Fr]]},s.projection=function(e){return arguments.length?(r=(t=e)?e.stream||function(n){var t=Gr(function(e,t){return n([e*Se,t*Se])});return function(e){return Qr(t(e))}}(e):B,l()):t},s.context=function(e){return arguments.length?(a=null==(n=e)?new Pr:new Yr(e),"function"!=typeof o&&a.pointRadius(o),l()):n},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(a.pointRadius(+e),+e),s):o},s.projection(T.geo.albersUsa()).context(null)},T.geo.transform=function(r){return{stream:function(e){var t=new Xr(e);for(var n in r)t[n]=r[n];return t}}},Xr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},T.geo.projection=Jr,T.geo.projectionMutator=Wr,(T.geo.equirectangular=function(){return Jr(Kr)}).raw=Kr.invert=Kr,T.geo.rotation=function(t){function e(e){return(e=t(e[0]*Ee,e[1]*Ee))[0]*=Se,e[1]*=Se,e}return t=ea(t[0]%360*Ee,t[1]*Ee,2<t.length?t[2]*Ee:0),e.invert=function(e){return(e=t.invert(e[0]*Ee,e[1]*Ee))[0]*=Se,e[1]*=Se,e},e},$r.invert=Kr,T.geo.circle=function(){var t,a,i=[0,0],n=6;function r(){var e="function"==typeof i?i.apply(this,arguments):i,n=ea(-e[0]*Ee,-e[1]*Ee,0).invert,r=[];return a(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Se,e[1]*=Se}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(i=e,r):i},r.angle=function(e){return arguments.length?(a=aa((t=+e)*Ee,n*Ee),r):t},r.precision=function(e){return arguments.length?(a=aa(t*Ee,(n=+e)*Ee),r):n},r.angle(90)},T.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ee,a=e[1]*Ee,i=t[1]*Ee,o=Math.sin(r),s=Math.cos(r),l=Math.sin(a),u=Math.cos(a),c=Math.sin(i),d=Math.cos(i);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},T.geo.graticule=function(){var t,n,r,a,i,o,s,l,u,c,d,f,h=10,p=h,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return T.range(Math.ceil(a/g)*g,r,g).map(d).concat(T.range(Math.ceil(l/v)*v,s,v).map(f)).concat(T.range(Math.ceil(n/h)*h,t,h).filter(function(e){return F(e%g)>we}).map(u)).concat(T.range(Math.ceil(o/p)*p,i,p).filter(function(e){return F(e%v)>we}).map(c))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(s).slice(1),d(r).reverse().slice(1),f(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<a&&(e=a,a=r,r=e),s<l&&(e=l,l=s,s=e),y.precision(m)):[[a,l],[r,s]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],t<n&&(e=n,n=t,t=e),i<o&&(e=o,o=i,i=e),y.precision(m)):[[n,o],[t,i]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],y):[g,v]},y.minorStep=function(e){return arguments.length?(h=+e[0],p=+e[1],y):[h,p]},y.precision=function(e){return arguments.length?(m=+e,u=oa(o,i,90),c=sa(n,t,m),d=oa(l,s,90),f=sa(a,r,m),y):m},y.majorExtent([[-180,-90+we],[180,90-we]]).minorExtent([[-180,-80-we],[180,80+we]])},T.geo.greatArc=function(){var t,n,r=la,a=ua;function i(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||a.apply(this,arguments)]}}return i.distance=function(){return T.geo.distance(t||r.apply(this,arguments),n||a.apply(this,arguments))},i.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,i):r},i.target=function(e){return arguments.length?(n="function"==typeof(a=e)?null:e,i):a},i.precision=function(){return arguments.length?i:0},i},T.geo.interpolate=function(e,t){return function(e,t,n,r){var a=Math.cos(t),o=Math.sin(t),i=Math.cos(r),s=Math.sin(r),l=a*Math.cos(e),u=a*Math.sin(e),c=i*Math.cos(n),d=i*Math.sin(n),f=2*Math.asin(Math.sqrt(qe(r-t)+a*i*qe(n-e))),h=1/Math.sin(f),p=f?function(e){var t=Math.sin(e*=f)*h,n=Math.sin(f-e)*h,r=n*l+t*c,a=n*u+t*d,i=n*o+t*s;return[Math.atan2(a,r)*Se,Math.atan2(i,Math.sqrt(r*r+a*a))*Se]}:function(){return[e*Se,t*Se]};return p.distance=f,p}(e[0]*Ee,e[1]*Ee,t[0]*Ee,t[1]*Ee)},T.geo.length=function(e){return Dr=0,T.geo.stream(e,ca),Dr};var ca={sphere:O,point:O,lineStart:function(){var o,s,l;function n(e,t){var n=Math.sin(t*=Ee),r=Math.cos(t),a=F((e*=Ee)-o),i=Math.cos(a);Dr+=Math.atan2(Math.sqrt((a=r*Math.sin(a))*a+(a=l*n-s*r*i)*a),s*n+l*r*i),o=e,s=n,l=r}ca.point=function(e,t){o=e*Ee,s=Math.sin(t*=Ee),l=Math.cos(t),ca.point=n},ca.lineEnd=function(){ca.point=ca.lineEnd=O}},lineEnd:O,polygonStart:O,polygonEnd:O};function da(i,o){function e(e,t){var n=Math.cos(e),r=Math.cos(t),a=i(n*r);return[a*r*Math.sin(e),a*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=o(n),a=Math.sin(r),i=Math.cos(r);return[Math.atan2(e*a,n*i),Math.asin(n&&t*a/n)]},e}var fa=da(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(T.geo.azimuthalEqualArea=function(){return Jr(fa)}).raw=fa;var ha=da(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},B);function pa(e,t){function r(e){return Math.tan(ke/4+e/2)}var n=Math.cos(e),a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),i=n*Math.pow(r(e),a)/a;if(!a)return ma;function o(e,t){0<i?t<-Ae+we&&(t=-Ae+we):Ae-we<t&&(t=Ae-we);var n=i/Math.pow(r(t),a);return[n*Math.sin(a*e),i-n*Math.cos(a*e)]}return o.invert=function(e,t){var n=i-t,r=Oe(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/r,1/a))-Ae]},o}function ga(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(F(r)<we)return Kr;function i(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}return i.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-Oe(r)*Math.sqrt(e*e+n*n)]},i}(T.geo.azimuthalEquidistant=function(){return Jr(ha)}).raw=ha,(T.geo.conicConformal=function(){return Mr(pa)}).raw=pa,(T.geo.conicEquidistant=function(){return Mr(ga)}).raw=ga;var va=da(function(e){return 1/e},Math.atan);function ma(e,t){return[e,Math.log(Math.tan(ke/4+t/2))]}function ya(e){var a,i=Jr(e),o=i.scale,s=i.translate,l=i.clipExtent;return i.scale=function(){var e=o.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.translate=function(){var e=s.apply(i,arguments);return e===i?a?i.clipExtent(null):i:e},i.clipExtent=function(e){var t=l.apply(i,arguments);if(t===i){if(a=null==e){var n=ke*o(),r=s();l([[r[0]-n,r[1]-n],[r[0]+n,r[1]+n]])}}else a&&(t=null);return t},i.clipExtent(null)}(T.geo.gnomonic=function(){return Jr(va)}).raw=va,ma.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]},(T.geo.mercator=function(){return ya(ma)}).raw=ma;var xa=da(function(){return 1},Math.asin);(T.geo.orthographic=function(){return Jr(xa)}).raw=xa;var ba=da(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function ja(e,t){return[Math.log(Math.tan(ke/4+t/2)),-e]}function wa(e){return e[0]}function _a(e){return e[1]}function ka(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;1<r&&Ce(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function za(e,t){return e[0]-t[0]||e[1]-t[1]}(T.geo.stereographic=function(){return Jr(ba)}).raw=ba,ja.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]},(T.geo.transverseMercator=function(){var e=ya(ja),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ja,T.geom={},T.geom.hull=function(e){var f=wa,h=_a;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t,n=gt(f),r=gt(h),a=e.length,i=[],o=[];for(t=0;t<a;t++)i.push([+n.call(this,e[t],t),+r.call(this,e[t],t),t]);for(i.sort(za),t=0;t<a;t++)o.push([i[t][0],-i[t][1]]);var s=ka(i),l=ka(o),u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],d=[];for(t=s.length-1;0<=t;--t)d.push(e[i[s[t]][2]]);for(t=+u;t<l.length-c;++t)d.push(e[i[l[t]][2]]);return d}return t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(h=e,t):h},t},T.geom.polygon=function(e){return V(e,Ma),e};var Ma=T.geom.polygon.prototype=[];function Aa(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ea(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,l=e[1],u=n[1],c=t[1]-l,d=r[1]-u,f=(s*(l-u)-d*(a-i))/(d*o-s*c);return[a+f*o,l+f*c]}function Sa(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}Ma.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},Ma.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},Ma.clip=function(e){for(var t,n,r,a,i,o,s=Sa(e),l=-1,u=this.length-Sa(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,a=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)Aa(o=t[n],c,a)?(Aa(i,c,a)||e.push(Ea(i,o,c,a)),e.push(o)):Aa(i,c,a)&&e.push(Ea(i,o,c,a)),i=o;s&&e.push(e[0]),c=a}return e};var Oa,Ca,Na,Fa,Ta,qa=[],Ba=[];function Pa(){ni(this),this.edge=this.site=this.circle=null}function Ia(e){var t=qa.pop()||new Pa;return t.site=e,t}function Da(e){Za(e),Na.remove(e),qa.push(e),ni(e)}function La(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];Da(e);for(var l=i;l.circle&&F(n-l.circle.x)<we&&F(r-l.circle.cy)<we;)i=l.P,s.unshift(l),Da(l),l=i;s.unshift(l),Za(l);for(var u=o;u.circle&&F(n-u.circle.x)<we&&F(r-u.circle.cy)<we;)o=u.N,s.push(u),Da(u),u=o;s.push(u),Za(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],$a(u.edge,l.site,u.site,a);l=s[0],(u=s[d-1]).edge=Qa(l.site,u.site,null,a),Xa(l),Xa(u)}function Va(e){for(var t,n,r,a,i=e.x,o=e.y,s=Na._;s;)if(r=Ra(s,o)-i,we<r)s=s.L;else{if(a=i-Ua(s,o),!(we<a)){-we<r?(t=s.P,n=s):-we<a?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Ia(e);if(Na.insert(t,l),t||n){if(t===n)return Za(t),n=Ia(t.site),Na.insert(l,n),l.edge=n.edge=Qa(t.site,l.site),Xa(t),void Xa(n);if(n){Za(t),Za(n);var u=t.site,c=u.x,d=u.y,f=e.x-c,h=e.y-d,p=n.site,g=p.x-c,v=p.y-d,m=2*(f*v-h*g),y=f*f+h*h,x=g*g+v*v,b={x:(v*y-h*x)/m+c,y:(f*x-g*y)/m+d};$a(n.edge,u,p,b),l.edge=Qa(u,e,null,b),n.edge=Qa(e,p,null,b),Xa(t),Xa(n)}else l.edge=Qa(t.site,l.site)}}function Ra(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,u=l-t;if(!u)return s;var c=s-r,d=1/i-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+a-i/2)))/d+r:(r+s)/2}function Ua(e,t){var n=e.N;if(n)return Ra(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ha(e){this.site=e,this.edges=[]}function Ya(e,t){return t.angle-e.angle}function Ga(){ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,l=r.x-o,u=r.y-s,c=i.x-o,d=2*(l*(v=i.y-s)-u*c);if(!(-_e<=d)){var f=l*l+u*u,h=c*c+v*v,p=(v*f-u*h)/d,g=(l*h-c*f)/d,v=g+s,m=Ba.pop()||new Ga;m.arc=e,m.site=a,m.x=p+o,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,e.circle=m;for(var y=null,x=Ta._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Ta.insert(y,m),y||(Fa=m)}}}}function Za(e){var t=e.circle;t&&(t.P||(Fa=t.N),Ta.remove(t),Ba.push(t),ni(t),e.circle=null)}function Ja(e,t){var n=e.b;if(n)return!0;var r,a,i=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,d=e.r,f=c.x,h=c.y,p=d.x,g=d.y,v=(f+p)/2,m=(h+g)/2;if(g===h){if(v<o||s<=v)return;if(p<f){if(i){if(i.y>=u)return}else i={x:v,y:l};n={x:v,y:u}}else{if(i){if(i.y<l)return}else i={x:v,y:u};n={x:v,y:l}}}else if(a=m-(r=(f-p)/(g-h))*v,r<-1||1<r)if(p<f){if(i){if(i.y>=u)return}else i={x:(l-a)/r,y:l};n={x:(u-a)/r,y:u}}else{if(i){if(i.y<l)return}else i={x:(u-a)/r,y:u};n={x:(l-a)/r,y:l}}else if(h<g){if(i){if(i.x>=s)return}else i={x:o,y:r*o+a};n={x:s,y:r*s+a}}else{if(i){if(i.x<o)return}else i={x:s,y:r*s+a};n={x:o,y:r*o+a}}return e.a=i,e.b=n,!0}function Wa(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qa(e,t,n,r){var a=new Wa(e,t);return Oa.push(a),n&&$a(a,e,t,n),r&&$a(a,t,e,r),Ca[e.i].edges.push(new ei(a,e,t)),Ca[t.i].edges.push(new ei(a,t,e)),a}function Ka(e,t,n){var r=new Wa(e,null);return r.a=t,r.b=n,Oa.push(r),r}function $a(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ei(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function ti(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ri(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ai(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ii(e){for(;e.L;)e=e.L;return e}function oi(e,t){var n,r,a,i=e.sort(si).pop();for(Oa=[],Ca=new Array(e.length),Na=new ti,Ta=new ti;;)if(a=Fa,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(Ca[i.i]=new Ha(i),Va(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;La(a.arc)}t&&(function(e){for(var t,n=Oa,r=_r(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)Ja(t=n[a],e)&&r(t)&&!(F(t.a.x-t.b.x)<we&&F(t.a.y-t.b.y)<we)||(t.a=t.b=null,n.splice(a,1))}(t),function(e){for(var t,n,r,a,i,o,s,l,u,c,d=e[0][0],f=e[1][0],h=e[0][1],p=e[1][1],g=Ca,v=g.length;v--;)if((i=g[v])&&i.prepare())for(l=(s=i.edges).length,o=0;o<l;)r=(c=s[o].end()).x,a=c.y,t=(u=s[++o%l].start()).x,n=u.y,(F(r-t)>we||F(a-n)>we)&&(s.splice(o,0,new ei(Ka(i.site,c,F(r-d)<we&&we<p-a?{x:d,y:F(t-d)<we?n:p}:F(a-p)<we&&we<f-r?{x:F(n-p)<we?t:f,y:p}:F(r-f)<we&&we<a-h?{x:f,y:F(t-f)<we?n:h}:F(a-h)<we&&we<r-d?{x:F(n-h)<we?t:d,y:h}:null),i.site,null)),++l)}(t));var o={cells:Ca,edges:Oa};return Na=Ta=Oa=Ca=null,o}function si(e,t){return t.y-e.y||t.x-e.x}Ha.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ya),t.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ti.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=ii(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(ri(this,n),n=(e=n).U),n.C=!1,r.C=!0,ai(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(ai(this,n),n=(e=n).U),n.C=!1,r.C=!0,ri(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,i=e.L,o=e.R;if(n=i?o?ii(o):i:o,a?a.L===e?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=e.C,((n.L=i).U=n)!==o?(a=n.U,n.U=e.U,e=n.R,a.L=e,(n.R=o).U=n):(n.U=a,e=(a=n).R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,ri(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ai(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,ri(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,ai(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ri(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,ai(this,a),e=this._;break}t.C=!0,a=(e=a).U}while(!e.C);e&&(e.C=!1)}}},T.geom.voronoi=function(e){var t=wa,n=_a,r=t,a=n,c=li;if(e)return i(e);function i(a){var i=new Array(a.length),o=c[0][0],s=c[0][1],l=c[1][0],u=c[1][1];return oi(d(a),c).cells.forEach(function(e,t){var n=e.edges,r=e.site;(i[t]=n.length?n.map(function(e){var t=e.start();return[t.x,t.y]}):r.x>=o&&r.x<=l&&r.y>=s&&r.y<=u?[[o,u],[l,u],[l,s],[o,s]]:[]).point=a[t]}),i}function d(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/we)*we,y:Math.round(a(e,t)/we)*we,i:t}})}return i.links=function(t){return oi(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},i.triangles=function(f){var h=[];return oi(d(f)).cells.forEach(function(e,t){for(var n,r,a,i,o=e.site,s=e.edges.sort(Ya),l=-1,u=s.length,c=s[u-1].edge,d=c.l===o?c.r:c.l;++l<u;)c,n=d,d=(c=s[l].edge).l===o?c.r:c.l,t<n.i&&t<d.i&&(a=n,i=d,((r=o).x-i.x)*(a.y-r.y)-(r.x-a.x)*(i.y-r.y)<0)&&h.push([f[t],f[n.i],f[d.i]])}),h},i.x=function(e){return arguments.length?(r=gt(t=e),i):t},i.y=function(e){return arguments.length?(a=gt(n=e),i):n},i.clipExtent=function(e){return arguments.length?(c=null==e?li:e,i):c===li?null:c},i.size=function(e){return arguments.length?i.clipExtent(e&&[[0,0],e]):c===li?null:c&&c[1]},i};var li=[[-1e6,-1e6],[1e6,1e6]];function ui(e){return e.x}function ci(e){return e.y}function di(e,t){e=T.rgb(e),t=T.rgb(t);var n=e.r,r=e.g,a=e.b,i=t.r-n,o=t.g-r,s=t.b-a;return function(e){return"#"+lt(Math.round(n+i*e))+lt(Math.round(r+o*e))+lt(Math.round(a+s*e))}}function fi(e,t){var n,r={},a={};for(n in e)n in t?r[n]=mi(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function hi(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function pi(e,r){var t,n,a,i=gi.lastIndex=vi.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=gi.exec(e))&&(n=vi.exec(r));)(a=n.index)>i&&(a=r.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:hi(t,n)})),i=vi.lastIndex;return i<r.length&&(a=r.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}T.geom.delaunay=function(e){return T.geom.voronoi().triangles(e)},T.geom.quadtree=function(e,x,b,j,w){var _,k=wa,z=_a;if(_=arguments.length)return k=ui,z=ci,3===_&&(w=b,j=x,b=x=0),t(e);function t(e){var t,n,r,a,i,o,s,l,u,c=gt(k),d=gt(z);if(null!=x)o=x,s=b,l=j,u=w;else if(l=u=-(o=s=1/0),n=[],r=[],i=e.length,_)for(a=0;a<i;++a)(t=e[a]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>u&&(u=t.y),n.push(t.x),r.push(t.y);else for(a=0;a<i;++a){var f=+c(t=e[a],a),h=+d(t,a);f<o&&(o=f),h<s&&(s=h),l<f&&(l=f),u<h&&(u=h),n.push(f),r.push(h)}var p=l-o,g=u-s;function v(e,t,n,r,a,i,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(F(l-n)+F(u-r)<.01)m(e,t,n,r,a,i,o,s);else{var c=e.point;e.x=e.y=e.point=null,m(e,c,l,u,a,i,o,s),m(e,t,n,r,a,i,o,s)}else e.x=n,e.y=r,e.point=t}else m(e,t,n,r,a,i,o,s)}function m(e,t,n,r,a,i,o,s){var l=.5*(a+o),u=.5*(i+s),c=l<=n,d=u<=r,f=d<<1|c;e.leaf=!1,c?a=l:o=l,d?i=u:s=u,v(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,a,i,o,s)}g<p?u=s+p:l=o+g;var y={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){v(y,e,+c(e,++a),+d(e,a),o,s,l,u)}};if(y.visit=function(e){!function e(t,n,r,a,i,o){if(!t(n,r,a,i,o)){var s=.5*(r+i),l=.5*(a+o),u=n.nodes;u[0]&&e(t,u[0],r,a,s,l),u[1]&&e(t,u[1],s,a,i,l),u[2]&&e(t,u[2],r,l,s,o),u[3]&&e(t,u[3],s,l,i,o)}}(e,y,o,s,l,u)},y.find=function(e){return function(e,v,m,y,x,b,j){var w,_=1/0;return function e(t,n,r,a,i){if(!(b<n||j<r||a<y||i<x)){if(o=t.point){var o,s=v-t.x,l=m-t.y,u=s*s+l*l;if(u<_){var c=Math.sqrt(_=u);y=v-c,x=m-c,b=v+c,j=m+c,w=o}}for(var d=t.nodes,f=.5*(n+a),h=.5*(r+i),p=(h<=m)<<1|f<=v,g=p+4;p<g;++p)if(t=d[3&p])switch(3&p){case 0:e(t,n,r,f,h);break;case 1:e(t,f,r,a,h);break;case 2:e(t,n,h,f,i);break;case 3:e(t,f,h,a,i)}}}(e,y,x,b,j),w}(y,e[0],e[1],o,s,l,u)},a=-1,null==x){for(;++a<i;)v(y,e[a],n[a],r[a],o,s,l,u);--a}else e.forEach(y.add);return n=r=e=t=null,y}return t.x=function(e){return arguments.length?(k=e,t):k},t.y=function(e){return arguments.length?(z=e,t):z},t.extent=function(e){return arguments.length?(null==e?x=b=j=w=null:(x=+e[0][0],b=+e[0][1],j=+e[1][0],w=+e[1][1]),t):null==x?null:[[x,b],[j,w]]},t.size=function(e){return arguments.length?(null==e?x=b=j=w=null:(x=b=0,j=+e[0],w=+e[1]),t):null==x?null:[j-x,w-b]},t},T.interpolateRgb=di,T.interpolateObject=fi,T.interpolateNumber=hi,T.interpolateString=pi;var gi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vi=new RegExp(gi.source,"g");function mi(e,t){for(var n,r=T.interpolators.length;0<=--r&&!(n=T.interpolators[r](e,t)););return n}function yi(e,t){var n,r=[],a=[],i=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(mi(e[n],t[n]));for(;n<i;++n)a[n]=e[n];for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=r[n](e);return a}}T.interpolate=mi,T.interpolators=[function(e,t){var n=typeof t;return("string"==n?pt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?di:pi:t instanceof Le?di:Array.isArray(t)?yi:"object"==n&&isNaN(t)?fi:hi)(e,t)}],T.interpolateArray=yi;function xi(){return B}var bi=T.map({linear:xi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return ki},cubic:function(){return zi},sin:function(){return Ai},exp:function(){return Ei},circle:function(){return Si},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/ze*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*ze/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Oi}}),ji=T.map({in:B,out:wi,"in-out":_i,"out-in":function(e){return _i(wi(e))}});function wi(t){return function(e){return 1-t(1-e)}}function _i(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function ki(e){return e*e}function zi(e){return e*e*e}function Mi(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ai(e){return 1-Math.cos(e*Ae)}function Ei(e){return Math.pow(2,10*(e-1))}function Si(e){return 1-Math.sqrt(1-e*e)}function Oi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ci(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Ni(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ti(t),a=Fi(t,n),i=Ti(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-a))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Se,this.translate=[e.e,e.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Se:0}function Fi(e,t){return e[0]*t[0]+e[1]*t[1]}function Ti(e){var t=Math.sqrt(Fi(e,e));return t&&(e[0]/=t,e[1]/=t),t}T.ease=function(e){var t=e.indexOf("-"),n=0<=t?e.slice(0,t):e,r=0<=t?e.slice(t+1):"in";return n=bi.get(n)||xi,function(t){return function(e){return e<=0?0:1<=e?1:t(e)}}((r=ji.get(r)||B)(n.apply(null,a.call(arguments,1))))},T.interpolateHcl=function(e,t){e=T.hcl(e),t=T.hcl(t);var n=e.h,r=e.c,a=e.l,i=t.h-n,o=t.c-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Ge(n+i*e,r+o*e,a+s*e)+""}},T.interpolateHsl=function(e,t){e=T.hsl(e),t=T.hsl(t);var n=e.h,r=e.s,a=e.l,i=t.h-n,o=t.s-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Ue(n+i*e,r+o*e,a+s*e)+""}},T.interpolateLab=function(e,t){e=T.lab(e),t=T.lab(t);var n=e.l,r=e.a,a=e.b,i=t.l-n,o=t.a-r,s=t.b-a;return function(e){return $e(n+i*e,r+o*e,a+s*e)+""}},T.interpolateRound=Ci,T.transform=function(e){var n=x.createElementNS(T.ns.prefix.svg,"g");return(T.transform=function(e){if(null!=e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Ni(t?t.matrix:qi)})(e)},Ni.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};function Bi(e){return e.length?e.pop()+",":""}function Pi(e,t){var a=[],i=[];return e=T.transform(e),t=T.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:hi(e[0],t[0])},{i:a-2,x:hi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,a,i),function(e,t,n,r){e!==t?(180<e-t?t+=360:180<t-e&&(e+=360),r.push({i:n.push(Bi(n)+"rotate(",null,")")-2,x:hi(e,t)})):t&&n.push(Bi(n)+"rotate("+t+")")}(e.rotate,t.rotate,a,i),function(e,t,n,r){e!==t?r.push({i:n.push(Bi(n)+"skewX(",null,")")-2,x:hi(e,t)}):t&&n.push(Bi(n)+"skewX("+t+")")}(e.skew,t.skew,a,i),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push(Bi(n)+"scale(",null,",",null,")");r.push({i:a-4,x:hi(e[0],t[0])},{i:a-2,x:hi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Bi(n)+"scale("+t+")")}(e.scale,t.scale,a,i),e=t=null,function(e){for(var t,n=-1,r=i.length;++n<r;)a[(t=i[n]).i]=t.x(e);return a.join("")}}function Ii(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Di(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Li(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Vi(e),r=Vi(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];t!==r;)t=t.parent,a.push(t);for(var i=a.length;n!==r;)a.splice(i,0,n),n=n.parent;return a}function Vi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Ri(e){e.fixed|=2}function Ui(e){e.fixed&=-7}function Hi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Yi(e){e.fixed&=-5}T.interpolateTransform=Pi,T.layout={},T.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Li(e[n]));return t}},T.layout.chord=function(){var v,m,y,x,b,j,w,t={},_=0;function e(){var e,t,n,r,a,i={},o=[],s=T.range(x),l=[];for(v=[],m=[],e=0,r=-1;++r<x;){for(t=0,a=-1;++a<x;)t+=y[r][a];o.push(t),l.push(T.range(x)),e+=t}for(b&&s.sort(function(e,t){return b(o[e],o[t])}),j&&l.forEach(function(e,n){e.sort(function(e,t){return j(y[n][e],y[n][t])})}),e=(ze-_*x)/e,t=0,r=-1;++r<x;){for(n=t,a=-1;++a<x;){var u=s[r],c=l[u][a],d=y[u][c],f=t,h=t+=d*e;i[u+"-"+c]={index:u,subindex:c,startAngle:f,endAngle:h,value:d}}m[u]={index:u,startAngle:n,endAngle:t,value:o[u]},t+=_}for(r=-1;++r<x;)for(a=r-1;++a<x;){var p=i[r+"-"+a],g=i[a+"-"+r];(p.value||g.value)&&v.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}w&&k()}function k(){v.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(x=(y=e)&&y.length,v=m=null,t):y},t.padding=function(e){return arguments.length?(_=e,v=m=null,t):_},t.sortGroups=function(e){return arguments.length?(b=e,v=m=null,t):b},t.sortSubgroups=function(e){return arguments.length?(j=e,v=null,t):j},t.sortChords=function(e){return arguments.length?(w=e,v&&k(),t):w},t.chords=function(){return v||e(),v},t.groups=function(){return m||e(),m},t},T.layout.force=function(){var d,e,f,h,p,g,a={},v=T.dispatch("start","tick","end"),m=[1,1],y=.9,i=Gi,o=Xi,x=-30,c=Zi,b=.1,j=.64,w=[],_=[];function k(u){return function(e,t,n,r){if(e.point!==u){var a=e.cx-u.x,i=e.cy-u.y,o=r-t,s=a*a+i*i;if(o*o/j<s){if(s<c){var l=e.charge/s;u.px-=a*l,u.py-=i*l}return!0}if(e.point&&s&&s<c){l=e.pointCharge/s;u.px-=a*l,u.py-=i*l}}return!e.charge}}function t(e){e.px=T.event.x,e.py=T.event.y,a.resume()}return a.tick=function(){if((f*=.99)<.005)return d=null,v.end({type:"end",alpha:f=0}),!0;var e,t,n,r,a,i,o,s,l,u=w.length,c=_.length;for(t=0;t<c;++t)r=(n=_[t]).source,(i=(s=(a=n.target).x-r.x)*s+(l=a.y-r.y)*l)&&(s*=i=f*p[t]*((i=Math.sqrt(i))-h[t])/i,l*=i,a.x-=s*(o=r.weight+a.weight?r.weight/(r.weight+a.weight):.5),a.y-=l*o,r.x+=s*(o=1-o),r.y+=l*o);if((o=f*b)&&(s=m[0]/2,l=m[1]/2,t=-1,o))for(;++t<u;)(n=w[t]).x+=(s-n.x)*o,n.y+=(l-n.y)*o;if(x)for(!function e(t,n,r){var a=0,i=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,u=-1;++u<l;)null!=(o=s[u])&&(e(o,n,r),t.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,a+=c*t.point.x,i+=c*t.point.y}t.cx=a/t.charge;t.cy=i/t.charge}(e=T.geom.quadtree(w),f,g),t=-1;++t<u;)(n=w[t]).fixed||e.visit(k(n));for(t=-1;++t<u;)(n=w[t]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);v.tick({type:"tick",alpha:f})},a.nodes=function(e){return arguments.length?(w=e,a):w},a.links=function(e){return arguments.length?(_=e,a):_},a.size=function(e){return arguments.length?(m=e,a):m},a.linkDistance=function(e){return arguments.length?(i="function"==typeof e?e:+e,a):i},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,a):o},a.friction=function(e){return arguments.length?(y=+e,a):y},a.charge=function(e){return arguments.length?(x="function"==typeof e?e:+e,a):x},a.chargeDistance=function(e){return arguments.length?(c=e*e,a):Math.sqrt(c)},a.gravity=function(e){return arguments.length?(b=+e,a):b},a.theta=function(e){return arguments.length?(j=e*e,a):Math.sqrt(j)},a.alpha=function(e){return arguments.length?(e=+e,f?0<e?f=e:(d.c=null,d.t=NaN,d=null,v.end({type:"end",alpha:f=0})):0<e&&(v.start({type:"start",alpha:f=e}),d=_t(a.tick)),a):f},a.start=function(){var s,l,e,u=w.length,c=_.length,t=m[0],n=m[1];for(s=0;s<u;++s)(e=w[s]).index=s,e.weight=0;for(s=0;s<c;++s)"number"==typeof(e=_[s]).source&&(e.source=w[e.source]),"number"==typeof e.target&&(e.target=w[e.target]),++e.source.weight,++e.target.weight;for(s=0;s<u;++s)e=w[s],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(h=[],"function"==typeof i)for(s=0;s<c;++s)h[s]=+i.call(this,_[s],s);else for(s=0;s<c;++s)h[s]=i;if(p=[],"function"==typeof o)for(s=0;s<c;++s)p[s]=+o.call(this,_[s],s);else for(s=0;s<c;++s)p[s]=o;if(g=[],"function"==typeof x)for(s=0;s<u;++s)g[s]=+x.call(this,w[s],s);else for(s=0;s<u;++s)g[s]=x;function r(e,t){if(!l){for(l=new Array(u),i=0;i<u;++i)l[i]=[];for(i=0;i<c;++i){var n=_[i];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var r,a=l[s],i=-1,o=a.length;++i<o;)if(!isNaN(r=a[i][e]))return r;return Math.random()*t}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(e=e||T.behavior.drag().origin(B).on("dragstart.force",Ri).on("drag.force",t).on("dragend.force",Ui),!arguments.length)return e;this.on("mouseover.force",Hi).on("mouseout.force",Yi).call(e)},T.rebind(a,v,"on")};var Gi=20,Xi=1,Zi=1/0;function Ji(e,t){return T.rebind(e,t,"sort","children","value"),(e.nodes=e).links=to,e}function Wi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(a=e.children)&&(r=a.length))for(var r,a;0<=--r;)n.push(a[r])}function Qi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Ki(e){return e.children}function $i(e){return e.value}function eo(e,t){return t.value-e.value}function to(e){return T.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}T.layout.hierarchy=function(){var s=eo,l=Ki,u=$i;function c(e){var t,n=[e],r=[];for(e.depth=0;null!=(t=n.pop());)if(r.push(t),(i=l.call(c,t,t.depth))&&(a=i.length)){for(var a,i,o;0<=--a;)n.push(o=i[a]),o.parent=t,o.depth=t.depth+1;u&&(t.value=0),t.children=i}else u&&(t.value=+u.call(c,t,t.depth)||0),delete t.children;return Qi(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),u&&(n=e.parent)&&(n.value+=e.value)}),r}return c.sort=function(e){return arguments.length?(s=e,c):s},c.children=function(e){return arguments.length?(l=e,c):l},c.value=function(e){return arguments.length?(u=e,c):u},c.revalue=function(e){return u&&(Wi(e,function(e){e.children&&(e.value=0)}),Qi(e,function(e){var t;e.children||(e.value=+u.call(c,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},c},T.layout.partition=function(){var r=T.layout.hierarchy(),a=[1,1];function t(e,t){var n=r.call(this,e,t);return function e(t,n,r,a){var i=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,i&&(o=i.length)){var o,s,l,u=-1;for(r=t.value?r/t.value:0;++u<o;)e(s=i[u],n,l=s.value*r,a),n+=l}}(n[0],0,a[0],a[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}(n[0])),n}return t.size=function(e){return arguments.length?(a=e,t):a},Ji(t,r)},T.layout.pie=function(){var f=Number,h=no,p=0,g=ze,v=0;function m(n){var t,e=n.length,r=n.map(function(e,t){return+f.call(m,e,t)}),a=+("function"==typeof p?p.apply(this,arguments):p),i=("function"==typeof g?g.apply(this,arguments):g)-a,o=Math.min(Math.abs(i)/e,+("function"==typeof v?v.apply(this,arguments):v)),s=o*(i<0?-1:1),l=T.sum(r),u=l?(i-e*s)/l:0,c=T.range(e),d=[];return null!=h&&c.sort(h===no?function(e,t){return r[t]-r[e]}:function(e,t){return h(n[e],n[t])}),c.forEach(function(e){d[e]={data:n[e],value:t=r[e],startAngle:a,endAngle:a+=t*u+s,padAngle:o}}),d}return m.value=function(e){return arguments.length?(f=e,m):f},m.sort=function(e){return arguments.length?(h=e,m):h},m.startAngle=function(e){return arguments.length?(p=e,m):p},m.endAngle=function(e){return arguments.length?(g=e,m):g},m.padAngle=function(e){return arguments.length?(v=e,m):v},m};var no={};function ro(e){return e.x}function ao(e){return e.y}function io(e,t,n){e.y0=t,e.y=n}T.layout.stack=function(){var d=B,f=lo,h=uo,p=io,g=ro,v=ao;function m(e,t){if(!(i=e.length))return e;var n=e.map(function(e,t){return d.call(m,e,t)}),r=n.map(function(e){return e.map(function(e,t){return[g.call(m,e,t),v.call(m,e,t)]})}),a=f.call(m,r,t);n=T.permute(n,a),r=T.permute(r,a);var i,o,s,l,u=h.call(m,r,t),c=n[0].length;for(s=0;s<c;++s)for(p.call(m,n[0][s],l=u[s],r[0][s][1]),o=1;o<i;++o)p.call(m,n[o][s],l+=r[o-1][s][1],r[o][s][1]);return e}return m.values=function(e){return arguments.length?(d=e,m):d},m.order=function(e){return arguments.length?(f="function"==typeof e?e:oo.get(e)||lo,m):f},m.offset=function(e){return arguments.length?(h="function"==typeof e?e:so.get(e)||uo,m):h},m.x=function(e){return arguments.length?(g=e,m):g},m.y=function(e){return arguments.length?(v=e,m):v},m.out=function(e){return arguments.length?(p=e,m):p},m};var oo=T.map({"inside-out":function(e){var t,n,r=e.length,a=e.map(co),i=e.map(fo),o=T.range(r).sort(function(e,t){return a[e]-a[t]}),s=0,l=0,u=[],c=[];for(t=0;t<r;++t)n=o[t],s<l?(s+=i[n],u.push(n)):(l+=i[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return T.range(e.length).reverse()},default:lo}),so=T.map({silhouette:function(e){var t,n,r,a=e.length,i=e[0].length,o=[],s=0,l=[];for(n=0;n<i;++n){for(r=t=0;t<a;t++)r+=e[t][n][1];s<r&&(s=r),o.push(r)}for(n=0;n<i;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,a,i,o,s,l,u,c=e.length,d=e[0],f=d.length,h=[];for(h[0]=l=u=0,n=1;n<f;++n){for(a=t=0;t<c;++t)a+=e[t][n][1];for(i=t=0,s=d[n][0]-d[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}h[n]=l-=a?i/a*s:0,l<u&&(u=l)}for(n=0;n<f;++n)h[n]-=u;return h},expand:function(e){var t,n,r,a=e.length,i=e[0].length,o=1/a,s=[];for(n=0;n<i;++n){for(r=t=0;t<a;t++)r+=e[t][n][1];if(r)for(t=0;t<a;t++)e[t][n][1]/=r;else for(t=0;t<a;t++)e[t][n][1]=o}for(n=0;n<i;++n)s[n]=0;return s},zero:uo});function lo(e){return T.range(e.length)}function uo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function co(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function fo(e){return e.reduce(ho,0)}function ho(e,t){return e+t[1]}function po(e,t){return go(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function go(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function vo(e){return[T.min(e),T.max(e)]}function mo(e,t){return e.value-t.value}function yo(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function xo(e,t){(e._pack_next=t)._pack_prev=e}function bo(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return n*n+r*r<.999*a*a}function jo(e){if((t=e.children)&&(l=t.length)){var t,n,r,a,i,o,s,l,u=1/0,c=-1/0,d=1/0,f=-1/0;if(t.forEach(wo),(n=t[0]).x=-n.r,n.y=0,x(n),1<l&&((r=t[1]).x=r.r,r.y=0,x(r),2<l))for(ko(n,r,a=t[2]),x(a),yo(n,a),yo(n._pack_prev=a,r),r=n._pack_next,i=3;i<l;i++){ko(n,r,a=t[i]);var h=0,p=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(bo(o,a)){h=1;break}if(1==h)for(s=n._pack_prev;s!==o._pack_prev&&!bo(s,a);s=s._pack_prev,g++);h?(p<g||p==g&&r.r<n.r?xo(n,r=o):xo(n=s,r),i--):(yo(n,a),x(r=a))}var v=(u+c)/2,m=(d+f)/2,y=0;for(i=0;i<l;i++)(a=t[i]).x-=v,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(_o)}function x(e){u=Math.min(e.x-e.r,u),c=Math.max(e.x+e.r,c),d=Math.min(e.y-e.r,d),f=Math.max(e.y+e.r,f)}}function wo(e){e._pack_next=e._pack_prev=e}function _o(e){delete e._pack_next,delete e._pack_prev}function ko(e,t,n){var r=e.r+n.r,a=t.x-e.x,i=t.y-e.y;if(r&&(a||i)){var o=t.r+n.r,s=a*a+i*i,l=.5+((r*=r)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*a+u*i,n.y=e.y+l*i-u*a}else n.x=e.x+r,n.y=e.y}function zo(e,t){return e.parent==t.parent?1:2}function Mo(e){var t=e.children;return t.length?t[0]:e.t}function Ao(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Eo(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function So(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Oo(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),i<0&&(r+=i/2,i=0),{x:n,y:r,dx:a,dy:i}}function Co(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function No(e){return e.rangeExtent?e.rangeExtent():Co(e.range())}function Fo(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function To(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function qo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Bo}T.layout.histogram=function(){var d=!0,f=Number,h=vo,p=po;function n(e,t){for(var n,r,a=[],i=e.map(f,this),o=h.call(this,i,t),s=p.call(this,o,i,t),l=(t=-1,i.length),u=s.length-1,c=d?1:1/l;++t<u;)(n=a[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<u)for(t=-1;++t<l;)(r=i[t])>=o[0]&&r<=o[1]&&((n=a[T.bisect(s,r,1,u)-1]).y+=c,n.push(e[t]));return a}return n.value=function(e){return arguments.length?(f=e,n):f},n.range=function(e){return arguments.length?(h=gt(e),n):h},n.bins=function(t){return arguments.length?(p="number"==typeof t?function(e){return go(e,t)}:gt(t),n):p},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},T.layout.pack=function(){var l,u=T.layout.hierarchy().sort(mo),c=0,d=[1,1];function t(e,t){var n=u.call(this,e,t),r=n[0],a=d[0],i=d[1],o=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(r.x=r.y=0,Qi(r,function(e){e.r=+o(e.value)}),Qi(r,jo),c){var s=c*(l?1:Math.max(2*r.r/a,2*r.r/i))/2;Qi(r,function(e){e.r+=s}),Qi(r,jo),Qi(r,function(e){e.r-=s})}return function e(t,n,r,a){var i=t.children;t.x=n+=a*t.x;t.y=r+=a*t.y;t.r*=a;if(i)for(var o=-1,s=i.length;++o<s;)e(i[o],n,r,a)}(r,a/2,i/2,l?1:1/Math.max(2*r.r/a,2*r.r/i)),n}return t.size=function(e){return arguments.length?(d=e,t):d},t.radius=function(e){return arguments.length?(l=null==e||"function"==typeof e?e:+e,t):l},t.padding=function(e){return arguments.length?(c=+e,t):c},Ji(t,u)},T.layout.tree=function(){var d=T.layout.hierarchy().sort(null).value(null),g=zo,f=[1,1],h=null;function t(e,t){var n=d.call(this,e,t),r=n[0],a=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var a,i=t.children,o=0,s=i.length;o<s;++o)r.push((i[o]=a={_:i[o],parent:t,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return n.children[0]}(r);if(Qi(a,p),a.parent.m=-a.z,Wi(a,v),h)Wi(r,m);else{var i=r,o=r,s=r;Wi(r,function(e){e.x<i.x&&(i=e),e.x>o.x&&(o=e),e.depth>s.depth&&(s=e)});var l=g(i,o)/2-i.x,u=f[0]/(o.x+g(o,i)/2+l),c=f[1]/(s.depth||1);Wi(r,function(e){e.x=(e.x+l)*u,e.y=e.depth*c})}return n}function p(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){!function(e){var t,n=0,r=0,a=e.children,i=a.length;for(;0<=--i;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+g(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+g(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,i=e,o=t,s=a.parent.children[0],l=a.m,u=i.m,c=o.m,d=s.m;o=Ao(o),a=Mo(a),o&&a;)s=Mo(s),(i=Ao(i)).a=e,0<(r=o.z+c-a.z-l+g(o._,a._))&&(Eo((h=e,p=n,(f=o).a.parent===h.parent?f.a:p),e,r),l+=r,u+=r),c+=o.m,l+=a.m,d+=s.m,u+=i.m;o&&!Ao(i)&&(i.t=o,i.m+=c-u),a&&!Mo(s)&&(s.t=a,s.m+=l-d,n=e)}var f,h,p;return n}(e,r,e.parent.A||n[0])}function v(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=f[0],e.y=e.depth*f[1]}return t.separation=function(e){return arguments.length?(g=e,t):g},t.size=function(e){return arguments.length?(h=null==(f=e)?m:null,t):h?null:f},t.nodeSize=function(e){return arguments.length?(h=null==(f=e)?null:m,t):h?f:null},Ji(t,d)},T.layout.cluster=function(){var c=T.layout.hierarchy().sort(null).value(null),d=zo,f=[1,1],h=!1;function t(e,t){var n,r=c.call(this,e,t),a=r[0],i=0;Qi(a,function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(t),e.y=function(e){return 1+T.max(e,function(e){return e.y})}(t)):(e.x=n?i+=d(e,n):0,e.y=0,n=e)});var o=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(a),s=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(a),l=o.x-d(o,s)/2,u=s.x+d(s,o)/2;return Qi(a,h?function(e){e.x=(e.x-a.x)*f[0],e.y=(a.y-e.y)*f[1]}:function(e){e.x=(e.x-l)/(u-l)*f[0],e.y=(1-(a.y?e.y/a.y:1))*f[1]}),r}return t.separation=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(h=null==(f=e),t):h?null:f},t.nodeSize=function(e){return arguments.length?(h=null!=(f=e),t):h?f:null},Ji(t,c)},T.layout.treemap=function(){var r,a=T.layout.hierarchy(),c=Math.round,i=[1,1],o=null,d=So,s=!1,f="squarify",l=.5*(1+Math.sqrt(5));function h(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function p(e){var t=e.children;if(t&&t.length){var n,r,a,i=d(e),o=[],s=t.slice(),l=1/0,u="slice"===f?i.dx:"dice"===f?i.dy:"slice-dice"===f?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(h(s,i.dx*i.dy/e.value),o.area=0;0<(a=s.length);)o.push(n=s[a-1]),o.area+=n.area,l="squarify"!==f||(r=g(o,u))<=l?(s.pop(),r):(o.area-=o.pop().area,v(o,u,i,!1),u=Math.min(i.dx,i.dy),o.length=o.area=0,1/0);o.length&&(v(o,u,i,!0),o.length=o.area=0),t.forEach(p)}}function u(e){var t=e.children;if(t&&t.length){var n,r=d(e),a=t.slice(),i=[];for(h(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(v(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(u)}}function g(e,t){for(var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<i&&(i=n),a<n&&(a=n));return t*=t,(r*=r)?Math.max(t*a*l/r,r/(t*i*l)):1/0}function v(e,t,n,r){var a,i=-1,o=e.length,s=n.x,l=n.y,u=t?c(e.area/t):0;if(t==n.dx){for((r||u>n.dy)&&(u=n.dy);++i<o;)(a=e[i]).x=s,a.y=l,a.dy=u,s+=a.dx=Math.min(n.x+n.dx-s,u?c(a.area/u):0);a.z=!0,a.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++i<o;)(a=e[i]).x=s,a.y=l,a.dx=u,l+=a.dy=Math.min(n.y+n.dy-l,u?c(a.area/u):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function m(e){var t=r||a(e),n=t[0];return n.x=n.y=0,n.value?(n.dx=i[0],n.dy=i[1]):n.dx=n.dy=0,r&&a.revalue(n),h([n],n.dx*n.dy/n.value),(r?u:p)(n),s&&(r=t),t}return m.size=function(e){return arguments.length?(i=e,m):i},m.padding=function(n){if(!arguments.length)return o;function e(e){return Oo(e,n)}var t;return d=null==(o=n)?So:"function"==(t=typeof n)?function(e){var t=n.call(m,e,e.depth);return null==t?So(e):Oo(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),m},m.round=function(e){return arguments.length?(c=e?Math.round:Number,m):c!=Number},m.sticky=function(e){return arguments.length?(s=e,r=null,m):s},m.ratio=function(e){return arguments.length?(l=e,m):l},m.mode=function(e){return arguments.length?(f=e+"",m):f},Ji(m,a)},T.random={normal:function(r,a){var e=arguments.length;return e<2&&(a=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+a*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=T.random.normal.apply(T,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=T.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},T.scale={};var Bo={floor:B,ceil:B};function Po(n,e,t,r){var a=[],i=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)a.push(t(n[o-1],n[o])),i.push(r(e[o-1],e[o]));return function(e){var t=T.bisect(n,e,1,s)-1;return i[t](a[t](e))}}function Io(e,t){return T.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Do(e,t){return To(e,qo(Lo(e,t)[2])),To(e,qo(Lo(e,t)[2])),e}function Lo(e,t){null==t&&(t=10);var n=Co(e),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Vo(e,t){return T.range.apply(T,Lo(e,t))}function Ro(e,t,n){var r=Lo(e,t);if(n){var a=St.exec(n);if(a.shift(),"s"===a[8]){var i=T.formatPrefix(Math.max(F(r[0]),F(r[1])));return a[7]||(a[7]="."+Ho(i.scale(r[2]))),a[8]="f",n=T.format(a.join("")),function(e){return n(i.scale(e))+i.symbol}}a[7]||(a[7]="."+function(e,t){var n=Ho(t[2]);return e in Uo?Math.abs(n-Ho(Math.max(F(t[0]),F(t[1]))))+ +("e"!==e):n-2*("%"===e)}(a[8],r)),n=a.join("")}else n=",."+Ho(r[2])+"f";return T.format(n)}T.scale.linear=function(){return function e(n,r,a,i){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Po:Fo,t=i?Di:Ii;return o=e(n,r,t,a),s=e(r,n,t,mi),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Ci)};l.clamp=function(e){return arguments.length?(i=e,t()):i};l.interpolate=function(e){return arguments.length?(a=e,t()):a};l.ticks=function(e){return Vo(n,e)};l.tickFormat=function(e,t){return Ro(n,e,t)};l.nice=function(e){return Do(n,e),t()};l.copy=function(){return e(n,r,a,i)};return t()}([0,1],[0,1],mi,!1)};var Uo={s:1,g:1,p:1,r:1,e:1};function Ho(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}T.scale.log=function(){return function e(t,l,u,c){function d(e){return(u?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function f(e){return u?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(d(e))}a.invert=function(e){return f(t.invert(e))};a.domain=function(e){return arguments.length?(u=0<=e[0],t.domain((c=e.map(Number)).map(d)),a):c};a.base=function(e){return arguments.length?(l=+e,t.domain(c.map(d)),a):l};a.nice=function(){var e=To(c.map(d),u?Math:Go);return t.domain(e),c=e.map(f),a};a.ticks=function(){var e=Co(c),t=[],n=e[0],r=e[1],a=Math.floor(d(n)),i=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(i-a)){if(u){for(;a<i;a++)for(var s=1;s<o;s++)t.push(f(a)*s);t.push(f(a))}else for(t.push(f(a));a++<i;)for(var s=o-1;0<s;s--)t.push(f(a)*s);for(a=0;t[a]<n;a++);for(i=t.length;t[i-1]>r;i--);t=t.slice(a,i)}return t};a.tickFormat=function(e,n){if(!arguments.length)return Yo;arguments.length<2?n=Yo:"function"!=typeof n&&(n=T.format(n));var r=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/f(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};a.copy=function(){return e(t.copy(),l,u,c)};return Io(a,t)}(T.scale.linear().domain([0,1]),10,!0,[1,10])};var Yo=T.format(".0e"),Go={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Xo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}T.scale.pow=function(){return function e(t,n,r){var a=Xo(n),i=Xo(1/n);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),o):r};o.ticks=function(e){return Vo(r,e)};o.tickFormat=function(e,t){return Ro(r,e,t)};o.nice=function(e){return o.domain(Do(r,e))};o.exponent=function(e){return arguments.length?(a=Xo(n=e),i=Xo(1/n),t.domain(r.map(a)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Io(o,t)}(T.scale.linear(),1,[0,1])},T.scale.sqrt=function(){return T.scale.pow().exponent(.5)},T.scale.ordinal=function(){return function e(s,l){var a,u,c;function d(e){return u[((a.get(e)||("range"===l.t?a.set(e,s.push(e)):NaN))-1)%u.length]}function f(t,n){return T.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],a=new y;for(var t,n=-1,r=e.length;++n<r;)a.has(t=e[n])||a.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(u=e,c=0,l={t:"range",a:arguments},d):u};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return u=f(n+a*t/2,a),c=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return u=f(n+Math.round(a*t/2+(r-n-(s.length-1+t)*a)/2),a),c=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[r-0],i=e[1-r],o=(i-a)/(s.length-t+2*n);return u=f(a+o*n,o),r&&u.reverse(),c=o*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[r-0],i=e[1-r],o=Math.floor((i-a)/(s.length-t+2*n));return u=f(a+Math.round((i-a-(s.length-t)*o)/2),o),r&&u.reverse(),c=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return c};d.rangeExtent=function(){return Co(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},T.scale.category10=function(){return T.scale.ordinal().range(Zo)},T.scale.category20=function(){return T.scale.ordinal().range(Jo)},T.scale.category20b=function(){return T.scale.ordinal().range(Wo)},T.scale.category20c=function(){return T.scale.ordinal().range(Qo)};var Zo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ot),Jo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ot),Wo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ot),Qo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ot);function Ko(){return 0}T.scale.quantile=function(){return function e(n,r){var a;function t(){var e=0,t=r.length;for(a=[];++e<t;)a[e-1]=T.quantile(n,e/t);return i}function i(e){if(!isNaN(e=+e))return r[T.bisect(a,e)]}i.domain=function(e){return arguments.length?(n=e.map(u).filter(c).sort(l),t()):n};i.range=function(e){return arguments.length?(r=e,t()):r};i.quantiles=function(){return a};i.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]};i.copy=function(){return e(n,r)};return t()}([],[])},T.scale.quantize=function(){return function e(t,n,r){var a,i;function o(e){return r[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),i=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},T.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[T.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},T.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Vo(n,e)};t.tickFormat=function(e,t){return Ro(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},T.svg={},T.svg.arc=function(){var I=es,D=ts,L=Ko,V=$o,R=ns,U=rs,H=as;function t(){var e=Math.max(0,+I.apply(this,arguments)),t=Math.max(0,+D.apply(this,arguments)),n=R.apply(this,arguments)-Ae,r=U.apply(this,arguments)-Ae,a=Math.abs(r-n),i=r<n?0:1;if(t<e&&(o=t,t=e,e=o),Me<=a)return Y(t,i)+(e?Y(e,1-i):"")+"Z";var o,s,l,u,c,d,f,h,p,g,v,m,y=0,x=0,b=[];if((u=(+H.apply(this,arguments)||0)/2)&&(l=V===$o?Math.sqrt(e*e+t*t):+V.apply(this,arguments),i||(x*=-1),t&&(x=Fe(l/t*Math.sin(u))),e&&(y=Fe(l/e*Math.sin(u)))),t){c=t*Math.cos(n+x),d=t*Math.sin(n+x),f=t*Math.cos(r-x),h=t*Math.sin(r-x);var j=Math.abs(r-n-2*x)<=ke?0:1;if(x&&is(c,d,f,h)===i^j){var w=(n+r)/2;c=t*Math.cos(w),d=t*Math.sin(w),f=h=null}}else c=d=0;if(e){p=e*Math.cos(r-y),g=e*Math.sin(r-y),v=e*Math.cos(n+y),m=e*Math.sin(n+y);var _=Math.abs(n-r+2*y)<=ke?0:1;if(y&&is(p,g,v,m)===1-i^_){var k=(n+r)/2;p=e*Math.cos(k),g=e*Math.sin(k),v=m=null}}else p=g=0;if(we<a&&.001<(o=Math.min(Math.abs(t-e)/2,+L.apply(this,arguments)))){s=e<t^i?0:1;var z=o,M=o;if(a<ke){var A=null==v?[p,g]:null==f?[c,d]:Ea([c,d],[v,m],[f,h],[p,g]),E=c-A[0],S=d-A[1],O=f-A[0],C=h-A[1],N=1/Math.sin(Math.acos((E*O+S*C)/(Math.sqrt(E*E+S*S)*Math.sqrt(O*O+C*C)))/2),F=Math.sqrt(A[0]*A[0]+A[1]*A[1]);M=Math.min(o,(e-F)/(N-1)),z=Math.min(o,(t-F)/(1+N))}if(null!=f){var T=os(null==v?[p,g]:[v,m],[c,d],t,z,i),q=os([f,h],[p,g],t,z,i);o===z?b.push("M",T[0],"A",z,",",z," 0 0,",s," ",T[1],"A",t,",",t," 0 ",1-i^is(T[1][0],T[1][1],q[1][0],q[1][1]),",",i," ",q[1],"A",z,",",z," 0 0,",s," ",q[0]):b.push("M",T[0],"A",z,",",z," 0 1,",s," ",q[0])}else b.push("M",c,",",d);if(null!=v){var B=os([c,d],[v,m],e,-M,i),P=os([p,g],null==f?[c,d]:[f,h],e,-M,i);o===M?b.push("L",P[0],"A",M,",",M," 0 0,",s," ",P[1],"A",e,",",e," 0 ",i^is(P[1][0],P[1][1],B[1][0],B[1][1]),",",1-i," ",B[1],"A",M,",",M," 0 0,",s," ",B[0]):b.push("L",P[0],"A",M,",",M," 0 0,",s," ",B[0])}else b.push("L",p,",",g)}else b.push("M",c,",",d),null!=f&&b.push("A",t,",",t," 0 ",j,",",i," ",f,",",h),b.push("L",p,",",g),null!=v&&b.push("A",e,",",e," 0 ",_,",",1-i," ",v,",",m);return b.push("Z"),b.join("")}function Y(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(I=gt(e),t):I},t.outerRadius=function(e){return arguments.length?(D=gt(e),t):D},t.cornerRadius=function(e){return arguments.length?(L=gt(e),t):L},t.padRadius=function(e){return arguments.length?(V=e==$o?$o:gt(e),t):V},t.startAngle=function(e){return arguments.length?(R=gt(e),t):R},t.endAngle=function(e){return arguments.length?(U=gt(e),t):U},t.padAngle=function(e){return arguments.length?(H=gt(e),t):H},t.centroid=function(){var e=(+I.apply(this,arguments)+ +D.apply(this,arguments))/2,t=(+R.apply(this,arguments)+ +U.apply(this,arguments))/2-Ae;return[Math.cos(t)*e,Math.sin(t)*e]},t};var $o="auto";function es(e){return e.innerRadius}function ts(e){return e.outerRadius}function ns(e){return e.startAngle}function rs(e){return e.endAngle}function as(e){return e&&e.padAngle}function is(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function os(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,c=e[0]+l,d=e[1]+u,f=t[0]+l,h=t[1]+u,p=(c+f)/2,g=(d+h)/2,v=f-c,m=h-d,y=v*v+m*m,x=n-r,b=c*h-f*d,j=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*m-v*j)/y,_=(-b*v-m*j)/y,k=(b*m+v*j)/y,z=(-b*v+m*j)/y,M=w-p,A=_-g,E=k-p,S=z-g;return E*E+S*S<M*M+A*A&&(w=k,_=z),[[w-l,_-u],[w*n/x,_*n/x]]}function ss(u){var c=wa,d=_a,f=pr,h=us,t=h.key,p=.7;function n(e){var t,n=[],r=[],a=-1,i=e.length,o=gt(c),s=gt(d);function l(){n.push("M",h(u(r),p))}for(;++a<i;)f.call(this,t=e[a],a)?r.push([+o.call(this,t,a),+s.call(this,t,a)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(c=e,n):c},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(f=e,n):f},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?h=e:(h=ls.get(e)||us).key,n):t},n.tension=function(e){return arguments.length?(p=e,n):p},n}T.svg.line=function(){return ss(B)};var ls=T.map({linear:us,"linear-closed":cs,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&a.push("H",r[0]);return a.join("")},"step-before":ds,"step-after":fs,basis:gs,"basis-open":function(e){if(e.length<4)return us(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(vs(xs,i)+","+vs(xs,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),bs(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[vs(xs,o),",",vs(xs,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),bs(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,l=e[n][1]-o,u=-1;++u<=n;)r=e[u],a=u/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*l);return gs(e)},cardinal:function(e,t){return e.length<3?us(e):e[0]+hs(e,ps(e,t))},"cardinal-open":function(e,t){return e.length<4?us(e):e[1]+hs(e.slice(1,-1),ps(e,t))},"cardinal-closed":function(e,t){return e.length<3?cs(e):e[0]+hs((e.push(e[0]),e),ps([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?us(e):e[0]+hs(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=js(a,i);for(;++t<n;)r[t]=(o+(o=js(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=js(e[s],e[s+1]),F(t)<we?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(a=n*n+r*r)&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r));s=-1;for(;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function us(e){return 1<e.length?e.join("L"):e+"Z"}function cs(e){return e.join("L")+"Z"}function ds(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function fs(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function hs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return us(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],l=2),1<t.length){s=t[1],i=e[l],l++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++)i=e[l],s=t[u],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[l];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function ps(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,l=e.length;++s<l;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function gs(e){if(e.length<3)return us(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],l=[a,",",i,"L",vs(xs,o),",",vs(xs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),bs(l,o,s);return e.pop(),l.push("L",r),l.join("")}function vs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ls.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ms=[0,2/3,1/3,0],ys=[0,1/3,2/3,0],xs=[0,1/6,2/3,1/6];function bs(e,t,n){e.push("C",vs(ms,t),",",vs(ms,n),",",vs(ys,t),",",vs(ys,n),",",vs(xs,t),",",vs(xs,n))}function js(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ws(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-Ae,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function _s(p){var g=wa,v=wa,m=0,y=_a,x=pr,b=us,t=b.key,j=b,w="L",_=.7;function n(e){var t,n,r,a=[],i=[],o=[],s=-1,l=e.length,u=gt(g),c=gt(m),d=g===v?function(){return n}:gt(v),f=m===y?function(){return r}:gt(y);function h(){a.push("M",b(p(o),_),w,j(p(i.reverse()),_),"Z")}for(;++s<l;)x.call(this,t=e[s],s)?(i.push([n=+u.call(this,t,s),r=+c.call(this,t,s)]),o.push([+d.call(this,t,s),+f.call(this,t,s)])):i.length&&(h(),i=[],o=[]);return i.length&&h(),a.length?a.join(""):null}return n.x=function(e){return arguments.length?(g=v=e,n):v},n.x0=function(e){return arguments.length?(g=e,n):g},n.x1=function(e){return arguments.length?(v=e,n):v},n.y=function(e){return arguments.length?(m=y=e,n):y},n.y0=function(e){return arguments.length?(m=e,n):m},n.y1=function(e){return arguments.length?(y=e,n):y},n.defined=function(e){return arguments.length?(x=e,n):x},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=ls.get(e)||us).key,j=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(_=e,n):_},n}function ks(e){return e.radius}function zs(e){return[e.x,e.y]}function Ms(){return 64}function As(){return"circle"}function Es(e){var t=Math.sqrt(e/ke);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}T.svg.line.radial=function(){var e=ss(ws);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(ds.reverse=fs).reverse=ds,T.svg.area=function(){return _s(B)},T.svg.area.radial=function(){var e=_s(ws);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},T.svg.chord=function(){var a=la,i=ua,l=ks,u=ns,c=rs;function t(e,t){var n=o(this,a,e,t),r=o(this,i,e,t);return"M"+n.p0+s(n.r,n.p1,n.a1-n.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(n,r)?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,r.r,r.p0)+s(r.r,r.p1,r.a1-r.a0)+d(r.r,r.p1,n.r,n.p0))+"Z"}function o(e,t,n,r){var a=t.call(e,n,r),i=l.call(e,a,r),o=u.call(e,a,r)-Ae,s=c.call(e,a,r)-Ae;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(ke<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(l=gt(e),t):l},t.source=function(e){return arguments.length?(a=gt(e),t):a},t.target=function(e){return arguments.length?(i=gt(e),t):i},t.startAngle=function(e){return arguments.length?(u=gt(e),t):u},t.endAngle=function(e){return arguments.length?(c=gt(e),t):c},t},T.svg.diagonal=function(){var o=la,s=ua,l=zs;function t(e,t){var n=o.call(this,e,t),r=s.call(this,e,t),a=(n.y+r.y)/2,i=[n,{x:n.x,y:a},{x:r.x,y:a},r];return"M"+(i=i.map(l))[0]+"C"+i[1]+" "+i[2]+" "+i[3]}return t.source=function(e){return arguments.length?(o=gt(e),t):o},t.target=function(e){return arguments.length?(s=gt(e),t):s},t.projection=function(e){return arguments.length?(l=e,t):l},t},T.svg.diagonal.radial=function(){var e=T.svg.diagonal(),t=zs,n=e.projection;return e.projection=function(e){return arguments.length?n(function(r){return function(){var e=r.apply(this,arguments),t=e[0],n=e[1]-Ae;return[t*Math.cos(n),t*Math.sin(n)]}}(t=e)):t},e},T.svg.symbol=function(){var n=As,r=Ms;function t(e,t){return(Ss.get(n.call(this,e,t))||Es)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=gt(e),t):n},t.size=function(e){return arguments.length?(r=gt(e),t):r},t};var Ss=T.map({circle:Es,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Cs)),n=t*Cs;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Os),n=t*Os/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Os),n=t*Os/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});T.svg.symbolTypes=Ss.keys();var Os=Math.sqrt(3),Cs=Math.tan(30*Ee);G.transition=function(e){for(var t,n,r=qs||++Is,a=Vs(e),i=[],o=Bs||{time:Date.now(),ease:Mi,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&Rs(n,c,a,r,o),t.push(n)}return Ts(i,a,r)},G.interrupt=function(e){return this.each(null==e?Ns:Fs(Vs(e)))};var Ns=Fs(Vs());function Fs(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ts(e,t,n){return V(e,Ps),e.namespace=t,e.id=n,e}var qs,Bs,Ps=[],Is=0;function Ds(e,r,a,i){var o=e.id,s=e.namespace;return ue(e,"function"==typeof a?function(e,t,n){e[s][o].tween.set(r,i(a.call(e,e.__data__,t,n)))}:(a=i(a),function(e){e[s][o].tween.set(r,a)}))}function Ls(e){return null==e&&(e=""),function(){this.textContent=e}}function Vs(e){return null==e?"__transition__":"__transition_"+e+"__"}function Rs(i,o,a,s,e){var l,u,c,d,f,h=i[a]||(i[a]={active:0,count:0}),p=h[s];function n(e){var t=h.active,n=h[t];for(var r in n&&(n.timer.c=null,n.timer.t=NaN,--h.count,delete h[t],n.event&&n.event.interrupt.call(i,i.__data__,n.index)),h)if(+r<s){var a=h[r];a.timer.c=null,a.timer.t=NaN,--h.count,delete h[r]}u.c=g,_t(function(){return u.c&&g(e||1)&&(u.c=null,u.t=NaN),1},0,l),h.active=s,p.event&&p.event.start.call(i,i.__data__,o),f=[],p.tween.forEach(function(e,t){(t=t.call(i,i.__data__,o))&&f.push(t)}),d=p.ease,c=p.duration}function g(e){for(var t=e/c,n=d(t),r=f.length;0<r;)f[--r].call(i,n);if(1<=t)return p.event&&p.event.end.call(i,i.__data__,o),--h.count?delete h[s]:delete i[a],1}p||(l=e.time,u=_t(function(e){var t=p.delay;if(u.t=t+l,t<=e)return n(e-t);u.c=n},0,l),p=h[s]={tween:new y,time:l,timer:u,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++h.count)}Ps.call=G.call,Ps.empty=G.empty,Ps.node=G.node,Ps.size=G.size,T.transition=function(e,t){return e&&e.transition?qs?e.transition(t):e:T.selection().transition(e)},(T.transition.prototype=Ps).select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=X(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Rs(n,c,i,a,r[i][a]),t.push(n)):t.push(null)}return Ts(o,i,a)},Ps.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,l=[];e=Z(e);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],f=-1,h=d.length;++f<h;)if(r=d[f]){i=r[s][o],n=e.call(r,r.__data__,f,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(a=n[p])&&Rs(a,p,s,o,i),t.push(a)}return Ts(l,s,o)},Ps.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=le(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,l=(o=this[a]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return Ts(r,this.namespace,this.id)},Ps.tween=function(t,n){var r=this.id,a=this.namespace;return arguments.length<2?this.node()[a][r].tween.get(t):ue(this,null==n?function(e){e[a][r].tween.remove(t)}:function(e){e[a][r].tween.set(t,n)})},Ps.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Pi:mi,a=T.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return Ds(this,"attr."+e,t,a.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(n){return null==n?i:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=r(e,n),function(e){this.setAttribute(a,t(e))})})})},Ps.attrTween=function(e,r){var a=T.ns.qualify(e);return this.tween("attr."+e,a.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}})},Ps.style=function(r,e,a){var t=arguments.length;if(t<3){if("string"!=typeof r){for(a in t<2&&(e=""),r)this.style(a,r[a],e);return this}a=""}function i(){this.style.removeProperty(r)}return Ds(this,"style."+r,e,function(n){return null==n?i:(n+="",function(){var t,e=q(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=mi(e,n),function(e){this.style.setProperty(r,t(e),a)})})})},Ps.styleTween=function(r,a,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(e,t){var n=a.call(this,e,t,q(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),i)}})},Ps.text=function(e){return Ds(this,"text",e,Ls)},Ps.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ps.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=T.ease.apply(T,arguments)),ue(this,function(e){e[r][n].ease=t}))},Ps.delay=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].delay:ue(this,"function"==typeof r?function(e,t,n){e[i][a].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[i][a].delay=r}))},Ps.duration=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].duration:ue(this,"function"==typeof r?function(e,t,n){e[i][a].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[i][a].duration=r}))},Ps.each=function(r,n){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Bs,t=qs;try{qs=a,ue(this,function(e,t,n){Bs=e[i][a],r.call(e,e.__data__,t,n)})}finally{Bs=e,qs=t}}else ue(this,function(e){var t=e[i][a];(t.event||(t.event=T.dispatch("start","end","interrupt"))).on(r,n)});return this},Ps.transition=function(){for(var e,t,n,r=this.id,a=++Is,i=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var u,c=0,d=(u=this[s]).length;c<d;c++)(t=u[c])&&Rs(t,c,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ts(o,i,a)},T.svg.axis=function(){var M,A=T.scale.linear(),E=Us,S=6,O=6,C=3,N=[10],F=null;function n(e){e.each(function(){var e,t=T.select(this),n=this.__chart__||A,r=this.__chart__=A.copy(),a=null==F?r.ticks?r.ticks.apply(r,N):r.domain():F,i=null==M?r.tickFormat?r.tickFormat.apply(r,N):B:M,o=t.selectAll(".tick").data(a,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",we),l=T.transition(o.exit()).style("opacity",we).remove(),u=T.transition(o.order()).style("opacity",1),c=Math.max(S,0)+C,d=No(r),f=t.selectAll(".domain").data([0]),h=(f.enter().append("path").attr("class","domain"),T.transition(f));s.append("line"),s.append("text");var p,g,v,m,y=s.select("line"),x=u.select("line"),b=o.select("text").text(i),j=s.select("text"),w=u.select("text"),_="top"===E||"left"===E?-1:1;if("bottom"===E||"top"===E?(e=Ys,p="x",v="y",g="x2",m="y2",b.attr("dy",_<0?"0em":".71em").style("text-anchor","middle"),h.attr("d","M"+d[0]+","+_*O+"V0H"+d[1]+"V"+_*O)):(e=Gs,p="y",v="x",g="y2",m="x2",b.attr("dy",".32em").style("text-anchor",_<0?"end":"start"),h.attr("d","M"+_*O+","+d[0]+"H0V"+d[1]+"H"+_*O)),y.attr(m,_*S),j.attr(v,_*c),x.attr(g,0).attr(m,_*S),w.attr(p,0).attr(v,_*c),r.rangeBand){var k=r,z=k.rangeBand()/2;n=r=function(e){return k(e)+z}}else n.rangeBand?n=r:l.call(e,r,n);s.call(e,n,r),u.call(e,r,r)})}return n.scale=function(e){return arguments.length?(A=e,n):A},n.orient=function(e){return arguments.length?(E=e in Hs?e+"":Us,n):E},n.ticks=function(){return arguments.length?(N=d(arguments),n):N},n.tickValues=function(e){return arguments.length?(F=e,n):F},n.tickFormat=function(e){return arguments.length?(M=e,n):M},n.tickSize=function(e){var t=arguments.length;return t?(S=+e,O=+arguments[t-1],n):S},n.innerTickSize=function(e){return arguments.length?(S=+e,n):S},n.outerTickSize=function(e){return arguments.length?(O=+e,n):O},n.tickPadding=function(e){return arguments.length?(C=+e,n):C},n.tickSubdivide=function(){return arguments.length&&n},n};var Us="bottom",Hs={top:1,right:1,bottom:1,left:1};function Ys(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function Gs(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}T.svg.brush=function(){var y,x,b=D(A,"brushstart","brush","brushend"),j=null,w=null,_=[0,0],k=[0,0],z=!0,M=!0,o=Zs[0];function A(e){e.each(function(){var e=T.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(o,B);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Xs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",A.empty()?"none":null);var r,a=T.transition(e),i=T.transition(t);j&&(r=No(j),i.attr("x",r[0]).attr("width",r[1]-r[0]),S(a)),w&&(r=No(w),i.attr("y",r[0]).attr("height",r[1]-r[0]),O(a)),E(a)})}function E(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+_[+/e$/.test(e)]+","+k[+/^s/.test(e)]+")"})}function S(e){e.select(".extent").attr("x",_[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",_[1]-_[0])}function O(e){e.select(".extent").attr("y",k[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function s(){var d,n,r=this,e=T.select(T.event.target),a=b.of(r,arguments),i=T.select(r),t=e.datum(),o=!/^(n|s)$/.test(t)&&j,s=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),l=ye(r),h=T.mouse(r),u=T.select(q(r)).on("keydown.brush",function(){32==T.event.keyCode&&(f||(d=null,h[0]-=_[1],h[1]-=k[1],f=2),P())}).on("keyup.brush",function(){32==T.event.keyCode&&2==f&&(h[0]+=_[1],h[1]+=k[1],f=0,P())});if(T.event.changedTouches?u.on("touchmove.brush",g).on("touchend.brush",m):u.on("mousemove.brush",g).on("mouseup.brush",m),i.interrupt().selectAll("*").interrupt(),f)h[0]=_[0]-h[0],h[1]=k[0]-h[1];else if(t){var c=+/w$/.test(t),p=+/^n/.test(t);n=[_[1-c]-h[0],k[1-p]-h[1]],h[0]=_[c],h[1]=k[p]}else T.event.altKey&&(d=h.slice());function g(){var e=T.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),f||(T.event.altKey?(d=d||[(_[0]+_[1])/2,(k[0]+k[1])/2],h[0]=_[+(e[0]<d[0])],h[1]=k[+(e[1]<d[1])]):d=null),o&&v(e,j,0)&&(S(i),t=!0),s&&v(e,w,1)&&(O(i),t=!0),t&&(E(i),a({type:"brush",mode:f?"move":"resize"}))}function v(e,t,n){var r,a,i=No(t),o=i[0],s=i[1],l=h[n],u=n?k:_,c=u[1]-u[0];if(f&&(o-=l,s-=c+l),r=(n?M:z)?Math.max(o,Math.min(s,e[n])):e[n],f?a=(r+=l)+c:(d&&(l=Math.max(o,Math.min(s,2*d[n]-r))),l<r?(a=r,r=l):a=l),u[0]!=r||u[1]!=a)return n?x=null:y=null,u[0]=r,u[1]=a,!0}function m(){g(),i.style("pointer-events","all").selectAll(".resize").style("display",A.empty()?"none":null),T.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),a({type:"brushend"})}i.style("pointer-events","none").selectAll(".resize").style("display",null),T.select("body").style("cursor",e.style("cursor")),a({type:"brushstart"}),g()}return A.event=function(e){e.each(function(){var r=b.of(this,arguments),a={x:_,y:k,i:y,j:x},e=this.__chart__||a;this.__chart__=a,qs?T.select(this).transition().each("start.brush",function(){y=e.i,x=e.j,_=e.x,k=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=yi(_,a.x),n=yi(k,a.y);return y=x=null,function(e){_=a.x=t(e),k=a.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=a.i,x=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},A.x=function(e){return arguments.length?(o=Zs[!(j=e)<<1|!w],A):j},A.y=function(e){return arguments.length?(o=Zs[!j<<1|!(w=e)],A):w},A.clamp=function(e){return arguments.length?(j&&w?(z=!!e[0],M=!!e[1]):j?z=!!e:w&&(M=!!e),A):j&&w?[z,M]:j?z:w?M:null},A.extent=function(e){var t,n,r,a,i;return arguments.length?(j&&(t=e[0],n=e[1],w&&(t=t[0],n=n[0]),y=[t,n],j.invert&&(t=j(t),n=j(n)),n<t&&(i=t,t=n,n=i),t==_[0]&&n==_[1]||(_=[t,n])),w&&(r=e[0],a=e[1],j&&(r=r[1],a=a[1]),x=[r,a],w.invert&&(r=w(r),a=w(a)),a<r&&(i=r,r=a,a=i),r==k[0]&&a==k[1]||(k=[r,a])),A):(j&&(y?(t=y[0],n=y[1]):(t=_[0],n=_[1],j.invert&&(t=j.invert(t),n=j.invert(n)),n<t&&(i=t,t=n,n=i))),w&&(x?(r=x[0],a=x[1]):(r=k[0],a=k[1],w.invert&&(r=w.invert(r),a=w.invert(a)),a<r&&(i=r,r=a,a=i))),j&&w?[[t,r],[n,a]]:j?[t,n]:w&&[r,a])},A.clear=function(){return A.empty()||(_=[0,0],k=[0,0],y=x=null),A},A.empty=function(){return!!j&&_[0]==_[1]||!!w&&k[0]==k[1]},T.rebind(A,b,"on")};var Xs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Js=Nt.format=sn.timeFormat,Ws=Js.utc,Qs=Ws("%Y-%m-%dT%H:%M:%S.%LZ");function Ks(e){return e.toISOString()}function $s(t,a,e){function o(e){return t(e)}function s(e,t){var n=(e[1]-e[0])/t,r=T.bisect(tl,n);return r==tl.length?[a.year,Lo(e.map(function(e){return e/31536e6}),t)[2]]:r?a[n/tl[r-1]<tl[r]/n?r-1:r]:[al,Lo(e,t)[2]]}return o.invert=function(e){return el(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain(e),o):t.domain().map(el)},o.nice=function(t,n){var e=o.domain(),r=Co(e),a=null==t?s(r,10):"number"==typeof t&&s(r,t);function i(e){return!isNaN(e)&&!t.range(e,el(+e+1),n).length}return a&&(t=a[0],n=a[1]),o.domain(To(e,1<n?{floor:function(e){for(;i(e=t.floor(e));)e=el(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=el(+e+1);return e}}:t))},o.ticks=function(e,t){var n=Co(o.domain()),r=null==e?s(n,10):"number"==typeof e?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],el(+n[1]+1),t<1?1:t)},o.tickFormat=function(){return e},o.copy=function(){return $s(t.copy(),a,e)},Io(o,t)}function el(e){return new Date(e)}Js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ks:Qs,Ks.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ks.toString=Qs.toString,Nt.second=Bt(function(e){return new Ft(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Nt.seconds=Nt.second.range,Nt.seconds.utc=Nt.second.utc.range,Nt.minute=Bt(function(e){return new Ft(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Nt.minutes=Nt.minute.range,Nt.minutes.utc=Nt.minute.utc.range,Nt.hour=Bt(function(e){var t=e.getTimezoneOffset()/60;return new Ft(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Nt.hours=Nt.hour.range,Nt.hours.utc=Nt.hour.utc.range,Nt.month=Bt(function(e){return(e=Nt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Nt.months=Nt.month.range,Nt.months.utc=Nt.month.utc.range;var tl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nl=[[Nt.second,1],[Nt.second,5],[Nt.second,15],[Nt.second,30],[Nt.minute,1],[Nt.minute,5],[Nt.minute,15],[Nt.minute,30],[Nt.hour,1],[Nt.hour,3],[Nt.hour,6],[Nt.hour,12],[Nt.day,1],[Nt.day,2],[Nt.week,1],[Nt.month,1],[Nt.month,3],[Nt.year,1]],rl=Js.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",pr]]),al={range:function(e,t,n){return T.range(Math.ceil(e/n)*n,+t,n).map(el)},floor:B,ceil:B};nl.year=Nt.year,Nt.scale=function(){return $s(T.scale.linear(),nl,rl)};var il=nl.map(function(e){return[e[0].utc,e[1]]}),ol=Ws.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",pr]]);function sl(e){return JSON.parse(e.responseText)}function ll(e){var t=x.createRange();return t.selectNode(x.body),t.createContextualFragment(e.responseText)}il.year=Nt.year.utc,Nt.scale.utc=function(){return $s(T.scale.linear(),il,ol)},T.text=vt(function(e){return e.responseText}),T.json=function(e,t){return mt(e,"application/json",sl,t)},T.html=function(e,t){return mt(e,"text/html",ll,t)},T.xml=vt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=T,define(T)):"object"==typeof ul&&ul.exports?ul.exports=T:this.d3=T}()},{}],8:[function(e,t,n){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(0<e)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var a=0|t[r];if(a<=0)return[];var i,o=new Array(a);if(r===t.length-1)for(i=0;i<a;++i)o[i]=n;else for(i=0;i<a;++i)o[i]=e(t,n,r+1);return o}(e,t,0)}return[]}},{}],9:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":10}],10:[function(e,y,x){(function(){var e,f,l,h,p,t,u,n,g,v,r,a,i,c,d,o,s;function m(e){this.cmp=null!=e?e:f,this.nodes=[]}l=Math.floor,v=Math.min,f=function(e,t){return e<t?-1:t<e?1:0},g=function(e,t,n,r,a){var i;if(null==n&&(n=0),null==a&&(a=f),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)a(t,e[i=l((n+r)/2)])<0?r=i:n=i+1;return[].splice.apply(e,[n,n-n].concat(t)),t},t=function(e,t,n){return null==n&&(n=f),e.push(t),c(e,0,e.length-1,n)},p=function(e,t){var n,r;return null==t&&(t=f),n=e.pop(),e.length?(r=e[0],e[0]=n,d(e,0,t)):r=n,r},n=function(e,t,n){var r;return null==n&&(n=f),r=e[0],e[0]=t,d(e,0,n),r},u=function(e,t,n){var r;return null==n&&(n=f),e.length&&n(e[0],t)<0&&(t=(r=[e[0],t])[0],e[0]=r[1],d(e,0,n)),t},h=function(n,e){var t,r,a,i,o,s;for(null==e&&(e=f),o=[],r=0,a=(i=function(){s=[];for(var e=0,t=l(n.length/2);0<=t?e<t:t<e;0<=t?e++:e--)s.push(e);return s}.apply(this).reverse()).length;r<a;r++)t=i[r],o.push(d(n,t,e));return o},i=function(e,t,n){var r;if(null==n&&(n=f),-1!==(r=e.indexOf(t)))return c(e,0,r,n),d(e,r,n)},r=function(e,t,n){var r,a,i,o,s;if(null==n&&(n=f),!(a=e.slice(0,t)).length)return a;for(h(a,n),i=0,o=(s=e.slice(t)).length;i<o;i++)r=s[i],u(a,r,n);return a.sort(n).reverse()},a=function(e,t,n){var r,a,i,o,s,l,u,c,d;if(null==n&&(n=f),10*t<=e.length){if(!(i=e.slice(0,t).sort(n)).length)return i;for(a=i[i.length-1],o=0,l=(u=e.slice(t)).length;o<l;o++)n(r=u[o],a)<0&&(g(i,r,0,null,n),i.pop(),a=i[i.length-1]);return i}for(h(e,n),d=[],s=0,c=v(t,e.length);0<=c?s<c:c<s;0<=c?++s:--s)d.push(p(e,n));return d},c=function(e,t,n,r){var a,i,o;for(null==r&&(r=f),a=e[n];t<n&&r(a,i=e[o=n-1>>1])<0;)e[n]=i,n=o;return e[n]=a},d=function(e,t,n){var r,a,i,o,s;for(null==n&&(n=f),a=e.length,i=e[s=t],r=2*t+1;r<a;)(o=r+1)<a&&!(n(e[r],e[o])<0)&&(r=o),e[t]=e[r],r=2*(t=r)+1;return e[t]=i,c(e,s,t,n)},m.push=t,m.pop=p,m.replace=n,m.pushpop=u,m.heapify=h,m.updateItem=i,m.nlargest=r,m.nsmallest=a,m.prototype.push=function(e){return t(this.nodes,e,this.cmp)},m.prototype.pop=function(){return p(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},m.prototype.replace=function(e){return n(this.nodes,e,this.cmp)},m.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},m.prototype.heapify=function(){return h(this.nodes,this.cmp)},m.prototype.updateItem=function(e){return i(this.nodes,e,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return 0===this.nodes.length},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var e;return(e=new m).nodes=this.nodes.slice(0),e},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,e=m,o=this,s=function(){return e},"function"==typeof define&&define.amd?define([],s):"object"==typeof x?y.exports=s():o.Heap=s()}).call(this)},{}],11:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?a-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-c)-1,h>>=-c,c+=s;0<c;i=256*i+e[t+d],d+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;0<c;o=256*o+e[t+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,c=(1<<u)-1,d=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(t+=1<=o+d?f/l:f*Math.pow(2,1-d))*l&&(o++,l/=2),c<=o+d?(s=0,o=c):1<=o+d?(s=(t*l-1)*Math.pow(2,a),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));8<=a;e[n+h]=255&s,h+=p,s/=256,a-=8);for(o=o<<a|s,u+=a;0<u;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*g}},{}],12:[function(e,t,n){"use strict";var r=e("bit-twiddle");function i(e){var t=(r.nextPow2(e+1)>>>1)-1,n=e-t;return r.nextPow2(n)-1>=t?t:(t>>>1)+n}function a(e,t){if(e<=0)return 0;var n=i(e);return n<t?a(e-n-1,t-n-1):t===n?r.log2(e):a(n,t)}n.root=i,n.begin=function(e){return 0},n.end=function(e){return e-1},n.height=a,n.prev=function(e,t){return Math.max(t-1,0)},n.next=function(e,t){return Math.min(t+1,e-1)},n.parent=function e(t,n){if(t<=0)return-1;var r,a=i(t);return a<n?(r=e(t-a-1,n-a-1))<0?a:r+a+1:n===a?-1:(r=e(a,n))<0?a:r},n.left=function e(t,n){if(t<=0)return 0;var r=i(t);return r<n?e(t-r-1,n-r-1)+r+1:n===r?i(n):e(r,n)},n.right=function e(t,n){if(t<=0)return 0;var r=i(t);return r<n?e(t-r-1,n-r-1)+r+1:n===r?i(t-r-1)+r+1:e(r,n)},n.leaf=function(e,t){return 0===a(e,t)},n.lo=function(e,t){e|=0,t|=0;for(var n=0;1<e;){var r=i(e);if(r<t)n+=r+1,e-=r+1,t-=r+1;else{if(t===r)break;e=r}}return n},n.hi=function(e,t){e|=0,t|=0;for(var n=0;1<e;){var r=i(e);if(r<t)n+=r+1,e-=r+1,t-=r+1;else{if(t===r){n+=e-1;break}e=r}}return n}},{"bit-twiddle":13}],13:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],14:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},{}],15:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],16:[function(e,t,n){"use strict";var r=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];n[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var t=u[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":4}],17:[function(e,t,n){"use strict";var i=e("ndarray"),o=e("./doConvert.js");t.exports=function(e,t){for(var n=[],r=e,a=1;Array.isArray(r);)n.push(r.length),a*=r.length,r=r[0];return 0===n.length?i():(t=t||i(new Float64Array(a),n),o(t,e),t)}},{"./doConvert.js":18,ndarray:21}],18:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":4}],19:[function(e,t,n){"use strict";var u=e("ndarray"),a=e("ndarray-ops"),c=e("typedarray-pool");n.clone=function(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var n=c.malloc(e.size,t),r=u(n,e.shape);return a.assign(r,e),r},n.malloc=function(e,t){t=t||"double";for(var n=1,r=new Array(e.length),a=e.length-1;0<=a;--a)r[a]=n,n*=e[a];return u(c.malloc(n,t),e,r,0)},n.free=function(e){"generic"!==e.dtype&&"array"!==e.dtype&&c.free(e.data)},n.zeros=function(e,t){t=t||"double";for(var n=1,r=new Array(e.length),a=e.length-1;0<=a;--a)r[a]=n,n*=e[a];var i=c.malloc(n,t);for(a=0;a<n;++a)i[a]=0;return u(i,e,r,0)},n.ones=function(e,t){t=t||"double";for(var n=1,r=new Array(e.length),a=e.length-1;0<=a;--a)r[a]=n,n*=e[a];var i=c.malloc(n,t);for(a=0;a<n;++a)i[a]=1;return u(i,e,r,0)},n.eye=function(e,t){var n,r;t=t||"double";var a=1,i=new Array(e.length);for(n=e.length-1;0<=n;--n)i[n]=a,a*=e[n];var o=c.malloc(a,t);for(n=0;n<a;++n)o[n]=0;var s=1/0,l=0;for(n=e.length-1;0<=n;n--)l+=i[n],s=Math.min(s,e[n]);for(r=n=0;n<s;n++,r+=l)o[r]=1;return u(o,e,i,0)}},{ndarray:21,"ndarray-ops":16,"typedarray-pool":30}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||t<0)return null;var r=!!n,a=o(e.order,r,e.dtype);return r?a(e,t,n):a(e,t)},t.exports.compile=o;var f="a",h="K",p="C",g="d",v="o",m="R",y="T",x="L",b="H",j="X";function w(e){return"s"+e}function _(e){return"t"+e}function k(e){return"u"+e}function z(e){return"v"+e}function M(e){return"i"+e}function A(e){return"p"+e}function E(e){return"x"+e}var i={};function o(e,t,n){var r=e.join()+t+n,a=i[r];return a||(i[r]=function(a,i,e){var o=(a=function(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}(a)).length,s="generic"===e,t="ndSelect"+e+a.join("_")+"_"+(i?"cmp":"lex"),l=[],n=[f,h];i&&n.push(p);for(var r=[g+"="+f+".data",v+"="+f+".offset|0",m+"=Math.random",y],u=0;u<2;++u)r.push(E(u)+"=0");for(u=0;u<o;++u)r.push(w(u)+"="+f+".shape["+u+"]|0",_(u)+"="+f+".stride["+u+"]|0",M(u)+"=0");for(u=1;u<o;++u)1<u?r.push(z(u)+"=("+_(u)+"-"+w(u-1)+"*"+_(u-1)+")|0",k(a[u])+"=("+_(a[u])+"-"+w(a[u-1])+"*"+_(a[u-1])+")|0"):r.push(z(u)+"="+_(u),k(a[u])+"="+_(a[u]));if(i)for(u=0;u<2;++u)r.push(A(u)+"="+f+".pick(0)");function c(e,t){l.push(E(0),"=",v,"+",_(a[0]),"*(",e,");",E(1),"=",v,"+",_(a[0]),"*(",t,");");for(var n=o-1;0<n;--n)l.push("for(",M(a[n]),"=0;",M(a[n]),"<",w(a[n]),";",M(a[n]),"++){");s?l.push(y,"=",g,".get(",E(0),");",g,".set(",E(0),",",g,".get(",E(1),"));",g,".set(",E(1),",",y,");"):l.push(y,"=",g,"[",E(0),"];",g,"[",E(0),"]=",g,"[",E(1),"];",g,"[",E(1),"]=",y,";");for(n=1;n<o;++n)l.push(E(0),"+=",k(a[n]),";",E(1),"+=",k(a[n]),"}")}r.push(j+"=0",x+"=0",b+"="+w(a[0])+"-1"),l.push("while(",x,"<",b,"){",j,"=(",m,"()*(",b,"-",x,"+1)+",x,")|0;"),c(j,b),l.push(j,"=",x,";","for(",M(0),"=",x,";",M(0),"<",b,";",M(0),"++){"),function(e,t,n){if(i)l.push(A(0),".offset=",v,"+",_(a[0]),"*(",t,");",A(1),".offset=",v,"+",_(a[0]),"*(",n,");",e,"=",p,"(",A(0),",",A(1),");");else{l.push(E(0),"=",v,"+",_(0),"*(",t,");",E(1),"=",v,"+",_(0),"*(",n,");"),1<o&&l.push("_cmp:");for(var r=o-1;0<r;--r)l.push("for(",M(r),"=0;",M(r),"<",w(r),";",M(r),"++){");s?l.push(e,"=",g,".get(",E(0),")-",g,".get(",E(1),");"):l.push(e,"=",g,"[",E(0),"]-",g,"[",E(1),"];"),1<o&&l.push("if(",e,")break _cmp;");for(r=1;r<o;++r)l.push(E(0),"+=",z(r),";",E(1),"+=",z(r),"}")}}(y,M(0),b),l.push("if(",y,"<0){"),c(j,M(0)),l.push(j,"++;"),l.push("}}"),c(j,b),l.push("if(",j,"===",h,"){",x,"=",j,";","break;","}else if(",h,"<",j,"){",b,"=",j,"-1;","}else{",x,"=",j,"+1;","}","}"),i?l.push(A(0),".offset=",v,"+",x,"*",_(0),";","return ",A(0),";"):l.push("return ",f,".pick(",x,");");var d=["'use strict';function ",t,"(",n,"){","var ",r.join(),";",l.join(""),"};return ",t].join("");return new Function(d)()}(e,t,n))}},{}],21:[function(e,t,n){var g=e("iota-array"),u=e("is-buffer"),c="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function v(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function d(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(a)()}if(0===t){a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",a)(m[e][0])}a=["'use strict'"];var i=g(t),o=i.map(function(e){return"i"+e}),s="this.offset+"+i.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),l=i.map(function(e){return"b"+e}).join(","),u=i.map(function(e){return"c"+e}).join(",");a.push("function "+n+"(a,"+l+","+u+",d){this.data=a","this.shape=["+l+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+i.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+n+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+o.join(",")+",v){"),r?a.push("return this.data.set("+s+",v)}"):a.push("return this.data["+s+"]=v}"),a.push("proto.get=function "+n+"_get("+o.join(",")+"){"),r?a.push("return this.data.get("+s+")}"):a.push("return this.data["+s+"]}"),a.push("proto.index=function "+n+"_index(",o.join(),"){return "+s+"}"),a.push("proto.hi=function "+n+"_hi("+o.join(",")+"){return new "+n+"(this.data,"+i.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+i.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var c=i.map(function(e){return"a"+e+"=this.shape["+e+"]"}),d=i.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+n+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+d.join(","));for(var f=0;f<t;++f)a.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");a.push("return new "+n+"(this.data,"+i.map(function(e){return"a"+e}).join(",")+","+i.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+o.join(",")+"){var "+i.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+i.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(f=0;f<t;++f)a.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");a.push("return new "+n+"(this.data,"+i.map(function(e){return"a"+e}).join(",")+","+i.map(function(e){return"b"+e}).join(",")+",c)}");var h=new Array(t),p=new Array(t);for(f=0;f<t;++f)h[f]="a[i"+f+"]",p[f]="b[i"+f+"]";a.push("proto.transpose=function "+n+"_transpose("+o+"){"+o.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+h.join(",")+","+p.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+o+"){var a=[],b=[],c=this.offset");for(f=0;f<t;++f)a.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+i.map(function(e){return"shape["+e+"]"}).join(",")+","+i.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(m[e],v)}var m={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,n,r){if(void 0===e)return(0,m.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===n){n=new Array(a);for(var i=a-1,o=1;0<=i;--i)n[i]=o,o*=t[i]}if(void 0===r)for(i=r=0;i<a;++i)n[i]<0&&(r-=(t[i]-1)*n[i]);for(var s=function(e){if(u(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),l=m[s];l.length<=a+1;)l.push(d(s,l.length-1));return(0,l[a+1])(e,t,n,r)}},{"iota-array":14,"is-buffer":15}],22:[function(require,module,exports){(function(global){"use strict";var numeric=void 0===exports?function(){}:exports,Pnb,Qnb,Rnb,Tnb,Unb,Vnb;function Wnb(e){var t,n,s=this,r=e.length,a=0,i=s.i=s.j=s.m=0;for(s.S=[],s.c=[],r||(e=[r++]);a<Rnb;)s.S[a]=a++;for(a=0;a<Rnb;a++)i=Znb(i+(t=s.S[a])+e[a%r]),n=s.S[i],s.S[a]=n,s.S[i]=t;s.g=function(e){var t=s.S,n=Znb(s.i+1),r=t[n],a=Znb(s.j+r),i=t[a];t[n]=i,t[a]=r;for(var o=t[Znb(r+i)];--e;)i=t[a=Znb(a+(r=t[n=Znb(n+1)]))],t[n]=i,t[a]=r,o=o*Rnb+t[Znb(r+i)];return s.i=n,s.j=a,o},s.g(Rnb)}function Ynb(e,t,n,r){for(e+="",r=n=0;r<e.length;r++)t[Znb(r)]=Znb((n^=19*t[Znb(r)])+e.charCodeAt(r));for(r in e="",t)e+=String.fromCharCode(t[r]);return e}function Znb(e){return e&Rnb-1}function Iob(e){if("object"!=typeof e)return e;var t,n=[],r=e.length;for(t=0;t<r;t++)n[t+1]=Iob(e[t]);return n}function Job(e){if("object"!=typeof e)return e;var t,n=[],r=e.length;for(t=1;t<r;t++)n[t-1]=Job(e[t]);return n}function Nob(e,t,n,r,a,i,o,s,l,u,c,d,f,h,p,g){var v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L;for(E=Math.min(r,u),y=2*r+E*(E+5)/2+2*u+1,D=1e-60;1+.1*(D+=D)<=1||1+.2*D<=1;);for(v=1;v<=r;v+=1)p[v]=t[v];for(v=r+1;v<=y;v+=1)p[v]=0;for(v=1;v<=u;v+=1)d[v]=0;if(b=[],0===g[1]){if(function(e,t,n,r){var a,i,o,s,l,u;for(i=1;i<=n;i+=1){if(u=0,(o=(r[1]=i)-1)<1){if((u=e[i][i]-u)<=0)break;e[i][i]=Math.sqrt(u)}else{for(s=1;s<=o;s+=1){for(l=e[s][i],a=1;a<s;a+=1)l-=e[a][i]*e[a][s];l/=e[s][s],u+=(e[s][i]=l)*l}if((u=e[i][i]-u)<=0)break;e[i][i]=Math.sqrt(u)}r[1]=0}}(e,0,r,b),0!==b[1])return void(g[1]=2);!function(e,t,n,r){var a,i,o,s;for(i=1;i<=n;i+=1){for(s=0,a=1;a<i;a+=1)s+=e[a][i]*r[a];r[i]=(r[i]-s)/e[i][i]}for(o=1;o<=n;o+=1)for(r[i=n+1-o]=r[i]/e[i][i],s=-r[i],a=1;a<i;a+=1)r[a]=r[a]+s*e[a][i]}(e,0,r,t),function(e,t,n){var r,a,i,o,s;for(i=1;i<=n;i+=1){for(e[i][i]=1/e[i][i],s=-e[i][i],r=1;r<i;r+=1)e[r][i]=s*e[r][i];if(n<(o=i+1))break;for(a=o;a<=n;a+=1)for(s=e[i][a],e[i][a]=0,r=1;r<=i;r+=1)e[r][a]=e[r][a]+s*e[r][i]}}(e,0,r)}else{for(m=1;m<=r;m+=1)for(a[m]=0,v=1;v<=m;v+=1)a[m]=a[m]+e[v][m]*t[v];for(m=1;m<=r;m+=1)for(t[m]=0,v=m;v<=r;v+=1)t[m]=t[m]+e[m][v]*a[v]}for(i[1]=0,m=1;m<=r;m+=1)for(a[m]=t[m],i[1]=i[1]+p[m]*a[m],p[m]=0,v=m+1;v<=r;v+=1)e[v][m]=0;for(i[1]=-i[1]/2,g[1]=0,S=(z=(k=(M=(_=(w=r)+r)+E)+E+1)+E*(E+1)/2)+u,v=1;v<=u;v+=1){for(C=0,m=1;m<=r;m+=1)C+=o[m][v]*o[m][v];p[S+v]=Math.sqrt(C)}function V(){for(h[1]=h[1]+1,y=z,v=1;v<=u;v+=1){for(y+=1,C=-s[v],m=1;m<=r;m+=1)C+=o[m][v]*a[m];if(Math.abs(C)<D&&(C=0),c<v)p[y]=C;else if(p[y]=-Math.abs(C),0<C){for(m=1;m<=r;m+=1)o[m][v]=-o[m][v];s[v]=-s[v]}}for(v=1;v<=f;v+=1)p[z+d[v]]=0;for(O=A=0,v=1;v<=u;v+=1)p[z+v]<O*p[S+v]&&(O=p[z+(A=v)]/p[S+v]);return 0===A?999:0}function R(){for(v=1;v<=r;v+=1){for(C=0,m=1;m<=r;m+=1)C+=e[m][v]*o[m][A];p[v]=C}for(x=w,v=1;v<=r;v+=1)p[x+v]=0;for(m=f+1;m<=r;m+=1)for(v=1;v<=r;v+=1)p[x+v]=p[x+v]+e[v][m]*p[m];for(P=!0,v=f;1<=v;v-=1){for(C=p[v],x=(y=k+v*(v+3)/2)-v,m=v+1;m<=f;m+=1)C-=p[y]*p[_+m],y+=m;if(C/=p[x],p[_+v]=C,d[v]<c)break;if(C<0)break;P=!1,j=v}if(!P)for(N=p[M+j]/p[_+j],v=1;v<=f&&!(d[v]<c)&&!(p[_+v]<0);v+=1)(O=p[M+v]/p[_+v])<N&&(N=O,j=v);for(C=0,v=w+1;v<=w+r;v+=1)C+=p[v]*p[v];if(Math.abs(C)<=D){if(P)return g[1]=1,999;for(v=1;v<=f;v+=1)p[M+v]=p[M+v]-N*p[_+v];return p[M+f+1]=p[M+f+1]+N,700}for(C=0,v=1;v<=r;v+=1)C+=p[w+v]*o[v][A];for(F=-p[z+A]/C,I=!0,P||N<F&&(F=N,I=!1),v=1;v<=r;v+=1)a[v]=a[v]+F*p[w+v],Math.abs(a[v])<D&&(a[v]=0);for(i[1]=i[1]+F*C*(F/2+p[M+f+1]),v=1;v<=f;v+=1)p[M+v]=p[M+v]-F*p[_+v];if(p[M+f+1]=p[M+f+1]+F,!I){for(C=-s[A],m=1;m<=r;m+=1)C+=a[m]*o[m][A];if(c<A)p[z+A]=C;else if(p[z+A]=-Math.abs(C),0<C){for(m=1;m<=r;m+=1)o[m][A]=-o[m][A];s[A]=-s[A]}return 700}for(d[f+=1]=A,y=k+(f-1)*f/2+1,v=1;v<=f-1;v+=1)p[y]=p[v],y+=1;if(f===r)p[y]=p[r];else{for(v=r;f+1<=v&&0!==p[v]&&(T=Math.max(Math.abs(p[v-1]),Math.abs(p[v])),q=Math.min(Math.abs(p[v-1]),Math.abs(p[v])),O=0<=p[v-1]?Math.abs(T*Math.sqrt(1+q*q/(T*T))):-Math.abs(T*Math.sqrt(1+q*q/(T*T))),T=p[v-1]/O,q=p[v]/O,1!==T);v-=1)if(0===T)for(p[v-1]=q*O,m=1;m<=r;m+=1)O=e[m][v-1],e[m][v-1]=e[m][v],e[m][v]=O;else for(p[v-1]=O,B=q/(1+T),m=1;m<=r;m+=1)O=T*e[m][v-1]+q*e[m][v],e[m][v]=B*(e[m][v-1]+O)-e[m][v],e[m][v-1]=O;p[y]=p[f]}return 0}function U(){if(0===p[x=(y=k+j*(j+1)/2+1)+j])return 798;if(T=Math.max(Math.abs(p[x-1]),Math.abs(p[x])),q=Math.min(Math.abs(p[x-1]),Math.abs(p[x])),O=0<=p[x-1]?Math.abs(T*Math.sqrt(1+q*q/(T*T))):-Math.abs(T*Math.sqrt(1+q*q/(T*T))),T=p[x-1]/O,q=p[x]/O,1===T)return 798;if(0===T){for(v=j+1;v<=f;v+=1)O=p[x-1],p[x-1]=p[x],p[x]=O,x+=v;for(v=1;v<=r;v+=1)O=e[v][j],e[v][j]=e[v][j+1],e[v][j+1]=O}else{for(B=q/(1+T),v=j+1;v<=f;v+=1)O=T*p[x-1]+q*p[x],p[x]=B*(p[x-1]+O)-p[x],p[x-1]=O,x+=v;for(v=1;v<=r;v+=1)O=T*e[v][j]+q*e[v][j+1],e[v][j+1]=B*(e[v][j]+O)-e[v][j+1],e[v][j]=O}return 0}function H(){for(x=y-j,v=1;v<=j;v+=1)p[x]=p[y],y+=1,x+=1;return p[M+j]=p[M+j+1],d[j]=d[j+1],(j+=1)<f?797:0}function Y(){return p[M+f]=p[M+f+1],p[M+f+1]=0,d[f]=0,f-=1,h[2]=h[2]+1,0}for(f=0,h[1]=0,L=h[2]=0;;){if(999===(L=V()))return;for(;0!==(L=R());){if(999===L)return;if(700===L)if(j===f)Y();else{for(;U(),797===(L=H()););Y()}}}}void 0!==global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,a;for(void 0===t&&(t=15),r=.5,n=new Date;;){for(a=r*=2;3<a;a-=4)e(),e(),e(),e();for(;0<a;)e(),a--;if(t<new Date-n)break}for(a=r;3<a;a-=4)e(),e(),e(),e();for(;0<a;)e(),a--;return 1e3*(3*r-1)/(new Date-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var l=[];return function e(t){var n;if(void 0===t)return l.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return l.push('"'+t+'"'),!1;if("boolean"==typeof t)return l.push(t.toString()),!1;if("number"==typeof t){var r=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,n),a=r.toPrecision(numeric.precision);return 10===parseFloat(a)&&(n++,a=(r=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+n.toString()}return"Infinity"}(t),a=t.toPrecision(numeric.precision),i=parseFloat(t.toString()).toString(),o=[r,a,i,parseFloat(a).toString(),parseFloat(i).toString()];for(n=1;n<o.length;n++)o[n].length<r.length&&(r=o[n]);return l.push(Array(numeric.precision+8-r.length).join(" ")+r),!1}if(null===t)return l.push("null"),!1;if("function"==typeof t){l.push(t.toString());var s=!1;for(n in t)t.hasOwnProperty(n)&&(s?l.push(",\n"):l.push("\n{"),s=!0,l.push(n),l.push(": \n"),e(t[n]));return s&&l.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return l.push("...Large Array..."),!0;for(s=!1,l.push("["),n=0;n<t.length;n++)0<n&&(l.push(","),s&&l.push("\n ")),s=e(t[n]);return l.push("]"),!0}l.push("{");s=!1;for(n in t)t.hasOwnProperty(n)&&(s&&l.push(",\n"),s=!0,l.push(n),l.push(": \n"),e(t[n]));return l.push("}"),!0}(e),l.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseCSV=function(e){var t,n,r,a=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=0;for(n=0;n<a.length;n++){var u,c=(a[n]+",").match(o);if(0<c.length){for(i[l]=[],t=0;t<c.length;t++)u=(r=c[t]).substr(0,r.length-1),s.test(u)?i[l][t]=parseFloat(u):i[l][t]=u;l++}}return i},numeric.toCSV=function(e){var t,n,r,a,i,o=numeric.dim(e);for(r=o[0],o[1],i=[],t=0;t<r;t++){for(a=[],n=0;n<r;n++)a[n]=e[t][n].toString();i[t]=a.join(", ")}return i.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);var r,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],i=-1;e.length;for(r=t;r<n;r++)i=i>>>8^a[255&(i^e[r])];return-1^i}var n,r,a,i,o,s,l,u,c,d,f=e[0].length,h=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,h>>24&255,h>>16&255,h>>8&255,255&h,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=t(p,12,29),p[29]=d>>24&255,p[30]=d>>16&255,p[31]=d>>8&255,p[32]=255&d,n=1,l=r=0;l<f;l++){for(l<f-1?p.push(0):p.push(1),o=3*h+1+(0===l)&255,s=3*h+1+(0===l)>>8&255,p.push(o),p.push(s),p.push(255&~o),p.push(255&~s),0===l&&p.push(0),u=0;u<h;u++)for(a=0;a<3;a++)r=(r+(n=(n+(o=255<(o=e[a][l][u])?255:o<0?0:Math.round(o)))%65521))%65521,p.push(o);p.push(0)}return c=(r<<16)+n,p.push(c>>24&255),p.push(c>>16&255),p.push(c>>8&255),p.push(255&c),i=p.length-41,p[33]=i>>24&255,p[34]=i>>16&255,p[35]=i>>8&255,p[36]=255&i,d=t(p,37),p.push(d>>24&255),p.push(d>>16&255),p.push(d>>8&255),p.push(255&d),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,n,r,a,i,o,s,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<l;t+=3)i=((3&(n=e[t]))<<4)+((r=e[t+1])>>4),o=((15&r)<<2)+((a=e[t+2])>>6),s=63&a,l<=t+1?o=s=64:l<=t+2&&(s=64),c+=u.charAt(n>>2)+u.charAt(i)+u.charAt(o)+u.charAt(s);return c}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,a;if(!(t instanceof Array&&n instanceof Array))return!1;if((a=t.length)!==n.length)return!1;for(r=0;r<a;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){void 0===n&&(n=0);var r,a=e[n],i=Array(a);if(n===e.length-1){for(r=a-2;0<=r;r-=2)i[r+1]=t,i[r]=t;return-1===r&&(i[0]=t),i}for(r=a-1;0<=r;r--)i[r]=numeric.rep(e,t,n+1);return i},numeric.dotMMsmall=function(e,t){var n,r,a,i,o,s,l,u,c,d,f;for(i=e.length,o=t.length,s=t[0].length,l=Array(i),n=i-1;0<=n;n--){for(u=Array(s),c=e[n],a=s-1;0<=a;a--){for(d=c[o-1]*t[o-1][a],r=o-2;1<=r;r-=2)f=r-1,d+=c[r]*t[r][a]+c[f]*t[f][a];0===r&&(d+=c[0]*t[0][a]),u[a]=d}l[n]=u}return l},numeric._getCol=function(e,t,n){var r;for(r=e.length-1;0<r;--r)n[r]=e[r][t],n[--r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,a,i=numeric._getCol,o=t.length,s=Array(o),l=e.length,u=t[0].length,c=new Array(l),d=numeric.dotVV;for(--o,r=--l;-1!==r;--r)c[r]=Array(u);for(r=--u;-1!==r;--r)for(i(t,r,s),a=l;-1!==a;--a)0,n=e[a],c[a][r]=d(n,s);return c},numeric.dotMV=function(e,t){var n,r=e.length,a=(t.length,Array(r)),i=numeric.dotVV;for(n=r-1;0<=n;n--)a[n]=i(e[n],t);return a},numeric.dotVM=function(e,t){var n,r,a,i,o,s,l;for(a=e.length,i=t[0].length,o=Array(i),r=i-1;0<=r;r--){for(s=e[a-1]*t[a-1][r],n=a-2;1<=n;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),o[r]=s}return o},numeric.dotVV=function(e,t){var n,r,a=e.length,i=e[a-1]*t[a-1];for(n=a-2;1<=n;n-=2)r=n-1,i+=e[n]*t[n]+e[r]*t[r];return 0===n&&(i+=e[0]*t[0]),i},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,a,i=e.length,o=Array(i);for(t=i-1;0<=t;t--){for(a=Array(i),n=t+2,r=i-1;n<=r;r-=2)a[r]=0,a[r-1]=0;for(t<r&&(a[r]=0),a[t]=e[t],r=t-1;1<=r;r-=2)a[r]=0,a[r-1]=0;0===r&&(a[0]=0),o[t]=a}return o},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;1<=t;--t)r[t]=e[t][t],r[--t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){void 0===n&&(n="");var r,a,i=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=a=e[r].substring(0,e[r].length-3):a=e[r],"ret"===a&&(l=!0),i.push(a);return i[e.length]="_s",i[e.length+1]="_k",i[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric.pointwise2=function(e,t,n){void 0===n&&(n="");var r,a,i=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=a=e[r].substring(0,e[r].length-3):a=e[r],"ret"===a&&(l=!0),i.push(a);return i[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric._biforeach=function e(t,n,r,a,i){var o;if(a!==r.length-1)for(o=r[a]-1;0<=o;o--)e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,a+1,i);else i(t,n)},numeric._biforeach2=function e(t,n,r,a,i){if(a===r.length-1)return i(t,n);var o,s=r[a],l=Array(s);for(o=s-1;0<=o;--o)l[o]=e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,a+1,i);return l},numeric._foreach=function e(t,n,r,a){var i;if(r!==n.length-1)for(i=n[r]-1;0<=i;i--)e(t[i],n,r+1,a);else a(t)},numeric._foreach2=function e(t,n,r,a){if(r===n.length-1)return a(t);var i,o=n[r],s=Array(o);for(i=o-1;0<=i;i--)s[i]=e(t[i],n,r+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,r;for(e=0;e<numeric.mathfuns2.length;++e)r=numeric.mathfuns2[e],numeric.ops2[r]=r;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){r=numeric.ops2[e];var t,n,a="";n=-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(a="var "+r+" = Math."+r+";\n",t=function(e,t,n){return e+" = "+r+"("+t+","+n+")"},function(e,t){return e+" = "+r+"("+e+","+t+")"}):(t=function(e,t,n){return e+" = "+t+" "+r+" "+n},numeric.opseq.hasOwnProperty(e+"eq")?function(e,t){return e+" "+r+"= "+t}:function(e,t){return e+" = "+e+" "+r+" "+t}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],t("ret[i]","x[i]","y[i]"),a),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],t("ret[i]","x","y[i]"),a),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],t("ret[i]","x[i]","y"),a),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+n("x","y")+"\n}\nreturn x;\n"),numeric[r]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),a),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),a),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)r=numeric.mathfuns2[e],delete numeric.ops2[r];for(e=0;e<numeric.mathfuns.length;++e)r=numeric.mathfuns[e],numeric.ops1[r]=r;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(a="",r=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(r)&&(a="var "+r+" = Math."+r+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+r+"(ret[i]);",a),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+r+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+r+"(x[i]);",a),numeric[e]=Function("x",'if(typeof x !== "object") return '+r+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)r=numeric.mathfuns[e],delete numeric.ops1[r];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(r=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(r[0],r[1]),numeric[e]=Function("x","s","k",r[1]+'if(typeof x !== "object") {    xi = x;\n'+r[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+r[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,a,i,o,s,l=numeric.dim(e),u=Math.abs,c=l[0],d=l[1],f=numeric.clone(e),h=numeric.identity(c);for(o=0;o<d;++o){var p=-1,g=-1;for(i=o;i!==c;++i)g<(s=u(f[i][o]))&&(p=i,g=s);for(n=f[p],f[p]=f[o],f[o]=n,a=h[p],h[p]=h[o],h[o]=a,e=n[o],s=o;s!==d;++s)n[s]/=e;for(s=d-1;-1!==s;--s)a[s]/=e;for(i=c-1;-1!==i;--i)if(i!==o){for(t=f[i],r=h[i],e=t[o],s=o+1;s!==d;++s)t[s]-=n[s]*e;for(s=d-1;0<s;--s)r[s]-=a[s]*e,r[--s]-=a[s]*e;0===s&&(r[0]-=a[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,a,i,o,s,l,u,c=t[0],d=1,f=numeric.clone(e);for(r=0;r<c-1;r++){for(n=(a=r)+1;n<c;n++)Math.abs(f[n][r])>Math.abs(f[a][r])&&(a=n);for(a!==r&&(l=f[a],f[a]=f[r],f[r]=l,d*=-1),i=f[r],n=r+1;n<c;n++){for(s=(o=f[n])[r]/i[r],a=r+1;a<c-1;a+=2)u=a+1,o[a]-=i[a]*s,o[u]-=i[u]*s;a!==c&&(o[a]-=i[a]*s)}if(0===i[r])return 0;d*=i[r]}return d*f[r][r]},numeric.transpose=function(e){var t,n,r,a,i,o=e.length,s=e[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(o);for(t=o-1;1<=t;t-=2){for(a=e[t],r=e[t-1],n=s-1;1<=n;--n)(i=l[n])[t]=a[n],i[t-1]=r[n],(i=l[--n])[t]=a[n],i[t-1]=r[n];0===n&&((i=l[0])[t]=a[0],i[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;1<=n;--n)l[n][0]=r[n],l[--n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,a,i,o=e.length,s=e[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(o);for(t=o-1;1<=t;t-=2){for(a=e[t],r=e[t-1],n=s-1;1<=n;--n)(i=l[n])[t]=-a[n],i[t-1]=-r[n],(i=l[--n])[t]=-a[n],i[t-1]=-r[n];0===n&&((i=l[0])[t]=-a[0],i[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;1<=n;--n)l[n][0]=-r[n],l[--n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function e(t,n){var r,a,i=t[n],o=Array(i);if(n===t.length-1){for(a=Math.random,r=i-1;1<=r;r-=2)o[r]=a(),o[r-1]=a();return 0===r&&(o[0]=a()),o}for(r=i-1;0<=r;r--)o[r]=e(t,n+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,a=Array(n);for(r=--n;0<=r;r--)a[r]=(r*t+(n-r)*e)/n;return a},numeric.getBlock=function(e,s,l){var u=numeric.dim(e);return function e(t,n){var r,a=s[n],i=l[n]-a,o=Array(i);if(n===u.length-1){for(r=i;0<=r;r--)o[r]=t[r+a];return o}for(r=i;0<=r;r--)o[r]=e(t[r+a],n+1);return o}(e,0)},numeric.setBlock=function(e,s,l,t){var u=numeric.dim(e);return function e(t,n,r){var a,i=s[r],o=l[r]-i;if(r===u.length-1)for(a=o;0<=a;a--)t[a+i]=n[a];for(a=o;0<=a;a--)e(t[a+i],n[a],r+1)}(e,t,0),e},numeric.getRange=function(e,t,n){var r,a,i,o,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),i=u[r],o=e[t[r]],a=l-1;-1!==a;--a)i[a]=o[n[a]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,a,i,o,s=t[0],l=t[1];for(a=r=n=0;a<s;++a)n+=e[a][0].length;for(i=0;i<l;++i)r+=e[0][i][0].length;var u=Array(n);for(a=0;a<n;++a)u[a]=Array(r);var c,d,f,h,p,g=0;for(a=0;a<s;++a){for(c=r,i=l-1;-1!==i;--i)for(c-=(o=e[a][i])[0].length,f=o.length-1;-1!==f;--f)for(p=o[f],d=u[g+f],h=p.length-1;-1!==h;--h)d[c+h]=p[h];g+=e[a][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var a,i,o,s,l=n[0],u=r[0],c=Array(l);for(i=l-1;0<=i;i--){for(a=Array(u),s=e[i],o=u-1;3<=o;--o)a[o]=s*t[o],a[--o]=s*t[o],a[--o]=s*t[o],a[--o]=s*t[o];for(;0<=o;)a[o]=s*t[o],--o;c[i]=a}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,a){var i;numeric.indexOf;if("string"!=typeof a)for(i in a="",numeric)numeric.hasOwnProperty(i)&&(0<=e.indexOf(i)||0<=t.indexOf(i)||0<=n.indexOf(i)||0<=r.indexOf(i))&&1<i.length&&(a+="var "+i+" = numeric."+i+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){if(void 0===this.y)return new numeric.T(numeric.inv(this.x));var e,t,n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y=this.x.length,x=numeric.identity(y),b=numeric.rep([y,y],0),j=numeric.clone(this.x),w=numeric.clone(this.y);for(l=0;l<y;l++){for(d=(h=j[l][l])*h+(p=w[l][l])*p,u=(c=l)+1;u<y;u++)d<(f=(h=j[u][l])*h+(p=w[u][l])*p)&&(c=u,d=f);for(c!==l&&(m=j[l],j[l]=j[c],j[c]=m,m=w[l],w[l]=w[c],w[c]=m,m=x[l],x[l]=x[c],x[c]=m,m=b[l],b[l]=b[c],b[c]=m),e=j[l],t=w[l],a=x[l],i=b[l],h=e[l],p=t[l],u=l+1;u<y;u++)g=e[u],v=t[u],e[u]=(g*h+v*p)/d,t[u]=(v*h-g*p)/d;for(u=0;u<y;u++)g=a[u],v=i[u],a[u]=(g*h+v*p)/d,i[u]=(v*h-g*p)/d;for(u=l+1;u<y;u++){for(n=j[u],r=w[u],o=x[u],s=b[u],h=n[l],p=r[l],c=l+1;c<y;c++)g=e[c],v=t[c],n[c]-=g*h-v*p,r[c]-=v*h+g*p;for(c=0;c<y;c++)g=a[c],v=i[c],o[c]-=g*h-v*p,s[c]-=v*h+g*p}}for(l=y-1;0<l;l--)for(a=x[l],i=b[l],u=l-1;0<=u;u--)for(o=x[u],s=b[u],h=j[u][l],p=w[u][l],c=y-1;0<=c;c--)g=a[c],v=i[c],o[c]-=h*g-p*v,s[c]-=h*v+p*g;return new numeric.T(x,b)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,a=0,i=e.length;if(r){for(;a<i;)n=n[t=e[a]],r=r[t],a++;return new numeric.T(n,r)}for(;a<i;)n=n[t=e[a]],a++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,a=this.y,i=0,o=e.length,s=t.x,l=t.y;if(0===o)return l?this.y=l:a&&(this.y=void 0),this.x=r,this;if(l){for(a||(a=numeric.rep(numeric.dim(r),0),this.y=a);i<o-1;)r=r[n=e[i]],a=a[n],i++;return r[n=e[i]]=s,a[n]=l,this}if(a){for(;i<o-1;)r=r[n=e[i]],a=a[n],i++;return(r[n=e[i]]=s)instanceof Array?a[n]=numeric.rep(numeric.dim(s),0):a[n]=0,this}for(;i<o-1;)r=r[n=e[i]],i++;return r[n=e[i]]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,a=t-e+1,i=Array(a),o=this.x,s=this.y;for(n=e;n<=t;n++)i[n-e]=o[n];if(s){for(r=Array(a),n=e;n<=t;n++)r[n-e]=s[n];return new numeric.T(i,r)}return new numeric.T(i)},numeric.T.prototype.setRows=function(e,t,n){var r,a=this.x,i=this.y,o=n.x,s=n.y;for(r=e;r<=t;r++)a[r]=o[r-e];if(s)for(i||(i=numeric.rep(numeric.dim(a),0),this.y=i),r=e;r<=t;r++)i[r]=s[r-e];else if(i)for(r=e;r<=t;r++)i[r]=numeric.rep([o[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,a=t.x,i=t.y;return n[e]=a,i?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=i):r=r&&numeric.rep([a.length],0),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,a=numeric.getBlock;return r?new numeric.T(a(n,e,t),a(r,e,t)):new numeric.T(a(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,a=this.y,i=numeric.setBlock,o=n.x,s=n.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),i(r,e,t,o),i(a,e,t,s),this;i(r,e,t,o),a&&i(a,e,t,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,a=t.y,i=numeric.rep;return a?new n(i(e,r),i(e,a)):new n(i(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,r=numeric.diag;return n?new numeric.T(r(t),r(n)):new numeric.T(r(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=(0<=e[0]?1:-1)*numeric.norm2(e);t[0]+=n;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,a,i,o,s,l,u,c,d,f=t[0],h=numeric.clone(e),p=numeric.identity(f);for(r=0;r<f-2;r++){for(i=Array(f-r-1),n=r+1;n<f;n++)i[n-r-1]=h[n][r];if(0<numeric.norm2(i)){for(o=numeric.house(i),s=numeric.getBlock(h,[r+1,r],[f-1,f-1]),l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<f;n++)for(u=h[n],c=l[n-r-1],a=r;a<f;a++)u[a]-=2*c[a-r];for(s=numeric.getBlock(h,[0,r+1],[f-1,f-1]),l=numeric.tensor(numeric.dot(s,o),o),n=0;n<f;n++)for(u=h[n],c=l[n],a=r+1;a<f;a++)u[a]-=2*c[a-r-1];for(s=Array(f-r-1),n=r+1;n<f;n++)s[n-r-1]=p[n];for(l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<f;n++)for(d=p[n],c=l[n-r-1],a=0;a<f;a++)d[a]-=2*c[a]}}return{H:h,Q:p}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b=numeric.dim(e)[0],j=numeric.identity(b);if(b<3)return{Q:j,B:[[0,b-1]]};var w=numeric.epsilon;for(x=0;x<t;x++){for(m=0;m<b-1;m++)if(Math.abs(e[m+1][m])<w*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var _=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),k=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[b-1,b-1]),t);for(h=Array(m+1),v=0;v<=m;v++)h[v]=j[v];for(p=numeric.dot(_.Q,h),v=0;v<=m;v++)j[v]=p[v];for(h=Array(b-m-1),v=m+1;v<b;v++)h[v-m-1]=j[v];for(p=numeric.dot(k.Q,h),v=m+1;v<b;v++)j[v]=p[v-m-1];return{Q:j,B:_.B.concat(numeric.add(k.B,m+1))}}var z,M,A;if(a=e[b-2][b-2],i=e[b-2][b-1],o=e[b-1][b-2],u=a+(s=e[b-1][b-1]),l=a*s-i*o,c=numeric.getBlock(e,[0,0],[2,2]),4*l<=u*u)z=.5*(u+Math.sqrt(u*u-4*l)),M=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+M)),numeric.diag(numeric.rep([3],z*M)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),h=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;v<3;v++)for(f=e[v],g=p[v],y=0;y<b;y++)f[y]-=2*g[y];for(h=numeric.getBlock(e,[0,0],[b-1,2]),p=numeric.tensor(numeric.dot(h,r),r),v=0;v<b;v++)for(f=e[v],g=p[v],y=0;y<3;y++)f[y]-=2*g[y];for(h=[j[0],j[1],j[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;v<3;v++)for(d=j[v],g=p[v],y=0;y<b;y++)d[y]-=2*g[y];for(m=0;m<b-2;m++){for(y=m;y<=m+1;y++)if(Math.abs(e[y+1][y])<w*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){_=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),k=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[b-1,b-1]),t);for(h=Array(y+1),v=0;v<=y;v++)h[v]=j[v];for(p=numeric.dot(_.Q,h),v=0;v<=y;v++)j[v]=p[v];for(h=Array(b-y-1),v=y+1;v<b;v++)h[v-y-1]=j[v];for(p=numeric.dot(k.Q,h),v=y+1;v<b;v++)j[v]=p[v-y-1];return{Q:j,B:_.B.concat(numeric.add(k.B,y+1))}}for(A=Math.min(b-1,m+3),n=Array(A-m),v=m+1;v<=A;v++)n[v-m-1]=e[v][m];for(r=numeric.house(n),h=numeric.getBlock(e,[m+1,m],[A,b-1]),p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;v<=A;v++)for(f=e[v],g=p[v-m-1],y=m;y<b;y++)f[y]-=2*g[y-m];for(h=numeric.getBlock(e,[0,m+1],[b-1,A]),p=numeric.tensor(numeric.dot(h,r),r),v=0;v<b;v++)for(f=e[v],g=p[v],y=m+1;y<=A;y++)f[y]-=2*g[y-m-1];for(h=Array(A-m),v=m+1;v<=A;v++)h[v-m-1]=j[v];for(p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;v<=A;v++)for(d=j[v],g=p[v-m-1],y=0;y<b;y++)d[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(y.H,t),b=numeric.T,j=e.length,w=x.B,_=numeric.dot(x.Q,numeric.dot(y.H,numeric.transpose(x.Q))),k=new b(numeric.dot(x.Q,y.Q)),z=w.length,M=Math.sqrt;for(r=0;r<z;r++)if((n=w[r][0])===w[r][1]);else{if(i=n+1,o=_[n][n],s=_[n][i],l=_[i][n],u=_[i][i],0===s&&0===l)continue;a=0<=(d=(c=-o-u)*c-4*(o*u-s*l))?new b([[g=(m=l*l+(u-(f=c<0?-.5*(c-M(d)):-.5*(c+M(d))))*(u-f))<(v=(o-f)*(o-f)+s*s)?(p=(o-f)/(v=M(v)),s/v):(p=l/(m=M(m)),(u-f)/m),-p],[p,g]]):(f=-.5*c,h=.5*M(-d),(m=l*l+(u-f)*(u-f))<(v=(o-f)*(o-f)+s*s)?(p=(o-f)/(v=M(v+h*h)),g=s/v,f=0,h/=v):(p=l/(m=M(m+h*h)),g=(u-f)/m,f=h/m,h=0),new b([[g,-p],[p,g]],[[f,h],[h,-f]])),k.setRows(n,i,a.dot(k.getRows(n,i)))}var A=k.dot(e).dot(k.transjugate()),E=(j=e.length,numeric.T.identity(j));for(i=0;i<j;i++)if(0<i)for(r=i-1;0<=r;r--){var S=A.get([r,r]),O=A.get([i,i]);numeric.neq(S.x,O.x)||numeric.neq(S.y,O.y)?(f=A.getRow(r).getBlock([r],[i-1]),h=E.getRow(i).getBlock([r],[i-1]),E.set([i,r],A.get([r,i]).neg().sub(f.dot(h)).div(S.sub(O)))):E.setRow(i,E.getRow(r))}for(i=0;i<j;i++)f=E.getRow(i),E.setRow(i,f.div(f.norm2()));return E=E.transpose(),E=k.transjugate().dot(E),{lambda:A.getDiag(),E:E}},numeric.ccsSparse=function(e){var t,n,r,a=e.length,i=[];for(n=a-1;-1!==n;--n)for(r in t=e[n]){for(r=parseInt(r);r>=i.length;)i[i.length]=0;0!==t[r]&&i[r]++}var o=i.length,s=Array(o+1);for(n=s[0]=0;n<o;++n)s[n+1]=s[n]+i[n];var l=Array(s[o]),u=Array(s[o]);for(n=a-1;-1!==n;--n)for(r in t=e[n])0!==t[r]&&(i[r]--,l[s[r]+i[r]]=n,u[s[r]+i[r]]=t[r]);return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,a,i=e[0],o=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],d=numeric.rep([u,c],0);for(t=0;t<c;t++)for(r=i[t],a=i[t+1],n=r;n<a;++n)d[o[n]][t]=s[n];return d},numeric.ccsTSolve=function(e,t,n,r,a){var i,o,s,l,u,c,d,f=e[0],h=e[1],p=e[2],g=f.length-1,v=Math.max,m=0;function y(e){var t;if(0===n[e]){for(n[e]=1,t=f[e];t<f[e+1];++t)y(h[t]);a[m]=e,++m}}for(void 0===r&&(n=numeric.rep([g],0)),void 0===r&&(r=numeric.linspace(0,n.length-1)),void 0===a&&(a=[]),i=r.length-1;-1!==i;--i)y(r[i]);for(a.length=m,i=a.length-1;-1!==i;--i)n[a[i]]=0;for(i=r.length-1;-1!==i;--i)o=r[i],n[o]=t[o];for(i=a.length-1;-1!==i;--i){for(o=a[i],s=f[o],l=v(f[o+1],s),u=s;u!==l;++u)if(h[u]===o){n[o]/=p[u];break}for(d=n[o],u=s;u!==l;++u)(c=h[u])!==o&&(n[c]-=d*p[u])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,a,i){var o,s,l,u=0,c=a.length,d=this.k,f=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,d[0]=s=t[e],f[0]=l=t[e+1];;)if(l<=s){if(a[c]=h[u],0===u)return;++c,s=d[--u],l=f[u]}else 0===r[o=i[n[s]]]?(r[o]=1,d[u]=s,s=t[h[++u]=o],f[u]=l=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,a,i,o){var s,l,u,c,d,f,h,p,g,v=e[0],m=e[1],y=e[2],x=(v.length,t[0]),b=t[1],j=t[2];for(l=x[a],u=x[a+1],r.length=0,s=l;s<u;++s)o.dfs(i[b[s]],v,m,n,r,i);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)n[c=i[b[s]]]=j[s];for(s=r.length-1;-1!==s;--s){for(d=v[c=r[s]],f=v[c+1],h=d;h<f;++h)if(i[m[h]]===c){n[c]/=y[h];break}for(g=n[c],h=d;h<f;++h)(p=i[m[h]])!==c&&(n[p]-=g*y[h])}return n},numeric.ccsLUP1=function(e,t){var n,r,a,i,o,s,l,u=e[0].length-1,c=[numeric.rep([1+u],0),[],[]],d=[numeric.rep([1+u],0),[],[]],f=c[0],h=c[1],p=c[2],g=d[0],v=d[1],m=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,j=(Math.max,Math.abs),w=numeric.linspace(0,u-1),_=numeric.linspace(0,u-1),k=new numeric.ccsDFS(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(b(c,e,y,x,n,_,k),o=i=-1,r=x.length-1;-1!==r;--r)(a=x[r])<=n||i<(s=j(y[a]))&&(o=a,i=s);for(j(y[n])<t*i&&(r=w[n],i=w[o],_[w[n]=i]=n,_[w[o]=r]=o,i=y[n],y[n]=y[o],y[o]=i),i=f[n],o=g[n],l=y[n],h[i]=w[n],p[i]=1,++i,r=x.length-1;-1!==r;--r)s=y[a=x[r]],x[r]=0,y[a]=0,a<=n?(v[o]=a,m[o]=s,++o):(h[i]=w[a],p[i]=s/l,++i);f[n+1]=i,g[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=_[h[r]];return{L:c,U:d,P:w,Pinv:_}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,a,i,o){var s,l,u,c=0,d=a.length,f=this.k,h=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,f[0]=l=t[i[e]],h[0]=u=t[i[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(u<=l){if(a[d]=i[p[c]],0===c)return;++d,l=f[--c],u=h[c]}else 0===r[s=n[l]]?(r[s]=1,f[c]=l,l=t[s=i[p[++c]=s]],h[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,a,i,o,s){var l,u,c,d,f,h,p,g,v,m=e[0],y=e[1],x=e[2],b=(m.length,t[0]),j=t[1],w=t[2];for(u=b[a],c=b[a+1],r.length=0,l=u;l<c;++l)s.dfs(j[l],m,y,n,r,i,o);for(l=r.length-1;-1!==l;--l)n[o[d=r[l]]]=0;for(l=u;l!==c;++l)n[d=j[l]]=w[l];for(l=r.length-1;-1!==l;--l){for(g=o[d=r[l]],f=m[d],h=m[d+1],p=f;p<h;++p)if(y[p]===g){n[g]/=x[p];break}for(v=n[g],p=f;p<h;++p)n[y[p]]-=v*x[p];n[g]=v}},numeric.ccsLUP0=function(e,t){var n,r,a,i,o,s,l,u=e[0].length-1,c=[numeric.rep([1+u],0),[],[]],d=[numeric.rep([1+u],0),[],[]],f=c[0],h=c[1],p=c[2],g=d[0],v=d[1],m=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,j=(Math.max,Math.abs),w=numeric.linspace(0,u-1),_=numeric.linspace(0,u-1),k=new numeric.ccsDFS0(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(b(c,e,y,x,n,_,w,k),o=i=-1,r=x.length-1;-1!==r;--r)(a=x[r])<=n||i<(s=j(y[w[a]]))&&(o=a,i=s);for(j(y[w[n]])<t*i&&(r=w[n],i=w[o],_[w[n]=i]=n,_[w[o]=r]=o),i=f[n],o=g[n],l=y[w[n]],h[i]=w[n],p[i]=1,++i,r=x.length-1;-1!==r;--r)s=y[w[a=x[r]]],x[r]=0,y[w[a]]=0,a<=n?(v[o]=a,m[o]=s,++o):(h[i]=w[a],p[i]=s/l,++i);f[n+1]=i,g[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=_[h[r]];return{L:c,U:d,P:w,Pinv:_}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),a=r[0],i=r[1];void 0===t?t=numeric.linspace(0,a-1):"number"==typeof t&&(t=[t]),void 0===n?n=numeric.linspace(0,i-1):"number"==typeof n&&(n=[n]);var o,s,l,u,c=t.length,d=n.length,f=numeric.rep([i],0),h=[],p=[],g=[f,h,p],v=e[0],m=e[1],y=e[2],x=numeric.rep([a],0),b=0,j=numeric.rep([a],0);for(s=0;s<d;++s){var w=v[u=n[s]],_=v[u+1];for(o=w;o<_;++o)j[l=m[o]]=1,x[l]=y[o];for(o=0;o<c;++o)j[t[o]]&&(h[b]=o,p[b]=x[t[o]],++b);for(o=w;o<_;++o)j[l=m[o]]=0;f[s+1]=b}return g},numeric.ccsDot=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h=e[0],p=e[1],g=e[2],v=t[0],m=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),j=x[0],w=(x[1],b[1]),_=numeric.rep([j],0),k=numeric.rep([j],0),z=Array(j),M=numeric.rep([w],0),A=[],E=[],S=[M,A,E];for(a=0;a!==w;++a){for(i=v[a],o=v[a+1],c=0,r=i;r<o;++r)for(d=m[r],f=y[r],s=h[d],l=h[d+1],n=s;n<l;++n)0===k[u=p[n]]&&(c+=k[z[c]=u]=1),_[u]=_[u]+g[n]*f;for(o=(i=M[a])+c,M[a+1]=o,r=c-1;-1!==r;--r)f=i+r,n=z[r],A[f]=n,E[f]=_[n],k[n]=0,_[n]=0;M[a+1]=M[a]+c}return S},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,a=(e.P,t[0]),i=!1;"object"!=typeof a&&(a=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],i=!0);var o,s,l,u,c,d,f=t[1],h=t[2],p=n[0].length-1,g=a.length-1,v=numeric.rep([p],0),m=Array(p),y=numeric.rep([p],0),x=Array(p),b=numeric.rep([1+g],0),j=[],w=[],_=numeric.ccsTSolve,k=0;for(o=0;o<g;++o){for(c=0,l=a[o],u=a[o+1],s=l;s<u;++s)d=e.Pinv[f[s]],y[x[c]=d]=h[s],++c;for(x.length=c,_(n,y,v,x,m),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(_(r,v,y,m,x),i)return y;for(s=m.length-1;-1!==s;--s)v[m[s]]=0;for(s=x.length-1;-1!==s;--s)d=x[s],j[k]=d,w[k]=y[d],y[d]=0,++k;b[o+1]=k}return[b,j,w]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],a=e[2],i=numeric.sup(r)+1,o=n.length,s=numeric.rep([i],0),l=Array(o),u=Array(o),c=numeric.rep([i],0);for(t=0;t<o;++t)c[r[t]]++;for(t=0;t<i;++t)s[t+1]=s[t]+c[t];var d,f,h=s.slice(0);for(t=0;t<o;++t)l[d=h[f=r[t]]]=n[t],u[d]=a[t],h[f]=h[f]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,a,i,o=e[0],s=e[1],l=e[2],u=o.length-1,c=s.length,d=Array(c),f=Array(c),h=Array(c);for(t=i=0;t<u;++t)for(r=o[t],a=o[t+1],n=r;n!==a;++n)f[i]=t,d[i]=s[n],h[i]=l[n],++i;return[d,f,h]},numeric.sdim=function e(t,n,r){if(void 0===n&&(n=[]),"object"!=typeof t)return n;var a;for(a in void 0===r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length),t)t.hasOwnProperty(a)&&e(t[a],n,r+1);return n},numeric.sclone=function e(t,n,r){void 0===n&&(n=0),void 0===r&&(r=numeric.sdim(t).length);var a,i=Array(t.length);if(n===r-1){for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return i}for(a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],n+1,r));return i},numeric.sdiag=function(e){var t,n,r=e.length,a=Array(r);for(t=r-1;1<=t;t-=2)n=t-1,a[t]=[],a[t][t]=e[t],a[n]=[],a[n][n]=e[n];return 0===t&&(a[0]=[],a[0][0]=e[t]),a},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,a=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(n in r=e[t])r.hasOwnProperty(n)&&("object"!=typeof a[n]&&(a[n]=[]),a[n][t]=r[n]);return a},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,a,i,o,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),d=c.length,f=Array(u);for(a=u-1;0<=a;a--){for(l=[],n=e[a],o=d-1;0<=o;o--){for(i in s=0,r=c[o],n)n.hasOwnProperty(i)&&i in r&&(s+=n[i]*r[i]);s&&(l[o]=s)}f[a]=l}return f},numeric.sdotMV=function(e,t){var n,r,a,i,o=e.length,s=Array(o);for(r=o-1;0<=r;r--){for(a in i=0,n=e[r])n.hasOwnProperty(a)&&t[a]&&(i+=n[a]*t[a]);i&&(s[r]=i)}return s},numeric.sdotVM=function(e,t){var n,r,a,i,o=[];for(n in e)if(e.hasOwnProperty(n))for(r in a=t[n],i=e[n],a)a.hasOwnProperty(r)&&(o[r]||(o[r]=0),o[r]+=i*a[r]);return o},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length;switch(1e3*n+r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,a,i=e[0].length,o=e.length,s=[];for(n=i-1;0<=n;--n)if(e[o-1][n]){for(a=s,r=0;r<o-2;r++)a[t=e[r][n]]||(a[t]=[]),a=a[t];a[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function e(t,n,r){var a,i,o;for(i in void 0===n&&(n=[]),void 0===r&&(r=[]),a=r.length,t)if(t.hasOwnProperty(i))if(r[a]=parseInt(i),"number"==typeof(o=t[i])){if(o){if(0===n.length)for(i=a+1;0<=i;--i)n[i]=[];for(i=a;0<=i;--i)n[i].push(r[i]);n[a+1].push(o)}}else e(o,n,r);return r.length>a&&r.pop(),n},numeric.cLU=function(e){var t,n,r,a,i,o,s=e[0],l=e[1],u=e[2],c=s.length,d=0;for(t=0;t<c;t++)s[t]>d&&(d=s[t]);d++;var f,h=Array(d),p=Array(d),g=numeric.rep([d],1/0),v=numeric.rep([d],-1/0);for(r=0;r<c;r++)t=s[r],(n=l[r])<g[t]&&(g[t]=n),n>v[t]&&(v[t]=n);for(t=0;t<d-1;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=d-1;1<=t;t--)g[t]<g[t-1]&&(g[t-1]=g[t]);for(t=0;t<d;t++)p[t]=numeric.rep([v[t]-g[t]+1],0),h[t]=numeric.rep([t-g[t]],0),t-g[t]+1,v[t]-t+1;for(r=0;r<c;r++)p[t=s[r]][l[r]-g[t]]=u[r];for(t=0;t<d-1;t++)for(a=t-g[t],x=p[t],n=t+1;g[n]<=t&&n<d;n++)if(i=t-g[n],o=v[t]-t,f=(b=p[n])[i]/x[a]){for(r=1;r<=o;r++)b[r+i]-=f*x[r+a];h[n][t-g[n]]=f}var m,y,x=[],b=[],j=[],w=[],_=[],k=[];for(t=m=c=0;t<d;t++){for(a=g[t],i=v[t],y=p[t],n=t;n<=i;n++)y[n-a]&&(x[c]=t,b[c]=n,j[c]=y[n-a],c++);for(y=h[t],n=a;n<t;n++)y[n-a]&&(w[m]=t,_[m]=n,k[m]=y[n-a],m++);w[m]=t,_[m]=t,k[m]=1,m++}return{U:[x,b,j],L:[w,_,k]}},numeric.cLUsolve=function(e,t){var n,r,a=e.L,i=e.U,o=numeric.clone(t),s=a[0],l=a[1],u=a[2],c=i[0],d=i[1],f=i[2],h=c.length,p=(s.length,o.length);for(n=r=0;n<p;n++){for(;l[r]<n;)o[n]-=u[r]*o[l[r]],r++;r++}for(r=h-1,n=p-1;0<=n;n--){for(;d[r]>n;)o[n]-=f[r]*o[d[r]],r--;o[n]/=f[r],r--}return o},numeric.cgrid=function(n,e){"number"==typeof n&&(n=[n,n]);var t,r,a,i=numeric.rep(n,-1);if("function"!=typeof e)switch(e){case"L":e=function(e,t){return e>=n[0]/2||t<n[1]/2};break;default:e=function(e,t){return!0}}for(a=0,t=1;t<n[0]-1;t++)for(r=1;r<n[1]-1;r++)e(t,r)&&(i[t][r]=a,a++);return i},numeric.cdelsq=function(e){var t,n,r,a,i,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],d=[],f=[];for(t=1;t<l-1;t++)for(n=1;n<u-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)a=t+o[r][0],i=n+o[r][1],e[a][i]<0||(c.push(e[t][n]),d.push(e[a][i]),f.push(-1));c.push(e[t][n]),d.push(e[t][n]),f.push(4)}return[c,d,f]},numeric.cdotMV=function(e,t){var n,r,a,i=e[0],o=e[1],s=e[2],l=i.length;for(r=a=0;r<l;r++)i[r]>a&&(a=i[r]);for(a++,n=numeric.rep([a],0),r=0;r<l;r++)n[i[r]]+=s[r]*t[o[r]];return n},numeric.Spline=function(e,t,n,r,a){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=a},numeric.Spline.prototype._at=function(e,t){var n,r,a,i=this.x,o=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,d=numeric.sub,f=numeric.mul;n=d(f(l[t],i[t+1]-i[t]),d(s[t+1],o[t])),r=c(f(u[t+1],i[t]-i[t+1]),d(s[t+1],o[t]));var h=(a=(e-i[t])/(i[t+1]-i[t]))*(1-a);return c(c(c(f(1-a,o[t]),f(a,s[t+1])),f(n,h*(1-a))),f(r,h*a))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,a=this.x,i=a.length,o=Math.floor;for(t=0,n=i-1;1<n-t;)a[r=o((t+n)/2)]<=e?t=r:n=r;return this._at(e,t)}i=e.length;var s,l=Array(i);for(s=i-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,a=this.yl,i=this.yr,o=this.kl,s=this.kr,l=a.length,u=o,c=s,d=Array(l),f=Array(l),h=numeric.add,p=numeric.mul,g=numeric.div,v=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=v(i[e+1],a[e]),d[e]=g(h(p(n,6),p(o[e],-4*t),p(s[e+1],-2*t)),t*t),f[e+1]=g(h(p(n,-6),p(o[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,d,f)},numeric.Spline.prototype.roots=function(){var e=[],t=this.x,n=this.yl,r=this.yr,a=this.kl,i=this.kr;"number"==typeof n[0]&&(n=[n],r=[r],a=[a],i=[i]);var o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O=n.length,C=t.length-1,N=(e=Array(O),Math.sqrt);for(o=0;o!==O;++o){for(u=n[o],c=r[o],d=a[o],f=i[o],h=[],s=0;s!==C;s++){for(0<s&&c[s]*u[s]<0&&h.push(t[s]),j=t[s+1]-t[s],t[s],v=u[s],m=c[s+1],p=d[s]/j,y=(g=f[s+1]/j)+3*v+2*p-3*m,x=3*(g+p+2*(v-m)),(b=(S=p-g+3*(v-m))*S+12*g*v)<=0?w=(_=y/x)>t[s]&&_<t[s+1]?[t[s],_,t[s+1]]:[t[s],t[s+1]]:(_=(y-N(b))/x,k=(y+N(b))/x,w=[t[s]],_>t[s]&&_<t[s+1]&&w.push(_),k>t[s]&&k<t[s+1]&&w.push(k),w.push(t[s+1])),M=w[0],_=this._at(M,s),l=0;l<w.length-1;l++)if(A=w[l+1],k=this._at(A,s),0!==_)if(0===k||0<_*k)M=A,_=k;else{for(var F=0;!((E=(_*A-k*M)/(_-k))<=M||A<=E);)if(0<(z=this._at(E,s))*k)A=E,k=z,-1===F&&(_*=.5),F=-1;else{if(!(0<z*_))break;M=E,_=z,1===F&&(k*=.5),F=1}h.push(E),M=w[l+1],_=this._at(M,s)}else h.push(M),M=A,_=k;0===k&&h.push(A)}e[o]=h}return"number"==typeof this.yl[0]?e[0]:e},numeric.spline=function(e,t,n,r){var a,i=e.length,o=[],s=[],l=[],u=numeric.sub,c=numeric.mul,d=numeric.add;for(a=i-2;0<=a;a--)s[a]=e[a+1]-e[a],l[a]=u(t[a+1],t[a]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var f=[[],[],[]];switch(typeof n){case"undefined":o[0]=c(3/(s[0]*s[0]),l[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":o[0]=d(c(3/(s[i-2]*s[i-2]),l[i-2]),c(3/(s[0]*s[0]),l[0])),f[0].push(0,0,0),f[1].push(i-2,0,1),f[2].push(1/s[i-2],2/s[i-2]+2/s[0],1/s[0]);break;default:o[0]=n,f[0].push(0),f[1].push(0),f[2].push(1)}for(a=1;a<i-1;a++)o[a]=d(c(3/(s[a-1]*s[a-1]),l[a-1]),c(3/(s[a]*s[a]),l[a])),f[0].push(a,a,a),f[1].push(a-1,a,a+1),f[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof r){case"undefined":o[i-1]=c(3/(s[i-2]*s[i-2]),l[i-2]),f[0].push(i-1,i-1),f[1].push(i-2,i-1),f[2].push(1/s[i-2],2/s[i-2]);break;case"string":f[1][f[1].length-1]=0;break;default:o[i-1]=r,f[0].push(i-1),f[1].push(i-1),f[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var h=Array(o.length);if("string"==typeof n)for(a=h.length-1;-1!==a;--a)h[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),o[a]),h[a][i-1]=h[a][0];else for(a=h.length-1;-1!==a;--a)h[a]=numeric.cLUsolve(numeric.cLU(f),o[a]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var a,i,o=Math.cos,s=Math.sin,l=Array(r/2),u=Array(r/2),c=Array(r/2),d=Array(r/2);for(i=r/2,a=r-1;-1!==a;--a)c[--i]=t[a],d[i]=n[a],--a,l[i]=t[a],u[i]=n[a];e(l,u),e(c,d),i=r/2;var f,h,p,g=-6.283185307179586/r;for(a=r-1;-1!==a;--a)-1===--i&&(i=r/2-1),h=o(f=g*a),p=s(f),t[a]=l[i]+h*c[i]-p*d[i],n[a]=u[i]+h*d[i]+p*c[i]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var a,i,o=Math.cos,s=Math.sin,l=Array(r/2),u=Array(r/2),c=Array(r/2),d=Array(r/2);for(i=r/2,a=r-1;-1!==a;--a)c[--i]=t[a],d[i]=n[a],--a,l[i]=t[a],u[i]=n[a];e(l,u),e(c,d),i=r/2;var f,h,p,g=6.283185307179586/r;for(a=r-1;-1!==a;--a)-1===--i&&(i=r/2-1),h=o(f=g*a),p=s(f),t[a]=l[i]+h*c[i]-p*d[i],n[a]=u[i]+h*d[i]+p*c[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){var a,i,o,s,l;for(numeric.fftpow2(e,t),numeric.fftpow2(n,r),a=e.length-1;-1!==a;--a)i=e[a],s=t[a],o=n[a],l=r[a],e[a]=i*o-s*l,t[a]=i*l+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,a=n.length,i=Math.log,o=i(2),s=Math.ceil(i(2*a-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,h=-3.141592653589793/a,p=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(a/2);for(e=0;e<a;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<a;e++)g[e]=r[e];for(e=u[0]=1;e<=l/2;e++)t=h*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),(v=v.mul(m)).x.length=a,v.y.length=a,v},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,a=n.length,i=Math.log,o=i(2),s=Math.ceil(i(2*a-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,h=3.141592653589793/a,p=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(a/2);for(e=0;e<a;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<a;e++)g[e]=r[e];for(e=u[0]=1;e<=l/2;e++)t=h*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),(v=v.mul(m)).x.length=a,v.y.length=a,v.div(a)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var a,i,o,s,l,u,c,d,f,h=Math.max,p=numeric.clone(t),g=Array(n),v=(numeric.div,numeric.sub,h=Math.max,Math.abs),m=Math.min,y=0;for(a=0;a<n;a++)for(var x=h(1e-6*r,1e-8);;){if(20<++y)throw new Error("Numerical gradient fails");if(p[a]=t[a]+x,i=e(p),p[a]=t[a]-x,o=e(p),p[a]=t[a],isNaN(i)||isNaN(o))x/=16;else{if(g[a]=(i-o)/(2*x),s=t[a]-x,l=t[a],u=t[a]+x,c=(i-r)/x,d=(r-o)/x,f=h(v(g[a]),v(r),v(i),v(o),v(s),v(l),v(u),1e-8),!(.001<m(h(v(c-g[a]),v(d-g[a]),v(c-d))/f,x/f)))break;x/=16}}return g},numeric.uncmin=function(t,e,n,r,a,i,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===n&&(n=1e-8),void 0===r&&(r=function(e){return s(t,e)}),void 0===a&&(a=1e3);var l,u,c=(e=numeric.clone(e)).length,d=t(e);if(isNaN(d))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,h=numeric.norm2;n=f(n,numeric.epsilon);var p,g,v,m,y,x,b,j,w,_,k=o.Hinv||numeric.identity(c),z=numeric.dot,M=(numeric.inv,numeric.sub),A=numeric.add,E=numeric.tensor,S=numeric.div,O=numeric.mul,C=numeric.all,N=numeric.isFinite,F=numeric.neg,T=0,q="";for(g=r(e);T<a;){if("function"==typeof i&&i(T,e,d,g,k)){q="Callback returned true";break}if(!C(N(g))){q="Gradient has Infinity or NaN";break}if(!C(N(p=F(z(k,g))))){q="Search direction has Infinity or NaN";break}if((_=h(p))<n){q="Newton step smaller than tol";break}for(w=1,u=z(g,p),y=e;T<a&&!(w*_<n)&&(y=A(e,m=O(p,w)),.1*w*u<=(l=t(y))-d||isNaN(l));)w*=.5,++T;if(w*_<n){q="Line search step size smaller than tol";break}if(T===a){q="maxit reached during line search";break}k=M(A(k,O(((j=z(x=M(v=r(y),g),m))+z(x,b=z(k,x)))/(j*j),E(m,m))),S(A(E(b,m),E(m,b)),j)),e=y,d=l,g=v,++T}return{solution:e,f:d,gradient:g,invHessian:k,iterations:T,message:q}},numeric.Dopri=function(e,t,n,r,a,i,o){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=a,this.events=o,this.message=i},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,a,i,o,s,l,u,c,d,f=this.x,h=this.y,p=this.f,g=this.ymid,v=(f.length,Math.floor,numeric.add),m=numeric.mul,y=numeric.sub;return r=f[t],a=f[t+1],o=h[t],s=h[t+1],i=r+.5*(a-r),l=g[t],u=y(p[t],m(o,1/(r-i)+2/(r-a))),c=y(p[t+1],m(s,1/(a-i)+2/(a-r))),v(v(v(v(m(o,(d=[n(e-a)*(e-i)/n(r-a)/(r-i),n(e-r)*n(e-a)/n(r-i)/n(a-i),n(e-r)*(e-i)/n(a-r)/(a-i),(e-r)*n(e-a)*(e-i)/n(r-a)/(r-i),(e-a)*n(e-r)*(e-i)/n(r-a)/(a-i)])[0]),m(l,d[1])),m(s,d[2])),m(u,d[3])),m(c,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,a=Math.floor;if("number"!=typeof e){var i=e.length,o=Array(i);for(t=i-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,n=s.length-1;1<n-t;)s[r=a(.5*(t+n))]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,a,i,o){void 0===a&&(a=1e-6),void 0===i&&(i=1e3);var s,l,u,c,d,f,h,p,g,v,m,y,x,b=[e],j=[n],w=[r(e,n)],_=[],k=[.075,.225],z=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],A=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],E=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],O=[.2,.3,.8,8/9,1,1],C=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],N=0,F=(t-e)/10,T=0,q=numeric.add,B=numeric.mul,P=(Math.max,Math.min),I=Math.abs,D=numeric.norminf,L=Math.pow,V=numeric.any,R=numeric.lt,U=numeric.and,H=(numeric.sub,new numeric.Dopri(b,j,w,_,-1,""));for("function"==typeof o&&(m=o(e,n));e<t&&T<i;){if(++T,t<e+F&&(F=t-e),s=r(e+O[0]*F,q(n,B(.2*F,w[N]))),l=r(e+O[1]*F,q(q(n,B(k[0]*F,w[N])),B(k[1]*F,s))),u=r(e+O[2]*F,q(q(q(n,B(z[0]*F,w[N])),B(z[1]*F,s)),B(z[2]*F,l))),c=r(e+O[3]*F,q(q(q(q(n,B(M[0]*F,w[N])),B(M[1]*F,s)),B(M[2]*F,l)),B(M[3]*F,u))),d=r(e+O[4]*F,q(q(q(q(q(n,B(A[0]*F,w[N])),B(A[1]*F,s)),B(A[2]*F,l)),B(A[3]*F,u)),B(A[4]*F,c))),f=r(e+F,g=q(q(q(q(q(n,B(w[N],F*E[0])),B(l,F*E[2])),B(u,F*E[3])),B(c,F*E[4])),B(d,F*E[5]))),a<(v="number"==typeof(h=q(q(q(q(q(B(w[N],F*C[0]),B(l,F*C[2])),B(u,F*C[3])),B(c,F*C[4])),B(d,F*C[5])),B(f,F*C[6])))?I(h):D(h))){if(e+(F=.2*F*L(a/v,.25))!==e)continue;H.msg="Step size became too small";break}if(_[N]=q(q(q(q(q(q(n,B(w[N],F*S[0])),B(l,F*S[2])),B(u,F*S[3])),B(c,F*S[4])),B(d,F*S[5])),B(f,F*S[6])),b[++N]=e+F,j[N]=g,w[N]=f,"function"==typeof o){var Y,G,X=e,Z=e+.5*F;if(y=o(Z,_[N-1]),V(x=U(R(m,0),R(0,y)))||(X=Z,m=y,y=o(Z=e+F,g),x=U(R(m,0),R(0,y))),V(x)){for(var J,W,Q=0,K=1,$=1;;){if("number"==typeof m)G=($*y*X-K*m*Z)/($*y-K*m);else for(G=Z,p=m.length-1;-1!==p;--p)m[p]<0&&0<y[p]&&(G=P(G,($*y[p]*X-K*m[p]*Z)/($*y[p]-K*m[p])));if(G<=X||Z<=G)break;W=o(G,Y=H._at(G,N-1)),Q=V(J=U(R(m,0),R(0,W)))?(Z=G,y=W,x=J,-($=1)===Q?K*=.5:K=1,-1):(X=G,m=W,(K=1)===Q?$*=.5:$=1,1)}return g=H._at(.5*(e+G),N-1),H.f[N]=r(G,Y),H.x[N]=G,H.y[N]=Y,H.ymid[N-1]=g,H.events=x,H.iterations=T,H}}e+=F,n=g,m=y,F=P(.8*F*L(a/v,.25),4*F)}return H.iterations=T,H},numeric.LU=function(e,t){t=t||!1;var n,r,a,i,o,s,l,u,c,d=Math.abs,f=e.length,h=f-1,p=new Array(f);for(t||(e=numeric.clone(e)),a=0;a<f;++a){for(c=d((s=e[l=a])[a]),r=a+1;r<f;++r)c<(i=d(e[r][a]))&&(c=i,l=r);for((p[a]=l)!=a&&(e[a]=e[l],e[l]=s,s=e[a]),o=s[a],n=a+1;n<f;++n)e[n][a]/=o;for(n=a+1;n<f;++n){for(u=e[n],r=a+1;r<h;++r)u[r]-=u[a]*s[r],u[++r]-=u[a]*s[r];r===h&&(u[r]-=u[a]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,a,i,o,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;n<l;++n)for(a=c[n],c[n]!==n&&(o=u[n],u[n]=u[a],u[a]=o),i=s[n],r=0;r<n;++r)u[n]-=u[r]*i[r];for(n=l-1;0<=n;--n){for(i=s[n],r=n+1;r<l;++r)u[n]-=u[r]*i[r];u[n]/=i[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,a,i,o,s,l,u=numeric.dim(e),c=u[0],d=u[1],f=numeric.identity(c),h=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(r=0,i=e[t],o=f[t],n=1;n<d;++n)p(i[r])<p(i[n])&&(r=n);for(g(o,i[h[t]=r]),g(i,i[r]),n=0;n<c;++n)if(n!==t){for(l=(s=e[n])[r],a=d-1;-1!==a;--a)s[a]-=i[a]*l;for(s=f[n],a=c-1;-1!==a;--a)s[a]-=o[a]*l}}return{I:f,A:e,P:h}},numeric.__solveLP=function(e,t,n,r,a,i,o){var s,l,u,c,d=numeric.sum,f=(numeric.log,numeric.mul),h=numeric.sub,p=numeric.dot,g=numeric.div,v=numeric.add,m=e.length,y=n.length,x=!1,b=1,j=(numeric.transpose(t),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),_=Math.abs,k=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,M=numeric.gt,A=Array(m),E=Array(y),S=(numeric.rep([y],1),numeric.solve),O=h(n,p(t,i)),C=p(e,e);for(u=0;u<a;++u){var N,F;for(N=y-1;-1!==N;--N)E[N]=g(t[N],O[N]);var T=j(E);for(N=m-1;-1!==N;--N)A[N]=d(T[N]);b=.25*_(C/p(e,A));var q=100*w(C/p(A,A));for((!isFinite(b)||q<b)&&(b=q),c=v(e,f(b,A)),l=p(T,E),N=m-1;-1!==N;--N)l[N][N]+=1;var B=g(O,p(t,F=S(l,g(c,b),!0))),P=1;for(N=y-1;-1!==N;--N)B[N]<0&&(P=k(P,-.999*B[N]));if(!z(M(O=h(n,p(t,s=h(i,f(F,P)))),0)))return{solution:i,message:"",iterations:u};if(i=s,b<r)return{solution:s,message:"",iterations:u};if(o){var I=p(e,c),D=p(t,c);for(x=!0,N=y-1;-1!==N;--N)if(I*D[N]<0){x=!1;break}}else x=!(0<=i[m-1]);if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:i,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,a){var i=e.length,o=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([i],0).concat([1])),c=numeric.rep([o,1],-1),d=numeric.blockMatrix([[t,c]]),f=n,h=numeric.rep([i],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(u,d,f,r,a,h,!1),g=numeric.clone(p.solution);if(g.length=i,numeric.inf(s(n,l(t,g)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var v=numeric.__solveLP(e,t,n,r,a-p.iterations,g,!0);return v.iterations+=p.iterations,v},numeric.solveLP=function(e,t,n,r,a,i,o){if(void 0===o&&(o=1e3),void 0===i&&(i=numeric.epsilon),void 0===r)return numeric._solveLP(e,t,n,i,o);var s,l=r.length,u=r[0].length,c=t.length,d=numeric.echelonize(r),f=numeric.rep([u],0),h=d.P,p=[];for(s=h.length-1;-1!==s;--s)f[h[s]]=1;for(s=u-1;-1!==s;--s)0===f[s]&&p.push(s);var g=numeric.getRange,v=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=g(r,v,p),x=g(t,m,h),b=g(t,m,p),j=numeric.dot,w=numeric.sub,_=j(x,d.I),k=w(b,j(_,y)),z=w(n,j(_,a)),M=Array(h.length),A=Array(p.length);for(s=h.length-1;-1!==s;--s)M[s]=e[h[s]];for(s=p.length-1;-1!==s;--s)A[s]=e[p[s]];var E=w(A,j(M,j(d.I,y))),S=numeric._solveLP(E,k,z,i,o),O=S.solution;if(O!=O)return S;var C=j(d.I,w(a,j(y,O))),N=Array(e.length);for(s=h.length-1;-1!==s;--s)N[h[s]]=C[s];for(s=p.length-1;-1!==s;--s)N[p[s]]=O[s];return{solution:N,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(t){t instanceof String&&t.split("\n");var n,e,r,a,i=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=t.length,l=0,u={},c=[],d=0,f={},h=0,p=[],g=[],v=[];function m(e){throw new Error("MPStoLP: "+e+"\nLine "+n+": "+t[n]+"\nCurrent state: "+o[i]+"\n")}for(n=0;n<s;++n){var y=(r=t[n]).match(/\S*/g),x=[];for(e=0;e<y.length;++e)""!==y[e]&&x.push(y[e]);if(0!==x.length){for(e=0;e<o.length&&r.substr(0,o[e].length)!==o[e];++e);if(e<o.length){if(1===(i=e)&&(a=x[1]),6===e)return{name:a,c:p,A:numeric.transpose(g),b:v,rows:u,vars:f}}else switch(i){case 0:case 1:m("Unexpected line");case 2:switch(x[0]){case"N":0===l?l=x[1]:m("Two or more N rows");break;case"L":c[u[x[1]]=d]=1,v[d]=0,++d;break;case"G":c[u[x[1]]=d]=-1,v[d]=0,++d;break;case"E":c[u[x[1]]=d]=0,v[d]=0,++d;break;default:m("Parse error "+numeric.prettyPrint(x))}break;case 3:f.hasOwnProperty(x[0])||(p[f[x[0]]=h]=0,g[h]=numeric.rep([d],0),++h);var b=f[x[0]];for(e=1;e<x.length;e+=2)if(x[e]!==l){var j=u[x[e]];g[b][j]=(c[j]<0?-1:1)*parseFloat(x[e+1])}else p[b]=parseFloat(x[e+1]);break;case 4:for(e=1;e<x.length;e+=2)v[u[x[e]]]=(c[u[x[e]]]<0?-1:1)*parseFloat(x[e+1]);break;case 5:break;case 6:m("Internal error")}}}m("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},Pnb=[],Qnb=numeric.seedrandom,Rnb=256,Tnb=52,Qnb.seedrandom=function(e,t){var r,n=[];return e=Ynb(function e(t,n,r,a,i){if(r=[],i=typeof t,n&&"object"==i)for(a in t)if(a.indexOf("S")<5)try{r.push(e(t[a],n-1))}catch(e){}return r.length?r:t+("string"!=i?"\0":"")}(t?[e,Pnb]:arguments.length?e:[(new Date).getTime(),Pnb,window],3),n),Ynb((r=new Wnb(n)).S,Pnb),Qnb.random=function(){for(var e=r.g(6),t=Vnb,n=0;e<Tnb;)e=(e+n)*Rnb,t*=Rnb,n=r.g(1);for(;Unb<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t},e},Vnb=Qnb.pow(Rnb,6),Tnb=Qnb.pow(2,Tnb),Unb=2*Tnb,Ynb(Qnb.random(),Pnb),numeric.solveQP=function(e,t,n,r,a,i){e=Iob(e),t=Iob(t),n=Iob(n);var o,s,l,u,c,d=[],f=[],h=[],p=[],g=[];if(a=a||0,i=i?Iob(i):[void 0,0],r=r?Iob(r):[],s=e.length-1,l=n[1].length-1,!r)for(o=1;o<=l;o+=1)r[o]=0;for(o=1;o<=l;o+=1)f[o]=0;for(u=Math.min(s,l),o=1;o<=s;o+=1)h[o]=0;for(d[1]=0,o=1;o<=2*s+u*(u+5)/2+2*l+1;o+=1)p[o]=0;for(o=1;o<=2;o+=1)g[o]=0;return Nob(e,t,0,s,h,d,n,r,0,l,a,f,0,g,p,i),c="",1===i[1]&&(c="constraints are inconsistent, no solution!"),2===i[1]&&(c="matrix D in quadratic function is not positive definite!"),{solution:Job(h),value:Job(d),unconstrained_solution:Job(t),iterations:Job(g),iact:Job(f),message:c}},numeric.svd=function(e){var t,n=numeric.epsilon,r=1e-64/n,a=0,i=0,o=0,s=0,l=0,u=numeric.clone(e),c=u.length,d=u[0].length;if(c<d)throw"Need more rows than columns";var f=new Array(d),h=new Array(d);for(i=0;i<d;i++)f[i]=h[i]=0;var p=numeric.rep([d,d],0);function g(e,t){return e=Math.abs(e),(t=Math.abs(t))<e?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var v=0,m=0,y=0,x=0,b=0,j=0,w=0;for(i=0;i<d;i++){for(f[i]=m,w=0,l=i+1,o=i;o<c;o++)w+=u[o][i]*u[o][i];if(w<=r)m=0;else for(v=u[i][i],m=Math.sqrt(w),0<=v&&(m=-m),y=v*m-w,u[i][i]=v-m,o=l;o<d;o++){for(w=0,s=i;s<c;s++)w+=u[s][i]*u[s][o];for(v=w/y,s=i;s<c;s++)u[s][o]+=v*u[s][i]}for(h[i]=m,w=0,o=l;o<d;o++)w+=u[i][o]*u[i][o];if(w<=r)m=0;else{for(v=u[i][i+1],m=Math.sqrt(w),0<=v&&(m=-m),y=v*m-w,u[i][i+1]=v-m,o=l;o<d;o++)f[o]=u[i][o]/y;for(o=l;o<c;o++){for(w=0,s=l;s<d;s++)w+=u[o][s]*u[i][s];for(s=l;s<d;s++)u[o][s]+=w*f[s]}}x<(b=Math.abs(h[i])+Math.abs(f[i]))&&(x=b)}for(i=d-1;-1!=i;i+=-1){if(0!=m){for(y=m*u[i][i+1],o=l;o<d;o++)p[o][i]=u[i][o]/y;for(o=l;o<d;o++){for(w=0,s=l;s<d;s++)w+=u[i][s]*p[s][o];for(s=l;s<d;s++)p[s][o]+=w*p[s][i]}}for(o=l;o<d;o++)p[i][o]=0,p[o][i]=0;p[i][i]=1,m=f[i],l=i}for(i=d-1;-1!=i;i+=-1){for(l=i+1,m=h[i],o=l;o<d;o++)u[i][o]=0;if(0!=m){for(y=u[i][i]*m,o=l;o<d;o++){for(w=0,s=l;s<c;s++)w+=u[s][i]*u[s][o];for(v=w/y,s=i;s<c;s++)u[s][o]+=v*u[s][i]}for(o=i;o<c;o++)u[o][i]=u[o][i]/m}else for(o=i;o<c;o++)u[o][i]=0;u[i][i]+=1}for(n*=x,s=d-1;-1!=s;s+=-1)for(var _=0;_<50;_++){var k=!1;for(l=s;-1!=l;l+=-1){if(Math.abs(f[l])<=n){k=!0;break}if(Math.abs(h[l-1])<=n)break}if(!k){a=0;var z=l-(w=1);for(i=l;i<s+1&&(v=w*f[i],f[i]=a*f[i],!(Math.abs(v)<=n));i++)for(y=g(v,m=h[i]),a=m/(h[i]=y),w=-v/y,o=0;o<c;o++)b=u[o][z],j=u[o][i],u[o][z]=b*a+j*w,u[o][i]=-b*w+j*a}if(j=h[s],l==s){if(j<0)for(h[s]=-j,o=0;o<d;o++)p[o][s]=-p[o][s];break}if(49<=_)throw"Error: no convergence.";for(x=h[l],m=g(v=(((b=h[s-1])-j)*(b+j)+((m=f[s-1])-(y=f[s]))*(m+y))/(2*y*b),1),v=v<0?((x-j)*(x+j)+y*(b/(v-m)-y))/x:((x-j)*(x+j)+y*(b/(v+m)-y))/x,i=l+(w=a=1);i<s+1;i++){for(m=f[i],b=h[i],y=w*m,m*=a,j=g(v,y),v=x*(a=v/(f[i-1]=j))+m*(w=y/j),m=-x*w+m*a,y=b*w,b*=a,o=0;o<d;o++)x=p[o][i-1],j=p[o][i],p[o][i-1]=x*a+j*w,p[o][i]=-x*w+j*a;for(j=g(v,y),v=(a=v/(h[i-1]=j))*m+(w=y/j)*b,x=-w*m+a*b,o=0;o<c;o++)b=u[o][i-1],j=u[o][i],u[o][i-1]=b*a+j*w,u[o][i]=-b*w+j*a}f[l]=0,f[s]=v,h[s]=x}for(i=0;i<h.length;i++)h[i]<n&&(h[i]=0);for(i=0;i<d;i++)for(o=i-1;0<=o;o--)if(h[o]<h[i]){for(a=h[o],h[o]=h[i],h[i]=a,s=0;s<u.length;s++)t=u[s][i],u[s][i]=u[s][o],u[s][o]=t;for(s=0;s<p.length;s++)t=p[s][i],p[s][i]=p[s][o],p[s][o]=t;i=o}return{U:u,S:h,V:p}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,n){!function(){"use strict";function c(e,t,n){var r=t.x,a=t.y,i=n.x-r,o=n.y-a;if(0!==i||0!==o){var s=((e.x-r)*i+(e.y-a)*o)/(i*i+o*o);1<s?(r=n.x,a=n.y):0<s&&(r+=i*s,a+=o*s)}return(i=e.x-r)*i+(o=e.y-a)*o}function a(e,t){var n=e.length-1,r=[e[0]];return function e(t,n,r,a,i){for(var o,s=a,l=n+1;l<r;l++){var u=c(t[l],t[n],t[r]);s<u&&(o=l,s=u)}a<s&&(1<o-n&&e(t,n,o,a,i),i.push(t[o]),1<r-o&&e(t,o,r,a,i))}(e,0,n,t,r),r.push(e[n]),r}function e(e,t,n){if(e.length<=2)return e;var r=void 0!==t?t*t:1;return e=a(e=n?e:function(e,t){for(var n,r,a,i,o,s=e[0],l=[s],u=1,c=e.length;u<c;u++)n=e[u],a=s,void 0,i=(r=n).x-a.x,o=r.y-a.y,t<i*i+o*o&&(l.push(n),s=n);return s!==n&&l.push(n),l}(e,r),r)}"function"==typeof define&&define.amd?define(function(){return e}):void 0!==t?(t.exports=e,t.exports.default=e):"undefined"!=typeof self?self.simplify=e:window.simplify=e}()},{}],24:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r;if(Array.isArray(e)){if(0===(t=e.length))return new k(null,null,0,0);n=e[0].length,r=b(B.mallocDouble(t*(n+1)),[t,n+1]),S(e,r.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var a=e.dtype;a="int8"===a||"int16"===a||"int32"===a?"int32":"uint8"===a||"uint8_clamped"===a||"buffer"===a||"uint16"===a||"uint32"===a?"uint32":"float32"===a?"float32":"float64",r=b(B.malloc(t*(n+1),a),[t,n+1]),w.assign(r.hi(t,n),e)}for(var i=0;i<t;++i)r.set(i,n,i);var o=C.malloc([t,n],e.dtype),s=B.mallocInt32(t),l=0,u=o.data,c=r.data,d=(P.log2(P.nextPow2(t)),j.compile(r.order,!0,r.dtype)),f=new z;f.push(r);for(;l<t;){var h=f.pop(),p=0|h.shape[0];if(1<p){var g,v=P.log2(l+1)%n,m=_.root(p);g=d(h,m,function(e,t){return e.get(v)-t.get(v)});var y=o.index(l,0),x=g.offset;for(i=0;i<n;++i)u[y++]=c[x++];s[l]=c[x],l+=1,f.push(h.hi(m)),2<p&&f.push(h.lo(m+1))}else{for(x=h.offset,y=o.index(l,0),i=0;i<n;++i)u[y+i]=c[x++];s[l]=c[x],l+=1}}return B.free(r.data),new k(o,s,t,n)},t.exports.deserialize=function(e){var t=e.p,n=e.i;{if(t){for(var r=t.length,a=B.mallocFloat64(r),i=0;i<r;++i)a[i]=t[i];var o=n.length,s=B.mallocInt32(o);for(i=0;i<o;++i)s[i]=n[i];var l=r/o|0;return new k(b(a,[o,l]),s,o,l)}return new k(null,null,0,e.d)}};var b=e("ndarray"),j=e("ndarray-select"),S=e("ndarray-pack"),w=e("ndarray-ops"),C=e("ndarray-scratch"),B=e("typedarray-pool"),_=e("inorder-tree-layout"),P=e("bit-twiddle"),I=e("./lib/heap.js");function k(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}var r=k.prototype;function z(){this.data=[],this.offset=0}r.serialize=function(){return 0<this.length?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},r.range=function(e,t,n){var r=this.length;if(!(r<1)){for(var a=this.dimension,i=0;i<a;++i)if(t[i]<e[i])return;var o,s=this.points,l=this.ids,u=C.malloc([r,2,a]),c=B.mallocInt32(r),d=u.data,f=s.data,h=1,p=0;for(c[0]=0,S(e,u.pick(0,0)),S(t,u.pick(0,1));p<h;){var g=c[p],v=P.log2(g+1)%a,m=u.index(p,0,0),y=u.index(p,1,0),x=s.index(g,0),b=!0;for(i=0;i<a;++i){var j=f[x+i];if(j<d[m+i]||d[y+i]<j){b=!1;break}}if(b&&void 0!==(o=n(l[g])))break;var w=f[x+v],_=d[y+v],k=d[m+v];if(k<=w){var z=2*g+1;if(z<r){c[h]=z;var M=u.index(h,0,0);for(i=0;i<a;++i)d[M+i]=d[m+i];var A=u.index(h,1,0);for(i=0;i<a;++i)d[A+i]=d[y+i];d[A+v]=Math.min(_,w),h+=1}}if(w<=_){var E=2*(g+1);if(E<r){c[h]=E;for(M=u.index(h,0,0),i=0;i<a;++i)d[M+i]=d[m+i];for(A=u.index(h,1,0),i=0;i<a;++i)d[A+i]=d[y+i];d[M+v]=Math.max(k,w),h+=1}}p+=1}return C.free(u),B.free(c),o}},r.rnn=function(e,t,n){if(!(t<0)){var r=this.length;if(!(r<1)){for(var a,i=this.dimension,o=this.points,s=this.ids,l=C.malloc([r,i]),u=B.mallocInt32(r),c=l.data,d=o.data,f=1,h=0,p=t*t,g=u[0]=0;g<i;++g)l.set(0,g,0);for(;h<f;){var v=u[h],m=o.index(v,0),y=0;for(g=0;g<i;++g)y+=Math.pow(e[g]-d[m+g],2);if(y<=p&&void 0!==(a=n(s[v])))break;var x=P.log2(v+1)%i,b=0,j=l.index(h,0);for(g=0;g<i;++g)g!==x&&(b+=c[j+g]);var w=e[x],_=d[m+x],k=c[j+x],z=k,M=k;w<_?M=Math.max(k,Math.pow(_-w,2)):z=Math.max(k,Math.pow(_-w,2));var A=M+b;if(z+b<=p){var E=2*v+1;if(E<r){u[f]=E;var S=l.index(f,0);for(g=0;g<i;++g)c[S+g]=c[j+g];c[S+x]=z,f+=1}}if(A<=p){var O=2*(v+1);if(O<r){u[f]=O;for(S=l.index(f,0),g=0;g<i;++g)c[S+g]=c[j+g];c[S+x]=M,f+=1}}h+=1}return C.free(l),B.free(u),a}}},r.nn=function(e,t){var n=this.length;if(n<1)return-1;if("number"==typeof t){if(t<0)return-1}else t=1/0;for(var r=this.dimension,a=this.points,i=a.data,o=B.mallocFloat64(r),s=new I(n,r+1),l=s.index,u=s.data,c=l[0]=0;c<=r;++c)u[c]=0;s.count+=1;for(var d=-1,f=t;0<s.count&&!(u[0]>=f);){var h=l[0],p=a.index(h,0),g=0;for(c=0;c<r;++c)g+=Math.pow(e[c]-i[p+c],2);g<f&&(f=g,d=h);var v=P.log2(h+1)%r,m=0;for(c=0;c<r;++c){var y=u[c+1];c!==v&&(m+=y),o[c]=y}var x=e[v],b=i[p+v],j=o[v],w=j,_=j;x<b?_=Math.max(j,Math.pow(b-x,2)):w=Math.max(j,Math.pow(b-x,2));var k=w+m,z=_+m;if(s.pop(),k<f){var M=2*h+1;if(M<n){l[E=s.count]=M,u[S=E*(r+1)]=k;for(c=1;c<=r;++c)u[S+c]=o[c-1];u[S+v+1]=w,s.push()}}if(z<f){var A=2*(h+1);if(A<n){var E,S;l[E=s.count]=A,u[S=E*(r+1)]=z;for(c=1;c<=r;++c)u[S+c]=o[c-1];u[S+v+1]=_,s.push()}}}return B.freeFloat64(o),s.dispose(),d<0?-1:this.ids[d]},r.knn=function(e,t,n){if("number"==typeof n){if(n<0)return[]}else n=1/0;var r=this.length;if(r<1)return[];if("number"==typeof t){if(t<=0)return[];t=0|Math.min(t,r)}else t=r;for(var a=this.ids,i=this.dimension,o=this.points,s=o.data,l=B.mallocFloat64(i),u=new I(t,1),c=u.index,d=u.data,f=new I(r,i+1),h=f.index,p=f.data,g=h[0]=0;g<=i;++g)p[g]=0;f.count+=1;for(var v=n;0<f.count&&!(p[0]>=v);){var m=h[0],y=o.index(m,0),x=0;for(g=0;g<i;++g)x+=Math.pow(e[g]-s[y+g],2);if(x<v){u.count>=t&&u.pop();var b=u.count;c[b]=m,d[b]=-x,u.push(),u.count>=t&&(v=-d[0])}var j=P.log2(m+1)%i,w=0;for(g=0;g<i;++g){var _=p[g+1];g!==j&&(w+=_),l[g]=_}var k=e[j],z=s[y+j],M=l[j],A=M,E=M;k<z?E=Math.max(M,Math.pow(z-k,2)):A=Math.max(M,Math.pow(z-k,2));var S=A+w,O=E+w;if(f.pop(),S<v){var C=2*m+1;if(C<r){h[F=f.count]=C,p[T=F*(i+1)]=S;for(g=1;g<=i;++g)p[T+g]=l[g-1];p[T+j+1]=A,f.push()}}if(O<v){var N=2*(m+1);if(N<r){var F,T;h[F=f.count]=N,p[T=F*(i+1)]=O;for(g=1;g<=i;++g)p[T+g]=l[g-1];p[T+j+1]=E,f.push()}}}B.freeFloat64(l),f.dispose();var q=new Array(u.count);for(a=this.ids,g=u.count-1;0<=g;--g)q[g]=a[c[0]],u.pop();return u.dispose(),q},r.dispose=function(){B.free(this.points.data),B.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0},z.prototype.size=function(){return this.data.length-this.offset},z.prototype.push=function(e){return this.data.push(e)},z.prototype.pop=function(){if(0!==this.size()){var e=this.data[this.offset];return this.offset++,1024<this.data.length&&2*this.offset>this.data.length&&(this.data=this.data.slice(this.offset),this.offset=0),e}}},{"./lib/heap.js":25,"bit-twiddle":2,"inorder-tree-layout":12,ndarray:21,"ndarray-ops":16,"ndarray-pack":17,"ndarray-scratch":19,"ndarray-select":20,"typedarray-pool":30}],25:[function(e,t,n){"use strict";t.exports=a;var r=e("typedarray-pool");function a(e,t){this.count=0,this.dataSize=t,this.index=r.mallocInt32(e),this.data=r.mallocFloat64(e*t)}var i=a.prototype;i.heapSwap=function(e,t){var n=this.data,r=this.index,a=this.dataSize,i=r[e];r[e]=r[t],r[t]=i;for(var o=a*e,s=a*t,l=0;l<a;++l){var u=n[o];n[o]=n[s],n[s]=u,o+=1,s+=1}},i.heapUp=function(e){for(var t,n=this.dataSize,r=(this.index,this.data),a=r[n*e];0<e;){var i=1&(t=e)?t-1>>1:(t>>1)-1;if(0<=i)if(a<r[n*i]){this.heapSwap(e,i),e=i;continue}break}},i.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,a=n[t*e];;){var i=a,o=2*e+1,s=2*(e+1),l=e;if(o<r){var u=n[t*o];u<i&&(l=o,i=u)}if(s<r)n[t*s]<i&&(l=s);if(l===e)break;this.heapSwap(e,l),e=l}},i.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},i.push=function(){this.heapUp(this.count),this.count+=1},i.dispose=function(){r.freeInt32(this.index),r.freeFloat64(this.data)}},{"typedarray-pool":30}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("topojson-client"),a=e("topojson-server"),i=e("topojson-simplify");Object.keys(r).forEach(function(e){n[e]=r[e]}),Object.keys(a).forEach(function(e){n[e]=a[e]}),Object.keys(i).forEach(function(e){n[e]=i[e]})},{"topojson-client":27,"topojson-server":28,"topojson-simplify":29}],27:[function(e,t,n){var r,a;r=this,a=function(e){"use strict";function t(e){return e}function p(e){var t,a=c(e.transform),i=1/0,o=i,s=-i,l=-i;function n(e){(e=a(e))[0]<i&&(i=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>l&&(l=e[1])}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":n(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(n)}}for(t in e.arcs.forEach(function(e){for(var t,n=-1,r=e.length;++n<r;)(t=a(e[n],n))[0]<i&&(i=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>l&&(l=t[1])}),e.objects)r(e.objects[t]);return[i,o,s,l]}var c=function(e){if(null==e)return t;var i,o,s=e.scale[0],l=e.scale[1],u=e.translate[0],c=e.translate[1];return function(e,t){t||(i=o=0);var n=2,r=e.length,a=new Array(r);for(a[0]=(i+=e[0])*s+u,a[1]=(o+=e[1])*l+c;n<r;)a[n]=e[n],++n;return a}},d=function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n};function n(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=o(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function o(e,t){var i=c(e.transform),o=e.arcs;function a(e,t){t.length&&t.pop();for(var n=o[e<0?~e:e],r=0,a=n.length;r<a;++r)t.push(i(n[r],r));e<0&&d(t,a)}function s(e){return i(e)}function l(e){for(var t=[],n=0,r=e.length;n<r;++n)a(e[n],t);return t.length<2&&t.push(t[0]),t}function n(e){for(var t=l(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(n)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=l(t.arcs);break;case"MultiLineString":n=t.arcs.map(l);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}function f(l,a){var i={},u={},c={},o=[],s=-1;function e(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),o.push(r)}}return a.forEach(function(e,t){var n,r=l.arcs[e<0?~e:e];r.length<3&&!r[1][0]&&!r[1][1]&&(n=a[++s],a[s]=e,a[t]=n)}),a.forEach(function(e){var t,n,r=function(e){var t,n=l.arcs[e<0?~e:e],r=n[0];l.transform?(t=[0,0],n.forEach(function(e){t[0]+=e[0],t[1]+=e[1]})):t=n[n.length-1];return e<0?[t,r]:[r,t]}(e),a=r[0],i=r[1];if(t=c[a])if(delete c[t.end],t.push(e),t.end=i,n=u[i]){delete u[n.start];var o=n===t?t:t.concat(n);u[o.start=t.start]=c[o.end=n.end]=o}else u[t.start]=c[t.end]=t;else if(t=u[i])if(delete u[t.start],t.unshift(e),t.start=a,n=c[a]){delete c[n.end];var s=n===t?t:n.concat(t);u[s.start=n.start]=c[s.end=t.end]=s}else u[t.start]=c[t.end]=t;else u[(t=[e]).start=a]=c[t.end=i]=t}),e(c,u),e(u,c),a.forEach(function(e){i[e<0?~e:e]||o.push([e])}),o}function r(e,t,n){var r,a,i;if(1<arguments.length)r=function(e,t,n){var r,a=[],i=[];function o(e){var t=e<0?~e:e;(i[t]||(i[t]=[])).push({i:e,g:r})}function s(e){e.forEach(o)}function l(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":t.arcs.forEach(l)}}(t),i.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}(0,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:f(e,r)}}function a(s,e){var l={},n=[],r=[];function a(t){t.forEach(function(e){e.forEach(function(e){(l[e=e<0?~e:e]||(l[e]=[])).push(t)})}),n.push(t)}function u(e){return function(e){for(var t,n=-1,r=e.length,a=e[r-1],i=0;++n<r;)t=a,a=e[n],i+=t[0]*a[1]-t[1]*a[0];return Math.abs(i)}(o(s,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}),n.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,r.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){l[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),n.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:r.map(function(e){var t,n=[];if(e.forEach(function(e){e.forEach(function(e){e.forEach(function(e){l[e<0?~e:e].length<2&&n.push(e)})})}),1<(t=(n=f(s,n)).length))for(var r,a,i=1,o=u(n[0]);i<t;++i)(r=u(n[i]))>o&&(a=n[0],n[0]=n[i],n[i]=a,o=r);return n})}}function g(e,t){for(var n=0,r=e.length;n<r;){var a=n+r>>>1;e[a]<t?n=1+a:r=a}return n}function v(e){if(null==e)return t;var s,l,u=e.scale[0],c=e.scale[1],d=e.translate[0],f=e.translate[1];return function(e,t){t||(s=l=0);var n=2,r=e.length,a=new Array(r),i=Math.round((e[0]-d)/u),o=Math.round((e[1]-f)/c);for(a[0]=i-s,s=i,a[1]=o-l,l=o;n<r;)a[n]=e[n],++n;return a}}e.bbox=p,e.feature=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return n(t,e)})}:n(t,e)},e.mesh=function(e){return o(e,r.apply(this,arguments))},e.meshArcs=r,e.merge=function(e){return o(e,a.apply(this,arguments))},e.mergeArcs=a,e.neighbors=function(e){var r={},t=e.map(function(){return[]});function n(e,n){e.forEach(function(e){e<0&&(e=~e);var t=r[e];t?t.push(n):r[e]=[n]})}function a(e,t){e.forEach(function(e){n(e,t)})}var i={LineString:n,MultiLineString:a,Polygon:a,MultiPolygon:function(e,t){e.forEach(function(e){a(e,t)})}};for(var o in e.forEach(function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach(function(e){t(e,n)}):e.type in i&&i[e.type](e.arcs,n)}),r)for(var s=r[o],l=s.length,u=0;u<l;++u)for(var c=u+1;c<l;++c){var d,f=s[u],h=s[c];(d=t[f])[o=g(d,h)]!==h&&d.splice(o,0,h),(d=t[h])[o=g(d,f)]!==f&&d.splice(o,0,f)}return t},e.quantize=function(e,t){if(e.transform)throw new Error("already quantized");if(t&&t.scale)s=e.bbox;else{if(!(2<=(n=Math.floor(t))))throw new Error("n must be ≥2");var n,r=(s=e.bbox||p(e))[0],a=s[1],i=s[2],o=s[3];t={scale:[i-r?(i-r)/(n-1):1,o-a?(o-a)/(n-1):1],translate:[r,a]}}var s,l,u=v(t),c=e.objects,d={};function f(e){return u(e)}function h(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(h)};break;case"Point":t={type:"Point",coordinates:f(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(f)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}for(l in c)d[l]=h(c[l]);return{type:"Topology",bbox:s,transform:t,objects:d,arcs:e.arcs.map(function(e){var t,n=0,r=1,a=e.length,i=new Array(a);for(i[0]=u(e[0],0);++n<a;)((t=u(e[n],n))[0]||t[1])&&(i[r++]=t);return 1===r&&(i[r++]=[0,0]),i.length=r,i})}},e.transform=c,e.untransform=v,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(r.topojson=r.topojson||{})},{}],28:[function(e,t,n){var r,a;r=this,a=function(e){"use strict";function z(i,o,s,e,l,t){3===arguments.length&&(e=t=Array,l=null);for(var u=new e(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),c=new t(i),d=i-1,n=0;n<i;++n)u[n]=l;return{set:function(e,t){for(var n=o(e)&d,r=u[n],a=0;r!=l;){if(s(r,e))return c[n]=t;if(++a>=i)throw new Error("full hashmap");r=u[n=n+1&d]}return u[n]=e,c[n]=t},maybeSet:function(e,t){for(var n=o(e)&d,r=u[n],a=0;r!=l;){if(s(r,e))return c[n];if(++a>=i)throw new Error("full hashmap");r=u[n=n+1&d]}return u[n]=e,c[n]=t},get:function(e,t){for(var n=o(e)&d,r=u[n],a=0;r!=l;){if(s(r,e))return c[n];if(++a>=i)break;r=u[n=n+1&d]}return t},keys:function(){for(var e=[],t=0,n=u.length;t<n;++t){var r=u[t];r!=l&&e.push(r)}return e}}}function M(e,t){return e[0]===t[0]&&e[1]===t[1]}function A(e){n[0]=e[0],n[1]=e[1];var t=r[0]^r[1];return 2147483647&(t=t<<5^t>>7^r[2]^r[3])}function v(e){var t,n,r,a,i=e.coordinates,o=e.lines,s=e.rings,l=function(){for(var e=z(1.4*i.length,j,w,Int32Array,-1,Int32Array),t=new Int32Array(i.length),n=0,r=i.length;n<r;++n)t[n]=e.maybeSet(n,n);return t}(),u=new Int32Array(i.length),c=new Int32Array(i.length),d=new Int32Array(i.length),f=new Int8Array(i.length),h=0;for(t=0,n=i.length;t<n;++t)u[t]=c[t]=d[t]=-1;for(t=0,n=o.length;t<n;++t){var p=o[t],g=p[0],v=p[1];for(r=l[g],a=l[++g],++h,f[r]=1;++g<=v;)b(t,r,r=a,a=l[g]);++h,f[a]=1}for(t=0,n=i.length;t<n;++t)u[t]=-1;for(t=0,n=s.length;t<n;++t){var m=s[t],y=m[0]+1,x=m[1];for(b(t,l[x-1],r=l[y-1],a=l[y]);++y<=x;)b(t,r,r=a,a=l[y])}function b(e,t,n,r){if(u[n]!==e){u[n]=e;var a=c[n];if(0<=a){var i=d[n];a===t&&i===r||a===r&&i===t||(++h,f[n]=1)}else c[n]=t,d[n]=r}}function j(e){return A(i[e])}function w(e,t){return M(i[e],i[t])}u=c=d=null;var _,k=function(a,i,o,e,s){3===arguments.length&&(e=Array,s=null);for(var l=new e(a=1<<Math.max(4,Math.ceil(Math.log(a)/Math.LN2))),u=a-1,t=0;t<a;++t)l[t]=s;return{add:function(e){for(var t=i(e)&u,n=l[t],r=0;n!=s;){if(o(n,e))return!0;if(++r>=a)throw new Error("full hashset");n=l[t=t+1&u]}return l[t]=e,!0},has:function(e){for(var t=i(e)&u,n=l[t],r=0;n!=s;){if(o(n,e))return!0;if(++r>=a)break;n=l[t=t+1&u]}return!1},values:function(){for(var e=[],t=0,n=l.length;t<n;++t){var r=l[t];r!=s&&e.push(r)}return e}}}(1.4*h,A,M);for(t=0,n=i.length;t<n;++t)f[_=l[t]]&&k.add(i[_]);return k}var t=new ArrayBuffer(16),n=new Float64Array(t),r=new Uint32Array(t);function m(e,t,n,r){a(e,t,n),a(e,t,t+r),a(e,t+r,n)}function a(e,t,n){for(var r,a=t+(n---t>>1);t<a;++t,--n)r=e[t],e[t]=e[n],e[n]=r}function f(e){var t,n=h(e.geometry);for(t in null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox),e.properties){n.properties=e.properties;break}return n}function h(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(h)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function p(e){var t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),n+31*r}function g(e,t){var n,r=e[0],a=e[1],i=t[0],o=t[1];return a<r&&(n=r,r=a,a=n),o<i&&(n=i,i=o,o=n),r===i&&a===o}e.topology=function(e,t){var n=function(e){var r=1/0,a=1/0,i=-1/0,o=-1/0;function t(e){null!=e&&n.hasOwnProperty(e.type)&&n[e.type](e)}var n={GeometryCollection:function(e){e.geometries.forEach(t)},Point:function(e){s(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(s)},LineString:function(e){l(e.arcs)},MultiLineString:function(e){e.arcs.forEach(l)},Polygon:function(e){e.arcs.forEach(l)},MultiPolygon:function(e){e.arcs.forEach(u)}};function s(e){var t=e[0],n=e[1];t<r&&(r=t),i<t&&(i=t),n<a&&(a=n),o<n&&(o=n)}function l(e){e.forEach(s)}function u(e){e.forEach(l)}for(var c in e)t(e[c]);return r<=i&&a<=o?[r,a,i,o]:void 0}(e=function(e){var t,n,r={};for(t in e)r[t]=null==(n=e[t])?{type:null}:("FeatureCollection"===n.type?function(e){var t={type:"GeometryCollection",geometries:e.features.map(f)};null!=e.bbox&&(t.bbox=e.bbox);return t}:"Feature"===n.type?f:h)(n);return r}(e)),r=0<t&&n&&function(e,t,n){var d=t[0],f=t[1],r=t[2],a=t[3],h=r-d?(n-1)/(r-d):1,p=a-f?(n-1)/(a-f):1;function i(e){return[Math.round((e[0]-d)*h),Math.round((e[1]-f)*p)]}function o(e,t){for(var n,r,a,i,o,s=-1,l=0,u=e.length,c=new Array(u);++s<u;)n=e[s],i=Math.round((n[0]-d)*h),o=Math.round((n[1]-f)*p),i===r&&o===a||(c[l++]=[r=i,a=o]);for(c.length=l;l<t;)l=c.push([c[0][0],c[0][1]]);return c}function s(e){return o(e,2)}function l(e){return o(e,4)}function u(e){return e.map(l)}function c(e){null!=e&&g.hasOwnProperty(e.type)&&g[e.type](e)}var g={GeometryCollection:function(e){e.geometries.forEach(c)},Point:function(e){e.coordinates=i(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(i)},LineString:function(e){e.arcs=s(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(s)},Polygon:function(e){e.arcs=u(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(u)}};for(var v in e)c(e[v]);return{scale:[1/h,1/p],translate:[d,f]}}(e,n,t),a=function(e){var t,n,r,a,c=e.coordinates,i=e.lines,o=e.rings,s=i.length+o.length;for(delete e.lines,delete e.rings,r=0,a=i.length;r<a;++r)for(t=i[r];t=t.next;)++s;for(r=0,a=o.length;r<a;++r)for(n=o[r];n=n.next;)++s;var u=z(2*s*1.4,A,M),d=e.arcs=[];for(r=0,a=i.length;r<a;++r)for(t=i[r];l(t),t=t.next;);for(r=0,a=o.length;r<a;++r)if((n=o[r]).next)for(;l(n),n=n.next;);else f(n);function l(e){var t,n,r,a,i,o,s,l;if(r=u.get(t=c[e[0]]))for(s=0,l=r.length;s<l;++s)if(h(a=r[s],e))return e[0]=a[0],void(e[1]=a[1]);if(i=u.get(n=c[e[1]]))for(s=0,l=i.length;s<l;++s)if(p(o=i[s],e))return e[1]=o[0],void(e[0]=o[1]);r?r.push(e):u.set(t,[e]),i?i.push(e):u.set(n,[e]),d.push(e)}function f(e){var t,n,r,a,i;if(n=u.get(c[e[0]]))for(a=0,i=n.length;a<i;++a){if(g(r=n[a],e))return e[0]=r[0],void(e[1]=r[1]);if(v(r,e))return e[0]=r[1],void(e[1]=r[0])}if(n=u.get(t=c[e[0]+m(e)]))for(a=0,i=n.length;a<i;++a){if(g(r=n[a],e))return e[0]=r[0],void(e[1]=r[1]);if(v(r,e))return e[0]=r[1],void(e[1]=r[0])}n?n.push(e):u.set(t,[e]),d.push(e)}function h(e,t){var n=e[0],r=t[0],a=e[1];if(n-a!=r-t[1])return!1;for(;n<=a;++n,++r)if(!M(c[n],c[r]))return!1;return!0}function p(e,t){var n=e[0],r=t[0],a=e[1],i=t[1];if(n-a!=r-i)return!1;for(;n<=a;++n,--i)if(!M(c[n],c[i]))return!1;return!0}function g(e,t){var n=e[0],r=t[0],a=e[1]-n;if(a!=t[1]-r)return!1;for(var i=m(e),o=m(t),s=0;s<a;++s)if(!M(c[n+(s+i)%a],c[r+(s+o)%a]))return!1;return!0}function v(e,t){var n=e[0],r=t[0],a=e[1],i=t[1],o=a-n;if(o!=i-r)return!1;for(var s=m(e),l=o-m(t),u=0;u<o;++u)if(!M(c[n+(u+s)%o],c[i-(u+l)%o]))return!1;return!0}function m(e){for(var t=e[0],n=e[1],r=t,a=r,i=c[r];++r<n;){var o=c[r];(o[0]<i[0]||o[0]===i[0]&&o[1]<i[1])&&(a=r,i=o)}return a-t}return e}(function(e){var t,n,r,a=v(e),i=e.coordinates,o=e.lines,s=e.rings;for(n=0,r=o.length;n<r;++n)for(var l=o[n],u=l[0],c=l[1];++u<c;)a.has(i[u])&&(t={0:u,1:l[1]},l[1]=u,l=l.next=t);for(n=0,r=s.length;n<r;++n)for(var d=s[n],f=d[0],h=f,p=d[1],g=a.has(i[f]);++h<p;)a.has(i[h])&&(g?(t={0:h,1:d[1]},d[1]=h,d=d.next=t):(m(i,f,p,p-h),i[p]=i[f],g=!0,h=f));return e}(function(e){var a=-1,i=[],o=[],s=[];function t(e){e&&n.hasOwnProperty(e.type)&&n[e.type](e)}var n={GeometryCollection:function(e){e.geometries.forEach(t)},LineString:function(e){e.arcs=r(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(r)},Polygon:function(e){e.arcs=e.arcs.map(l)},MultiPolygon:function(e){e.arcs=e.arcs.map(u)}};function r(e){for(var t=0,n=e.length;t<n;++t)s[++a]=e[t];var r={0:a-n+1,1:a};return i.push(r),r}function l(e){for(var t=0,n=e.length;t<n;++t)s[++a]=e[t];var r={0:a-n+1,1:a};return o.push(r),r}function u(e){return e.map(l)}for(var c in e)t(e[c]);return{type:"Topology",coordinates:s,lines:i,rings:o,objects:e}}(e))),i=a.coordinates,o=z(1.4*a.arcs.length,p,g);function s(e){e&&l.hasOwnProperty(e.type)&&l[e.type](e)}e=a.objects,a.bbox=n,a.arcs=a.arcs.map(function(e,t){return o.set(e,t),i.slice(e[0],e[1]+1)}),delete a.coordinates,i=null;var l={GeometryCollection:function(e){e.geometries.forEach(s)},LineString:function(e){e.arcs=u(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(u)},Polygon:function(e){e.arcs=e.arcs.map(u)},MultiPolygon:function(e){e.arcs=e.arcs.map(c)}};function u(e){var t=[];do{var n=o.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function c(e){return e.map(u)}for(var d in e)s(e[d]);return r&&(a.transform=r,a.arcs=function(e){for(var t=-1,n=e.length;++t<n;){for(var r,a,i=e[t],o=0,s=1,l=i.length,u=i[0],c=u[0],d=u[1];++o<l;)r=(u=i[o])[0],a=u[1],r===c&&a===d||(i[s++]=[r-c,a-d],c=r,d=a);1===s&&(i[s++]=[0,0]),i.length=s}return e}(a.arcs)),a},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(r.topojson=r.topojson||{})},{}],29:[function(e,t,n){var r,a;r=this,a=function(e,i){"use strict";function l(){return!0}function u(e){return e}function c(e){return null!=e.type}function o(e){var t,l=new Array(e.arcs.length),u=0;function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}}function r(e){for(var t=0,n=e.length;t<n;++t,++u)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];o<0&&(o=~o);var s=l[o];null==s?l[o]=u:s!==u&&(l[o]=-1)}}for(t in e.objects)n(e.objects[t]);return function(e){for(var t,n=0,r=e.length;n<r;++n)if(-1===l[(t=e[n])<0?~t:t])return!0;return!1}}function n(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))/2}function t(e){for(var t,n=-1,r=e.length,a=e[r-1],i=0;++n<r;)t=a,a=e[n],i+=t[0]*a[1]-t[1]*a[0];return Math.abs(i)/2}function s(n,r,a){return r=null==r?Number.MIN_VALUE:+r,null==a&&(a=t),function(e,t){return a(i.feature(n,{type:"Polygon",arcs:[e]}).geometry.coordinates[0],t)>=r}}function f(e,t){return e[1][2]-t[1][2]}function r(e){return[e[0],e[1],0]}function a(e,t){return t-e}var d=Math.PI,h=2*d,y=d/4,x=d/180,p=Math.abs,b=Math.atan2,j=Math.cos,w=Math.sin;function g(e,t){for(var n,r,a=0,i=e.length,o=0,s=e[t?a++:i-1],l=s[0]*x,u=s[1]*x/2+y,c=j(u),d=w(u);a<i;++a){n=l,l=(s=e[a])[0]*x,u=s[1]*x/2+y,r=c,c=j(u);var f=l-n,h=0<=f?1:-1,p=h*f,g=d*(d=w(u)),v=r*c+g*j(p),m=g*h*w(p);o+=b(m,v)}return o}e.filter=function(e,t){var n,r=e.objects,a={};function i(e){var t,n;switch(e.type){case"Polygon":t=(n=o(e.arcs))?{type:"Polygon",arcs:n}:{type:null};break;case"MultiPolygon":t=(n=e.arcs.map(o).filter(u)).length?{type:"MultiPolygon",arcs:n}:{type:null};break;case"GeometryCollection":t=(n=e.geometries.map(i).filter(c)).length?{type:"GeometryCollection",geometries:n}:{type:null};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function o(e){return e.length&&function(e){return t(e,!1)}(e[0])?[e[0]].concat(e.slice(1).filter(s)):null}function s(e){return t(e,!0)}for(n in null==t&&(t=l),r)a[n]=i(r[n]);return function(e){var t,n,r=e.objects,a={},i=e.arcs,o=i.length,s=-1,l=new Array(o),u=0,c=-1;function d(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(d);break;case"LineString":h(e.arcs);break;case"MultiLineString":case"Polygon":e.arcs.forEach(h);break;case"MultiPolygon":e.arcs.forEach(p)}}function f(e){e<0&&(e=~e),l[e]||(l[e]=1,++u)}function h(e){e.forEach(f)}function p(e){e.forEach(h)}function g(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(g)};break;case"LineString":t={type:"LineString",arcs:m(e.arcs)};break;case"MultiLineString":t={type:"MultiLineString",arcs:e.arcs.map(m)};break;case"Polygon":t={type:"Polygon",arcs:e.arcs.map(m)};break;case"MultiPolygon":t={type:"MultiPolygon",arcs:e.arcs.map(y)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function v(e){return e<0?~l[~e]:l[e]}function m(e){return e.map(v)}function y(e){return e.map(m)}for(n in r)d(r[n]);for(t=new Array(u);++s<o;)l[s]&&(l[s]=++c,t[c]=i[s]);for(n in r)a[n]=g(r[n]);return{type:"Topology",bbox:e.bbox,transform:e.transform,objects:a,arcs:t}}({type:"Topology",bbox:e.bbox,transform:e.transform,objects:a,arcs:e.arcs})},e.filterAttached=o,e.filterAttachedWeight=function(e,t,n){var r=o(e),a=s(e,t,n);return function(e,t){return r(e,t)||a(e,t)}},e.filterWeight=s,e.planarRingArea=t,e.planarTriangleArea=n,e.presimplify=function(e,l){var u=e.transform?i.transform(e.transform):r,c=function(){var e={},o=[],s=0;function r(e,t){for(;0<t;){var n=(t+1>>1)-1,r=o[n];if(0<=f(e,r))break;o[r._=t]=r,o[e._=t=n]=e}}function a(e,t){for(;;){var n=t+1<<1,r=n-1,a=t,i=o[a];if(r<s&&f(o[r],i)<0&&(i=o[a=r]),n<s&&f(o[n],i)<0&&(i=o[a=n]),a===t)break;o[i._=t]=i,o[e._=t=a]=e}}return e.push=function(e){return r(o[e._=s]=e,s++),s},e.pop=function(){if(!(s<=0)){var e,t=o[0];return 0<--s&&(e=o[s],a(o[e._=0]=e,0)),t}},e.remove=function(e){var t,n=e._;if(o[n]===e)return n!==--s&&(f(t=o[s],e)<0?r:a)(o[t._=n]=t,n),n},e}();null==l&&(l=n);var t=e.arcs.map(function(e){var t,n,r,a=[],i=0;for(n=1,r=(e=e.map(u)).length-1;n<r;++n)(t=[e[n-1],e[n],e[n+1]])[1][2]=l(t),a.push(t),c.push(t);for(e[0][2]=e[r][2]=1/0,n=0,r=a.length;n<r;++n)(t=a[n]).previous=a[n-1],t.next=a[n+1];for(;t=c.pop();){var o=t.previous,s=t.next;t[1][2]<i?t[1][2]=i:i=t[1][2],o&&(o.next=s,o[2]=t[2],d(o)),s&&(s.previous=o,s[0]=t[0],d(s))}return e});function d(e){c.remove(e),e[1][2]=l(e),c.push(e)}return{type:"Topology",bbox:e.bbox,objects:e.objects,arcs:t}},e.quantile=function(e,t){var n=[];return e.arcs.forEach(function(e){e.forEach(function(e){isFinite(e[2])&&n.push(e[2])})}),n.length&&function(e,t){if(!(n=e.length))return;if((t=+t)<=0||n<2)return e[0];if(1<=t)return e[n-1];var n,r=(n-1)*t,a=Math.floor(r),i=e[a],o=e[a+1];return i+(o-i)*(r-a)}(n.sort(a),t)},e.simplify=function(e,o){o=null==o?Number.MIN_VALUE:+o;var t=e.arcs.map(function(e){for(var t,n=-1,r=0,a=e.length,i=new Array(a);++n<a;)(t=e[n])[2]>=o&&(i[r++]=[t[0],t[1]]);return i.length=r,i});return{type:"Topology",transform:e.transform,bbox:e.bbox,objects:e.objects,arcs:t}},e.sphericalRingArea=function(e,t){var n=g(e,!0);return t&&(n*=-1),2*(n<0?h+n:n)},e.sphericalTriangleArea=function(e){return 2*p(g(e,!1))},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n,e("topojson-client")):"function"==typeof define&&define.amd?define(["exports","topojson-client"],a):a(r.topojson=r.topojson||{},r.topojson)},{"topojson-client":27}],30:[function(j,e,w){(function(e,r){"use strict";var a=j("bit-twiddle"),t=j("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var n="undefined"!=typeof Uint8ClampedArray,i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=t([32,0])),i.BUFFER||(i.BUFFER=t([32,0]));var o=i.DATA,s=i.BUFFER;function l(e){if(e){var t=e.length||e.byteLength,n=a.log2(t);o[n].push(e)}}function u(e){e=a.nextPow2(e);var t=a.log2(e),n=o[t];return 0<n.length?n.pop():new ArrayBuffer(e)}function c(e){return new Uint8Array(u(e),0,e)}function d(e){return new Uint16Array(u(2*e),0,e)}function f(e){return new Uint32Array(u(4*e),0,e)}function h(e){return new Int8Array(u(e),0,e)}function p(e){return new Int16Array(u(2*e),0,e)}function g(e){return new Int32Array(u(4*e),0,e)}function v(e){return new Float32Array(u(4*e),0,e)}function m(e){return new Float64Array(u(8*e),0,e)}function y(e){return n?new Uint8ClampedArray(u(e),0,e):c(e)}function x(e){return new DataView(u(e),0,e)}function b(e){e=a.nextPow2(e);var t=a.log2(e),n=s[t];return 0<n.length?n.pop():new r(e)}w.free=function(e){if(r.isBuffer(e))s[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|a.log2(t);o[n].push(e)}},w.freeUint8=w.freeUint16=w.freeUint32=w.freeInt8=w.freeInt16=w.freeInt32=w.freeFloat32=w.freeFloat=w.freeFloat64=w.freeDouble=w.freeUint8Clamped=w.freeDataView=function(e){l(e.buffer)},w.freeArrayBuffer=l,w.freeBuffer=function(e){s[a.log2(e.length)].push(e)},w.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return u(e);switch(t){case"uint8":return c(e);case"uint16":return d(e);case"uint32":return f(e);case"int8":return h(e);case"int16":return p(e);case"int32":return g(e);case"float":case"float32":return v(e);case"double":case"float64":return m(e);case"uint8_clamped":return y(e);case"buffer":return b(e);case"data":case"dataview":return x(e);default:return null}return null},w.mallocArrayBuffer=u,w.mallocUint8=c,w.mallocUint16=d,w.mallocUint32=f,w.mallocInt8=h,w.mallocInt16=p,w.mallocInt32=g,w.mallocFloat32=w.mallocFloat=v,w.mallocFloat64=w.mallocDouble=m,w.mallocUint8Clamped=y,w.mallocDataView=x,w.mallocBuffer=b,w.clearCache=function(){for(var e=0;e<32;++e)i.UINT8[e].length=0,i.UINT16[e].length=0,i.UINT32[e].length=0,i.INT8[e].length=0,i.INT16[e].length=0,i.INT32[e].length=0,i.FLOAT[e].length=0,i.DOUBLE[e].length=0,i.UINT8C[e].length=0,o[e].length=0,s[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},j("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:8}],31:[function(e,t,n){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,a=e[0],i=e[0],o=1;o<r;++o)if(i=a,t(a=e[o],i)){if(o===n){n++;continue}e[n++]=a}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],a=e[0],i=1;i<n;++i,a=r)if(a=r,(r=e[i])!==a){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},{}],32:[function(e,t,n){(function(){var c;c=e("../color/sort.js"),t.exports=function(e,t,n,r,a,i,o){var s,l,u;for(r=r||"asc",a instanceof Array||(a=[a]),n instanceof Array||(n=[n]),i&&void 0!==o&&"number"!=typeof o&&(o=i.id.nesting.indexOf(o)),s=u=0;s<n.length&&(l=n[s],e=i&&e.d3po&&e.d3po.sortKeys?e.d3po.sortKeys[l]:e[l],t=i&&t.d3po&&t.d3po.sortKeys?t.d3po.sortKeys[l]:t[l],0===(u=i&&0<=a.indexOf(l)?c(e,t):e<t?-1:1)&&s!==n.length-1);)s++;return"asc"===r?u:-u}}).call(this)},{"../color/sort.js":49}],33:[function(e,t,n){(function(){t.exports=function(e,t){var n;return e instanceof Array&&(n=null==t?t:t.constructor,0<=e.indexOf(t)||0<=e.indexOf(n))}}).call(this)},{}],34:[function(e,t,n){(function(){var c,d;c=e("./comparator.js"),d=e("../core/fetch/sort.js"),t.exports=function(e,n,r,a,i,o){var t,s,l,u;if(!e||e.length<=1)return e||[];if(i)for(n=n||(i.order.value||i.size.value||i.id.value),r=r||i.order.sort.value,a=a||(i.color.value||[]),l=0,u=e.length;l<u;l++)(t=e[l]).d3po||(t.d3po={}),s="d3po"in t&&"d3po"in t.d3po?t.d3po:t,t.d3po.sortKeys=d(i,s,n,a,o);return e.sort(function(e,t){return c(e,t,n,r,a,i,o)})}}).call(this)},{"../core/fetch/sort.js":65,"./comparator.js":32}],35:[function(e,t,n){(function(){t.exports=function(e,t){return void 0===t?e:!1===t?[]:t instanceof Array?t:(e instanceof Array||(e=[]),0<=e.indexOf(t)?e.splice(e.indexOf(t),1):e.push(t),e)}}).call(this)},{}],36:[function(e,t,n){(function(){var i;(i=function(e){var t,n,r,a;if(e in(a=i.tested))return a[e];for(n=0,r=!1;n<document.styleSheets.length;){if((t=document.styleSheets[n]).href&&0<=t.href.indexOf(e)){r=!0;break}n++}return r}).tested={},t.exports=i}).call(this)},{}],37:[function(e,t,n){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],38:[function(n,r,e){(function(){var e,t;e=n("./ie.js"),t=n("./touch.js"),r.exports=t?{click:"touchend",down:"touchstart",up:"touchend",over:e?"mouseenter":"mouseover",out:e?"mouseleave":"mouseout",move:"mousemove"}:{click:"click",down:"mousedown",up:"mouseup",over:e?"mouseenter":"mouseover",out:e?"mouseleave":"mouseout",move:"mousemove"}}).call(this)},{"./ie.js":37,"./touch.js":43}],39:[function(e,n,t){(function(){var t;t=function(){var e;return e="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",t=function(){return e},e},n.exports=t}).call(this)},{}],40:[function(e,t,n){(function(){t.exports="rtl"===d3.select("html").attr("dir")}).call(this)},{}],41:[function(e,t,n){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],42:[function(e,t,n){(function(){var i;i=function(){var e,t,n,r,a;return(e=document.createElement("p")).style.width="100%",e.style.height="200px",(t=document.createElement("div")).style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),r=e.offsetWidth,t.style.overflow="scroll",r===(a=e.offsetWidth)&&(a=t.clientWidth),document.body.removeChild(t),i=function(){return n},n=r-a},t.exports=i}).call(this)},{}],43:[function(e,t,n){(function(){t.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}).call(this)},{}],44:[function(e,t,n){(function(){t.exports=function(e){var t;return.45<(t=d3.hsl(e)).l&&(.8<t.s&&(t.s=.8),t.l=.45),t.toString()}}).call(this)},{}],45:[function(e,t,n){(function(){t.exports=function(e,t){var n;return void 0===t&&(t=.5),t=(1-(n=d3.hsl(e)).l)*t,n.l+=t,n.s-=t,n.toString()}}).call(this)},{}],46:[function(e,t,n){(function(){t.exports=function(e,t,n,r){var a,i,o;return n=n||1,r=r||1,e=d3.rgb(e),t=d3.rgb(t),o=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),i=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),a=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(o,i,a).toString()}}).call(this)},{}],47:[function(e,t,n){(function(){var r;r=e("./scale.js"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}}).call(this)},{"./scale.js":48}],48:[function(e,t,n){(function(){t.exports=d3.scale.ordinal().range(["#bf3251","#5c57d9","#d6c650","#406662","#872a41","#1c26b3","#d05555","#549e95","#993f7b","#dc8e7a","#ede788","#7485aa","#4d6fd0","#635b56","#7454a6","#a8c380","#8abdb6","#74c0e2","#bcd8af","#a1aafb","#a17cb0","#d1a1bc"])}).call(this)},{}],49:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),(e=0===n.s?361:n.h)===(t=0===r.s?361:r.h)?n.l-r.l:e-t}}).call(this)},{}],50:[function(e,t,n){(function(){t.exports=function(e){var t;return 128<=(299*(t=d3.rgb(e)).r+587*t.g+114*t.b)/1e3?"#444444":"#f7f7f7"}}).call(this)},{}],51:[function(e,t,n){(function(){t.exports=function(e){var t,n;return 0===(e=(e+="").replace(RegExp(" ","g"),"")).indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),t=d3.rgb(e).toString(),n=0<=["black","#000","#000000","0%","0,0,0"].indexOf(e),"#000000"!==t||n}}).call(this)},{}],52:[function(n,r,e){(function(){var i,e,t;i=n("../../client/ie.js"),t=n("./wiki.js"),(e=function(e,t,n){n=n||"",i||"undefined"!=typeof InstallTrigger?console.log("[ d3po ] "+t):0===e.indexOf("group")?console[e]("%c[ d3po ]%c "+t,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight: 400;"+n):console[e]("%c"+t,n+"font-weight: 400;")}).comment=function(e){this("log",e,"color:#aaa;")},e.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},e.group=function(e){this("group",e,"color:#888;")},e.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},e.groupEnd=function(){i||console.groupEnd()},e.log=function(e){this("log",e,"color:#444444;")},e.stack=function(){var e,t,n,r,a;i||(e=new Error).stack&&(r=(r=e.stack.split("\n")).filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3po.js:")<0&&e.indexOf("d3po.min.js:")<0})).length&&r[0].length&&(n=window.chrome?"at ":"@",0<=(a=r[0]).indexOf(n)&&(a=a.split(n)[1]),3===(r=a.split(":")).length&&r.pop(),this("log","line "+r.pop()+" of "+(t=(t=r.join(":").split("/"))[t.length-1])+": "+a,"color:#D74B03;"))},e.time=function(e){i||console.time(e)},e.timeEnd=function(e){i||console.timeEnd(e)},e.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},e.wiki=function(e){e&&(e in t&&(e=d3po.repo+"wiki/"+t[e]),this("log","documentation: "+e,"color:#aaa;"))},r.exports=e}).call(this)},{"../../client/ie.js":37,"./wiki.js":53}],53:[function(e,t,n){(function(){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}}).call(this)},{}],54:[function(e,t,n){var a=e("../../util/buckets.js"),i=e("../fetch/value.js"),o=e("../console/print.js");t.exports=function(n){if(n.dev.value&&o.time("getting color data range"),n.color.domain.value)var r=n.color.domain.value;else{r=[];n.data.pool.forEach(function(e){var t=parseFloat(i(n,e,n.color.value));"number"==typeof t&&!isNaN(t)&&r.indexOf(t)<0&&r.push(t)})}if(n.dev.value&&o.timeEnd("getting color data range"),1<r.length){if(n.dev.value&&o.time("calculating color scale"),(r=d3.extent(r))[0]<0&&0<r[1])3==(e=n.color.range).length&&(r.push(r[1]),r[1]=0);else if(0<r[1]&&0<=r[0]){var e=n.color.heatmap;r=a(r,e.length)}else{e=n.color.range.slice(0);r[0]<0?e.pop():e.shift()}n.color.valueScale=d3.scale.sqrt().domain(r).range(e).interpolate(d3.interpolateRgb),n.dev.value&&o.timeEnd("calculating color scale")}else n.color.valueScale=null}},{"../../util/buckets.js":207,"../console/print.js":52,"../fetch/value.js":67}],55:[function(e,t,n){var l=e("../fetch/value.js"),u=e("../console/print.js"),c=e("../../object/validate.js");t.exports=function(s,e){s.dev.value&&u.time("filtering data");var t=d3.keys(s.data.keys||{});"attrs"in s&&(t=t.concat(d3.keys(s.attrs.keys||{}))),e=e.filter(function(e){return null!==l(s,e,s.id.value)});var r=s.types[s.type.value].requirements||[];s.data.filters.forEach(function(n){0<=t.indexOf(s[n].value)&&0<=r.indexOf(n)&&(e=e.filter(function(e){var t=l(s,e,s[n].value);return"y"===n&&s.y2.value&&null===t?t=l(s,e,s.y2.value):"x"===n&&s.x2.value&&null===t&&(t=l(s,e,s.x2.value)),"size"===n?"number"==typeof t:null!==t}))});var a=s.data.solo.length?"solo":"mute";return s.data[a].length?s.data[a].forEach(function(i){function o(t){var e=s[i][a].value,n=!1;return e.forEach(function(e){"function"==typeof e?n=e(t):e===t&&(n=!0)}),"solo"==a?n:!n}function t(e,t){if(!t&&s[i].nesting){var n=s[i].nesting;c(n)&&(n=d3.values(n));for(var r=0;r<n.length;r++){var a=e.filter(function(e){return o(l(s,e,n[r]))});a.length&&(e=a)}}else e=e.filter(function(e){return o(l(s,e,s[i].value))});return e}e=t(e),"id"===i&&("nodes"in s&&s.nodes.value&&(s.dev.value&&u.time("filtering nodes"),s.nodes.restricted=t(s.nodes.value),s.dev.value&&u.timeEnd("filtering nodes")),"edges"in s&&s.edges.value&&(s.dev.value&&u.time("filtering edges"),s.edges.restricted=s.edges.value.filter(function(e){return 2===t([e[s.edges.source],e[s.edges.target]]).length}),s.dev.value&&u.timeEnd("filtering edges")))}):"nodes"in s&&(s.nodes.restricted=void 0,s.edges.restricted=void 0),s.dev.value&&u.timeEnd("filtering data"),e}},{"../../object/validate.js":175,"../console/print.js":52,"../fetch/value.js":67}],56:[function(e,t,n){var _=e("./nest.js"),k=e("../fetch/value.js"),z=e("../console/print.js"),M=e("../../util/uniques.js");t.exports=function(i){var e;if(i.data.time={values:[]},i.time&&i.time.value){i.dev.value&&(e="analyzing time periods",z.time(e)),i.data.time.values=M(i.data.value,i.time.value,k,i),i.data.time.values.sort(function(e,t){return e-t});var o=[];i.data.time.values.forEach(function(e,t){if(0!==t){var n=i.data.time.values[t-1];o.push(e-n),t===i.data.time.values.length-1&&(i.data.time.total=e-i.data.time.values[0])}}),o=d3.min(o),i.data.time.step=o;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];i.data.time.periods=s;function u(e,t,n){return i.data.time.stepDivider||(arr=l.slice(0,n),arr.length?i.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):i.data.time.stepDivider=1),Math.round(Math.floor(t-e)/i.data.time.stepDivider)}var c=i.data.time.total;s.forEach(function(e,t){var n="Date"===e?28:l[t];if(!i.data.time.stepType&&(t===s.length-1||Math.round(o)<n)){i.data.time.stepType=e;var r=i.data.time.values[0],a=i.data.time.values[i.data.time.values.length-1];i.data.time.stepIntervals=u(r,a,t)}!i.data.time.totalType&&(t===s.length-1||Math.round(c)<n)&&(i.data.time.totalType=e),o/=n,c/=n}),i.data.time.values.forEach(function(e,t){if(0!==t){var n=i.data.time.values[0];i.data.time.dataSteps.push(u(n,e,s.indexOf(i.data.time.stepType)))}else i.data.time.dataSteps=[0]});var t=i.time.format.value,a=i.format.locale.value,n=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];i.data.time.functions=n;function r(e,t,n){return e===t?n&&a.timeFormat[e+"Small"]?a.timeFormat[e+"Small"]:a.timeFormat[e]:4<=s.indexOf(e)||s.indexOf(t)<=3?a.timeFormat[t+"-"+e]:(r="Date"===t?a.timeFormat[t]:a.timeFormat[t+"-Date"],"Hours"===e?r+" "+a.timeFormat[e]:r+" "+a.timeFormat["Hours-"+e]);var r}if(i.data.time.getFormat=r,t)"string"==typeof t?i.data.time.format=d3.locale(a.format).timeFormat(t):"function"==typeof t?i.data.time.format=t:t instanceof Array&&(i.data.time.format=d3.locale(a.format).timeFormat.multi(t)),i.data.time.multiFormat=i.data.time.format;else{for(var d=i.data.time.stepType,f=i.data.time.totalType,h=[],p=s.indexOf(d);p<=s.indexOf(f);p++){var g=p-1<s.indexOf(d)?s[p]:s[p-1],v=s[p]===g&&d!==f,m=r(g,s[p],v);h.push([m,n[p]])}i.data.time.format=d3.locale(a.format).timeFormat(r(d,f)),1<h.length?(h[h.length-1][1]=function(e){return!0},i.data.time.multiFormat=d3.locale(a.format).timeFormat.multi(h)):i.data.time.multiFormat=i.data.time.format}i.data.time.ticks=[];for(var y=d3.min(i.data.time.values),x=d3.max(i.data.time.values),b=0;b<=i.data.time.stepIntervals;b++){var j=new Date(y);j["set"+i.data.time.stepType](j["get"+i.data.time.stepType]()+b),j<=x&&i.data.time.ticks.push(j)}i.dev.value&&z.timeEnd(e)}if(i.dev.value&&(e="nesting data by time and depths",z.time(e)),i.data.nested={},0===i.data.time.values.length)i.data.nested.all={},i.id.nesting.forEach(function(e,t){var n=i.id.nesting.slice(0,t+1);i.data.nested.all[e]=_(i,i.data.value,n)});else{var w=i.data.value.reduce(function(e,t){var n=k(i,t,i.time.value).getTime();return n in e||(e[n]=[]),e[n].push(t),e},{});i.data.time.values.forEach(function(e){var r=e.getTime();i.data.nested[r]={},i.id.nesting.forEach(function(e,t){var n=i.id.nesting.slice(0,t+1);i.data.nested[r][e]=_(i,w[r],n)})})}i.dev.value&&z.timeEnd(e)}},{"../../util/uniques.js":213,"../console/print.js":52,"../fetch/value.js":67,"./nest.js":60}],57:[function(e,t,n){(function(){var h;h=e("../fetch/value.js"),t.exports=function(n,e,t){var r,a,i,o,s,l,u,c,d,f;if(a=d3.nest(),n.id.grouping.value)for(void 0===t&&(t=n.id.nesting),i=o=0,l=t.length;o<l;i=++o)c=t[i],i<n.depth.value&&function(t){a.key(function(e){return h(n,e.d3po,t)})}(c);for(d=[],s=0,u=e.length;s<u;s++)r=e[s],(f=n.size.value?h(n,r,n.size.value):1)&&"number"==typeof f&&0<f&&(delete r.d3po.r,delete r.d3po.x,delete r.d3po.y,d.push({d3po:r,id:r[n.id.value],value:f}));return a.entries(d)}}).call(this)},{"../fetch/value.js":67}],58:[function(e,t,n){(function(){var d,f,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};d=e("../console/print.js"),f=e("../../object/validate.js"),t.exports=function(l,u){var c,e,t,n,r,a,i,o,s;if(i=u+" key analysis",l.dev.value&&d.time(i),l[u].keys={},c=function(e){var t,n,r,a,i,o,s;if(e instanceof Array){for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(c(t));return i}if(f(e)){for(r in o=[],e)s=e[r],0===r.indexOf("d3po")||0<=h.call(l[u].keys,r)||null===s?o.push(void 0):o.push(l[u].keys[r]=typeof s);return o}},f(l[u].value))for(e in n=d3.keys(l[u].value).length===l.id.nesting.length,r=l[u].value)if(o=r[e],n&&0<=l.id.nesting.indexOf(e)&&f(o))for(t in o)s=o[t],c(s);else c(o);else for(e in a=l[u].value)o=a[e],c(o);if(l.dev.value)return d.time(i)}}).call(this)},{"../../object/validate.js":175,"../console/print.js":52}],59:[function(e,t,n){(function(){var c,d;c=e("../console/print.js"),d=e("../../object/validate.js"),t.exports=function(a,i,o){var s,l,u;return(s=a.dev.value)&&c.time("loading "+i),u=a[i].url,a[i].filetype.value?l=a[i].filetype.value:(l=1<(l=u.slice(u.length-5).split(".")).length&&l[1])?("txt"===l&&(l="text"),a[i].filetype.accepted.indexOf(l)<0&&(l="json")):l="json",("dsv"===l?d3.dsv(a[i].delimiter.value,"text/plain"):d3[l])(u,function(e,t){var n,r;if(!e&&t){if("function"==typeof a[i].callback){if(r=a[i].callback(t))if(d(r)&&i in r)for(n in r)n in a&&(a[n].value=r[n]);else a[i].value=r}else a[i].value=t;["json"].indexOf(l)<0&&a[i].value.forEach(function(e){var t;for(n in t=[],e)isNaN(e[n])?"false"===e[n].toLowerCase()?t.push(e[n]=!1):"true"===e[n].toLowerCase()?t.push(e[n]=!0):"null"===e[n].toLowerCase()?t.push(e[n]=null):"undefined"===e[n].toLowerCase()?t.push(e[n]=void 0):t.push(void 0):t.push(e[n]=parseFloat(e[n]));return t}),a[i].changed=!0,a[i].loaded=!0}else a.error.internal='Could not load data from: "'+u+'"';return s&&c.timeEnd("loading "+i),o()})}}).call(this)},{"../../object/validate.js":175,"../console/print.js":52}],60:[function(e,t,n){var k=e("../fetch/value.js"),a=e("../../object/validate.js"),z=e("../../util/uniques.js"),M=function(e,n){var r=[];return function e(t){t instanceof Array?t.forEach(e):a(t)&&n in t&&(t[n]instanceof Array?t[n].forEach(e):r.push(t))}(e),r},A=function(e){var a=[];return function e(t){for(var n=0;n<t.length;n++){var r=t[n];r&&(r.constructor===Array?e(r):a.push(r))}}(e),z(a)},i=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return i(e)}),delete e.values,e):e.values?e.values:e};t.exports=function(x,e,b,t){void 0===t&&(t=!0);var n=d3.nest(),j=[],w="temp"in x?["active","temp","total"]:[];b.length?b.forEach(function(t,e){n.key(function(e){return k(x,e,t)})}):n.key(function(e){return!0}),t&&x.axes&&x.axes.discrete&&(!x.time||x[x.axes.discrete].value!==x.time.value)&&n.key(function(e){return k(x,e,x[x.axes.discrete].value)});var r=b.length&&0<=x.id.nesting.indexOf(b[b.length-1]),_=b.length&&r?b.length-1:0;r?x.id.nesting[_]:x.depth.value;n.rollup(function(e){if(1===e.length&&"d3po"in e[0])return j.push(e[0]),e[0];e=e.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var t={d3po:{data:{},depth:_}};if(d3.sum(e,function(e){return"d3po"in e&&e.d3po.merged?1:0})===e.length)for(var n=0;n<e.length;n++){var r=e[n];t.d3po.merged||(t.d3po.merged=[]),t.d3po.merged=t.d3po.merged.concat(r.d3po.merged),r.d3po.text&&(t.d3po.text=r.d3po.text)}for(var a=0;a<w.length;a++){var i=w[a],o=x.aggs&&x.aggs.value[s]?x.aggs.value[s]:"sum";"d3po"in e[0]&&i in e[0].d3po?t.d3po[i]=d3.sum(e,function(e){return e.d3po[i]}):t.d3po[i]="function"==typeof o?o(e):d3[o](e,function(e){var t="total"===i?1:0;return x[i].value&&"number"!=typeof(t=k(x,e,x[i].value))&&(t=t?1:0),t})}for(var s in x.data.keys){if(s in t.d3po.data)t[s]=t.d3po[s];else{var l=x.aggs&&x.aggs.value[s]?x.aggs.value[s]:"sum",u=typeof l,c=x.data.keys[s],d=0<=x.id.nesting.indexOf(s),f="time"in x&&s===x.time.value;if(s in t.d3po.data)t[s]=t.d3po[s];else if("function"==u)t[s]=x.aggs.value[s](e);else if(f)t[s]=A(z(e,s));else if(x.axes&&x.axes.discrete&&x[x.axes.discrete].value===s)t[s]=z(e,s);else if("number"!==c||"string"!=u||d){var h=M(e,s),p=1===h.length?h[0][s]:z(h,s);if(1===h.length)t[s]=p;else if(p&&p.length)p instanceof Array||(p=[p]),d&&x.id.nesting.indexOf(s)>_?t[s]=h:t[s]=p;else if(d){var g=x.id.nesting.indexOf(s)-1;_<=g&&(!("endPoint"in t.d3po)||t.d3po.endPoint>_)&&(t.d3po.endPoint=_)}}else{var v=e.map(function(e){return e[s]});(v=v.filter(function(e){return typeof e===c})).length&&(t[s]=d3[l](v))}}s in t&&t[s]instanceof Array&&1===t[s].length&&(t[s]=t[s][0])}for(var m=0;m<b.length;m++){var y=b[m];y in t||(t[y]=k(x,e[0],y))}return j.push(t),t});var a=function(e,t,n){if(e.children){for(var r in"number"==x.data.keys[b[t]]&&(e.key=parseFloat(e.key)),n[b[t]]=e.key,delete e.key,n)e[r]=n[r];t++,e.children.forEach(function(e){a(e,t,n)})}};return n=n.entries(e).map(i).map(function(e){return a(e,0,{}),e}),j}},{"../../object/validate.js":175,"../../util/uniques.js":213,"../fetch/value.js":67}],61:[function(e,t,n){var p=e("../../array/sort.js"),g=e("./nest.js"),v=e("../fetch/value.js"),m=(e("../fetch/color.js"),e("../fetch/text.js"));t.exports=function(i,e,o){var s;if("number"==typeof(s=!1===i.size.threshold.value?0:"number"==typeof i.size.threshold.value?i.size.threshold.value:"function"==typeof i.size.threshold.value?i.size.threshold.value(i):"number"==typeof i.types[i.type.value].threshold?i.types[i.type.value].threshold:"function"==typeof i.types[i.type.value].threshold?i.types[i.type.value].threshold(i):.02)&&0<s){var l=[],u=0===i.depth.value?0:{},c=[],d=[],f=[],h={},t=d3.nest();o&&t.key(function(e){return v(i,e,o)}),t.rollup(function(e){var t=e.length;i.aggs.value[i.size.value]?"function"==typeof i.aggs.value[i.size.value]?t=i.aggs.value[i.size.value](e):"string"==typeof i.aggs.value[i.size.value]&&(t=d3[i.aggs.value[i.size.value]](e,function(e){return v(i,e,i.size.value)})):t=d3.sum(e,function(e){return v(i,e,i.size.value)});var n=o?v(i,e[0],o):"all";return h[n]=t}).entries(e),e.forEach(function(e){var t=v(i,e,i.id.value),n=v(i,e,i.size.value),r=o?v(i,e,o):"all";if(n/h[r]>=s&&l.indexOf(t)<0&&(l.push(t),i.depth.value)){var a=v(i,e,i.id.nesting[i.depth.value-1]);d.indexOf(a)<0&&d.push(a)}});var n=e.filter(function(e){var t=v(i,e,i.id.value),n=0<=l.indexOf(t),r=i.depth.value?v(i,e,i.id.nesting[i.depth.value-1]):null;if(null!==r&&d.indexOf(r)<0&&f.indexOf(r)<0&&f.push(r),!n){var a=v(i,e,i.size.value);0<a&&(0===i.depth.value?u<a&&(u=a):(r in u||(u[r]=0),a>u[r]&&(u[r]=a)),c.push(e))}return n});if(1<c.length){c=p(c,i.size.value,"desc",[],i);var r=i.id.nesting.slice(0,i.depth.value);0<=i.types[i.type.value].requirements.indexOf(i.axes.discrete)&&r.push(i[i.axes.discrete].value);var a=g(i,c,r);a.forEach(function(r){var e,t=i.id.nesting[i.depth.value-1],n=v(i,r,t);children=t?c.filter(function(e){return v(i,e,t)===n}):c,1<children.length&&(i.id.nesting.forEach(function(e,t){if(i.depth.value==t){var n=r[e];r[e]="string"==typeof n?"d3po_other_"+n:"d3po_other"}else t>i.depth.value&&delete r[e]}),i.color.value&&"string"===i.color.type&&(0===i.depth.value?r[i.color.value]=i.color.missing:r[i.color.value]=v(i,n,i.color.value,t)),i.icon.value&&(r[i.icon.value]=v(i,n,i.icon.value,t)),n&&(r.d3po.depth=i.depth.value),0===i.depth.value?(e=i.format.value(i.format.locale.value.ui.values,{key:"threshold",vars:i}),e+=" < "+i.format.value(u,{key:i.size.value,vars:i})):(e=(e=m(i,r,i.depth.value-1)).length?e[0].split(" < ")[0]:i.format.value(i.format.locale.value.ui.values,{key:"threshold",vars:i}),f.indexOf(n)<0&&(e+=" < "+i.format.value(u[n],{key:i.size.value,vars:i}))),f.indexOf(n)<0&&(e+=" ("+i.format.value(100*s,{key:"share",vars:i})+")"),r.d3po.threshold=u,r.d3po.merged=children,i.text.value&&(r[i.text.value]=e),r.d3po.text=e)})}else a=c;return n.concat(a)}return e}},{"../../array/sort.js":34,"../fetch/color.js":63,"../fetch/text.js":66,"../fetch/value.js":67,"./nest.js":60}],62:[function(e,t,n){(function(){var b;b=e("../../font/sizes.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x;if(x=t.values||e.data.time.ticks,g=t.style||{},o=t.limit||e.width.value,v={},u=e.data.time.periods,p=e.data.time.stepType,m=e.data.time.totalType,a=e.data.time.functions,i=e.data.time.getFormat,s=e.format.locale.value.format,e.time.format.value)v.format=e.data.time.format,v.values=x,v.sizes=b(x.map(function(e){return v.format(e)}),g);else for(l=u.indexOf(p);l<=u.indexOf(m);){if(y=x.filter(function(e){var t,n;if(l===u.indexOf(p))return!0;if(t=!0,n=l-1,l<0)return!0;for(;n>=u.indexOf(p)&&t;)t=!a[n](e),n--;return t}),u[l]===m)r=d3.locale(s).timeFormat(i(u[l],m));else{for(c=l,r=[];c<=u.indexOf(m);)d=c-1<u.indexOf(p)?c:c-1,d=u[d],h=u[c]===d&&p!==m,n=i(d,u[c],h),r.push([n,a[c]]),c++;r[r.length-1][1]=function(){return!0},r=d3.locale(s).timeFormat.multi(r)}if(f=b(y.map(function(e){return r(e)}),g),d3.sum(f,function(e){return e.width})<o||l===u.indexOf(m)){v.format=r,v.values=y,v.sizes=f;break}l++}return v}}).call(this)},{"../../font/sizes.js":104}],63:[function(e,t,n){(function(){var l,u,c,r,d,a,f;l=e("./value.js"),r=e("../../color/random.js"),a=e("../../color/validate.js"),f=e("../../object/validate.js"),d=e("../../util/uniques.js"),t.exports=function(e,t,n){var r,a,i,o,s;if(f(t)&&"d3po"in t&&"color"in t.d3po)return t.d3po.color;if(void 0===n&&(n=e.id.value),"number"==typeof n&&(n=e.id.nesting[n]),e.color.value){for(i=[],o=e.id.nesting.indexOf(n);0<=o;){if(a=e.id.nesting[o],1===(s=d(t,e.color.value,l,e,a)).length&&(s=s[0]),!(s instanceof Array)&&null!=s){r=u(e,t,s,n),i.indexOf(r)<0&&i.push(r);break}o--}return 1===i.length?i[0]:e.color.missing}return c(e,t,n)},u=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):a(n)?n:c(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):c(e,t,r)},c=function(e,t,n){return f(t)&&(t=l(e,t,n)),t instanceof Array&&(t=t[0]),r(t,e.color.scale.value)}}).call(this)},{"../../color/random.js":47,"../../color/validate.js":51,"../../object/validate.js":175,"../../util/uniques.js":213,"./value.js":67}],64:[function(e,t,n){var E=e("../data/filter.js"),S=e("../data/nest.js"),O=e("../console/print.js"),C=e("../../string/format.js"),N=e("../../string/list.js");t.exports=function(t,n,e){if(!t.data.value)return[];void 0===e&&(e=t.depth.value);var r=t.id.nesting[e];if(!n||n instanceof Array||(n=[n]),!n&&"time"in t){n=[];var a=t.time.solo.value.length?"solo":"mute",i=t.time[a].value;if(i.length){n=[];for(var o=0;o<i.length;o++){var s=i[o];if("function"==typeof s)for(var l=0;l<t.data.time.values.length;l++){var u=t.data.time.values[l].getTime();s(u)&&n.push(u)}else if(s.constructor===Date)n.push(new Date(s).getTime());else{4===(s+="").length&&parseInt(s)+""===s&&(s+="/01/01");var c=new Date(s);"Invalid Date"!==c&&n.push(c.getTime())}}"mute"==a&&(n=t.data.time.values.filter(function(e){return n.indexOf(e.getTime())<0}))}else n.push("all")}else n=["all"];if(0<=n.indexOf("all")&&t.data.time.values.length){n=t.data.time.values.slice(0);for(var d=0;d<n.length;d++)n[d]=n[d].getTime()}var f=[t.type.value,r,e].concat(t.data.filters).concat(n),h=t.data.solo.length?"solo":"mute",p=d3.keys(t.data.cache),g=t.types[t.type.value].filter||void 0;if(t.data[h].length)for(var v=0;v<t.data[h].length;v++){var m=t.data[h][v],y=t[m][h].value.slice(0);y.unshift(m),y.unshift(h),f=f.concat(y)}t.axes&&t.axes.discrete&&f.push(t.axes.discrete),f=f.join("_"),t.data.cacheID=f;for(var x,b=0;b<p.length;b++){if(p[b].split("_").slice(1).join("_")===f){f=(new Date).getTime()+"_"+f,t.data.cache[f]=t.data.cache[p[b]],delete t.data.cache[p[b]];break}}if(t.data.cache[f])return t.dev.value&&O.comment("data already cached"),x=t.data.cache[f].data,"nodes"in t&&(t.nodes.restricted=t.data.cache[f].nodes,t.edges.restricted=t.data.cache[f].edges),"function"==typeof g&&(x=g(t,x)),x;var j=[];if(x=[],t.data.value&&t.data.value.length)for(var w=0;w<n.length;w++){var _=n[w];t.data.nested[_]?x=x.concat(t.data.nested[_][r]):j.push(_)}if(0===x.length&&j.length&&!t.error.internal){1<j.length&&(j=d3.extent(j)),j=(j=j.map(function(e){return t.data.time.format(new Date(e))})).join(" - ");var k=t.format.locale.value.error.dataYear,z=t.format.locale.value.ui.and;j=N(j,z),t.error.internal=C(k,j),t.time.missing=!0}else{if(t.time&&(t.time.missing=!1),1<n.length){var M=!1;if(["x","y","x2","y2"].forEach(function(e){t[e].value===t.time.value&&"discrete"===t[e].scale.value&&(M=!0)}),!M){var A=t.id.nesting.slice(0,e+1);x=S(t,x,A)}}x=x?E(t,x):[],20===p.length&&(p.sort(),delete t.data.cache[p[0]]),f=(new Date).getTime()+"_"+f,t.data.cache[f]={data:x},"nodes"in t&&(t.data.cache[f].nodes=t.nodes.restricted,t.data.cache[f].edges=t.edges.restricted),"function"==typeof g&&(x=g(t,x)),t.dev.value&&O.comment("storing data in cache")}return x}},{"../../string/format.js":176,"../../string/list.js":177,"../console/print.js":52,"../data/filter.js":55,"../data/nest.js":60}],65:[function(e,t,n){(function(){var d,f,h;h=e("./value.js"),d=e("./color.js"),f=e("./text.js"),t.exports=function(e,t,n,r,a){var i,o,s,l,u,c;for(n instanceof Array||(n=[n]),r instanceof Array||(r=[r]),e&&(void 0===a?a=e.id.value:"number"!=typeof a&&(a=e.id.nesting.indexOf(a))),u={},o=0,l=n.length;o<l;o++)s=n[o],c=e?0<=r.indexOf(s)?d(e,t,a):s===e.text.value?f(e,t,a):3===d3.keys(t).length&&t.d3po&&t.key&&t.values?h(e,t.values.map(function(e){return e.d3po}),s,a):h(e,t,s,a):t[s],c=0<=[e.data.keys[s],e.attrs.keys[s]].indexOf("number")?((i=e.order.agg.value||e.aggs.value[s]||"sum").constructor===String&&(i=d3[i]),c instanceof Array||(c=[c]),i(c)):(c instanceof Array&&(c=c[0]),"string"==typeof c?c.toLowerCase():c),u[s]=c;return u}}).call(this)},{"./color.js":63,"./text.js":66,"./value.js":67}],66:[function(e,t,n){var s=e("./value.js"),l=e("../../object/validate.js"),u=e("../../util/uniques.js");t.exports=function(n,r,e){"number"!=typeof e&&(e=n.depth.value);var t,a=n.id.nesting[e];n.text.nesting&&l(n.text.nesting)?t=n.text.nesting[a]?n.text.nesting[a]:n.text.value:(t=[],n.text.value&&e===n.depth.value&&t.push(n.text.value),t.push(a)),t instanceof Array||(t=[t]);var i=[];if(l(r)&&"d3po"in r&&r.d3po.text)i.push(r.d3po.text.toString()),i.push(n.format.value(r.d3po.text.toString(),{vars:n,data:r}));else{var o=l(r)?r:void 0;o&&r[n.id.value]instanceof Array?r=r[n.id.value]:r instanceof Array||(r=[r]),t.forEach(function(t){var e=u(r,t,s,n,a);e.length&&(1<e.length&&(e=e.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),1===(e=e.map(function(e){return e instanceof Array?(e=e.filter(function(e){return e})).map(function(e){return n.format.value(e.toString(),{vars:n,data:o,key:t})}):e?n.format.value(e.toString(),{vars:n,data:o,key:t}):void 0})).length&&(e=e[0]),i.push(e))})}return i}},{"../../object/validate.js":175,"../../util/uniques.js":213,"./value.js":67}],67:[function(t,n,e){(function(){var l,u,c,e,o,d,f,h,p,g;p=t("../../object/validate.js"),h=t("../../util/uniques.js"),f=function(e,t,n,r){var a,i,o,s;if(i=p(t),"function"==typeof n&&i)return n(t,e);if(i){if(n in t)return t[n];if(a=e.data.cacheID+"_"+r,l(t,a,e),n in t.d3po.data[a])return t.d3po.data[a][n];if(r in t)t=t[r];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],r!==n&&(o=c(e,t,r,e.id.value)),null==o&&(o=u(e,t,r,e.id.value)),null==o)return null;if(r===n)return o;t=o}}return t instanceof Array&&!p(t[0])&&(t=h(t)),t instanceof Array&&p(t[0])&&(s=h(t,n)).length?s:(s=c(e,t,n,r))?s:s=u(e,t,n,r)},c=function(e,t,n,r){var a;return e.data.viz instanceof Array&&n in e.data.keys&&(a=h(d(e.data.viz,t,r),n)),a&&a.length?a:null},u=function(e,r,t,n){var a,i,o,s;if("attrs"in e&&e.attrs.value&&t in e.attrs.keys)if((a=p(e.attrs.value)&&n in e.attrs.value?e.attrs.value[n]:e.attrs.value)instanceof Array){if((o=h(d(a,r,n),t)).length)return o}else if(r instanceof Array){if((a=[function(){var e,t,n;if(i in a){for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(a[i]);return n}}()]).length&&(s=h(a,t)).length)return s}else if(r in a)return a[r][t];return null},d=function(e,t,n){return t instanceof Array?e.filter(function(e){return 0<=t.indexOf(e[n])}):e.filter(function(e){return e[n]===t})},l=function(e,t,n){return"d3po"in e||(e.d3po={}),"data"in e.d3po||(e.d3po.data={}),!(n.data.changed||n.attrs&&n.attrs.changed)&&t in e.d3po.data||(e.d3po.data[t]={}),e},g=function(e,t,n,r,a){var i,o,s,l,u,c,d;if(null===a)return a;c="time"in e&&e.time.value===r,a instanceof Array||(a=[a]);for(s=l=0,u=a.length;l<u;s=++l)d=a[s],c&&null!==d&&d.constructor!==Date&&(4===(d+="").length&&parseInt(d)+""===d&&(d+="/01/01"),"Invalid Date"!==(o=new Date(d))&&(a[s]=o));return 1===a.length&&(a=a[0]),null===a||!p(t)||"string"!=typeof r||r in t||(i=e.data.cacheID+"_"+n,t.d3po.data[i][r]=a),a},o=function(e,t,n,r){var a,i,o,s,l;for(l=[],i=0,o=t.length;i<o;i++)a=t[i],p(a)?(s=f(e,a,n,r),l.push(g(e,a,r,n,s))):l.push(a);return"number"!=typeof l[0]&&(l=h(l)),1===l.length?l[0]:l},e=function(e,t,n,r){var a,i;return n?"number"==typeof n?n:(a=p(t),r=r||e.id.value,i=a&&t.values instanceof Array?o(e,t.values,n,r):a&&t[n]instanceof Array?o(e,t[n],n,r):t instanceof Array?o(e,t,n,r):(i=f(e,t,n,r),g(e,t,r,n,i))):null},n.exports=e}).call(this)},{"../../object/validate.js":175,"../../util/uniques.js":213}],68:[function(e,t,n){(function(){t.exports=function(e){var t,n,r;return["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},(r=d3.select("body").selectAll(e+".d3po_tester").data([0])).enter().append(e).attr("class","d3po_tester").style(n).attr(t),r}}).call(this)},{}],69:[function(e,t,n){t.exports={dev:{accepted:"{0} ليس قيمة مقبولة لـ{1}، يرجى إستخدام أحد الإجراءات التالية: {2}.",noChange:"لم يتم تحديث {0} بسبب عدم وجود تغيرات عليه.",noContainer:"الحاوية غير موجودة في الصفحة {0}.",of:"من",oldStyle:"تم دمج الخصائص الشكلية لـ{0} داخل .{1}().",sameEdge:"لا يمكن لحواف الشكل أن تكون متصله بنفسها، سيتم إزالة هذه الحواف تلقائيًا {0}.",set:"تم حفظ {0}.",setLong:"تم حفظ {0} بالقيمة {1}.",setContainer:"يرجى تحديد عنصر الحاوية بإستخدام .container()."},error:{accepted:"{0} ليس {1} مقبول للشكل البياني {2}، رجاءً إستخدم أحد هذه الطرق: {3}.",connections:"لا يوجد روابط متصلة مع {0}.",data:"البيانات غير متوفرة.",dataYear:"البيانات غير متوفرة لـ{0}.",lib:"يتطلب رسم الشكل البياني {0} توفر المكتبة البرمجية {1}.",libs:"يتطلب رسم الشكل البياني {0} توفرهذه المكتبات البرمجية: {1}.",method:"يتطلب الرسم البياني {0} وجود الدالة {1}.",methods:"يتطلب الرسم البياني {0} وجود الدوال التالية: {1}."},lowercase:[],method:{active:"أجزاء نشطة",color:"لون",depth:"عمق",dev:"مُفصَّل",focus:"تركيز",icon:"أيقونة",id:"معرف",height:"طول",labels:"وسم",legend:"مفسِّر",margin:"هامش",messages:"رسائل الحالة",order:"رتِّب",search:"بحث",shape:"شكل",size:"حجم",style:"نمط",temp:"أجزاء مؤقتة",text:"نص",time:"وقت",timeline:"جدول زمني",total:"مجوع الأجزاء",type:"نوع",width:"عرض",x:"محور سيني",y:"محور صادي",zoom:"زوم",mode:"طريقة",mute:"إخفاء",solo:"منفرد"},time:["تاريخ","يوم","شهر","وقت","سنة"],visualization:{bubbles:"فقاعات",chart:"مخطط بياني",geomap:"خريطة جغرافية",line:"مخطط بياني خطّي",network:"شبكة",rings:"خواتم",scatter:"مخطط بياني نقاطي",stacked:"رسم بياني مكدس",treemap:"رسم بياني شجري",bar:"مخطط بياني شريطي",box:"مخطط بياني صنوقي",paths:"مسارات",pie:"مخطط بياني دائري",table:"الجدول"},ui:{and:"و",back:"العودة",collapse:"أنقر للإخفاء",error:"خطأ",expand:"أنقر للتفاصيل",loading:"جار التحميل...",more:"{0} أخرى",moreInfo:"أنقر لمزيد من المعلومات",noResults:"لا يوجد نتائج تطابق {0}.",primary:"الروابط الإتصالية الأساسية",share:"شارك",total:"مجموع",values:"القيم",including:"بما فيها",or:"أو",iqr:"مجموعة الشرائح الربعية ل{0}",max:"الحد الأعلى",min:"الحد الأدنى",percentile:"المئين {0}",tukey_bottom:"التوكي الأسفل",tukey_top:"التوكي الأعلى",quartile_first:"الربع الأول",quartile_third:"الربع الثالث",median:"وسيط"},message:{data:"البيانات تحت التحليل",draw:"رسم المخطط البياني",initializing:"تهيئة {0}",loading:"تحميل البيانات",tooltipReset:"إعادة تهيئة التفاصيل المنبثقة",ui:"تحديث واجهة المستخدم"},uppercase:[]}},{}],70:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},error:{accepted:"{0} ist kein gültiger {1} für {2}-Darstellungen. Benutzen Sie bitte: {3}.",connections:"Keine Verbindungen verfügbar für {0}.",data:"Keine Daten verfügbar",dataYear:"Für {0} sind keine Daten verfügbar.",lib:"{0}-Darstellungen erfordern das Laden der Bibliothek {1}.",libs:"{0}-Darstellungen erfordern das Laden folgender Bibliotheken: {1}.",method:"{0}-Darstellungen erfordern die Methode {1}.",methods:"Weitere Einstellungen für folgende Methoden {1} sind bei {0}-Darstellungen erforderlich."},lowercase:["ein","ein","und","wie","bei","aber","durch","für","von","wenn","in","in","in der Nähe","noch","von","auf","auf","oder","pro","das","die","zu","mit","über","gegen","gegen."],method:{active:"aktive Segmente",color:"Farbe",depth:"Tiefe",dev:"ausführlich",focus:"Fokus",icon:"Symbol",id:"Kennung",height:"Höhe",labels:"Beschriftungen",legend:"Legende",margin:"Rand",messages:"Statusmeldungen",order:"Reihenfolge",search:"Suche",shape:"Form",size:"Größe",style:"Stil",temp:"temporäre Segmente",text:"Text",time:"Zeit",timeline:"Zeitleiste",total:"Segmente gesamt",type:"Typ",width:"Breite",x:"x-Achse",y:"y-Achse",zoom:"Zoom",mode:"Modus",mute:"ausblenden",solo:"isolieren"},time:["Datum","Tag","Monat","Zeit","Jahr"],visualization:{bubbles:"Blasen",chart:"Diagramm",geomap:"Karte",line:"Liniendiagramm",network:"Netzwerk",rings:"Ringe",scatter:"Punktdiagramm",stacked:"Gestapelte Fläche",treemap:"Baumdiagramm",bar:"Balkendiagramm",box:"Boxplot",paths:"Pfade",pie:"Kreisdiagramm",table:"Tabelle"},ui:{and:"und",back:"zurück",collapse:"Zum Ausblenden klicken",error:"Fehler",expand:"Zum Einblenden klicken",loading:"Lade...",more:"{0} weitere",moreInfo:"Für zusätzliche Informationen klicken",noResults:"Keine Ergebnisse für {0} gefunden.",primary:"Primäre Verbindungen",share:"verteilung",total:"gesamt",values:"Werte",including:"einschließlich",or:"oder",iqr:"Interquartilsabstände {0}",max:"Maximalwert",min:"Minimalwert",percentile:"Perzentil P{0}",tukey_bottom:"Unterer Ausreißer",tukey_top:"Oberer Ausreißer",quartile_first:"Unteres Quartil Q1",quartile_third:"Oberes Quartil Q3",median:"Medianwert"},message:{data:"analysiere Daten",draw:"Darstellung wird gerendert",initializing:"initialisiere {0}",loading:"Daten werden geladen",tooltipReset:"Tooltips zurücksetzen",ui:"aktualisiere Oberfläche"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","BIP","HVAC","ID","IT","FuE","TV","UI"]}},{}],71:[function(e,t,n){(function(){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",iqr:"interquartile range for {0}",loading:"loading...",max:"maximum",median:"median",min:"minimum",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",percentile:"{0} percentile",primary:"primary connections",quartile_first:"first quartile",quartile_third:"third quartile",share:"share",total:"total",tukey_bottom:"bottom tukey",tukey_top:"top tukey",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","ER","GDP","HVAC","ID","IT","PCP","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geomap:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",treemap:"Tree Map"}}}).call(this)},{}],72:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",noChange:"{0} no se actualiza porque no cambió.",noContainer:"no se puede encontrar un contenedor en la página correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vínculos no se pueden enlazar con si mismos. eliminando automáticamente el vínculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",method:"{0} visualizaciones requieren establecer el ​​método {1}.",methods:"{0} visualizaciones requieren establecer los siguientes métodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"ícono",id:"id",height:"alto",labels:"rótulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",order:"orden",search:"búsqueda",shape:"forma",size:"tamaño",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"línea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"aislar"},time:["fecha","día","mes","hora","año"],visualization:{bubbles:"Burbujas",chart:"Gráfico",geomap:"Mapa",line:"Gráfico de linea",network:"Red",rings:"Anillos",scatter:"Gráfico De Dispersión",stacked:"Área Apilada",treemap:"Tree Map",bar:"Gráfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gráfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrás",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} más",moreInfo:"clic para más información",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"participación",total:"total",values:"valores",including:"Incluyendo",or:"o",iqr:"rango intercuartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"Tukey inferior",tukey_top:"la parte superior de Tukey",quartile_first:"primer cuartil",quartile_third:"tercer cuartil",median:"mediana"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],73:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",noChange:"{0} n'a pas été mis à jour car inchangé.",noContainer:"impossible de trouver un contenant correspondant à {0}.",of:"de",oldStyle:"les propriétés de {0} ont été imbriquées dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui même. L'auto-référence est automatiquement éliminée {0}.",set:"{0} a été mis à jour.",setLong:"{0} a été mis à jour à {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de données disponibles",dataYear:"Pas de données disponibles pour {0}.",lib:"La visualisation de {0} nécessite le chargement de la librairie {1}.",libs:"La visualisation de {0} nécessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la définition de {1}.",methods:"La visualisation du {0} exige les définitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","près","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"ícone",id:"id",height:"hauteur",labels:"labels",legend:"légende",margin:"marge",messages:"messages",order:"ordre",search:"recherche",shape:"format",size:"taille",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode",mute:"cacher",solo:"isoler"},time:["année","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geomap:"Carte",line:"Courbes",network:"Réseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empilées",treemap:"Arbre",bar:"Diagramme en barres",box:"Boîtes à Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour réduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de résultat correspondant à {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou",iqr:"gamme interquartile pour {0}",max:"maximum",min:"le minimum",percentile:"{0} percentile",tukey_bottom:"tukey bas",tukey_top:"top tukey",quartile_first:"premier quartile",quartile_third:"le troisième quartile",median:"médian"},message:{data:"analyse des données",draw:"tracé en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"réinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],74:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["₩",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},error:{accepted:"{0}하지 허용 {1} {2} 시각화는 다음 중 하나를 사용하십시오에 대해 : {3}.",connections:"{0}에 대한 연결이 없음.",data:"자료 없음",dataYear:"{0}에 대한 자료가 없음.",lib:"{0} 시각화는 {1} 라이브러리를로드 할 필요합니다.",libs:"{0} 시각화는 다음과 같은 라이브러리를로드 할 필요 : {1}.",method:"{0} 시각화를 위해 {1} 메서드를 설정해야 한다.",methods:"{0} 시각화를 위해 다음과 같은 메서드를 설정해야한다: {1}."},lowercase:[""],method:{active:"활성 세그먼트",color:"색",depth:"깊이",dev:"풀어서",focus:"집중하다",icon:"상",id:"신분증",height:"높이",labels:"라벨",legend:"범례",margin:"여유",messages:"상태 메시지",order:"주문",search:"수색",shape:"모양",size:"크기",style:"스타일",temp:"임시 세그먼트",text:"본문",time:"시각",timeline:"타임 라인",total:"총 세그먼트",type:"유형",width:"폭",x:"X 축",y:"Y 축",zoom:"줌",mode:"모드",mute:"숨김",solo:"독주"},time:["날짜","요일","월","시간","년"],visualization:{bubbles:"버블 차트",chart:"차트",geomap:"지도형",line:"선형 그래프",network:"네트워크 그래프",rings:"반지",scatter:"산포도",stacked:"누적 된 지역",treemap:"트리 맵",bar:"막대 차트",box:"박스 플롯",paths:"경로",pie:"파이 차트",table:"탁자"},ui:{and:"과",back:"뒤로",collapse:"축소하려면 클릭",error:"오류",expand:"확장하려면 클릭",loading:"로드 중 ...",more:"{0} 이상",moreInfo:"추가 정보를 위해 클릭하십시오",noResults:"일치하는 결과값이 없음 {0}.",primary:"기본 연결",share:"비중",total:"합계",values:"값",including:"...을 포함하여",or:"또는",iqr:"대한 사 분위 범위 {0}",max:"최고",min:"최저한의",percentile:"{0} 백분위 수",tukey_bottom:"바닥 Tukey에",tukey_top:"상단 Tukey에",quartile_first:"1 분위",quartile_third:"3 분위",median:"중앙값"},message:{data:"데이터 분석 중",draw:"데이터 시각화 중",initializing:"초기화 {0}",loading:"데이터 로딩 중",tooltipReset:"툴팁을 재설정",ui:"UI 업데이트 중"},uppercase:["CEO","최고 경영자","최고 재무 책임자 (CFO)","CFO는","CNC","COO","구구","CPU","CPU에","GDP","HVAC","ID","IT","R & D","TV","UI"]}},{}],75:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ден."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]},error:{accepted:"{0} не е прифатлива за {1} {2} визуелизација, ве молиме користете една од следниве: {3}.",connections:"не е достапна за врски {0}.",data:"нема податоци",dataYear:"Не е достапен за податоци {0}.",lib:"{0} визуализации бараат вчитување на библиотеката {1} .",libs:"{0} визуализации бараат вчитување на следниве библиотеки: {1}.",method:"{0} визуализации бара поставување на {1} методот.",methods:"{0} визуализации бараат поставување на следниве методи: {1}."},lowercase:["a","и","во","но","на","или","да","се","со"],method:{active:"активни сегменти",color:"боја",depth:"длабочина",dev:"опширно",focus:"фокус",icon:"икона",id:"проект",height:"височина",labels:"етикети",legend:"легенда",margin:"маргина",messages:"пораки за статусот",order:"со цел",search:"барај",shape:"форма",size:"големина",style:"стил",temp:"привремени сегменти",text:"текст",time:"време",timeline:"времеплов",total:"Вкупно сегменти",type:"тип",width:"ширина",x:"x оската",y:"Y оската",zoom:"зум",mode:"режим",mute:"се скрие",solo:"изолирање"},time:["датум","ден","месец","време","година"],visualization:{bubbles:"меурчиња",chart:"Графикон",geomap:"Гео мапа",line:"Линиски график",network:"мрежа",rings:"прстени",scatter:"Распрскан график",stacked:"Наредена површина",treemap:"Мапа во вид на дрво",bar:"бар шема",box:"правоаголен дијаграм",paths:"патеки",pie:"пита графикон",table:"Табела"},ui:{and:"и",back:"назад",collapse:"кликни за да се собере",error:"грешка",expand:"Кликни за проширување",loading:"Се вчитува ...",more:"{0} повеќе",moreInfo:"кликнете за повеќе информации",noResults:"Не се пронајдени резултати за појавување на {0}.",primary:"основните врски",share:"удел",total:"Вкупниот",values:"вредности",including:"Вклучувајќи",or:"или",iqr:"interquartile опсег за {0}",max:"максималната",min:"минимум",percentile:"{0} перцентил",tukey_bottom:"дното Tukey",tukey_top:"Топ Tukey",quartile_first:"првиот квартал",quartile_third:"третиот квартал",median:"средната"},message:{data:"анализа на податоци",draw:"цртање на визуелизација",initializing:"иницијализација {0}",loading:"податоци за товарење",tooltipReset:"ресетирање на објаснувањата",ui:"ажурирање на кориничкиот интерфејс"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],76:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} não é um valor válido para {1}, por favor use um dos seguintes procedimentos: {2}.",noChange:"{0} não foi atualizado porque ele não mudou.",noContainer:"Não foi possível encontrar um local na página correspondente a {0}.",of:"do",oldStyle:"propriedades de estilo para {0} já foram incorporados diretamente no. {1} ().",sameEdge:"bordas não podem vincular a si mesmos. removendo automaticamente borda de auto-referência {0}.",set:"{0} foi definido.",setLong:"{0} foi definido para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} não é um {1} reconhecido para visualizações {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"Não há conexões disponíveis para {0}.",data:"Não há dados disponíveis",dataYear:"Não há dados disponíveis para {0}.",lib:"A visualização {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualização {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"Tempo",timeline:"cronograma",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Gráfico",geomap:"Mapa",line:"Gráfico de Linha",network:"Rede",rings:"Anéis",scatter:"dispersão",stacked:"Evolução",treemap:"Tree Map",bar:"Gráfico de Barras",box:"box Plot",paths:"caminhos",pie:"Carta de torta",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"clique para entrar em colapso",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"conexões primárias",share:"participação",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"analisando dados",draw:"desenhando visualização",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],77:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},error:{accepted:"{0} não é uma {1} válida para a visualização {2}, por favor escolha uma das seguintes: {3}.",connections:"não existem ligações disponíveis para {0}.",data:"não existem dados disponíveis",dataYear:"não existem dados disponíveis para {0}.",lib:"a visualização {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualização {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos seguintes métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geomap:"Mapa",line:"Gráfico de Linha",network:"Grafo",rings:"Anéis",scatter:"Gráfico de Dispersão",stacked:"Gráfico de Área",treemap:"Tree Map",bar:"Gráfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"caminhos",pie:"Gráfico de Setores",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"ligações principais",share:"proporção",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"a analisar os dados",draw:"a desenhar a visualização",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informação",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],78:[function(e,t,n){t.exports={format:{decimal:",",thousands:" ",grouping:[3],currency:[""," руб."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]},error:{accepted:"{0} не является обслуживаемым {1} для {2} визуализаций, пожалуйста, используйте одно из следующих действий: {3}.",connections:"нет соединений, доступных для {0}.",data:"данные недоступны",dataYear:"нет данных для {0}.",lib:"{0} визуализаций требуют загрузки {1} библиотеки.",libs:"{0} визуализаций требует загрузки следующие библиотеки: {1}.",method:"{0} визуализаций требуют установки {1} метод.",methods:"{0} визуализаций требуют установки следующих методов: {1}."},lowercase:["и","как","в","но","для","из","если в","в","недалеко","ни","на","на","или","в","что","к","с","с помощью","против","против"],method:{active:"активные сегменты",color:"цвет",depth:"глубина",dev:"подробный",focus:"фокус",icon:"значок",id:"Я бы",height:"высота",labels:"надписи",legend:"легенда",margin:"поле",messages:"сообщения о состоянии",order:"заказ",search:"поиск",shape:"форма",size:"размер",style:"стиль",temp:"временные сегменты",text:"текст",time:"время",timeline:"график",total:"всего сегментов",type:"тип",width:"ширина",x:"ось х",y:"ось Y",zoom:"масштаб",mode:"Режим",mute:"скрывать",solo:"изолировать"},time:["дата","день недели","месяц","время","год"],visualization:{bubbles:"Пузыри",chart:"Диаграмма",geomap:"Карта Geo",line:"линия Участок",network:"сеть",rings:"Кольца",scatter:"Scatter Plot",stacked:"Stacked Площадь",treemap:"Дерево Карта",bar:"гистограмма",box:"Box Участок",paths:"пути",pie:"Круговая диаграмма",table:"Таблица"},ui:{and:"а также",back:"назад",collapse:"нажмите, чтобы свернуть",error:"ошибка",expand:"нажмите, чтобы развернуть",loading:"загрузка ...",more:"{0} более",moreInfo:"нажмите для получения дополнительной информации",noResults:"нет результатов, соответствующих {0}.",primary:"первичные соединения",share:"доля",total:"Всего",values:"значения",including:"в том числе",or:"или",iqr:"межквартильный диапазон для {0}",max:"максимальная",min:"минимальный",percentile:"{0} процентиль",tukey_bottom:"нижний Тьюки",tukey_top:"сверху Тьюки",quartile_first:"первый квартиль",quartile_third:"третий квартиль",median:"медиана"},message:{data:"данные анализа",draw:"рисование визуализация",initializing:"инициализацией {0}",loading:"Загрузка данных",tooltipReset:"сброс всплывающих подсказок",ui:"обновление пользовательского интерфейса"},uppercase:["ID"]}},{}],79:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["₺",""],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[""," pm"],days:["pazar","pazartesi","salı","çarşamba","perşembe","cuma","cumartesi"],shortDays:["pazar","pazartesi","salı","çarşamba","perşembe","cuma","cumartesi"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},dev:{accepted:"{0} {1}, aşağıdakilerden birini kullanın lütfen için kabul değer değildir: {2}.",noChange:"{0} o değişmedi çünkü güncelleştirildi.",noContainer:"sayfa eşleştirme {0} üzerine bir kap bulamıyorum.",of:"arasında",oldStyle:"{0} şimdi doğrudan gömülü olan stil özellikleri. {1} ().",sameEdge:"kenarları kendilerine bağlayamazsınız. otomatik olarak kendi kendine referans kenarı {0} kaldırılıyor.",set:"{0} kurulmuştur.",setLong:"{0} {1} olarak ayarlandı.",setContainer:") (.container Kullanarak bir kapsayıcı div tanımlamak lütfen"},error:{accepted:"{0} değildir kabul edilen {1} {2} görsel, aşağıdakilerden birini kullanın lütfen için: {3}.",connections:"için hiçbir bağlantı {0}.",data:"uygun veri yoktur",dataYear:"için uygun veri yoktur {0}.",lib:"{0} görselleştirme {1} kitaplığı yüklemesinde gerektirir.",libs:"{0} görsel aşağıdaki kitaplıkları yüklemek gerektirir: {1}.",method:"{0} görselleştirme {1} yöntemini ayarlama gerektirir.",methods:"{0} görsel aşağıdaki yöntemleri ayarı gerektirir: {1}."},lowercase:["A","bir","ve benzeri gibi","en ancak tarafından için","IF bölgesi içine yakın","ne","ve","üzerinde","ya da","bu","her üzerine","için olan ile","vs vs."],method:{active:"aktif bölümler",color:"renk",depth:"derinlik",dev:"gereksiz sözlerle dolu",focus:"odak",icon:"ikon",id:"İD",height:"yükseklik",labels:"katmanlar",legend:"lejant",margin:"kenar",messages:"durum iletileri",order:"sipariş",search:"arama",shape:"şekil",size:"boyut",style:"stil",temp:"geçici segmentler",text:"Metin",time:"zaman",timeline:"zaman çizelgesi",total:"toplam segmentler",type:"tip",width:"genişlik",x:"x ekseni",y:"y ekseni",zoom:"yakınlaştırma",mode:"kip",mute:"sakla",solo:"solo"},time:["tarih","gün","ay","saat","yıl"],visualization:{bubbles:"baloncuklar",chart:"Grafik",geomap:"coğrafi Harita",line:"çizgi Arsa",network:"Ağ",rings:"halkalar",scatter:"Dağılım grafiği",stacked:"yığılmış Alan",treemap:"ağaç Haritası",bar:"Bar grafik",box:"kutu Grafiği",paths:"yollar",pie:"Pasta grafik",table:"tablo"},ui:{and:"ve",back:"geri",collapse:"daraltmak için tıklayın",error:"hata",expand:"Genişletmek için tıklayın",loading:"Yükleniyor...",more:"{0} tane daha",moreInfo:"Daha fazla bilgi için tıklayın",noResults:"Eşleşen sonuç yok {0}.",primary:"öncelikli bağlantılar",share:"paylaş",total:"Genel Toplam",values:"değerler",including:"dahil olmak üzere",or:"veya",iqr:"için çeyrekler arası aralık {0}",max:"maksimum",min:"asgari",percentile:"{0} yüzdelik",tukey_bottom:"alt tukey",tukey_top:"üst tukey",quartile_first:"ilk çeyrek",quartile_third:"üçüncü çeyrek",median:"medyan"},message:{data:"analiz verisi",draw:"çizim görselleştirme",initializing:"başlatılıyor {0}",loading:"veri yükleniyor",tooltipReset:"ipuçları sıfırlama",ui:"güncelleme ui"},uppercase:["CEO","CEO'lar","CFO","CFO","CNC","COO","COO","CPU","CPU","GSYİH","HVAC","kimlik","bilişim","Ar-Ge","TV","UI"]}},{}],80:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},error:{accepted:"{0}对于{2}的可视化效果并不是一个可接受的{1}, 请使用如下的一个：{3}.",connections:"没有对{0}可用的连接。",data:"无可用数据",dataYear:"没有数据对{0}可用。",lib:"{0}的可视化要求装载{1}库。",libs:"{0}的可视化需要加载以下库：{1}。",method:"{0}的可视化要求设置{1}方法。",methods:"{0}的可视化要求设置以下方法：{1}。"},lowercase:["一个","和","在","但是","在...里","的","或者","这","向","与...一起"],method:{active:"活跃段",color:"颜色",depth:"深度",dev:"详细",focus:"焦点",icon:"图标",id:"身份认证",height:"高度",labels:"标签",legend:"图例注释",margin:"外边距",messages:"状态消息",order:"规则",search:"搜索",shape:"形状",size:"大小",style:"样式",temp:"暂时性区段",text:"文本",time:"时间",timeline:"时间轴",total:"总段",type:"类型",width:"宽度",x:"X轴",y:"Y轴",zoom:"缩放",mode:"模式",mute:"隐藏",solo:"隔离"},time:["日","星期","月","时间","年"],visualization:{bubbles:"气泡",chart:"图表",geomap:"地理地图",line:"线图",network:"网络",rings:"特性",scatter:"散点图",stacked:"堆积面积图",treemap:"树图",bar:"条图",box:"箱形图",paths:"路径",pie:"饼形图",table:"表"},ui:{and:"和",back:"后面",collapse:"点击合并",error:"错误",expand:"单击以展开",loading:"载入中...",more:"{0}更多",moreInfo:"点击了解更多信息",noResults:"没有结果匹配{0}。",primary:"主要连接",share:"共享",total:"总",values:"值",including:"包括",or:"要么",iqr:"间距范围为{0}",max:"最大值",min:"最低限度",percentile:"{0}百分",tukey_bottom:"底部杜克",tukey_top:"顶部杜克",quartile_first:"第一个四分位数",quartile_third:"第三个四分位数",median:"中位数"},message:{data:"分析数据",draw:"绘制可视化",initializing:"初始化{0}",loading:"加载数据",tooltipReset:"重置工具提示",ui:"更新UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","电视","用户界面","研发"]}},{}],81:[function(e,t,n){(function(){t.exports={ar_SA:e("./languages/ar_SA.js"),de_DE:e("./languages/de_DE.js"),en_US:e("./languages/en_US.js"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/tr_TR.js"),zh_CN:e("./languages/zh_CN.js")}}).call(this)},{"./languages/ar_SA.js":69,"./languages/de_DE.js":70,"./languages/en_US.js":71,"./languages/es_ES.js":72,"./languages/fr_FR.js":73,"./languages/ko_KR.js":74,"./languages/mk_MK.js":75,"./languages/pt_BR.js":76,"./languages/pt_PT.js":77,"./languages/ru_RU.js":78,"./languages/tr_TR.js":79,"./languages/zh_CN.js":80}],82:[function(e,t,n){(function(){var f,i,o,s,h,l,u,p,g;i=e("../../util/copy.js"),h=e("../console/print.js"),l=e("./process/detect.js"),u=e("./set.js"),p=e("../../string/format.js"),g=e("../../object/validate.js"),t.exports=function(e,t){var n,r,a;for(n in a=[],t)r=t[n],e[n]=i(r),e[n].initialized=s(e,e[n],n),a.push(e.self[n]=o(e,n));return a},s=function(e,t,n,r){var a;for(a in t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=l(e,t,t.value)),t)"global"===a?n in e||(e[n]=[]):"value"!==a&&g(t[a])&&s(e,t[a],a,n);return!0},o=function(c,d){return function(e,t){var n,a,i,r,o,s,l,u;if("function"==typeof(n="accepted"in c[d]?c[d].accepted:null)&&(n=n(c)),n instanceof Array||(n=[n]),e===Object)return c[d];if(!arguments.length&&n.indexOf(void 0)<0)return"value"in c[d]?c[d].value:c[d];if("style"===d&&"object"==typeof e)for(s in u=c.format.locale.value.dev.oldStyle,e)h.warning(p(u,'"'+s+'"',s),s),c.self[s](e[s]);if("font"===d)for(r in"string"==typeof e&&(e={family:e}),l=!0,i=function(e,t,n,r){g(e[n])&&t in e[n]&&(g(e[n][t])?e[n][t].process?e[n][t].value=e[n][t].process(r):e[n][t].value=r:e[n][t]=r)},a=function(e,t,n){var r;if(g(e)){if(l)for(r in e)i(e,t,r,n);else"font"in e&&i(e,t,"font",n);for(r in l=!1,e)a(e[r],t,n)}},e)o=e[r],"secondary"!==r&&(g(o)&&(o=o.value),o&&a(c,r,o));return f(c,d,c,d,e),"function"==typeof t&&(c[d].callback=t),!1===c[d].chainable?c[d].value:c.self}},f=function(e,t,n,r,a){var i,o,s,l;if(["accepted","changed","initialized","previous","process"].indexOf(r)<0)if(l=g(a),s=g(n[r])&&"objectAccess"in n[r]&&!1===n[r].objectAccess,i=l&&(s||!("value"in a)&&(!g(n[r])||!(d3.keys(a)[0]in n[r]))),null===a||!l||i)u(e,t,n,r,a);else if(l)for(o in a)f(e,t,n[r],o,a[o])}}).call(this)},{"../../object/validate.js":175,"../../string/format.js":176,"../../util/copy.js":210,"../console/print.js":52,"./process/detect.js":90,"./set.js":96}],83:[function(e,t,n){(function(){t.exports=function(e){return e=e||!1,{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}}).call(this)},{}],84:[function(e,t,n){(function(){var n;n=e("../../../client/rtl.js"),t.exports=function(e){var t;return!(t=["left","center","right"])===e&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return n?"left"===e?"right":"right"===e?"left":e:e},value:e}}}).call(this)},{"../../../client/rtl.js":40}],85:[function(e,t,n){(function(){t.exports=function(e){var t;return!(t=["line-through","none","overline","underline"])===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],86:[function(e,r,t){(function(){var t,n;n=e("../../../font/validate.js"),t=["Fira Sans","sans-serif"],r.exports=function(e){return void 0===e&&(e=t),{process:n,value:e}}}).call(this)},{"../../../font/validate.js":105}],87:[function(e,t,n){(function(){t.exports=function(e){var t;return!(t=["top","middle","bottom"])===e&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}}).call(this)},{}],88:[function(e,t,n){(function(){t.exports=function(e){var t;return!(t=["capitalize","lowercase","none","uppercase"])===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],89:[function(e,t,n){(function(){t.exports=function(e,t,n){var r;return t.history&&t.history.reset(),e.constructor===String?0<=e.indexOf("/")?(n.url=e,[]):(r=d3.selectAll(e)).size()?r:(0<=e.indexOf(".")&&(n.url=e),[]):e}}).call(this)},{}],90:[function(e,t,n){(function(){var r,a;r=e("../../../util/copy.js"),a=e("../../../array/update.js"),t.exports=function(e,t,n){return t.process===Array?a(r(t.value),n):"object"==typeof t.process&&"string"==typeof n?t.process[n]:"function"==typeof t.process?t.process(n,e,t):n}}).call(this)},{"../../../array/update.js":35,"../../../util/copy.js":210}],91:[function(e,t,n){(function(){var r;r=e("../../../client/css.js"),t.exports=function(e,t,n){return!1===e||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}}).call(this)},{"../../../client/css.js":36}],92:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p;if("string"==typeof e){for(n=r=0,o=(e=e.split(" ")).length;r<o;n=++r)p=e[n],e[n]=parseFloat(p,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(h=["top","right","bottom","left"],"number"==typeof e)for(a=0,s=h.length;a<s;a++)t[f=h[a]]=e;else for(i=0,l=h.length;i<l;i++)t[f=h[i]]=e[f];for(t.css="",d=[],n=c=0,u=h.length;c<u;n=++c)f=h[n],n&&(t.css+=" "),d.push(t.css+=t[f]+"px");return d}}).call(this)},{}],93:[function(e,t,n){(function(){var h,p,g,v;h=e("../../array/contains.js"),p=e("../../string/format.js"),g=e("../../string/list.js"),v=e("../console/print.js"),t.exports=function(e,t,n,r,a){var i,o,s,l,u,c,d,f;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),!1===(o=h(t,n))&&void 0!==n){for(c=[],f=JSON.stringify(n),"string"!=typeof n&&(f='"'+f+'"'),l=0,u=t.length;l<u;l++)"string"==typeof(i=t[l])?c.push('"'+i+'"'):"function"==typeof i?c.push(i.toString().split("()")[0].substring(9)):void 0===i?c.push("undefined"):c.push(JSON.stringify(i));c=g(c,e.format.locale.value.ui.or),e.type&&0<=["mode","shape"].indexOf(r)?(d=e.format.locale.value.error.accepted,s=e.format.locale.value.visualization[e.type.value]||e.type.value,v.warning(p(d,f,r,s,c),r)):(d=e.format.locale.value.dev.accepted,v.warning(p(d,f,a,c),r))}return!o}}).call(this)},{"../../array/contains.js":33,"../../string/format.js":176,"../../string/list.js":177,"../console/print.js":52}],94:[function(e,t,n){(function(){t.exports=function(e){var t;return 0<=(t=["auto","optimizeSpeed","crispEdges","geometricPrecision"]).indexOf(e)||(e="crispEdges"),{accepted:t,value:e}}}).call(this)},{}],95:[function(e,t,n){(function(){var r,a;a=e("../../object/validate.js"),r=function(e,t){var n;for(n in e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1),e)n.indexOf("d3po")<0&&a(e[n])&&r(e[n],n)},t.exports=r}).call(this)},{"../../object/validate.js":175}],96:[function(e,t,n){(function(){var x,b,j,w,_,k,z,M,A;x=e("../../util/copy.js"),b=e("../../util/d3selection.js"),A=e("../../object/validate.js"),j=e("../../object/merge.js"),w=e("../console/print.js"),_=e("./process/detect.js"),k=e("./rejected.js"),z=e("../../string/format.js"),M=e("../../array/update.js"),t.exports=function(e,t,n,r,a){var i,o,s,l,u,c,d,f,h,p,g,v,m,y;if(v="value"!==r&&r&&r!==t?'"'+r+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",i="value"===r&&"accepted"in n?n.accepted:A(n[r])&&"accepted"in n[r]?n[r].accepted:[a],!k(e,i,a,t,v)){if(A(n[r])&&"value"in n[r]&&(n=n[p=r],r="value"),"value"===r&&"process"in n&&(a=_(e,n,a)),n[r]instanceof Array||n[r]!==a||void 0===a){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in e&&"draw"!==t&&((o=x(n)).method=t,e.history.chain.push(o)),n.previous=n[r],"id"in e&&"value"===r&&"nesting"in n)if("id"!==t){if("object"!=typeof n.nesting&&(n.nesting={}),A(a)){for(c in a)"string"==typeof a[c]&&(a[c]=[a[c]]);n.nesting=j(n.nesting,a),e.id.value in n.nesting||(n.nesting[e.id.value]=a[d3.keys(a)[0]])}else a instanceof Array?n.nesting[e.id.value]=a:n.nesting[e.id.value]=[a];n[r]=n.nesting[e.id.value][0]}else a instanceof Array?(n.nesting=a,"depth"in e&&e.depth.value<a.length?n[r]=a[e.depth.value]:(n[r]=a[0],"depth"in e&&(e.depth.value=0))):(n[r]=a,n.nesting=[a],"depth"in e&&(e.depth.value=0));else"depth"===t?(a>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:e.depth.value=a<0?0:a,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(h=e.text.nesting[e.id.value])&&(e.text.nesting[e.id.value]="string"==typeof h?[h]:h,e.text.value=h instanceof Array?h[0]:h)):A(n[r])&&A(a)?n[r]=j(n[r],a):n[r]=a;"value"===r&&n.global&&(u=0<n[r].length,(d=p||r)in e&&(u&&e.data[d].indexOf(t)<0||!u&&0<=e.data[d].indexOf(t))&&(e.data[d]=M(e.data[d],t))),"value"===r&&n.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&n.changed&&void 0!==n[r]&&(f=n[r]instanceof Array&&10<n[r].length,l=b(n[r]),m="function"==typeof n[r],null!==(y=f||l||m?null:"string"==typeof n[r]?n[r]:JSON.stringify(n[r]))&&y.length<260?(g=e.format.locale.value.dev.setLong,w.log(z(g,v,'"'+y+'"'))):(g=e.format.locale.value.dev.set,w.log(z(g,v))))}else g=e.format.locale.value.dev.noChange,e.dev.value&&w.comment(z(g,v));"value"===r&&n.callback&&!n.url&&(s="function"==typeof n.callback?n.callback:n.callback.value)&&s(a,e.self)}}}).call(this)},{"../../array/update.js":35,"../../object/merge.js":174,"../../object/validate.js":175,"../../string/format.js":176,"../../util/copy.js":210,"../../util/d3selection.js":211,"../console/print.js":52,"./process/detect.js":90,"./rejected.js":93}],97:[function(e,t,n){var r=e("../console/print.js"),a=e("../../string/format.js");t.exports=function(i){if(i.dev.value){var e="analyzing edges list";r.time(e)}var t=i.types[i.type.value].requirements;t instanceof Array||(t=[t]);var o=0<=t.indexOf("nodes")&&!i.nodes.value;if(o){i.nodes.value=[];var s=[];i.nodes.changed=!0}i.edges.value.forEach(function(a){["source","target"].forEach(function(t){var e=typeof a[i.edges[t]];if("object"!=e)if("number"!=e||o||"number"===i.data.keys[i.id.value])if(o&&0<=s.indexOf(a[i.edges[t]]))a[i.edges[t]]=i.nodes.value.filter(function(e){return e[i.id.value]===a[i.edges[t]]})[0];else{var n={};n[i.id.value]=a[i.edges[t]],a[i.edges[t]]=n}else a[i.edges[t]]=i.nodes.value[a[i.edges[t]]];var r=a[i.edges[t]];o&&s.indexOf(r[i.id.value])<0&&(s.push(r[i.id.value]),i.nodes.value.push(r))}),"keys"in i.data||(i.data.keys={}),i.id.value in i.data.keys||(i.data.keys[i.id.value]=typeof a[i.edges.source][i.id.value])}),i.edges.value=i.edges.value.filter(function(e){var t=e[i.edges.source][i.id.value];if(t!==e[i.edges.target][i.id.value])return!0;var n=i.format.locale.value.dev.sameEdge;return r.warning(a(n,'"'+t+'"'),"edges"),!1}),i.edges.linked=!0,i.dev.value&&r.timeEnd(e)}},{"../../string/format.js":176,"../console/print.js":52}],98:[function(e,t,n){var c=e("./hideelement.js");t.exports=function(i){var e=[i.color.value,i.icon.value,i.keywords.value,i.alt.value,"style"];function o(n,t){[].forEach.call(t.attributes,function(e){if(/^data-/.test(e.name)){var t=e.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});n[t]=e.value}}),e.forEach(function(e){null!==t.getAttribute(e)&&(n[e]=t.getAttribute(e))})}i.text.value||i.self.text("text"),e=e.concat(i.id.nesting),i.self.data({element:i.data.value});var t=i.data.element.value.node().tagName.toLowerCase(),n=i.data.element.value.attr("type"),s=[];if("select"===t){var r=i.data.element.value.node().id;r&&i.self.container({id:r}),i.data.element.value.selectAll("option").each(function(e,t){var n={};if(n.text=d3.select(this).text(),o(n,this),s.push(n),this.selected)for(t=i.id.nesting.length-1;0<=t;t--){var r=i.id.nesting[t];if(r in n){i.self.focus(n[r]);break}}})}else if("input"===t&&"radio"===n){var a=i.data.element.value.node().getAttribute("name");a&&i.self.container({id:a}),i.data.element.value.each(function(e,t){var n={};o(n,this);var r=n[i.id.value]||this.id||!1;if(r&&isNaN(parseFloat(r))){var a=d3.select("label[for="+r+"]");a.empty()||(n.text=a.html(),a.call(c))}s.push(n),this.checked&&i.self.focus(n[i.id.value])})}!i.focus.value.length&&s.length&&(i.data.element.value.node().selectedIndex=0,i.self.focus(s[0][i.id.value]));var l=d3.select("legend[for="+i.container.id+"]");l.empty()||(i.self.title(l.html()),l.call(c));var u=!!i.container.value&&i.container.value.node().tagName.toLowerCase();return!1!==i.container.value&&"body"!==u||(i.container.value=d3.select(i.data.element.value.node().parentNode)),i.data.element.value.call(c),s}},{"./hideelement.js":99}],99:[function(e,t,n){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],100:[function(e,t,n){var i=e("../console/print.js");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";i.time(t)}if(e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length===e.nodes.value.length)e.nodes.positions=!0;else{var n=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),r=e.edges.strength.value;r&&("string"==typeof r?n.linkStrength(function(e){return e[r]}):n.linkStrength(r));n.start();for(var a=50;0<a&&(n.tick(),!(n.alpha()<.01));--a);n.stop(),e.nodes.positions=!0}e.dev.value&&i.timeEnd(t)}}},{"../console/print.js":52}],101:[function(e,t,n){(function(){var z;z=e("numeric"),t.exports=function(r,a){var i,e,t,n,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k;for(null==a&&(a={}),null==a.maxDegree&&(a.maxDegree=5),i=r.length,m=Number.MAX_VALUE,o=null,t=function(){var e,t,n;for(n=[],u=e=1,t=a.maxDegree+1;1<=t?e<t:t<e;u=1<=t?++e:--e)n.push(function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)v=r[t],n.push(Math.pow(v[0],u));return n}());return n}(),_=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)v=r[e],n.push(v[1]);return n}(),d=p=0,y=1<<a.maxDegree;0<=y?p<y:y<p;d=0<=y?++p:--p){for(n=[function(){var e,t,n;for(n=[],e=0,t=i;0<=t?e<t:t<e;0<=t?++e:--e)n.push(1);return n}()],c=[0],f=g=0,x=a.maxDegree;0<=x?g<x:x<g;f=0<=x?++g:--g)0<(d&1<<f)&&(n.push(t[f]),c.push(f+1));e=z.transpose(n),h=c.length,s=z.dot(z.dot(z.inv(z.dot(n,e)),n),_),k=z.dot(e,s),b=z.sub(_,k),j=(w=z.dot(b,b))/(i-h),(l=-2*(-.5*i*Math.log(2*Math.PI)-.5*i*Math.log(j)-w/(2*j))+h*(Math.log(i)-Math.log(2*Math.PI)))<m&&(m=l,o=[c,s,k])}return o}}).call(this)},{numeric:22}],102:[function(t,n,e){(function(){var e;e=t("static-kdtree"),n.exports=function(l,o){var s,u,c,n,r,d,f,a,h,i,p;return null==o&&(o=10),p=e(l),f=function(){var e,t,n;for(n=[],e=0,t=l.length;e<t;e++)a=l[e],n.push(p.knn(a,o+1).slice(1));return n}(),i=function(e,t){var n,r,a,i,o,s;for(n=l[e],r=l[t],e=o=i=0,s=n.length;0<=s?o<s:s<o;e=0<=s?++o:--o)i+=(a=n[e]-r[e])*a;return i},n=function(){var e,t,n;for(n=[],u=e=0,t=l.length;0<=t?e<t:t<e;u=0<=t?++e:--e)n.push(i(u,f[u][o-1]));return n}(),h=function(e,t){return Math.max(i(e,t),n[t])},r=function(e){var t,n,r,a,i;for(n=a=0,r=(i=f[e]).length;n<r;n++)t=i[n],a+=h(e,t);return o/a},d=function(){var e,t,n;for(n=[],u=e=0,t=l.length;0<=t?e<t:t<e;u=0<=t?++e:--e)n.push(r(u));return n}(),function(){var e,t,n,r,a,i;for(i=[],u=e=0,r=l.length;0<=r?e<r:r<e;u=0<=r?++e:--e){for(t=s=0,n=(a=f[u]).length;t<n;t++)c=a[t],s+=d[c];s/=o,i.push([u,s/d[u]])}return i}().sort(function(e,t){return t[1]-e[1]})}}).call(this)},{"static-kdtree":24}],103:[function(e,t,n){(function(){t.exports=function(e){var n,r;return r=d3.median(e),n=d3.median(e.map(function(e){return Math.abs(e-r)})),e.map(function(e,t){return[t,Math.abs(e-r)/n]}).sort(function(e,t){return t[1]-e[1]})}}).call(this)},{}],104:[function(e,t,n){(function(){var c;c=e("../core/font/tester.js"),t.exports=function(e,t,n){var r,a,i,o,s,l,u;return t=t||{},l=(n=n||{}).parent||c("svg").append("text"),o=[],e instanceof Array||(e=[e]),u=l.selectAll("tspan").data(e),r={left:"0px",position:"absolute",top:"0px",x:0,y:0},s=0,"letter-spacing"in t&&(s=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),i=function(e){var t;return t=0,s&&(t=(d3.select(e).text().length-1)*s),e.getComputedTextLength()+t},a=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height},u.enter().append("tspan").text(String).style(t).attr(r).each(function(e){if("function"==typeof n.mod)return n.mod(this)}).each(function(e){var t,n,r;return t=d3.select(this).selectAll("tspan"),r=t.size()?(r=[],t.each(function(){return r.push(i(this))}),d3.max(r)):i(this),n=a(this),o.push({height:n,text:e,width:r})}),u.remove(),n.parent||l.remove(),o}}).call(this)},{"../core/font/tester.js":68}],105:[function(e,t,n){(function(){var p,g;p=e("../core/font/tester.js"),(g=function(e){var t,n,r,a,i,o,s,l,u,c,d,f,h;for(e instanceof Array||(e=e.split(",")),a=0,o=e.length;a<o;a++)e[a].trim();if((r=e.join(", "))in(t=g.complete))return t[r];for(c=function(e){return f.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},d=function(e,t){var n,r,a;return r=(n=c(e)).node().offsetWidth,a=t.node().offsetWidth,n.remove(),r!==a},f=p("div"),l=c("monospace"),u=c("sans-serif"),i=0,s=e.length;i<s;i++)if(h=(h=d((n=e[i])+",monospace",l))||d(n+",sans-serif",u)){h=n;break}return h=h||"sans-serif",l.remove(),u.remove(),t[r]=h}).complete={},t.exports=g}).call(this)},{"../core/font/tester.js":68}],106:[function(e,t,n){var g=e("../array/sort.js"),r=e("../core/methods/attach.js"),v=e("../core/data/format.js"),m=e("../core/data/keys.js"),y=e("../core/data/load.js"),x=e("../core/fetch/data.js"),b=e("../client/ie.js"),j=e("../core/methods/reset.js"),w=e("../core/console/print.js");t.exports=function(){var p={types:{auto:e("./types/auto.js"),button:e("./types/button/button.js"),drop:e("./types/drop/drop.js"),toggle:e("./types/toggle.js")},self:function(e){var t=p.data.value instanceof Array&&p.data.value.length>p.data.large;if(p.draw.timing=p.draw.first||t||b?0:p.timing.ui,p.data.value instanceof Array){if(p.dev.value&&w.group('drawing "'+p.type.value+'"'),p.data.changed&&(p.data.cache={},m(p,"data"),v(p)),p.data.viz=x(p),p.data.sort.value&&(p.data.changed||p.order.changed||p.order.sort.changed)&&g(p.data.viz,p.order.value||p.text.value,p.order.sort.value,p.color.value,p),!1===p.focus.value&&["auto","button"].indexOf(p.type.value)<0){var n=p.data.element.value;if(n&&"select"===n.node().tagName.toLowerCase()){var r=n.property("selectedIndex");r=r<0?0:r;var a=n.selectAll("option")[0][r],i=a.getAttribute("data-"+p.id.value)||a.getAttribute(p.id.value);i&&(p.focus.value=i)}!1===p.focus.value&&p.data.viz.length&&(p.focus.value=p.data.viz[0][p.id.value]),p.dev.value&&!1!==p.focus.value&&w.log('"value" set to "'+p.focus.value+'"')}var o=function(e,t){t="number"!=typeof t?1===p.id.nesting.length?0:p.id.nesting.length-1:t;var n=p.id.nesting[t];return 0<t&&(!(n in e)||e[n]instanceof Array)?o(e,t-1):n};if(p.data.changed){"auto"===p.search.value?10<p.data.viz.length?(p.search.enabled=!0,p.dev.value&&w.log("Search enabled.")):(p.search.enabled=!1,p.dev.value&&w.log("Search disabled.")):p.search.enabled=p.search.value;var s=p.data.element.value?p.data.element.value.node().tagName.toLowerCase():"";if(p.data.element.value&&"select"===s){var l=[];for(var u in p.data.nested.all)l=l.concat(p.data.nested.all[u]);options=p.data.element.value.selectAll("option").data(l,function(e){var t=!!e&&o(e);return!!(e&&t in e)&&e[t]}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var t=o(e),n=t===p.id.value?p.text.value||p.id.value:!0!==p.text.nesting&&t in p.text.nesting?p.text.nesting[t]:t;for(var r in e)"object"!=typeof e[r]&&(r===n&&d3.select(this).html(e[r]),0<=["alt","value"].indexOf(r)?d3.select(this).attr(r,e[r]):d3.select(this).attr("data-"+r,e[r]));e[t]===p.focus.value?this.selected=!0:this.selected=!1})}}else if(p.focus.changed&&p.data.element.value){if("select"===p.data.element.value.node().tagName.toLowerCase())p.data.element.value.selectAll("option").each(function(e){e[o(e)]===p.focus.value?this.selected=!0:this.selected=!1});else"radio"===p.data.element.value.attr("type").toLowerCase()&&p.data.element.value.each(function(e){this.value===p.focus.value?this.checked=!0:this.checked=!1})}if("auto"!==p.type.value){if(!p.container.ui){p.container.ui=p.container.value.selectAll("div#d3po_"+p.type.value+"_"+p.container.id).data(["container"]);var c=p.data.element.value?p.data.element.value[0][0]:null;if(c)if(c.id)c="#"+c.id;else{var d=c.getAttribute(p.id.value)?p.id.value:"data-"+p.id.value;c=c.getAttribute(d)?"["+d+"="+c.getAttribute(d)+"]":null}p.container.ui.enter().insert("div",c).attr("id","d3po_"+p.type.value+"_"+p.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}p.container.ui.style("display",p.ui.display.value),p.container.ui.transition().duration(p.draw.timing).style("margin",p.ui.margin.css);var f=p.container.ui.selectAll("div.d3po_title").data(p.title.value?[p.title.value]:[]);f.enter().insert("div","#d3po_"+p.type.value+"_"+p.container.id).attr("class","d3po_title").style("display","inline-block"),f.style("color",p.font.color).style("font-family",p.font.family.value).style("font-size",p.font.size+"px").style("font-weight",p.font.weight).style("padding",p.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",p.ui.border+"px").text(String).each(function(e){p.margin.left=this.offsetWidth})}if(p.data.value.length){var h=p.format.locale.value.visualization[p.type.value];p.dev.value&&w.time("drawing "+h),p.types[p.type.value](p),p.dev.value&&w.timeEnd("drawing "+h)}else!p.data.url||p.data.loaded&&!p.data.stream||y(p,"data",p.self.draw);p.dev.value&&w.timeEnd("total draw time"),j(p)}}};return r(p,{active:e("./methods/active.js"),alt:e("./methods/alt.js"),color:e("./methods/color.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),data:e("./methods/data.js"),depth:e("./methods/depth.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),focus:e("./methods/focus.js"),font:e("./methods/font.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),history:e("./methods/history.js"),hover:e("./methods/hover.js"),icon:e("./methods/icon.js"),id:e("./methods/id.js"),keywords:e("./methods/keywords.js"),margin:e("./methods/margin.js"),open:e("./methods/open.js"),order:e("./methods/order.js"),remove:e("./methods/remove.js"),search:e("./methods/search.js"),select:e("./methods/select.js"),selectAll:e("./methods/selectall.js"),text:e("./methods/text.js"),timing:e("./methods/timing.js"),title:e("./methods/title.js"),type:e("./methods/type.js"),ui:e("./methods/ui.js"),width:e("./methods/width.js")}),p.self}},{"../array/sort.js":34,"../client/ie.js":37,"../core/console/print.js":52,"../core/data/format.js":56,"../core/data/keys.js":58,"../core/data/load.js":59,"../core/fetch/data.js":64,"../core/methods/attach.js":82,"../core/methods/reset.js":95,"./methods/active.js":107,"./methods/alt.js":108,"./methods/color.js":109,"./methods/config.js":110,"./methods/container.js":111,"./methods/data.js":112,"./methods/depth.js":113,"./methods/dev.js":114,"./methods/draw.js":115,"./methods/focus.js":116,"./methods/font.js":117,"./methods/format.js":118,"./methods/height.js":119,"./methods/history.js":120,"./methods/hover.js":121,"./methods/icon.js":122,"./methods/id.js":123,"./methods/keywords.js":124,"./methods/margin.js":125,"./methods/open.js":126,"./methods/order.js":127,"./methods/remove.js":128,"./methods/search.js":129,"./methods/select.js":130,"./methods/selectall.js":131,"./methods/text.js":132,"./methods/timing.js":133,"./methods/title.js":134,"./methods/type.js":135,"./methods/ui.js":136,"./methods/width.js":137,"./types/auto.js":138,"./types/button/button.js":139,"./types/drop/drop.js":144,"./types/toggle.js":161}],107:[function(e,t,n){(function(){e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}}).call(this)},{"../../core/methods/filter.js":83}],108:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,Array,Function,Object,String],mute:e(!0),solo:e(!0),value:"alt"}}).call(this)},{"../../core/methods/filter.js":83}],109:[function(e,t,n){(function(){t.exports={accepted:[String],value:"color"}}).call(this)},{}],110:[function(e,t,n){(function(){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}}).call(this)},{}],111:[function(e,n,t){(function(){var t;t=e("../../util/d3selection.js"),n.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1===e?d3.select("body"):t(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e))},value:d3.select("body")}}).call(this)},{"../../util/d3selection.js":211}],112:[function(e,t,n){var r=e("../../util/d3selection.js"),a=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),a(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.js":89,"../../util/d3selection.js":211}],113:[function(e,t,n){(function(){t.exports={accepted:[Number],value:0}}).call(this)},{}],114:[function(e,t,n){(function(){t.exports={accepted:[Boolean],value:!1}}).call(this)},{}],115:[function(e,t,n){var i=e("../../util/d3selection.js"),o=e("../../core/parse/hideelement.js"),s=e("../../core/parse/element.js"),l=e("../../core/console/print.js"),u=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!i(t.data.value)?t.data.element.value&&t.data.element.value.call(o):t.data.value=s(t),void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var n=t.format.locale.value.dev.setContainer;l.warning(n,"container")}else if(t.container.value.empty()){n=t.format.locale.value.dev.noContainer;var r=t.container.selector||"";l.warning(u(n,'"'+r+'"'),"container")}else t.dev.value&&l.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var a={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,a[t]=e}),e(a),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":52,"../../core/parse/element.js":98,"../../core/parse/hideelement.js":99,"../../string/format.js":176,"../../util/d3selection.js":211}],116:[function(e,t,n){(function(){t.exports={accepted:[!1,Number,String],process:function(e,t){var n,r,a,i,o,s,l,u,c,d;if((r=t.data.element.value)&&0<=["string","number"].indexOf(typeof e))if(a=r.node().tagName.toLowerCase(),i=r.attr("type"),"select"===a)for(o=s=0,u=(d=r.selectAll("option")).length;s<u;o=++s)(n=d[o])&&n[t.id.value]===e&&(r.node().selectedIndex=o);else if("input"===a&&"radio"===i)for(l=0,c=r.length;l<c;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}}).call(this)},{}],117:[function(a,i,e){(function(){var e,t,n,r;n=a("../../core/methods/font/family.js"),e=a("../../core/methods/font/align.js"),t=a("../../core/methods/font/decoration.js"),r=a("../../core/methods/font/transform.js"),i.exports={align:e(),color:"#444444",decoration:t(),family:n(),secondary:{align:e(),color:"#444444",decoration:t(),family:n(),size:12,spacing:0,transform:r(),weight:200},size:12,spacing:0,transform:r(),weight:200}}).call(this)},{"../../core/methods/font/align.js":84,"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],118:[function(e,t,n){(function(){var a,n,r,i;a=e("../../number/format.js"),n=e("../../core/locale/locale.js"),r=e("../../object/merge.js"),i=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=r(t,n[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,r;return(r=(t=t||{}).vars||{}).time&&r.time.value&&t.key===r.time.value?(n=e.constructor===Date?e:new Date(e),r.data.time.format(n)):"number"==typeof e?(this.number.value||a)(e,t):"string"==typeof e?(this.text.value||i)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":81,"../../number/format.js":173,"../../object/merge.js":174,"../../string/title.js":179}],119:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}}).call(this)},{}],120:[function(e,t,n){(function(){t.exports={back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}}).call(this)},{}],121:[function(e,t,n){(function(){t.exports={accepted:[Boolean,Number,String],value:!1}}).call(this)},{}],122:[function(t,n,e){(function(){var e;e=t("../../core/methods/process/icon.js"),n.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:e,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:e,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:e,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:e,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:e,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}}).call(this)},{"../../core/methods/process/icon.js":91}],123:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[Array,String],dataFilter:!0,mute:e(!0),nesting:["value"],solo:e(!0),value:"value"}}).call(this)},{"../../core/methods/filter.js":83}],124:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,Array,Function,Object,String],mute:e(!0),solo:e(!0),value:"keywords"}}).call(this)},{"../../core/methods/filter.js":83}],125:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/margin.js"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),n(t=e,this),t},value:0}}).call(this)},{"../../core/methods/process/margin.js":92}],126:[function(e,t,n){(function(){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{}],127:[function(e,t,n){(function(){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],value:"asc"},value:!1}}).call(this)},{}],128:[function(e,t,n){(function(){t.exports={accepted:[void 0,Function],process:function(e,t){this.initialized&&t.container.ui.remove(),delete t.container.ui},value:void 0}}).call(this)},{}],129:[function(e,t,n){(function(){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}}).call(this)},{}],130:[function(e,t,n){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return(n=t.container.value)&&e?n.select(e):e},value:void 0}}).call(this)},{}],131:[function(e,t,n){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return(n=t.container.value)&&e?n.selectAll(e):e},value:void 0}}).call(this)},{}],132:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,String],nesting:!0,mute:e(!0),solo:e(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":83}],133:[function(e,t,n){(function(){t.exports={mouseevents:60,ui:200}}).call(this)},{}],134:[function(a,i,e){(function(){var e,t,r,n;e=a("../../core/methods/font/decoration.js"),t=a("../../core/methods/font/family.js"),n=a("../../core/methods/font/transform.js"),r=a("../../string/strip.js"),i.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:e(),family:t(),size:16,transform:n(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=r(e).toLowerCase(),t.self.container({id:n})),e},value:!1}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88,"../../string/strip.js":178}],135:[function(e,t,n){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}}).call(this)},{}],136:[function(i,o,e){(function(){var e,t,n,r,a;n=i("../../core/methods/font/family.js"),e=i("../../core/methods/font/align.js"),t=i("../../core/methods/font/decoration.js"),r=i("../../core/methods/process/margin.js"),a=i("../../core/methods/font/transform.js"),o.exports={align:e("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:e("center"),color:"#444",decoration:t(),family:n(),size:11,transform:a(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),r(t=e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),r(t=e,this),t},value:5}}}).call(this)},{"../../core/methods/font/align.js":84,"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88,"../../core/methods/process/margin.js":92}],137:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],secondary:!1,value:!1}}).call(this)},{}],138:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():t<5?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],139:[function(u,e,t){(function(){e.exports=function(t){var e,n,r,a,i,o,s,l;return o=u("../../../core/console/print.js"),r=u("./functions/color.js"),a=u("./functions/icons.js"),i=u("./functions/mouseevents.js"),s=u("./functions/style.js"),e=t.container.ui.selectAll("div.d3po_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&o.time("enter"),e.enter().append("div").attr("class","d3po_node").call(r,t).call(s,t).call(a,t).call(i,t),t.dev.value&&o.timeEnd("enter"),l=t.draw.update||t.draw.timing?(t.dev.value&&o.time("ordering"),e.order(),t.dev.value&&o.timeEnd("ordering"),e):(n=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),e.filter(function(e){return 0<=n.indexOf(e[t.id.value])})),t.dev.value&&o.time("update"),l.classed("d3po_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?l.transition().duration(t.draw.timing).call(r,t).call(s,t):l.call(r,t).call(s,t),l.call(a,t).call(i,t),t.dev.value&&o.timeEnd("update"),e.exit().remove()}}).call(this)},{"../../../core/console/print.js":52,"./functions/color.js":140,"./functions/icons.js":141,"./functions/mouseevents.js":142,"./functions/style.js":143}],140:[function(t,e,n){(function(){e.exports=function(e,a){var i,o;return i=t("../../../../color/legible.js"),t("../../../../color/lighter.js"),o=t("../../../../color/text.js"),e.style("background-color",function(e){var t;return t=a.focus.value===e[a.id.value]?a.ui.color.secondary.value:a.ui.color.primary.value,a.hover.value===e[a.id.value]&&(t=d3.rgb(t).darker(.15).toString()),t}).style("color",function(e){var t,n,r;return r=a.focus.value===e[a.id.value]?.75:1,n=!(e[a.icon.value]&&a.data.viz.length<a.data.large)&&e[a.color.value]?i(e[a.color.value]):(t=a.focus.value===e[a.id.value]?a.ui.color.secondary.value:a.ui.color.primary.value,a.hover.value===e[a.id.value]&&(t=d3.rgb(t).darker(.15).toString()),o(t)),"rgba("+(n=d3.rgb(n)).r+","+n.g+","+n.b+","+r+")"}).style("border-color",a.ui.color.secondary.value)}}).call(this)},{"../../../../color/legible.js":44,"../../../../color/lighter.js":45,"../../../../color/text.js":50}],141:[function(e,t,n){var d=e("../../../../client/prefix.js"),f=e("../../../../client/rtl.js");t.exports=function(e,u){var c="right"===u.font.align.value&&!f||f&&"right"===u.font.align.value;e.each(function(n,e){var t=["label"];n[u.icon.value]&&u.data.viz.length<=u.data.large&&t.push("icon");var r=u.icon.button.value;n[u.id.value]===u.focus.value&&u.icon.select.value?(r=u.icon.select.value,t.push("selected")):r&&!1!==n.d3po.icon&&t.push("selected");var a=0,i=d3.select(this).selectAll("div.d3po_button_element").data(t,function(e){return e});i.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),i.order().attr("class",function(e){var t="";return"selected"===e&&0===r.indexOf("fa-")&&(t=" fa "+r),"d3po_button_element d3po_button_"+e+t}).html(function(e){if("label"!==e)return"selected"===e&&r.indexOf("fa-")<0?r:"";var t=u.text.value&&u.text.value in n&&!(n[u.text.value]instanceof Array)?u.text.value:u.id.value;return u.format.value(n[t])}).style("background-image",function(e){return"icon"===e?"url('"+n[u.icon.value]+"')":"none"}).style("background-color",function(e){return"icon"===e&&"knockout"===n.style?n[u.color.value]||u.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?u.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(a=u.height.value?u.height.value-(u.ui.padding.top+u.ui.padding.bottom)-2*u.ui.border:u.font.size+u.ui.border)+"px"}).style("height",function(e){return"icon"===e?a+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var t=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)t=u.font.size;else t=a;return-t/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!c||"selected"===e&&c?u.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&c||"selected"===e&&!c?u.ui.padding.right+"px":"auto"}).style(d()+"transition",function(e){return"selected"===e?u.draw.timing/1e3+"s":"none"}).style(d()+"transform",function(e){var t="selected"===e?u.icon.select.rotate:"none";return"string"==typeof t?t:"rotate("+t+"deg)"}).style("opacity",function(e){return"selected"===e?u.icon.select.opacity:1}),i.exit().remove();var o=d3.select(this).selectAll(".d3po_button_label");if(0<a){var s=u.ui.padding;s=3===t.length?s.top+"px "+(2*s.right+a)+"px "+s.bottom+"px "+(2*s.left+a)+"px":0<=t.indexOf("icon")&&!f||0<=t.indexOf("selected")&&f?s.top+"px "+s.right+"px "+s.bottom+"px "+(2*s.left+a)+"px":s.top+"px "+(2*s.right+a)+"px "+s.bottom+"px "+s.left+"px",o.style("padding",s)}else o.style("padding",u.ui.padding.css);if("number"==typeof u.width.value){var l=u.width.value;l-=parseFloat(o.style("padding-left"),10),l-=parseFloat(o.style("padding-right"),10),l-=2*u.ui.border,l+="px"}else l="auto";o.style("width",l)})}},{"../../../../client/prefix.js":39,"../../../../client/rtl.js":40}],142:[function(i,e,t){(function(){e.exports=function(e,n,r){var t,a;return r=i("./color.js"),t=i("../../../../client/pointer.js"),a=i("../../../../client/ie.js"),e.on(t.over,function(e,t){return n.self.hover(e[n.id.value]),a||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(t.out,function(e){return n.self.hover(!1),a||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(t.click,function(e){return!1!==n.focus.value?n.self.focus(e[n.id.value]).draw():n.focus.callback?n.focus.callback(e,n.self):void 0})}}).call(this)},{"../../../../client/ie.js":37,"../../../../client/pointer.js":38,"./color.js":140}],143:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],144:[function(f,e,t){(function(){e.exports=function(e){var t,n,r,a,i,o,s,l,u,c,d;return r=f("./functions/element.js"),a=f("./functions/keyboard.js"),d=f("./functions/window.js"),c=f("./functions/width.js"),t=f("./functions/button.js"),s=f("./functions/selector.js"),l=f("./functions/title.js"),o=f("./functions/search.js"),i=f("./functions/list.js"),n=f("./functions/data.js"),u=f("./functions/update.js"),e.margin.top=0,e.margin.title=0,r(e),a(e),d(e),c(e),t(e),s(e),l(e),o(e),i(e),n(e),u(e)}}).call(this)},{"./functions/button.js":147,"./functions/data.js":148,"./functions/element.js":149,"./functions/keyboard.js":152,"./functions/list.js":153,"./functions/search.js":155,"./functions/selector.js":156,"./functions/title.js":157,"./functions/update.js":158,"./functions/width.js":159,"./functions/window.js":160}],145:[function(e,t,n){t.exports=function(e,t,n){var r=[];if((n=n||e.active.value)instanceof Array)for(var a=0;a<n.length;a++)r.push(this(e,t,n[a]));else{var i=typeof n;"number"==i?r.push(e.depth.value===n):"function"==i?r.push(n(t)):r.push(t===n)}return 0<=r.indexOf(!0)}},{}],146:[function(e,t,n){var r=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.js":52}],147:[function(e,t,n){var r=e("../../../../util/copy.js"),o=e("../../../../client/pointer.js"),s=e("../../../form.js"),l=e("../../../../core/console/print.js");t.exports=function(a){if("button"in a.container||(a.dev.value&&l.time("creating main button"),a.container.button=s().container(a.container.ui).type("button").ui({margin:0}),a.dev.value&&l.timeEnd("creating main button")),a.focus.changed||a.data.changed||a.depth.changed){var i=a.depth.value,e=r(a.data.value.filter(function(e){for(var t=!1,n=0;n<a.id.nesting.length;n++){var r=a.id.nesting[n];if(t=r in e&&e[r]===a.focus.value){i=n;break}}return t})[0]);e=e||(a.container.button.data()[0]||a.data.viz[0]),a.container.button.data([e]).id(a.id.nesting).depth(i)}var t=!0===a.hover.value&&a.focus.value;a.container.button.draw({update:a.draw.update}).focus("").font(a.font).format(a.format).hover(t).icon({button:a.icon.drop.value,select:a.icon.drop.value,value:a.icon.value}).text(a.text.value).timing({ui:a.draw.timing}).ui({border:a.ui.border,color:a.ui.color,padding:a.ui.padding.css}).width(a.width.value).draw();var n=a.container.button.container(Object).ui;a.margin.top+=n.node().offsetHeight||n.node().getBoundingClientRect().height,n.on(o.click,function(){a.self.open(!a.open.value).draw()})}},{"../../../../client/pointer.js":38,"../../../../core/console/print.js":52,"../../../../util/copy.js":210,"../../../form.js":106}],148:[function(e,t,n){var i=e("../../../../string/format.js"),f=e("../../../../string/strip.js");t.exports=function(s){if(s.data.url&&!s.data.loaded){var e={};e[s.text.value||s.id.value]=s.format.value(s.format.locale.value.ui.loading),s.data.filtered=[e],s.data.changed="loading"!==s.data.lastFilter,s.data.lastFilter="loading"}else if(s.open.value)if(s.search.term){var l=f(s.search.term).split("_"),t=[s.id.value,s.text.value,s.alt.value,s.keywords.value];t=t.filter(function(e){return e}),l=l.filter(function(e){return""!==e});var u=[],c=[],d=[],n=[];if(s.id.nesting.forEach(function(e){n=n.concat(s.data.nested.all[e])}),n.forEach(function(i){var o=!1;t.forEach(function(e){if(!o&&e in i&&"string"==typeof i[e]){var t=i[e].toLowerCase();if(0<=[s.text.value,s.id.value].indexOf(e)&&0===t.indexOf(s.search.term))u.push(i),o=!0;else if(0<=t.indexOf(s.search.term))c.push(i),o=!0;else{var n=f(t).split("_");for(var r in n){if(o)break;for(var a in l)if(0===n[r].indexOf(l[a])){d.push(i),o=!0;break}}}}})}),s.data.filtered=d3.merge([u,c,d]),s.data.filtered.forEach(function(e,t){e.d3po_order=t}),s.data.changed=!0,s.data.lastFilter="search",0===s.data.filtered.length){var r={},a=s.format.value(s.format.locale.value.ui.noResults);r[s.text.value||s.id.value]=i(a,'"'+s.search.term+'"'),s.data.filtered=[r]}}else s.data.filtered=s.data.viz,s.data.changed="viz"!==s.data.lastFilter,s.data.lastFilter="viz",1<s.id.nesting.length&&s.depth.value<s.id.nesting.length-1&&(s.data.filtered=s.data.filtered.filter(function(e){return"endPoint"in e.d3po&&e.d3po.endPoint===s.depth.value&&(e.d3po.icon=!1),!0}),s.data.changed="depth"!==s.data.lastFilter,s.data.lastFilter="depth");else s.data.filtered=[]}},{"../../../../string/format.js":176,"../../../../string/strip.js":178}],149:[function(e,t,n){(function(){t.exports=function(e){if(e.data.element.value)return e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){if(!e.search.enabled||d3.event.relatedTarget!==e.container.value.select("input").node())return e.self.open(!1).hover(!1).draw()}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}}).call(this)},{}],150:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],151:[function(e,t,n){(function(){var o,r,a,s;o=e("./active.js"),r=e("../../../../util/copy.js"),a=e("../../../form.js"),s=e("../../../../core/console/print.js"),t.exports=function(i){var e,t,n;i.open.value&&(i.dev.value&&s.time("updating list items"),"items"in i.container||(i.container.items=a().container(i.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),t=i.draw.timing?i.data.large:1,(n=r(i.order)).value=i.search.term.length?"d3po_order":i.order.value,e=i.depth.value===i.id.nesting.length-1,!i.focus.changed&&!1!==i.container.items.focus()||i.container.items.focus(i.focus.value,function(t){var e,n,r,a;n=i.data.filtered.filter(function(e){return e[i.id.value]===t})[0],i.depth.value<i.id.nesting.length-1&&i.id.nesting[i.depth.value+1]in n?(r=i.depth.value,a=i.id.solo.value,i.history.states.push(function(){return i.self.depth(r).id({solo:a}).draw()}),i.self.depth(i.depth.value+1).id({solo:[t]}).draw()):(i.depth.changed||i.self.open(!1),(e=t!==i.focus.value)&&i.active.value&&(e=o(i,t)),e&&i.self.focus(t).draw())}),i.container.items.active(i.active.value).data({large:t,sort:i.data.sort.value,value:i.data.filtered}).draw({update:i.draw.update}).font(i.font.secondary).format(i.format).hover(i.hover.value).id(i.id.value).icon({button:!e&&i.icon.next,select:e&&i.icon.select,value:i.icon.value}).order(n).text(i.text.secondary.value||i.text.value).timing({ui:i.draw.timing}).ui({color:{primary:1===i.id.nesting.length?i.ui.color.primary.value:i.ui.color.secondary.value,secondary:i.ui.color.secondary.value},padding:i.ui.padding.css}).draw(),i.dev.value&&s.timeEnd("updating list items"))}}).call(this)},{"../../../../core/console/print.js":52,"../../../../util/copy.js":210,"../../../form.js":106,"./active.js":145}],152:[function(e,t,n){(function(){t.exports=function(f){return d3.select(window).on("keydown."+f.container.id,function(){var e,t,n,r,a,i,o,s,l,u,c,d;if(s=d3.event.keyCode,f.open.value||!0===f.hover.value){for(u=!0===f.hover.value?"focus":"hover",i=!1,a=o=0,l=(c=f.data.filtered).length;o<l;a=++o)if(c[a][f.id.value]===f[u].value){i=a;break}if(9===s&&f.open.value&&(!f.search.enabled||f.search.enabled&&!d3.event.shiftKey))return f.self.open(!1).hover(!1).draw();if(0<=[38,40].indexOf(s))return!1===i?i=0:38===s?f.open.value&&(i<=0?i=f.data.filtered.length-1:i-=1):40===s&&f.open.value&&(i>=f.data.filtered.length-1?i=0:i+=1),r="boolean"!=typeof f.hover.value?f.data.filtered[i][f.id.value]:f.focus.value,f.self.hover(r).open(!0).draw();if(13===s)return"boolean"!=typeof f.hover.value?(e=f.data.filtered.filter(function(e){return e[f.id.value]===f.hover.value})[0],(t=f.depth.value)<f.id.nesting.length-1&&f.id.nesting[t+1]in e?(d=f.id.solo.value,n=function(){return f.self.depth(t).id({solo:d}).draw()},f.history.states.push(n),f.self.depth(f.depth.value+1).id({solo:[f.hover.value]}).draw()):f.self.focus(f.hover.value).hover(!0).draw()):f.self.hover(f.focus.value).open(!0).draw();if(27===s){if(f.open.value)return f.self.open(!1).hover(!0).draw();if(!0===f.hover.value)return f.self.hover(!1).draw()}}})}}).call(this)},{}],153:[function(e,t,n){var r=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3po_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3po_drop_list").attr("id","d3po_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.js":52}],154:[function(e,t,n){var h=e("../../../../core/console/print.js");t.exports=function(n){if(n.open.value){n.dev.value&&h.time("calculating height");var e=!1;if("none"==n.container.selector.style("display"))e=!0;e&&n.container.selector.style("display","block");var t=n.container.selector.style("height"),r=n.container.selector.property("scrollTop"),a=n.container.list.style("max-height"),i=n.container.list.property("scrollTop");n.container.selector.style("height","auto"),n.container.list.style("max-height","200000px"),n.container.listHeight=parseFloat(n.container.selector.style("height"),10),n.container.list.style("max-height",a).property("scrollTop",i),n.container.selector.style("height",t).property("scrollTop",r);var o=!1;if(n.container.listHeight>n.height.secondary&&(n.container.listHeight=n.height.secondary,o=!0),e&&n.container.selector.style("display","none"),n.dev.value&&h.timeEnd("calculating height"),o){n.dev.value&&h.time("calculating scroll position");var s=n.container.list.select("div").selectAll("div.d3po_node"),l=s[0][0],u="boolean"!=typeof n.hover.value?n.hover.value:n.focus.value;s.each(function(e,t){e[n.id.value]===u&&(l=this)});e=!1;"none"===n.container.selector.style("display")&&(e=!0,n.container.selector.style("display","block"));var c=l.offsetTop,d=l.offsetHeight||l.getBoundingClientRect().height,f=n.container.list.property("scrollTop");e&&n.container.selector.style("display","none"),e||n.data.changed||n.depth.changed?n.container.listScroll=c:c<(n.container.listScroll=f)?n.container.listScroll=c:c+d>f+n.height.secondary-n.search.height&&(n.container.listScroll=c-(n.height.secondary-d-n.search.height)),n.dev.value&&h.timeEnd("calculating scroll position")}else n.container.listScroll=0}else n.container.listScroll=n.container.list.property("scrollTop"),n.container.listHeight=0}},{"../../../../core/console/print.js":52}],155:[function(s,e,t){var l=s("../../../../client/prefix.js"),u=s("../../../../core/console/print.js");e.exports=function(n){n.dev.value&&u.time("creating search");var r=s("./data.js"),a=s("./items.js"),i=s("./update.js");function e(e){e.style("padding",n.ui.padding.css).style("display","block").style("background-color",d3.rgb(n.ui.color.primary.value).darker(.15).toString())}function t(e){var t=n.width.secondary-2*n.ui.padding.left-2*n.ui.padding.right+2*n.ui.border;e.style("padding",n.ui.padding.left/2+n.ui.padding.right/2+"px").style("width",t+"px").style("border-width","0px").style("font-family",n.font.secondary.family.value).style("font-size",n.font.secondary.size+"px").style("font-weight",n.font.secondary.weight).style("text-align",n.font.secondary.align).style("outline","none").style(l()+"border-radius","0").attr("placeholder",n.format.value(n.format.locale.value.method.search))}n.container.search=n.container.selector.selectAll("div.d3po_drop_search").data(n.search.enabled?["search"]:[]),n.draw.timing?(n.container.search.transition().duration(n.draw.timing).call(e),n.container.search.select("input").transition().duration(n.draw.timing).call(t)):(n.container.search.call(e),n.container.search.select("input").call(t)),n.container.search.enter().insert("div","#d3po_drop_list_"+n.container.id).attr("class","d3po_drop_search").attr("id","d3po_drop_search_"+n.container.id).call(e).append("input").attr("id","d3po_drop_input_"+n.container.id).style("-webkit-appearance","none").call(t),n.container.search.select("input").on("keyup."+n.container.id,function(e){var t=this.value;n.search.term!==t&&(n.search.term=t,r(n),a(n),i(n))}),n.container.search.exit().remove();var o=n.container.selector.style("display");n.container.selector.style("display","block"),n.search.height=n.search.enabled?n.container.search.node().offsetHeight||n.container.search.node().getBoundingClientRect().height:0,n.container.selector.style("display",o),n.search.enabled&&(n.margin.title+=n.search.height),n.dev.value&&u.timeEnd("creating search")}},{"../../../../client/prefix.js":39,"../../../../core/console/print.js":52,"./data.js":148,"./items.js":151,"./update.js":158}],156:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3po_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3po_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],157:[function(e,t,n){var c=e("../../../../client/pointer.js"),d=e("../../../../color/lighter.js"),f=e("../../../../core/console/print.js"),h=e("../../../../color/text.js");t.exports=function(r){if(r.open.value){r.dev.value&&f.time("creating title and back button");var e=1===r.id.solo.value.length&&0<r.depth.value,n=e,t=r.container.button.data(Object).viz[0];n=!0;for(var a=0;a<r.id.nesting.length;a++){var i=r.id.nesting[a];if(i in t&&t[i]===r.focus.value){n=!1;break}}function o(e){e.style("padding",r.ui.padding.css).style("display","block").style("background-color",r.ui.color.secondary.value).style("font-family",r.font.secondary.family.value).style("font-size",r.font.secondary.size+"px").style("font-weight",r.font.secondary.weight).style("text-align",r.font.secondary.align).style("color",h(r.ui.color.secondary.value))}function s(e){if(!e.empty()){var t=0===r.icon.back.value.indexOf("fa-")?" fa "+r.icon.back.value:"";t="d3po_drop_back"+t;var n=0===r.icon.back.value.indexOf("fa-")?"":r.icon.back.value;e.style("position","absolute").attr("class",t).style("top",r.ui.padding.top+r.font.secondary.size/2/2.5+"px").html(n)}}function l(e){var t=n?r.focus.value:r.format.locale.value.ui.back;e.text(r.format.value(t)).style("padding","0px "+(r.ui.padding.left+r.ui.padding.right)+"px")}r.container.title=r.container.selector.selectAll("div.d3po_drop_title").data(e?["title"]:[]),r.draw.timing?(r.container.title.transition().duration(r.draw.timing).call(o),r.container.title.select("div.d3po_drop_title_text").transition().duration(r.draw.timing).call(l)):(r.container.title.call(o),r.container.title.select("div.d3po_drop_title_text").call(l)),r.container.title.select("span.d3po_drop_back").call(s);var u=r.container.title.enter().insert("div","#d3po_drop_list_"+r.container.id).attr("class","d3po_drop_title").attr("id","d3po_drop_title_"+r.container.id).call(o);u.append("span").attr("id","d3po_drop_back_"+r.container.id).attr("class","d3po_drop_back").call(s),u.append("div").attr("id","d3po_drop_title_text_"+r.container.id).attr("class","d3po_drop_title_text").call(l),r.container.title.on(c.over,function(e,t){var n=d(r.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(r.timing.mouseevents).style("background-color",n).style("color",h(n))}).on(c.out,function(e){var t=r.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(r.timing.mouseevents).style("background-color",t).style("color",h(t))}).on(c.click,function(e){r.history.back()}),r.container.title.exit().remove(),e&&(r.margin.title+=r.container.title.node().offsetHeight||r.container.title.node().getBoundingClientRect().height),r.dev.value&&f.timeEnd("creating title and back button")}}},{"../../../../client/pointer.js":38,"../../../../color/lighter.js":45,"../../../../color/text.js":50,"../../../../core/console/print.js":52}],158:[function(e,t,n){var o=e("./items.js"),s=e("./height.js"),l=e("../../../../core/console/print.js"),u=e("./scroll.js"),c=e("./arrow.js");t.exports=function(n){function t(e){var t=n.open.flipped.value;e.style("top",function(){return t?"auto":n.margin.top-n.ui.border+"px"}).style("bottom",function(){return t?n.margin.top+n.ui.border+"px":"auto"})}function e(e){e.style("left",function(){return"left"===n.font.align.value?n.margin.left+"px":"center"===n.font.align.value?n.margin.left-(n.width.secondary-n.width.value)/2+"px":"auto"}).style("right",function(){return"right"===n.font.align.value?"0px":"auto"}).style("height",n.container.listHeight+"px").style("padding",n.ui.border+"px").style("background-color",n.ui.color.secondary.value).style("z-index",function(){return n.open.value?"9999":"-1"}).style("width",n.width.secondary-2*n.ui.border+"px").style("opacity",n.open.value?1:0).call(t)}function r(e){e.style("display",n.open.value?null:"none").call(t),n.search.enabled&&n.open.value&&n.container.selector.select("div.d3po_drop_search input").node().focus()}n.draw.timing?n.container.ui.transition().duration(n.draw.timing).each("start",function(){n.open.value&&d3.select(this).style("z-index",9999)}).style("margin",n.ui.margin.css).each("end",function(){n.open.value||d3.select(this).style("z-index","auto")}):n.container.ui.style("margin",n.ui.margin.css).style("z-index",function(){return n.open.value?9999:"auto"}),o(n),s(n),u(n),c(n),n.dev.value&&l.time("drawing list");var a,i=n.open.value?n.height.secondary-n.margin.title:0;if(n.draw.timing){n.container.selector.transition().duration(n.draw.timing).each("start",function(){d3.select(this).style("display",n.open.value?"block":null)}).call(e).each("end",function(){d3.select(this).transition().duration(n.draw.timing).call(r)}),n.container.list.transition().duration(n.draw.timing).style("width",n.width.secondary-2*n.ui.border+"px").style("max-height",i+"px").tween("scroll",(a=n.container.listScroll,function(){var t=d3.interpolateNumber(this.scrollTop,a);return function(e){this.scrollTop=t(e)}}))}else n.container.selector.call(e).call(r),n.container.list.style("width",n.width.secondary-2*n.ui.border+"px").style("max-height",i+"px").property("scrollTop",n.container.listScroll);n.dev.value&&l.timeEnd("drawing list")}},{"../../../../core/console/print.js":52,"./arrow.js":146,"./height.js":150,"./items.js":151,"./scroll.js":154}],159:[function(e,t,n){var a=e("../../../../util/copy.js"),c=e("../../../../core/font/tester.js"),d=e("../../../form.js"),f=e("../../../../core/console/print.js"),i=e("../../../../object/validate.js");t.exports=function(l){var u=[];for(var e in l.data.nested.all){var t=l.data.nested.all[e],n=i(l.text.nesting)&&e in l.text.nesting?l.text.nesting[e][0]:e;[l.id.value,l.text.value].indexOf(n)<0&&(t=a(t)).forEach(function(e){e[l.text.value||l.id.value]=e[n]}),u=u.concat(t)}function r(e){var t="primary"===e?"value":e,n="value"===t?l.icon.drop.value:l.icon.select.value||l.icon.drop.value,r="value"===t?l.text.value:l.text.secondary.value||l.text.value,a="value"===t?l.font:l.font.secondary;l.dev.value&&f.time("calculating "+e+" width");var i=d().container(c()).data({large:9999,value:u}).draw({update:!1}).font(a).format(l.format).icon({button:n,value:l.icon.value}).id(l.id.value).timing({ui:0}).text(r||l.id.value).type("button").ui({border:"primary"===e?l.ui.border:0,display:"inline-block",margin:0,padding:l.ui.padding.css}).width(!1).draw(),o=[];i.selectAll("div.d3po_node").each(function(e){o.push(this.offsetWidth+1)}).remove();var s={};s[t]=d3.max(o),l.self.width(s),l.dev.value&&f.timeEnd("calculating "+e+" width")}"number"!=typeof l.width.value&&r("primary"),"number"!=typeof l.width.secondary&&(l.text.secondary.value&&l.text.value!==l.text.secondary.value?r("secondary"):l.self.width({secondary:l.width.value}))}},{"../../../../core/console/print.js":52,"../../../../core/font/tester.js":68,"../../../../object/validate.js":175,"../../../../util/copy.js":210,"../../../form.js":106}],160:[function(e,t,n){var r=e("../../../../util/child.js"),a=function(n,e){if(void 0===e)e=window;d3.select(e).on("click."+n.container.id,function(){var e=d3.event.target||d3.event.toElement,t=e.parentNode;t&&0<=["d3po_node","d3po_drop_title"].indexOf(t.className)&&(e=t.parentNode),e&&t&&!r(n.container.ui,e)&&(n.open.value||n.hover.value)&&n.self.open(!1).hover(!1).draw()});try{var t=window.parent.location.host===window.location.host}catch(e){t=!1}t&&e.self!==window.top&&a(n,e.parent)};t.exports=a},{"../../../../util/child.js":208}],161:[function(e,t,n){var a=e("../form.js");t.exports=function(n){"buttons"in n.container||(n.container.buttons=a().container(n.container.ui).type("button"));var e=n.data.viz.length,r=!!n.width.value&&n.width.value/e,t=n.container.ui.selectAll("div.d3po_toggle").data(n.data.viz,function(e){return e[n.id.value]});t.exit().remove(),t.enter().append("div").attr("class","d3po_toggle").style("display","inline-block").style("vertical-align","top"),t.order().each(function(e){"form"in e.d3po||(e.d3po.form=a().container(d3.select(this)));var t=n.id.nesting.length>n.depth.value?n.id.nesting[n.depth.value+1]:n.id.value;e[t]instanceof Array?e.d3po.form.container({id:n.container.id+"_"+e[n.id.value]}).data(e[t]).id(n.id.nesting.slice(1)).type("drop"):e.d3po.form.data([e]).id(n.id.value).type("button"),e.d3po.form.color(n.color).focus(n.focus.value,function(e){e!==n.focus.value&&n.self.focus(e).draw()}).hover(n.hover.value).icon({select:!1,value:n.icon.value}).font(n.font).format(n.format).order(n.order).text(n.text.value).ui({border:n.ui.border,color:n.ui.color,display:"inline-block",margin:0,padding:n.ui.padding.css}).width(r).draw()}),n.data.element.value&&n.data.element.value.on("focus."+n.container.id,function(){n.self.focus(this.value).hover(this.value).draw()}).on("blur."+n.container.id,function(){n.self.hover(!1).draw()})}},{"../form.js":106}],162:[function(e,t,n){(function(){var fe,m,he,y,pe,s,l,ge,c,ve,me;ve=e("simplify-js"),t.exports=function(r,e){var t,n,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,J,W,Q,K,$,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de;if(r.length<3)return null;if(f=[],.5,5,null==e&&(e={}),null==e.maxAspectRatio&&(e.maxAspectRatio=15),null==e.minWidth&&(e.minWidth=0),null==e.minHeight&&(e.minHeight=0),null==e.tolerance&&(e.tolerance=.02),null==e.nTries&&(e.nTries=20),null!=e.angle&&(e.angle instanceof Array?o=e.angle:"number"==typeof e.angle?o=[e.angle]:"string"!=typeof e.angle||isNaN(e.angle)||(o=[Number(e.angle)])),null==o&&(o=d3.range(-90,95,5)),null!=e.aspectRatio&&(e.aspectRatio instanceof Array?l=e.aspectRatio:"number"==typeof e.aspectRatio?l=[e.aspectRatio]:"string"!=typeof e.aspectRatio||isNaN(e.aspectRatio)||(l=[Number(e.aspectRatio)])),null!=e.origin&&e.origin instanceof Array&&(L=e.origin[0]instanceof Array?e.origin:[e.origin]),0===(s=Math.abs(d3.geom.polygon(r).area())))return null;if(q=(X=d3.extent(r,function(e){return e[0]}))[0],O=X[1],B=(Z=d3.extent(r,function(e){return e[1]}))[0],C=Z[1],se=Math.min(O-q,C-B)*e.tolerance,oe=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)V=r[e],n.push({x:V[0],y:V[1]});return n}(),0<se&&(oe=ve(oe,se),r=function(){var e,t,n;for(n=[],e=0,t=oe.length;e<t;e++)V=oe[e],n.push([V.x,V.y]);return n}()),e.vdebug&&f.push({type:"simplify",poly:r}),q=(J=d3.extent(r,function(e){return e[0]}))[0],O=J[1],[[q,B=(W=d3.extent(r,function(e){return e[1]}))[0]],[O,B],[O,C=W[1]],[q,C]],c=(Q=[O-q,C-B])[0],u=Q[1],ue=Math.min(c,u)/50,null==L)for(L=[],d=d3.geom.polygon(r).centroid(),he(d,r)&&L.push(d);L.length<e.nTries;)ae=Math.random()*c+q,ie=Math.random()*u+B,he(re=[ae,ie],r)&&L.push(re);for(e.vdebug&&f.push({type:"origins",points:L}),E=null,v=z=0,b=o.length;v<b;v++)for(i=-(a=o[v])*Math.PI/180,e.vdebug&&f.push({type:"angle",angle:a}),p=m=0,j=L.length;m<j;p=++m)for(I=L[p],U=(K=fe(r,I,i))[0],Y=K[1],R=($=fe(r,I,i+Math.PI/2))[0],H=$[1],P=[],null!=U&&null!=Y&&P.push([(U[0]+Y[0])/2,(U[1]+Y[1])/2]),null!=R&&null!=H&&P.push([(R[0]+H[0])/2,(R[1]+H[1])/2]),e.vdebug&&f.push({type:"modifOrigin",idx:p,p1W:U,p2W:Y,p1H:R,p2H:H,modifOrigins:P}),y=0,w=P.length;y<w;y++)if(D=P[y],e.vdebug&&f.push({type:"origin",cx:D[0],cy:D[1]}),U=(ee=fe(r,D,i))[0],Y=ee[1],null!==U&&null!==Y&&(T=Math.min(me(D,U),me(D,Y)),S=2*Math.sqrt(T),R=(te=fe(r,D,i+Math.PI/2))[0],H=te[1],null!==R&&null!==H&&(F=Math.min(me(D,R),me(D,H)),!(S*(A=2*Math.sqrt(F))<z))))for(k=0,_=(n=null!=l?l:(N=Math.max(1,e.minWidth/A,z/(A*A)),M=Math.min(e.maxAspectRatio,S/e.minHeight,S*S/z),d3.range(N,M+.5,.5))).length;k<_;k++)if(t=n[k],x=Math.max(e.minWidth,Math.sqrt(z*t)),!((ne=Math.min(S,A*t))*A<z))for(ue<=ne-x&&e.vdebug&&f.push({type:"aRatio",aRatio:t});ue<=ne-x;)h=(le=(x+ne)/2)/t,ce=D[0],de=D[1],G=ge(G=[[ce-le/2,de-h/2],[ce+le/2,de-h/2],[ce+le/2,de+h/2],[ce-le/2,de+h/2]],i,D),pe(G,r)?(g=!0,z=le*h,E={cx:ce,cy:de,width:le,height:h,angle:a},x=le):(g=!1,ne=le),e.vdebug&&f.push({type:"rectangle",cx:ce,cy:de,width:le,height:h,areaFraction:le*h/s,angle:a,insidePoly:g});return[E,z,f]},me=function(e,t){var n,r;return(n=t[0]-e[0])*n+(r=t[1]-e[1])*r},s=function(e,t,n){var r,a,i;return r=(i=t[1]<n[1]?[t,n]:[n,t])[0],a=i[1],e[1]!==a[1]&&e[1]!==r[1]||(e[1]+=Number.MIN_VALUE),!(e[1]>a[1]||e[1]<r[1])&&(!(e[0]>r[0]&&e[0]>a[0])&&(e[0]<r[0]&&e[0]<a[0]||(a[1]-r[1])/(a[0]-r[0])<(e[1]-r[1])/(e[0]-r[0])))},he=function(e,t){var n,r,a,i,o;for(i=-1,r=t[(o=t.length)-1],a=0;++i<o;)n=r,r=t[i],s(e,n,r)&&a++;return a%2!=0},y=function(e,t,n){var r,a;return 1e-9,r=e[0],a=e[1],!(r<Math.min(t[0],n[0])-1e-9||r>Math.max(t[0],n[0])+1e-9||a<Math.min(t[1],n[1])-1e-9||a>Math.max(t[1],n[1])+1e-9)},m=function(e,t,n,r){var a,i,o,s,l,u,c;return 1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],o=s*(c=n[1]-r[1])-u*l,Math.abs(o)<1e-9?null:[((a=e[0]*t[1]-e[1]*t[0])*l-(i=n[0]*r[1]-n[1]*r[0])*s)/o,(a*c-i*u)/o]},c=function(e,t,n,r){var a;return null!=(a=m(e,t,n,r))&&(y(a,e,t)&&y(a,n,r))},pe=function(e,t){var n,r,a,i,o,s,l,u;for(o=-1,l=e.length,u=t.length,a=e[l-1];++o<l;)for(n=a,a=e[o],s=-1,i=t[u-1];++s<u;)if(r=i,i=t[s],c(n,a,r,i))return!1;return he(e[0],t)},l=function(e,t,n){var r,a,i,o;return null==n&&(n=[0,0]),i=e[0]-n[0],o=e[1]-n[1],[(r=Math.cos(t))*i-(a=Math.sin(t))*o+n[0],a*i+r*o+n[1]]},ge=function(e,t,n){var r,a,i,o;for(o=[],r=0,a=e.length;r<a;r++)i=e[r],o.push(l(i,t,n));return o},fe=function(e,t,n){var r,a,i,o,s,l,u,c,d,f,h,p,g,v;for(1e-9,g=(t=[t[0]+1e-9*Math.cos(n),t[1]+1e-9*Math.sin(n)])[0],v=t[1],h=[g+Math.cos(n),v+Math.sin(n)],l=0,Math.abs(h[0]-g)<1e-9&&(l=1),s=-1,a=e[(d=e.length)-1],u=Number.MAX_VALUE,c=Number.MAX_VALUE,o=i=null;++s<d;)r=a,a=e[s],null!=(f=m(t,h,r,a))&&y(f,r,a)&&(p=me(t,f),f[l]<t[l]?p<u&&(u=p,i=f):f[l]>t[l]&&p<c&&(c=p,o=f));return[i,o]}}).call(this)},{"simplify-js":23}],163:[function(e,t,n){(function(){t.exports=function(e,t,n){var r,a,i,o;return a={x:0,y:0},e<0&&(e=2*Math.PI+e),"square"===n?(i=Math.PI/180*45,e<=Math.PI?e<Math.PI/2?e<i?(a.x+=t,o=Math.tan(e)*t,a.y+=o):(a.y+=t,r=t/Math.tan(e),a.x+=r):e<Math.PI-i?(a.y+=t,r=t/Math.tan(Math.PI-e),a.x-=r):(a.x-=t,o=Math.tan(Math.PI-e)*t,a.y+=o):e<3*Math.PI/2?e<i+Math.PI?(a.x-=t,o=Math.tan(e-Math.PI)*t,a.y-=o):(a.y-=t,r=t/Math.tan(e-Math.PI),a.x-=r):e<2*Math.PI-i?(a.y-=t,r=t/Math.tan(2*Math.PI-e),a.x+=r):(a.x+=t,o=Math.tan(2*Math.PI-e)*t,a.y-=o)):(a.x+=t*Math.cos(e),a.y+=t*Math.sin(e)),a}}).call(this)},{}],164:[function(e,t,n){(function(){var g;g=e("../geom/offset.js"),t.exports=function(e){var t,n,r,a,i,o,s,l,u,c,d,f,h,p;if(!e)return[];for(l=[],r=0,i=(e=e.slice(1).slice(0,-1).split(/L|A/)).length;r<i;r++)if(1===(s=(s=e[r]).split(" ")).length)l.push(s[0].split(",").map(function(e){return parseFloat(e)}));else{for(u=l[l.length-1],a=s.pop().split(",").map(function(e){return parseFloat(e)}),c=parseFloat(s.shift().split(",")[0]),p=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)),t=Math.acos((c*c+c*c-p*p)/(2*c*c)),"1"===s[1].split(",")[0]&&(t=2*Math.PI-t),d=t/(2*Math.PI)*(c*Math.PI*2)/5,f=Math.atan2(-u[1],-u[0])-Math.PI,n=h=t/d;n<t;)o=g(f+n,c),l.push([o.x,o.y]),n+=h;l.push(a)}return l}}).call(this)},{"../geom/offset.js":163}],165:[function(t,n,e){(function(){var e;(e={version:"0.1.0",repo:"https://github.com/pachamaltese/d3po/"}).array={comparator:t("./array/comparator.js"),contains:t("./array/contains.js"),sort:t("./array/sort.js"),update:t("./array/update.js")},e.client={css:t("./client/css.js"),ie:t("./client/ie.js"),pointer:t("./client/pointer.js"),prefix:t("./client/prefix.js"),rtl:t("./client/rtl.js"),scroll:t("./client/scroll.js"),scrollbar:t("./client/scrollbar.js"),touch:t("./client/touch.js")},e.color={legible:t("./color/legible.js"),lighter:t("./color/lighter.js"),mix:t("./color/mix.js"),random:t("./color/random.js"),scale:t("./color/scale.js"),sort:t("./color/sort.js"),text:t("./color/text.js"),validate:t("./color/validate.js")},e.data={bestRegress:t("./data/bestregression.js"),lof:t("./data/lof.js"),mad:t("./data/mad.js")},e.font={sizes:t("./font/sizes.js"),validate:t("./font/validate.js")},e.form=t("./form/form.js"),e.geom={largestRect:t("./geom/largestrectangle.js"),offset:t("./geom/offset.js"),path2poly:t("./geom/path2poly.js")},e.network={cluster:t("./network/cluster.js"),distance:t("./network/distance.js"),normalize:t("./network/normalize.js"),shortestPath:t("./network/shortestpath.js"),smallestGap:t("./network/smallestgap.js"),subgraph:t("./network/subgraph.js")},e.number={format:t("./number/format.js")},e.object={merge:t("./object/merge.js"),validate:t("./object/validate.js")},e.string={format:t("./string/format.js"),list:t("./string/list.js"),strip:t("./string/strip.js"),title:t("./string/title.js")},e.textwrap=t("./textwrap/textwrap.js"),e.tooltip={create:t("./tooltip/create.js"),move:t("./tooltip/move.js"),remove:t("./tooltip/remove.js")},e.util={buckets:t("./util/buckets.js"),child:t("./util/child.js"),closest:t("./util/closest.js"),copy:t("./util/copy.js"),d3selection:t("./util/d3selection.js"),dataurl:t("./util/dataurl.js"),uniques:t("./util/uniques.js")},e.viz=t("./viz/viz.js"),t("./client/css.js"),t("./core/console/print.js"),"undefined"!=typeof window&&(window.d3po=e),n.exports=e}).call(this)},{"./array/comparator.js":32,"./array/contains.js":33,"./array/sort.js":34,"./array/update.js":35,"./client/css.js":36,"./client/ie.js":37,"./client/pointer.js":38,"./client/prefix.js":39,"./client/rtl.js":40,"./client/scroll.js":41,"./client/scrollbar.js":42,"./client/touch.js":43,"./color/legible.js":44,"./color/lighter.js":45,"./color/mix.js":46,"./color/random.js":47,"./color/scale.js":48,"./color/sort.js":49,"./color/text.js":50,"./color/validate.js":51,"./core/console/print.js":52,"./data/bestregression.js":101,"./data/lof.js":102,"./data/mad.js":103,"./font/sizes.js":104,"./font/validate.js":105,"./form/form.js":106,"./geom/largestrectangle.js":162,"./geom/offset.js":163,"./geom/path2poly.js":164,"./network/cluster.js":167,"./network/distance.js":168,"./network/normalize.js":169,"./network/shortestpath.js":170,"./network/smallestgap.js":171,"./network/subgraph.js":172,"./number/format.js":173,"./object/merge.js":174,"./object/validate.js":175,"./string/format.js":176,"./string/list.js":177,"./string/strip.js":178,"./string/title.js":179,"./textwrap/textwrap.js":203,"./tooltip/create.js":204,"./tooltip/move.js":205,"./tooltip/remove.js":206,"./util/buckets.js":207,"./util/child.js":208,"./util/closest.js":209,"./util/copy.js":210,"./util/d3selection.js":211,"./util/dataurl.js":212,"./util/uniques.js":213,"./viz/viz.js":330}],166:[function(e,t,n){(function(){window.d3=e("d3"),window.topojson=e("topojson")}).call(this)},{d3:7,topojson:26}],167:[function(e,t,n){(function(){var C;C=e("./normalize.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O;if(f=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(e=(E=C(e,t))[0],null===(t=E[1])))return null;for(p in t.distance,z=t.nodeid,O=t.startpoint,d=t.endpoint,A={},M=t.nodes)A[p]={node:M[p].node,degree:0};for(b={},h=j=0,y=e.length;h<y;h++)n=z(O(c=e[h])),r=z(d(c)),n in b||(b[n]={}),r in b||(b[r]={}),r in b[n]||(b[n][r]=0,b[r][n]=0,j++,A[n].degree+=1,A[r].degree+=1);for(p in s={},0,A)k=A[p],s[p]={score:k.degree/(2*j),nodes:[p]};for(n in b)for(r in b[n])b[n][r]=1/(2*j)-A[n].degree*A[r].degree/(4*j*j);for(g=0;g<1e3;){for(n in u=-1,_=w=void 0,b)for(r in b[n])b[n][r]>u&&(u=b[n][r],w=n,_=r);if(u<0)break;for(m in b[w])m!==_&&(m in b[_]?b[_][m]+=b[w][m]:b[_][m]=b[w][m]-2*s[_].score*s[m].score,b[m][_]=b[_][m]),delete b[m][w];for(m in b[_])m in b[w]||m===_||(b[_][m]-=2*s[w].score*s[m].score,b[m][_]=b[_][m]);for(v=0,x=(S=s[w].nodes).length;v<x;v++)k=S[v],s[_].nodes.push(k);s[_].score+=s[w].score,t.vdebug&&f.push({type:"merge",father:_,child:w,nodes:s[_].nodes}),delete s[w],delete b[w],u,g++}return(o=function(){var e;for(a in e=[],s)l=s[a],e.push([a,l.nodes.length]);return e}()).sort(function(e,t){return t[1]-e[1]}),[function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)i=o[e],n.push(s[i[0]].nodes);return n}(),f]}}).call(this)},{"./normalize.js":169}],168:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}}).call(this)},{}],169:[function(e,t,n){(function(){var I;I=e("../core/console/print.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P;if(S=t.source,C=t.target,i=t.directed,o=t.distance,z=t.nodeid,O=t.startpoint,u=t.endpoint,n=t.K,N=t.vdebug,i=i||!1,null==n&&(n=1),null==z?z=function(e){return e}:"string"==typeof z&&(F=z,z=function(e){return e[F]}),null!=S&&"object"==typeof S&&(S=z(S)),null!=C&&"object"==typeof C&&(C=z(C)),null==O?O=function(e){return e.source}:"string"==typeof O&&(T=O,O=function(e){return e[T]}),null==u?u=function(e){return e.target}:"string"==typeof u&&(q=u,u=function(e){return e[q]}),null==o)o=function(e){return 1};else if("number"==typeof o)P=o,o=function(e){return P};else if("string"==typeof o)B=o,o=function(e){return e[B]};else if(o instanceof Array){for(l={},d=v=0,x=e.length;v<x;d=++v)s=e[d],r=z(O(s)),a=z(u(s)),l[r+"_"+a]=o[d];o=function(e){return r=z(O(e)),a=z(u(e)),l[r+"_"+a]}}for(M={},m=0,b=e.length;m<b;m++){for(s=e[m],_=O(s),k=u(s),p=z(_),g=z(k),y=0,j=(A=[_,k]).length;y<j;y++)(f=z(w=A[y]))in M||(M[f]={node:w,outedges:[]});M[p].outedges.push(s),i||M[g].outedges.push(s)}return c=null,0===e.length?c="The length of edges is 0":n<0?c="K can not have negative value":null==o(e[0])?c="Check the distance function/attribute":null==O(e[0])?c="Check the startpoint function/attribute":null==u(e[0])?c="Check the endpoint function/attribute":null==(h=z(O(e[0])))||"string"!=(E=typeof h)&&"number"!=E?c="Check the nodeid function/attribute":null==S||S in M?null==C||C in M||(c="The target is not in the graph"):c="The source is not in the graph",null!=c?(I.error(c),null):[e,{source:S,target:C,directed:i,distance:o,nodeid:z,startpoint:O,endpoint:u,K:n,nodes:M,vdebug:N}]}}).call(this)},{"../core/console/print.js":52}],170:[function(e,t,n){(function(){var C,N;C=e("heap"),N=e("./normalize.js"),t.exports=function(t,e,n){var r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O;if(null==n&&(n={}),n.source=e,(null==n.nodes||"object"!=typeof n.nodes)&&(w=N(t,n),t=w[0],null===(n=w[1])))return null;for(p in e=n.source,E=n.target,s=n.directed,l=n.distance,x=n.nodeid,A=n.startpoint,c=n.endpoint,r=n.K,b=n.nodes)b[p].count=0;for(f=new C(function(e,t){return e.distance-t.distance}),O={},null==E&&(O[e]=!0),f.push({edge:null,target:e,distance:0}),y=0,M=[];!f.empty()&&(y=Math.max(y,f.size()),b[S=(j=f.pop()).target].count++,null==E?M.push(j):S===E&&M.push(j),M.length!==r);)if(b[S].count<=r)for(h=0,v=(_=b[S].outedges).length;h<v;h++){if(a=x(A(u=_[h])),o=x(c(u)),s||o!==S||(a=(k=[o,a])[0],o=k[1]),null==E){if(O[o])continue;O[o]=!0}i=j.distance+l(u),f.push({edge:u,previous:j,target:o,distance:i})}for(d=function(e){for(t=[];null!=e.edge;)t.push(e.edge),e=e.previous;return t.reverse()},g=0,m=M.length;g<m;g++)z=M[g],null!=E&&(delete z.target,z.edges=d(z)),delete z.edge,delete z.previous;return M}}).call(this)},{"./normalize.js":169,heap:9}],171:[function(e,t,n){(function(){var d;d=e("./distance.js"),t.exports=function(e,u){var c;return u=u||{},c=[],d3.geom.quadtree().x(function(e){return u.accessor?u.accessor(e)[0]:e[0]}).y(function(e){return u.accessor?u.accessor(e)[1]:e[1]})(e).visit(function(e){var t,n,r,a,i,o,s,l;if(!e.leaf)for(t=0,r=(s=e.nodes).length;t<r;t++)if((i=s[t])&&i.point)if(u.origin)c.push(d(i,u));else for(n=0,a=(l=e.nodes).length;n<a;n++)(o=l[n])&&o.point&&o.point!==i.point&&c.push(d(i,o));return!1}),u.all?c.sort(function(e,t){return e-t}):d3.min(c)}}).call(this)},{"./distance.js":168}],172:[function(e,t,n){(function(){var o;o=e("./normalize.js"),t.exports=function(r,e,t){var d,f,h,p,a,g,n,v,m,i,y,x;return null==t&&(t={}),t.source=e,null!=t.nodes&&"object"==typeof t.nodes||(i=o(r,t),r=i[0],null!==(t=i[1]))?(e=t.source,h=t.directed,p=t.distance,v=t.nodeid,y=t.startpoint,g=t.endpoint,d=t.K,m=t.nodes,(x={})[e]=!0,(f=function(e,t){var n,r,a,i,o,s,l,u,c;for(c=[],i=0,o=(l=m[e].outedges).length;i<o;i++)a=l[i],n=v(y(a)),r=v(g(a)),h||r!==e||(n=(u=[r,n])[0],r=u[1]),r in x?c.push(void 0):(s=t+p(a))<=d?(x[r]=!0,c.push(f(r,s))):c.push(void 0);return c})(e,0),{nodes:function(){var e;for(n in e=[],x)e.push(m[n].node);return e}(),edges:function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)a=r[e],v(y(a))in x&&v(g(a))in x&&n.push(a);return n}()}):null}}).call(this)},{"./normalize.js":169}],173:[function(e,t,n){(function(){var h;h=e("../core/locale/languages/en_US.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f;return null==e||!1===e?"":(d=(s="locale"in(t=t||{})?t.locale:h).time.slice(),r=d3.locale(s.format),f=(t=t||{}).vars||{},a=t.key,i=!("labels"in t)||t.labels,o=e.toString().split(".")[0].length,f.time&&f.time.value&&d.push(f.time.value),"string"==typeof a&&0<=d.indexOf(a.toLowerCase())?l=e:"share"===a?(l=0===e?0:100<=e?r.numberFormat(",f")(e):99<e?r.numberFormat(".3g")(e):r.numberFormat(".2g")(e),l+="%"):l=e<10&&-10<e?((u=1)<(o=e.toString().split(".")).length&&(u=d3.min([parseFloat(o[1]).toString().length,2]),-1<e&&e<1||(u+=1+(o[1].length-parseFloat(o[1]).toString().length))),r.numberFormat("."+u+"g")(e)):3<o?(c=(c=d3.formatPrefix(e).symbol).replace("G","B"),e=d3.formatPrefix(e).scale(e),e=(e=r.numberFormat(".3g")(e)).replace(s.format.decimal,"."),(e=(e=parseFloat(e)+"").replace(".",s.format.decimal))+c):3===o?r.numberFormat(",f")(e):0===e?0:e===parseInt(e,10)?r.numberFormat(".2")(e):r.numberFormat(".3g")(e),2<l.length&&""+l.indexOf(".0")===l.length-2&&(l=l.slice(0,l.length-2)),i&&a&&"format"in f&&a in f.format.affixes.value?(n=f.format.affixes.value[a])[0]+l+n[1]:l)}}).call(this)},{"../core/locale/languages/en_US.js":71}],174:[function(e,t,n){(function(){var s,l;s=e("../util/d3selection.js"),l=e("./validate.js"),t.exports=function(e,t){var o,n;return o=function(e,t,n){var r,a,i;for(r in a=[],e)void 0!==(i=e[r])?!n&&l(i)?("object"!=typeof t[r]&&(t[r]={}),a.push(o(i,t[r],0===r.indexOf("d3po")))):!s(i)&&i instanceof Array?a.push(t[r]=i.slice(0)):a.push(t[r]=i):a.push(void 0);return a},n={},e&&o(e,n),t&&o(t,n),n}}).call(this)},{"../util/d3selection.js":211,"./validate.js":175}],175:[function(e,t,n){(function(){t.exports=function(e){return e&&e.constructor===Object}}).call(this)},{}],176:[function(e,t,n){t.exports=function(){var r=Array.prototype.slice.call(arguments),a=r.shift();return a.unkeyed_index=0,a.replace(/\{(\w*)\}/g,function(e,t){if(""===t&&(t=a.unkeyed_index,a.unkeyed_index++),t==+t)return"undefined"!==r[t]?r[t]:e;for(var n=0;n<r.length;n++)if("object"==typeof r[n]&&void 0!==r[n][t])return r[n][t];return e}.bind(a))}},{}],177:[function(e,t,n){(function(){var i,o;i=e("./format.js"),o=e("../core/locale/languages/en_US.js").ui,t.exports=function(e,t,n,r){var a;return e instanceof Array?(e=e.slice(0),t=t||o.and,r=r||o.moreText,2===e.length?e.join(" "+t+" "):(n&&e.length>n&&(a=e.length-n+1,(e=e.slice(0,n-1))[n-1]=i(r,a)),1<e.length&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}}).call(this)},{"../core/locale/languages/en_US.js":71,"./format.js":176}],178:[function(e,t,n){t.exports=function(e){var r=[[/[\300-\305]/g,"A"],[/[\340-\345]/g,"a"],[/[\306]/g,"AE"],[/[\346]/g,"ae"],[/[\337]/g,"B"],[/[\307]/g,"C"],[/[\347]/g,"c"],[/[\320\336\376]/g,"D"],[/[\360]/g,"d"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\322-\326\330]/g,"O"],[/[\362-\366\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\327]/g,"x"],[/[\335]/g,"Y"],[/[\375\377]/g,"y"]];return""+e.toString().replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"-";for(var t=!1,n=0;n<r.length;n++)if(new RegExp(r[n][0]).test(e)){t=r[n][1];break}return t||""})}},{}],179:[function(e,t,n){(function(){var n;n=e("../core/locale/languages/en_US.js"),t.exports=function(r,e){var a,i,t,o;return r?((e=e||{}).key,"."===r.charAt(r.length-1)?r.charAt(0).toUpperCase()+r.substr(1):(t="locale"in this?this.locale.value:n,o=t.lowercase.map(function(e){return e.toLowerCase()}),i=(i=t.uppercase).concat(i.map(function(e){return e+"s"})),a=i.map(function(e){return e.toLowerCase()}),r.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(e,t){var n;return e?0<=(n=a.indexOf(e.toLowerCase()))?i[n]:0<=o.indexOf(e.toLowerCase())&&0!==t&&t!==r.length-1?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}))):""}}).call(this)},{"../core/locale/languages/en_US.js":71}],180:[function(e,r,t){(function(){var t,n;t=e("./foreign.js"),n=e("./tspan.js"),r.exports=function(e){e.text.html.value?t(e):n(e)}}).call(this)},{"./foreign.js":181,"./tspan.js":184}],181:[function(e,t,n){(function(){t.exports=function(e){var t,n,r,a,i;r=(i=e.container.value).attr("font-family")||i.style("font-family"),t=e.align.value||i.attr("text-anchor")||i.style("text-anchor"),n=i.attr("fill")||i.style("fill"),a=i.attr("opacity")||i.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(i.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",a).text(e.text.current)}}).call(this)},{}],182:[function(e,t,n){(function(){t.exports=function(e){var t,n,r,a,i,o,s,l,u,c;if(o=(a=(n=e.container.value).node().previousElementSibling)?a.tagName.toLowerCase():"",a=a&&d3.select(a),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),a&&(0<=e.shape.accepted.indexOf(o)&&e.self.shape(o),"rect"===o?(u=parseFloat(a.attr("x"),10)||0,c=parseFloat(a.attr("y"),10)||0,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(a.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(a.attr("height")),e.self.height(r))):"circle"===o?(i=parseFloat(a.attr("r"),10),u=parseFloat(a.attr("cx"),10)||0,u-=i,c=parseFloat(a.attr("cy"),10)||0,c-=i,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*i,10),e.height.value||e.self.height(2*i,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),!e.size.value)return e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}}).call(this)},{}],183:[function(e,t,n){(function(){t.exports=function(e){var t;if(e.text.value||(t=e.container.value.text())&&(0<=t.indexOf("tspan")&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=(t=t.replace(/(\r\n|\n|\r)/gm,"")).replace(/^\s+|\s+$/g,""),e.self.text(t)),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return 0<=["string","number"].indexOf(typeof e)}):e.text.phrases=[e.text.value+""],!e.align.value)return e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}}).call(this)},{}],184:[function(e,t,n){(function(){var N;N=e("../../client/rtl.js"),t.exports=function(o){var e,s,n,t,r,l,u,i,c,a,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C;return d=function(e){return(!p||e?o.container.value.append("tspan"):o.container.value.insert("tspan","tspan")).attr("x",E+"px").attr("dy",s+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},a=-90===o.rotate.value||90===o.rotate.value,z=a?o.height.inner:o.width.inner,l=a?o.width.inner:o.height.inner,S="end"===(e="circle"===o.shape.value?"middle":o.align.value||o.container.align||"start")||"start"===e&&N?z:"middle"===e?z/2:0,k=o.valign.value||"top",E=o.container.x+S,t=o.resize.value?o.size.value[1]:o.container.fontSize||o.size.value[0],s=o.container.dy||1.1*t,M=h=j=null,p=!1,C=0,"circle"===o.shape.value&&("middle"===k?C=l/s%1*s/2:"end"===k&&(C=l/s%1*s)),o.container.value.attr("text-anchor",e).attr("font-size",t+"px").style("font-size",t+"px").attr("x",o.container.x).attr("y",o.container.y),_=function(){if(j.remove(),!(j=p?(u++,o.container.value.select("tspan")):(u--,d3.select(o.container.value.node().lastChild))).empty())return M=j.text().match(/[^\s-]+-?/g),n()},i=function(){var e;return"circle"===o.shape.value?(l/2<(e=(u-1)*s+C)&&(e+=s),2*Math.sqrt(e*(z/2*2-e))):z},n=function(){var e,t;return M&&M.length?(e=(t=M.pop()).charAt(t.length-1),1===t.length&&0<=o.text.split.value.indexOf(t)?n():(0<=o.text.split.value.indexOf(e)&&(t=t.substr(0,t.length-1)),j.text(M.join(" ")+" "+t+"..."),j.node().getComputedTextLength()>i()?n():void 0)):_()},f=function(e){var t,n,r,a;if(t=j.text(),a="",p){if(" "===(a=o.text.current.charAt(o.text.current.length-h.length-1)))for(r="",n=2;" "===a;)r+=" ",a=o.text.current.charAt(o.text.current.length-h.length-n),n++;else r="";h=e+r+h,j.text(e+r+t)}else{if(" "===(a=o.text.current.charAt(h.length)))for(r="",n=1;" "===a;)r+=" ",a=o.text.current.charAt(h.length+n),n++;else r="";h+=r+e,j.text(t+r+e)}if(Math.floor(j.node().getComputedTextLength())>i()||"\n"===a)return j.text(t),t.length&&(j=d()),j.text(e),p?u--:u++},b=1,c=u=null,(A=function(){var e,t,n,r,a,i;for(o.container.value.text("").html(""),M=o.text.words.slice(),p&&M.reverse(),j=d(!(h="")),u=b,t=0,n=M.length;t<n;t++){if(i=M[t],l<u*s){_();break}for(f(i),a=!0;a;){for(r=o.text.current.charAt(h.length),e=1;" "===r;)r=o.text.current.charAt(h.length+e),e++;(a=0<=o.text.split.value.indexOf(r))&&f(r)}}return l<u*s&&_(),c=Math.abs(u-b)+1})(),c=0,o.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"circle"===o.shape.value&&s<(x=l-c*s)&&("middle"===k?(b=1+(x/s/2>>0),A()):"bottom"===k&&(p=!0,b=l/s>>0,A())),c=0,o.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),O="top"===k?0:(r=c*s,"middle"===k?l/2-r/2:l-r),w="translate(0,"+(O-=.2*s)+")",y=180===o.rotate.value||-180===o.rotate.value?(m=o.container.x+z/2,o.container.y+l/2):(g=o.rotate.value<0?z:l,m=o.container.x+g/2,o.container.y+g/2),v="rotate("+o.rotate.value+", "+m+", "+y+")",o.container.value.attr("transform",v+w)}}).call(this)},{"../../client/rtl.js":40}],185:[function(e,t,n){(function(){var y,x,n,b;y=e("./flow.js"),x=e("../../font/sizes.js"),b=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text.split.break),(t=e.text.current.charAt(0))!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?n(e):y(e))},t.exports=b,n=function(n){var e,t,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m;for(m=[],s=0;s<n.text.words.length;)e=s===n.text.words.length-1?"":" ",m.push(n.text.words[s]+e),s++;g=(c=-90===n.rotate.value||90===n.rotate.value)?n.height.inner:n.width.inner,i=c?n.width.inner:n.height.inner,d=Math.floor(n.size.value[1]),l="circle"===n.shape.value?.75*g:g,h=x(m,{"font-size":d+"px"},{parent:n.container.value}),u=d3.max(h,function(e){return e.width}),t=1.165+g/i*.11,p=d3.sum(h,function(e){var t;return t=n.container.dy||1.2*d,e.width*t})*t,a="circle"===n.shape.value?Math.PI*Math.pow(g/2,2):l*i,(l<u||a<p)&&(r=Math.sqrt(a/p),v=l/u,f=d3.min([r,v]),d=d3.max([n.size.value[0],Math.floor(d*f)])),(o=Math.floor(.8*i))<d&&(d=o),u*(d/n.size.value[1])<=l?(d!==n.size.value[1]&&n.self.size([n.size.value[0],d]),y(n)):b(n)}}).call(this)},{"../../font/sizes.js":104,"./flow.js":180}],186:[function(e,t,n){(function(){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return 0<=(t=["left","center","right"].indexOf(e))&&(e=this.accepted[t+1]),e},value:!1}}).call(this)},{}],187:[function(e,t,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],188:[function(e,n,t){(function(){var t;t=e("../../util/d3selection.js"),n.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1!==e&&(t(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e)))},value:!1}}).call(this)},{"../../util/d3selection.js":211}],189:[function(e,t,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],190:[function(e,t,n){(function(){var a,i;a=e("../../core/console/print.js"),i=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var n,r;return!1===this.initialized||(!1===t.container.value?(r=t.format.locale.value.dev.setContainer,a.warning(r,"container")):t.container.value.empty()?(r=t.format.locale.value.dev.noContainer,n=t.container.selector||"",a.warning(i(r,'"'+n+'"'),"container")):(t.dev.value&&a.time("total draw time"),t.container.value.call(t.self))),e},value:void 0}}).call(this)},{"../../core/console/print.js":52,"../../string/format.js":176}],191:[function(e,t,n){(function(){var n,r;n=e("../../core/locale/locale.js"),r=e("../../object/merge.js"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=r(t,n[e])),this.language=e,t},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}}).call(this)},{"../../core/locale/locale.js":81,"../../object/merge.js":174}],192:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],value:!1}}).call(this)},{}],193:[function(e,t,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],194:[function(e,t,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],195:[function(e,t,n){(function(){t.exports={accepted:[-180,-90,0,90,180],value:0}}).call(this)},{}],196:[function(e,t,n){(function(){t.exports={accepted:["circle","square"],value:!1}}).call(this)},{}],197:[function(e,t,n){(function(){t.exports={accepted:[Array,!1],value:!1}}).call(this)},{}],198:[function(e,t,n){(function(){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this.split.break=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this.break=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}}).call(this)},{}],199:[function(e,t,n){(function(){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}}).call(this)},{}],200:[function(e,t,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],201:[function(e,t,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],202:[function(e,t,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],203:[function(o,t,e){(function(){var e,n,r,a,i;e=o("../core/methods/attach.js"),r=o("./helpers/parsesize.js"),n=o("../core/console/print.js"),a=o("./helpers/parsetext.js"),i=o("./helpers/wrap.js"),t.exports=function(){var t;return e(t={self:function(e){return e.each(function(){r(t),t.size.value[0]<=t.height.inner?(a(t),i(t)):t.container.value.html(""),t.dev.value&&n.timeEnd("total draw time")}),t.self}},{align:o("./methods/align.js"),config:o("./methods/config.js"),container:o("./methods/container.js"),dev:o("./methods/dev.js"),draw:o("./methods/draw.js"),format:o("./methods/format.js"),height:o("./methods/height.js"),padding:o("./methods/padding.js"),resize:o("./methods/resize.js"),rotate:o("./methods/rotate.js"),text:o("./methods/text.js"),shape:o("./methods/shape.js"),size:o("./methods/size.js"),valign:o("./methods/valign.js"),width:o("./methods/width.js"),x:o("./methods/x.js"),y:o("./methods/y.js")}),t.self}}).call(this)},{"../core/console/print.js":52,"../core/methods/attach.js":82,"./helpers/parsesize.js":182,"./helpers/parsetext.js":183,"./helpers/wrap.js":185,"./methods/align.js":186,"./methods/config.js":187,"./methods/container.js":188,"./methods/dev.js":189,"./methods/draw.js":190,"./methods/format.js":191,"./methods/height.js":192,"./methods/padding.js":193,"./methods/resize.js":194,"./methods/rotate.js":195,"./methods/shape.js":196,"./methods/size.js":197,"./methods/text.js":198,"./methods/valign.js":199,"./methods/width.js":200,"./methods/x.js":201,"./methods/y.js":202}],204:[function(e,t,n){var A=e("../core/locale/languages/en_US.js"),E=e("../client/pointer.js"),S=e("../color/legible.js"),O=e("./move.js"),C=e("../client/prefix.js"),N=e("../client/rtl.js"),F=e("./remove.js"),T=e("../client/scroll.js"),q=e("../client/scrollbar.js"),B=e("../string/list.js"),P=e("../color/text.js");function I(){d3.selectAll("div.d3po_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3po_tooltip_data_help").style("background-color","#ccc")}t.exports=function(d){var e=d.fullscreen?250:200,f=C();d.width=d.width||e,d.max_width=d.max_width||386,d.id=d.id||"default",d.size=d.fullscreen||d.html?"large":"small",d.offset=d.offset||0,d.arrow_offset=d.arrow?8:0,d.x=d.x||0,d.y=d.y||0,d.parent=d.parent||d3.select("body"),d.curtain=d.curtain||"#fff",d.curtainopacity=d.curtainopacity||.8,d.background=d.background||"#fff",d.fontcolor=d.fontcolor||"#444",d.fontfamily=d.fontfamily||"sans-serif",d.fontweight=d.fontweight||"normal",d.fontsize=d.fontsize||"12px",d.style=d.style||"default",d.zindex="small"==d.size?2e3:500,d.locale=d.locale||A,d.stacked=d.stacked||!1;var t=d.parent?d.parent.node().offsetHeight||d.parent.node().getBoundingClientRect().height:0;if(d.iconsize||(d.iconsize="small"==d.size?22:50),d.parent.node()===document.body){d.limit=[window.innerWidth+T.x(),window.innerHeight+T.y()];var n=q();document.body.scrollHeight>window.innerHeight&&(d.limit[0]-=n)}else d.limit=[parseFloat(d.parent.style("width"),10),parseFloat(d.parent.style("height"),10)];if(d.title instanceof Array){var r=d.locale.ui.and,a=d.locale.ui.more;d.title=B(d.title,r,3,a)}if(F(d.id),d.anchor={},d.fullscreen)d.anchor.x="center",d.anchor.y="center",d.x=d.parent?d.parent.node().offsetWidth/2:window.innerWidth/2,d.y=d.parent?t/2:window.innerHeight/2;else if(d.align){var i=d.align.split(" ");d.anchor.y=i[0],i[1]?d.anchor.x=i[1]:d.anchor.x="center"}else d.anchor.x="center",d.anchor.y="top";var o=d.width-30;if(d.fullscreen)d.parent.append("div").attr("id","d3po_tooltip_curtain_"+d.id).attr("class","d3po_tooltip_curtain").style("background-color",d.curtain).style("opacity",d.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(E.click,function(){F(d.id)});var s=d.parent.append("div").datum(d).attr("id","d3po_tooltip_id_"+d.id).attr("class","d3po_tooltip d3po_tooltip_"+d.size).style("color",d.fontcolor).style("font-family",d.fontfamily).style("font-weight",d.fontweight).style("font-size",d.fontsize+"px").style(f+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(E.out,I);d.max_height&&s.style("max-height",d.max_height+"px"),d.fixed?(s.style("z-index",500),d.mouseevents=!0):s.style("z-index",2e3);var l=s.append("div").datum(d).attr("class","d3po_tooltip_container").style("background-color",d.background).style("padding","6px");if(d.fullscreen&&d.html&&!d.stacked){c=d.parent?.75*d.parent.node().offsetWidth:.75*window.innerWidth,z=d.parent?.75*t:.75*window.innerHeight,l.style("width",c+"px").style("height",z+"px");var u=l.append("div").attr("class","d3po_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",d.width+"px")}else{if("auto"==d.width){var c="auto";l.style("max-width",d.max_width+"px")}else c=d.width-14+"px";u=l.style("width",c)}if(d.title||d.icon)var h=u.append("div").attr("class","d3po_tooltip_header").style("position","relative").style("z-index",1);if(d.fullscreen){s.append("div").attr("class","d3po_tooltip_close").style("background-color",d.color).style("color",P(d.color)).style("position","absolute").style(f+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(E.over,function(){d3.select(this).style("cursor","pointer").style(f+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(E.out,function(){d3.select(this).style("cursor","auto").style(f+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(E.click,function(){F(d.id)});d3.select("body").on("keydown.esc_"+d.id,function(){27===d3.event.keyCode&&(F(d.id),d3.select("body").on("keydown.esc_"+d.id,null))})}if(d.mouseevents){if(!0!==d.mouseevents){function p(){var e=d3.event.toElement||d3.event.relatedTarget;if(e)var t=0==("string"==typeof e.className?e.className:e.className.baseVal).indexOf("d3po_tooltip");else t=!1;e&&(v(s.node(),e)||v(d.mouseevents,e)||t)||(g(d3.select(d.mouseevents).datum()),I(),d3.select(d.mouseevents).on(E.out,g))}var g=d3.select(d.mouseevents).on(E.out),v=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(d.mouseevents).on(E.out,p),s.on(E.out,p);var m=d3.select(d.mouseevents).on(E.move);m&&s.on(E.move,m)}}else s.style("pointer-events","none");if(d.arrow)s.append("div").attr("class","d3po_tooltip_arrow").style("background-color",d.background).style(f+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(f+"transform","rotate(45deg)").style("z-index",-1);if(d.icon){var y=h.append("div").attr("class","d3po_tooltip_icon").style("width",d.iconsize+"px").style("height",d.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+d.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==d.style&&y.style("background-color",d.color),o-=y.node().offsetWidth}if(d.title){var x=d.max_width-6;d.icon&&(x-=d.iconsize+6),x+="px";h.append("div").attr("class","d3po_tooltip_title").style("max-width",x).style("color",d.icon?d.fontcolor:S(d.color)).style("vertical-align","top").style("width",o+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===d.size?"18px":"16px").style("line-height","large"===d.size?"20px":"17px").style("padding","large"===d.size?"3px 6px":"3px").text(d.title)}if(d.description)u.append("div").attr("class","d3po_tooltip_description").style("font-size","12px").style("padding","6px").text(d.description);if(d.data||d.html&&!d.fullscreen)var b=u.append("div").attr("class","d3po_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(d.data){var j=0,w={},_=null;d.data.forEach(function(e,t){e.group&&_!=e.group&&(_=e.group,b.append("div").attr("class","d3po_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(e.group));var n=b.append("div").attr("class","d3po_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(e);!0===e.highlight?n.style("color",S(d.color)):!e.allColors&&e.highlight===d.color||n.style("color",S(e.highlight));var r=n.append("div").attr("class","d3po_tooltip_data_name").style("display","inline-block").html(e.name).on(E.out,function(){d3.event.stopPropagation()});if(e.link&&r.style("cursor","pointer").on(E.click,e.link),e.value instanceof Array){var a=d.locale.ui.and,i=d.locale.ui.more;e.value=list(e.value,a,3,i)}var o=n.append("div").attr("class","d3po_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(e.value).on(E.out,function(){d3.event.stopPropagation()});if(N?o.style("left","6px"):o.style("right","6px"),d.mouseevents&&e.desc){var s=n.append("div").attr("class","d3po_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(f+"transition","height 0.5s").style("width","85%").text(e.desc).on(E.out,function(){d3.event.stopPropagation()}),l=s.node().offsetHeight||s.node().getBoundingClientRect().height;s.style("height","0px");var u=r.append("div").attr("class","d3po_tooltip_data_help").style("background-color","#ccc").style(f+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(C+"transition","background-color 0.5s").text("?").on(E.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),s.style("height",l+"px")}).on(E.out,function(){d3.event.stopPropagation()});r.style("cursor","pointer").on(E.over,function(){I();var e=d3.select(this.parentNode).style("color");u.style("background-color",e),s.style("height",l+"px")}),n.on(E.out,function(){d3.event.stopPropagation(),I()})}var c=parseFloat(o.style("width"),10);c>d.width/2&&(c=d.width/2),j<c&&(j=c),t!=d.data.length-1&&(e.group&&e.group==d.data[t+1].group||!e.group&&!d.data[t+1].group)&&b.append("div").attr("class","d3po_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),b.selectAll(".d3po_tooltip_data_name").style("width",function(){return parseFloat(d3.select(this.parentNode).style("width"),10)-j-30+"px"}),b.selectAll(".d3po_tooltip_data_value").style("width",j+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);w[e.name]=t}),b.selectAll(".d3po_tooltip_data_name").style("min-height",function(e){return w[e.name]+"px"})}!d.html||d.fullscreen&&!d.stacked||(b.append("div").html(d.html),d.js&&d.js(l));var k=u.append("div").attr("class","d3po_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(d.footer&&k.html(d.footer),d.height=s.node().offsetHeight||s.node().getBoundingClientRect().height,d.html&&d.fullscreen&&!d.stacked){var z=d.height-12;c=s.node().offsetWidth-d.width-44;l.append("div").attr("class","d3po_tooltip_html").style("width",c+"px").style("height",z+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(d.html),d.js&&d.js(l)}if(d.width=s.node().offsetWidth,"center"!=d.anchor.y?d.height+=d.arrow_offset:d.width+=d.arrow_offset,d.data||(!d.fullscreen||d.stacked)&&d.html){if(!d.fullscreen||d.stacked){var M=d.fixed?t-d.y-10:t-10;z=d.height<M?d.height:M}else z=d.height;z-=parseFloat(l.style("padding-top"),10),z-=parseFloat(l.style("padding-bottom"),10),h&&(z-=h.node().offsetHeight||h.node().getBoundingClientRect().height,z-=parseFloat(h.style("padding-top"),10),z-=parseFloat(h.style("padding-bottom"),10)),k&&(z-=k.node().offsetHeight||k.node().getBoundingClientRect().height,z-=parseFloat(k.style("padding-top"),10),z-=parseFloat(k.style("padding-bottom"),10)),b.style("max-height",z+"px")}d.height=s.node().offsetHeight||s.node().getBoundingClientRect().height,O(d.x,d.y,d.id)}},{"../client/pointer.js":38,"../client/prefix.js":39,"../client/rtl.js":40,"../client/scroll.js":41,"../client/scrollbar.js":42,"../color/legible.js":44,"../color/text.js":50,"../core/locale/languages/en_US.js":71,"../string/list.js":177,"./move.js":205,"./remove.js":206}],205:[function(e,t,n){(function(){var o,s;s=e("../client/scroll.js"),t.exports=function(e,t,n){var r,a,i;return n=n||"default",(i=d3.select("div#d3po_tooltip_id_"+n)).node()&&((r=i.datum()).cx=e,r.cy=t,r.fixed||(a="body"===r.parent.node().tagName.toLowerCase()?[s.x(),s.y()]:[0,0],"center"!==r.anchor.y?("right"===r.anchor.x?r.x=r.cx-r.arrow_offset-4:"center"===r.anchor.x?r.x=r.cx-r.width/2:"left"===r.anchor.x&&(r.x=r.cx-r.width+r.arrow_offset+2),"bottom"===r.anchor.y?r.flip=r.cy+r.height+r.offset<=r.limit[1]:"top"===r.anchor.y&&(r.flip=r.cy-r.height-r.offset<a[1]),r.flip?r.y=r.cy+r.offset+r.arrow_offset:r.y=r.cy-r.height-r.offset-r.arrow_offset):(r.y=r.cy-r.height/2,"right"===r.anchor.x?r.flip=r.cx+r.width+r.offset<=r.limit[0]:"left"===r.anchor.x&&(r.flip=r.cx-r.width-r.offset<a[0]),"center"===r.anchor.x?(r.flip=!1,r.x=r.cx-r.width/2):r.flip?r.x=r.cx+r.offset+r.arrow_offset:r.x=r.cx-r.width-r.offset),r.x<a[0]?r.x=a[0]:r.x+r.width>r.limit[0]&&(r.x=r.limit[0]-r.width),r.y<a[1]?r.y=a[1]:r.y+r.height>r.limit[1]&&(r.y=r.limit[1]-r.height)),i.style("top",r.y+"px").style("left",r.x+"px"),r.arrow&&i.selectAll(".d3po_tooltip_arrow").call(o)),i},o=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5)<2-e.width/2&&(t=2-e.width/2):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5))>e.width/2-11&&(t=e.width/2-11),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset)<4-e.height/2&&(t=4-e.height/2):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset))>e.height/2-22&&(t=e.height/2-22),t+"px")})}}).call(this)},{"../client/scroll.js":41}],206:[function(e,t,n){(function(){t.exports=function(e){return e?(d3.selectAll("div#d3po_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3po_tooltip_id_"+e).remove()):(d3.selectAll("div.d3po_tooltip_curtain").remove(),d3.selectAll("div.d3po_tooltip").remove())}}).call(this)},{}],207:[function(e,t,n){(function(){t.exports=function(e,t){var n;return[],n=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+n,n)}}).call(this)},{}],208:[function(e,t,n){(function(){var r;r=e("./d3selection.js"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}}).call(this)},{"./d3selection.js":211}],209:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return t.constructor===String?-1<(r=e.indexOf(t))?e[r]:e[0]:(n=e[0],e.forEach(function(e){if(Math.abs(t-e)<Math.abs(t-n))return n=e}),n)}}).call(this)},{}],210:[function(e,t,n){(function(){var n,r,a;r=e("../object/merge.js"),a=e("../object/validate.js"),n=function(e){var t;return a(e)?r(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(n(e))}),t):e},t.exports=n}).call(this)},{"../object/merge.js":174,"../object/validate.js":175}],211:[function(e,n,t){(function(){var t;t=e("../client/ie.js"),n.exports=function(e){return t?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}}).call(this)},{"../client/ie.js":37}],212:[function(e,t,n){(function(){t.exports=function(e,t){var n;(n=new Image).src=e,n.crossOrigin="Anonymous",n.onload=function(){var e;(e=document.createElement("canvas")).width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}}).call(this)},{}],213:[function(e,t,n){(function(){var x,b;x=e("../object/validate.js"),b=function(e,t,n,r,a,i){var o,s,l,u,c,d,f,h,p,g,v,m,y;if(void 0===e)return[];if(r&&void 0===a&&(a=r.id.value),i=!0===i&&void 0===i,e instanceof Array||(e=[e]),g=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),g.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),g.push(n)),e},[]);if(y=[],o=function(e){var t;if(null!=e&&(t=JSON.stringify(e),g.indexOf(t)<0))return y.push(e),g.push(t)},"function"==typeof n&&r)for(l=0,d=e.length;l<d;l++)for(s=e[l],u=0,f=(m=b(n(r,s,t,a))).length;u<f;u++)o(m[u]);else if("function"==typeof t)for(c=0,h=e.length;c<h;c++)o(m=t(s=e[c]));else for(v=0,p=e.length;v<p;v++)s=e[v],x(s)&&o(m=s[t]);return i?y.sort(function(e,t){return e-t}):y},t.exports=b}).call(this)},{"../object/validate.js":175}],214:[function(e,t,n){(function(){t.exports=function(r){var a,e,t,n,i;for(r.container.value.style("position",function(){var e;return e=d3.select(this).style("position"),0<=["absolute","fixed"].indexOf(e)?e:"relative"}),r.container.changed&&r.container.value.html(""),e=0,t=(n=["width","height"]).length;e<t;e++)r[i=n[e]].value||((a=function(e){var t,n;return void 0===e.tagName||0<=["BODY","HTML"].indexOf(e.tagName)?(n=window["inner"+i.charAt(0).toUpperCase()+i.slice(1)],(t=document!==e&&d3.select(e))&&("width"===i?(n-=parseFloat(t.style("margin-left"),10),n-=parseFloat(t.style("margin-right"),10),n-=parseFloat(t.style("padding-left"),10),n-=parseFloat(t.style("padding-right"),10)):(n-=parseFloat(t.style("margin-top"),10),n-=parseFloat(t.style("margin-bottom"),10),n-=parseFloat(t.style("padding-top"),10),n-=parseFloat(t.style("padding-bottom"),10))),r[i].value=n<=20?r[i].small:n):"number"==typeof(n=parseFloat(d3.select(e).style(i),10))&&0<n?r[i].value=n:"BODY"!==e.tagName?a(e.parentNode):void 0})(r.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));r.container.value.style("width",r.width.value+"px").style("height",r.height.value+"px")}}).call(this)},{}],215:[function(e,t,n){var d=e("../../core/data/format.js"),f=e("../../core/data/color.js"),h=e("../../core/data/keys.js"),p=e("../../core/data/load.js"),g=e("./ui/drawer.js"),v=e("./ui/legend.js"),m=e("./ui/timeline.js"),y=e("./errorCheck.js"),x=e("../../core/fetch/data.js"),b=e("./finish.js"),j=e("./focus/tooltip.js"),w=e("./ui/history.js"),_=e("../../core/parse/edges.js"),k=e("../../core/parse/nodes.js"),z=e("../../core/console/print.js"),M=e("../../tooltip/remove.js"),A=e("./types/run.js"),E=e("./shapes/draw.js"),S=e("../../string/format.js"),O=e("./svg/enter.js"),C=e("./svg/update.js"),N=e("./ui/titles.js"),F=e("../../object/validate.js");t.exports=function(e){var t=[],n=e.type.value,r=e.format.locale.value,a=r.message.ui,i=r.message.draw;if(["data","attrs","coords","nodes","edges"].forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({function:function(e,t){p(e,n,t)},message:r.message.loading,wait:!0})}),e.draw.update){var o=r.visualization[n]||n,s=e.types[n].setup||!1,l=e.types[n].requirements||[],u=S(r.message.initializing,o),c=r.message.data;l instanceof Array||(l=[l]),o=o.toLowerCase(),e.error.value||"function"!=typeof s||t.push({function:function(e){if(e.dev.value){var t="running "+o+" setup";z.time(t)}s(e),e.dev.value&&z.timeEnd(t)},message:u}),e.container.changed&&t.push({function:O,message:u}),n in e.g.apps||t.push({function:function(e){if(e.dev.value){var t="creating "+o+" group";z.time(t)}e.g.apps[n]=e.g.app.append("g").attr("id",n).attr("opacity",0),e.dev.value&&z.timeEnd(t)},message:u}),e.data.changed&&t.push({function:function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,h(e,"data")},message:c}),e.attrs.changed&&t.push({function:function(e){h(e,"attrs")},message:c}),t.push({function:function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.id.solo.changed||!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";z.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;F(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&z.timeEnd(t)}},message:c}),(0<=l.indexOf("edges")&&e.edges.value&&(!e.edges.linked||e.edges.changed)||0<=l.indexOf("nodes")&&!e.nodes.value&&e.edges.value)&&t.push({function:_,message:c}),0<=l.indexOf("nodes")&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({function:k,message:c}),(e.data.changed||e.time.changed||e.time.format.changed||e.type.changed||e.id.changed||e.x.scale.changed&&0<=[e.x.scale.value,e.x.scale.previous].indexOf("discrete")||e.y.scale.changed&&0<=[e.y.scale.value,e.y.scale.previous].indexOf("discrete"))&&t.push({function:d,message:c}),e.error.value||t.push({function:function(e){var t=e.time.fixed.value?["all"]:null;if(e.dev.value){var n=t?"fetching pool data":"fetching data";z.time(n)}e.data.pool=x(e,t),e.dev.value&&z.timeEnd(n),t?(e.dev.value&&z.time("fetching data for current year"),e.data.viz=x(e),e.dev.value&&z.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:c}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&!1===e.color.valueScale},function:f,message:c})}return t.push({function:function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;z.time(t)}e.type.previous&&n!==e.type.previous&&M(e.type.previous),M(n),e.dev.value&&z.timeEnd(t)},message:a}),e.error.value||t.push({function:y,message:a}),t.push({function:function(e){if(e.margin.process(),N(e),!e.error.value)if(e.draw.update)g(e),m(e),v(e);else{e.dev.value&&z.time("calculating margins");var t=e.container.value.select("div#d3po_drawer").node().offsetHeight||e.container.value.select("div#d3po_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&z.timeEnd("calculating margins")}w(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:a}),e.error.value||t.push({function:j,message:a}),t.push({function:C,message:i}),!e.error.value&&e.draw.update&&t.push({function:[A,E],message:i}),t.push({function:b,message:i}),t}},{"../../core/console/print.js":52,"../../core/data/color.js":54,"../../core/data/format.js":56,"../../core/data/keys.js":58,"../../core/data/load.js":59,"../../core/fetch/data.js":64,"../../core/parse/edges.js":97,"../../core/parse/nodes.js":100,"../../object/validate.js":175,"../../string/format.js":176,"../../tooltip/remove.js":206,"./errorCheck.js":216,"./finish.js":217,"./focus/tooltip.js":218,"./shapes/draw.js":225,"./svg/enter.js":236,"./svg/update.js":237,"./types/run.js":240,"./ui/drawer.js":241,"./ui/history.js":242,"./ui/legend.js":243,"./ui/timeline.js":245,"./ui/titles.js":246}],216:[function(e,t,n){var f=e("../../core/fetch/text.js"),h=e("../../core/console/print.js"),p=e("../../core/methods/rejected.js"),g=e("../../string/format.js"),v=e("../../string/list.js");t.exports=function(n){n.dev.value&&h.time("checking for errors");var e=["id"],t=n.types[n.type.value].requirements;t&&(t instanceof Array?e=e.concat(n.types[n.type.value].requirements):e.push(t));var r=[];if(e.forEach(function(e){if("string"==typeof e)n[e].value&&n[e].value.length||r.push('"'+e+'"');else if("function"==typeof e){var t=e(n);!t.status&&t.text&&r.push('"'+t.text+'"')}}),1<r.length){var a=n.format.locale.value.error.methods,i=n.format.locale.value.visualization[n.type.value]||n.type.value,o=n.format.locale.value.ui.and;r=v(r,o),n.error.internal=g(a,i,r)}else if(1===r.length){a=n.format.locale.value.error.method,i=n.format.locale.value.visualization[n.type.value]||n.type.value;n.error.internal=g(a,i,r[0])}if(!n.error.internal&&0<=e.indexOf("edges")&&0<=e.indexOf("focus")&&0==n.edges.connections(n.focus.value[0],n.id.value).length){var s=f(n,n.focus.value[0],n.depth.value);a=n.format.locale.value.error.connections;n.error.internal=g(a,'"'+s+'"')}e=["d3"];n.types[n.type.value].libs&&(e=e.concat(n.types[n.type.value].libs));r=[];if(e.forEach(function(e){window[e]||r.push('"'+e+'"')}),1<r.length){a=n.format.locale.value.error.libs,i=n.format.locale.value.visualization[n.type.value],o=n.format.locale.value.ui.and;r=v(r,o),n.error.internal=g(a,i,r)}else if(1===r.length){a=n.format.locale.value.error.lib,i=n.format.locale.value.visualization[n.type.value];n.error.internal=g(a,i,r[0])}var l=n.shape.accepted(n);l instanceof Array||(l=[l]);var u=n.shape.value;if(u&&!p(n,l,u,"shape")||n.self.shape(l[0]),"modes"in n.types[n.type.value]){var c=n.types[n.type.value].modes;c instanceof Array||(c=[c]);var d=n.type.mode.value;d&&!p(n,c,d,"mode")||n.self.type({mode:c[0]})}n.dev.value&&h.timeEnd("checking for errors")}},{"../../core/console/print.js":52,"../../core/fetch/text.js":66,"../../core/methods/rejected.js":93,"../../string/format.js":176,"../../string/list.js":177}],217:[function(e,t,n){var d=e("./shapes/edges.js"),f=e("./shapes/paths.js"),h=e("./ui/message.js"),p=e("./focus/viz.js"),g=e("../../core/methods/reset.js"),v=e("../../core/console/print.js"),m=e("./shapes/labels.js"),y=e("../../string/title.js"),x=e("./zoom/bounds.js"),b=e("./zoom/labels.js"),j=e("./zoom/mouse.js");t.exports=function(e){if(e.draw.first?setTimeout(function(){p(e)},e.draw.timing):p(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&v.time("calculating zoom"),e.draw.first||e.zoom.reset?x(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&x(e,t),e.dev.value&&v.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,x(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,r=e.zoom.size?e.zoom.size.height:e.height.viz,a=e.zoom.bounds?e.zoom.bounds[0][0]:0,i=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",r).attr("x",a).attr("y",i),e.error.value||(e.draw.update?(e.edges.path?f(e):d(e),m(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){m(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){b(e)},e.draw.timing)),!e.error.value){var o=e.types[e.type.value].requirements||[];o instanceof Array||(o=[o]);var s=0<=o.indexOf("data");e.error.internal||e.data.viz&&e.returned.nodes.length||!s||(e.error.internal=e.format.locale.value.error.data)}var l=e.type.previous;if(l&&e.type.value!=l&&e.g.apps[l]&&(e.dev.value&&v.time('hiding "'+l+'"'),e.draw.timing?e.g.apps[l].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[l].attr("opacity",0),e.dev.value&&v.timeEnd()),!e.error.value){var u=s&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,c=e.draw.timing;e.group.transition().duration(c).attr("opacity",u),e.g.data.transition().duration(c).attr("opacity",u),e.g.edges.transition().duration(c).attr("opacity",u)}e.error.value?h(e,e.error.value):e.error.internal?(e.error.internal=y(e.error.internal),v.warning(e.error.internal),h(e,e.error.internal),e.error.internal=null):h(e),setTimeout(function(){g(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",j)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.js":52,"../../core/methods/reset.js":95,"../../string/title.js":179,"./focus/viz.js":219,"./shapes/edges.js":226,"./shapes/labels.js":228,"./shapes/paths.js":230,"./ui/message.js":244,"./zoom/bounds.js":247,"./zoom/labels.js":249,"./zoom/mouse.js":250}],218:[function(e,t,n){(function(){var a,i,o,s;a=e("../tooltip/create.js"),i=e("../../../core/fetch/value.js"),o=e("../../../core/console/print.js"),s=e("../../../tooltip/remove.js"),t.exports=function(t){var e,n,r;n=t.focus,!t.error.internal&&1===n.value.length&&n.value.length&&!t.small&&n.tooltip.value?(t.dev.value&&o.time("drawing focus tooltip"),1<=(e=t.data.pool.filter(function(e){return i(t,e,t.id.value)===n.value[0]})).length?e=e[0]:(e={})[t.id.value]=n.value[0],r=t.labels.padding,a({anchor:"top left",arrow:!1,data:e,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:t.height.viz-2*r,mouseevents:!0,offset:0,vars:t,width:t.tooltip.large,x:t.width.value-t.margin.right-r,y:t.margin.top+r}),t.width.viz-=t.tooltip.large+2*r,t.dev.value&&o.timeEnd("drawing focus tooltip")):s("visualization_focus")}}).call(this)},{"../../../core/console/print.js":52,"../../../core/fetch/value.js":67,"../../../tooltip/remove.js":206,"../tooltip/create.js":238}],219:[function(t,n,r){var h=t("../../../client/pointer.js"),p=t("../../../client/ie.js"),g=t("../../../core/fetch/value.js"),v=t("../../../core/console/print.js"),m=t("../../../util/uniques.js");n.exports=function(a){if(a.g.edge_focus.selectAll("g").remove(),a.g.data_focus.selectAll("g").remove(),a.focus.value.length&&a.types[a.type.value].zoom&&a.zoom.value){a.dev.value&&v.time("drawing focus elements");var t=a.g.edges.selectAll("g");if(0<t.size()){t.each(function(e){var t=e[a.edges.source][a.id.value],n=e[a.edges.target][a.id.value];if(t==a.focus.value[0]||n==a.focus.value[0]){var r=a.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(r).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=a.edges.arrows.value;a.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",a.color.focus).style("stroke-width",function(){return p&&a.types[a.type.value].zoom?0:a.edges.size.value?d3.select(this).style("stroke-width"):2*a.data.stroke.width}).attr("marker-start",function(e){var t=a.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"source"==t&&r?"url(#d3po_edge_marker_focus"+n+")":"none"}).attr("marker-end",function(e){var t=a.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"target"==t&&r?"url(#d3po_edge_marker_focus"+n+")":"none"}),a.g.edge_focus.selectAll("text").style("fill",a.color.focus)}var i=m(a.edges.connections(a.focus.value[0],a.id.value,!0),a.id.value,g,a);i.push(a.focus.value[0]);var o=[],s=[],l=[0],u=[0];a.g.data.selectAll("g").each(function(t){if(0<=i.indexOf(t[a.id.value])){var n=a.g.data_focus.node().appendChild(this.cloneNode(!0));n=d3.select(n).datum(t).attr("opacity",1);for(e in"coordinates"==a.shape.value?a.zoom.viewport=a.path.bounds(a.zoom.coords[t.d3po.id]):"d3po"in t&&("x"in t.d3po&&o.push(t.d3po.x),"y"in t.d3po&&s.push(t.d3po.y),"r"in t.d3po?(l.push(t.d3po.r),u.push(t.d3po.r)):("width"in t.d3po&&l.push(t.d3po.width/2),"height"in t.d3po&&u.push(t.d3po.height/2))),h){var r=d3.select(this).on(h[e]);r&&n.on(h[e],r)}}});if(o.length&&s.length){var n=d3.extent(o),c=d3.extent(s),d=d3.max(l),f=d3.max(u);a.zoom.viewport=[[n[0]-d,c[0]-f],[n[1]+d,c[1]+f]]}a.g.data_focus.selectAll("path").style("stroke-width",p&&a.types[a.type.value].zoom?0:2*a.data.stroke.width),a.dev.value&&v.timeEnd("drawing focus elements")}else a.zoom.viewport=!1}},{"../../../client/ie.js":37,"../../../client/pointer.js":38,"../../../core/console/print.js":52,"../../../core/fetch/value.js":67,"../../../util/uniques.js":213}],220:[function(e,t,n){(function(){var l,u,c,d;d=e("./style.js"),u=e("../../../geom/largestrectangle.js"),c=e("../../../geom/path2poly.js"),l={start:{},end:{}},t.exports=function(r,e,t,n){var a,i,o,s;a=d3.svg.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return e.d3po.startAngle}).endAngle(function(e){return e.d3po.endAngle}),o=function(e){var t,n;return r.labels.value&&(e.d3po.label?e.d3po_label=e.d3po.label:.1<=e.d3po.endAngle-e.d3po.startAngle?(t=c(a(e)),(n=u(t,{angle:0}))[0]?e.d3po_label={w:n[0].width,h:n[0].height,x:n[0].cx,y:n[0].cy}:delete e.d3po_label):delete e.d3po_label),[e]},r.draw.timing?(s=d3.svg.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return void 0===l.start[e.d3po.id]&&(l.start[e.d3po.id]=0),isNaN(l.start[e.d3po.id])&&(l.start[e.d3po.id]=e.d3po.startAngle),l.start[e.d3po.id]}).endAngle(function(e){return void 0===l.end[e.d3po.id]&&(l.end[e.d3po.id]=0),isNaN(l.end[e.d3po.id])&&(l.end[e.d3po.id]=e.d3po.endAngle),l.end[e.d3po.id]}),i=function(e,i){return e.attrTween("d",function(t){var e,n,r,a;return void 0===i?(a=t.d3po.startAngle,e=t.d3po.endAngle):0===i&&(e=a=0),r=d3.interpolate(l.start[t.d3po.id],a),n=d3.interpolate(l.end[t.d3po.id],e),function(e){return l.start[t.d3po.id]=r(e),l.end[t.d3po.id]=n(e),s(t)}})},t.append("path").attr("class","d3po_data").call(d,r).attr("d",s),e.selectAll("path.d3po_data").data(o).transition().duration(r.draw.timing).call(d,r).call(i),n.selectAll("path.d3po_data").transition().duration(r.draw.timing).call(i,0)):(t.append("path").attr("class","d3po_data"),e.selectAll("path.d3po_data").data(o).call(d,r).attr("d",a))}}).call(this)},{"../../../geom/largestrectangle.js":162,"../../../geom/path2poly.js":164,"./style.js":234}],221:[function(e,t,n){var c=e("../../../core/fetch/text.js"),d=e("../../../font/sizes.js"),f=e("../../../geom/largestrectangle.js"),i=e("./style.js");t.exports=function(l,e,t,n){var r=d3.svg.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y}).interpolate(l.shape.interpolate.value),a=d3.svg.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y0}).interpolate(l.shape.interpolate.value);t.append("path").attr("class","d3po_data").attr("d",function(e){return a(e.values)}).call(i,l);var u={"font-weight":l.labels.font.weight,"font-family":l.labels.font.family.value};e.selectAll("path.d3po_data").data(function(e){if(l.labels.value&&1<e.values.length){var t=!1;if(d3.max(e.values,function(e){return e.d3po.y0-e.d3po.y})>l.labels.font.size){var n=[],r=[],a=c(l,e);e.values.forEach(function(e){n.push([e.d3po.x,e.d3po.y]),r.push([e.d3po.x,e.d3po.y0])}),n=n.concat(r.reverse());var i=null;if(a.length){var o=d(a[0],u);i=o[0].width/o[0].height}t=f(n,{angle:d3.range(-70,71,1),aspectRatio:i,tolerance:0})}if(t&&t[0]){var s={w:~~t[0].width,h:~~t[0].height,x:~~t[0].cx,y:~~t[0].cy,angle:-1*t[0].angle,padding:2,names:a};0!==t[0].angle?s.translate={x:s.x,y:s.y}:s.translate=!1,10<=s.w&&10<=s.h&&(e.d3po_label=s)}}return[e]}),l.draw.timing?e.selectAll("path.d3po_data").transition().duration(l.draw.timing).attr("d",function(e){return r(e.values)}).call(i,l):e.selectAll("path.d3po_data").attr("d",function(e){return r(e.values)}).call(i,l)}},{"../../../core/fetch/text.js":66,"../../../font/sizes.js":104,"../../../geom/largestrectangle.js":162,"./style.js":234}],222:[function(e,t,n){e("../../../core/fetch/text.js"),e("../../../geom/largestrectangle.js");var i=e("./style.js");t.exports=function(e,t,n,r){function a(e){e.attr("transform",function(e){var t=Math.min(e.d3po.width,e.d3po.height);return"scale("+Math.floor(t/16)+")"})}n.append("path").attr("class","d3po_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(function(e){e.attr("transform","scale(1)")}).call(i,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(i,e):t.selectAll("path.d3po_data").call(a).call(i,e)}},{"../../../core/fetch/text.js":66,"../../../geom/largestrectangle.js":162,"./style.js":234}],223:[function(e,t,n){(function(){var s,l,u;e("../../../core/fetch/value.js"),s=e("../../../core/fetch/color.js"),l=e("../../../color/lighter.js"),u=e("./segments.js"),t.exports=function(e,t,n){var r,a,i,o;return a=e.d3po.shape||t.shape.value,"line"===t.shape.value&&"circle"!==a?"none":"area"===t.shape.value||"active"===a||"line"===t.shape.value?s(t,e):"temp"===a?n?s(t,e):"url(#d3po_hatch_"+e.d3po.id+")":e.d3po.static?l(s(t,e),.75):(r=u(t,e,"active"),i=u(t,e,"temp"),o=u(t,e,"total"),!t.active.value&&!t.temp.value||!0===r||r&&o&&o<=r&&!i||r&&!o?s(t,e):t.active.spotlight.value?t.color.missing:l(s(t,e),.75))}}).call(this)},{"../../../color/lighter.js":45,"../../../core/fetch/color.js":63,"../../../core/fetch/value.js":67,"./segments.js":233}],224:[function(e,t,n){(function(){var _,k,z,M,A,E,S,i;_=e("../../../util/copy.js"),k=e("../../../network/distance.js"),z=e("../../../core/fetch/text.js"),M=e("../../../font/sizes.js"),E=e("../../../geom/largestrectangle.js"),S=e("../../../geom/path2poly.js"),i=e("./style.js"),A={},t.exports=function(w,e,t,n){var r,a;return(r=d3.geo[w.coords.projection.value]()).center&&r.center(w.coords.center),w.zoom.scale||(w.zoom.scale=1),w.zoom.area=1/w.zoom.scale/w.zoom.scale,w.path=d3.geo.path().projection(r),w.draw.timing?e.selectAll("path.d3po_data").attr("d",w.path).transition().duration(w.draw.timing).call(i,w):e.selectAll("path.d3po_data").attr("d",w.path).call(i,w),t.append("path").attr("id",function(e){return e.id}).attr("class","d3po_data").attr("d",w.path).call(i,w),a=w.old_height!==w.height.viz||w.height.changed||w.old_width!==w.width.viz||w.width.changed,w.old_height=w.height.viz,w.old_width=w.width.viz,w.coords.changed||a||w.coords.mute.changed||w.coords.solo.changed||w.type.changed||w.text.changed||w.coords.projection.changed||w.labels.changed?(w.zoom.bounds=null,w.zoom.reset=!0,w.zoom.coords={},e.each(function(e){var r,a,t,n,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j;if(w.coords.simplify.value&&1<e.geometry.coordinates.length){for(u=[],a=[],r=0,f=_(e),y=_(e),e.geometry.coordinates=e.geometry.coordinates.filter(function(e,t){var n;return y.geometry.coordinates=[e],0<(n=w.path.area(y))&&(a.push(n),r<n&&(f.geometry.coordinates=[e],r=n),!0)}),i=w.path.centroid(f),c=d=0,h=(x=e.geometry.coordinates).length;d<h;c=++d)n=x[c],y.geometry.coordinates=[n],u.push(k(w.path.centroid(y),i));l=u.reduce(function(e,t,n){return t&&e.push(a[n]/t),e},[]),s=d3.quantile(l,w.coords.threshold.value),y.geometry.coordinates=e.geometry.coordinates.filter(function(e,t){var n,r;return r=u[t],n=a[t],0===r||s<=n/r}),(o=f.geometry.coordinates[0])&&"MultiPolygon"===f.geometry.type&&(o=o[0],f.geometry.coordinates[0]=o,f.geometry.type="Polygon")}else o=(f=y=e).geometry.coordinates[0];return w.zoom.coords[e.d3po.id]=y,delete e.d3po_label,w.labels.value&&(p=z(w,e),o&&p.length&&(g=S(w.path(f)),j={"font-weight":w.labels.font.weight,"font-family":w.labels.font.family.value},v=null,1===p[0].split(" ").length&&(v=(b=M(p[0],j)[0]).width/b.height),(m=E(g,{angle:0,aspectRatio:v}))&&(m=m[0],e.d3po_label={anchor:"middle",valign:"center",h:m.height,w:m.width,x:m.cx,y:m.cy,names:p}))),A[e.id]=e.d3po_label,t=w.path.bounds(y),w.zoom.bounds?(w.zoom.bounds[0][0]>t[0][0]&&(w.zoom.bounds[0][0]=t[0][0]),w.zoom.bounds[0][1]>t[0][1]&&(w.zoom.bounds[0][1]=t[0][1]),w.zoom.bounds[1][0]<t[1][0]&&(w.zoom.bounds[1][0]=t[1][0]),w.zoom.bounds[1][1]<t[1][1]?w.zoom.bounds[1][1]=t[1][1]:void 0):w.zoom.bounds=t})):w.focus.value.length?void 0:(w.zoom.viewport=!1,e.each(function(e){return e.d3po_label=A[e.id]}))}}).call(this)},{"../../../core/fetch/text.js":66,"../../../font/sizes.js":104,"../../../geom/largestrectangle.js":162,"../../../geom/path2poly.js":164,"../../../network/distance.js":168,"../../../util/copy.js":210,"./style.js":234}],225:[function(e,t,n){var p=e("../../../util/child.js"),y=e("../../../util/closest.js"),x=e("../tooltip/create.js"),b=e("../../../client/pointer.js"),j=e("../../../core/fetch/value.js"),w=e("../../../core/fetch/color.js"),_=e("../../../core/fetch/text.js"),k=e("../../../color/legible.js"),z=e("../../../core/console/print.js"),M=e("../../../tooltip/remove.js"),A=(e("./segments.js"),e("./fill.js")),E=e("../../../string/strip.js"),S=e("../../../client/touch.js"),O=e("../zoom/propagation.js"),C=e("../../../util/uniques.js"),N=e("../../../object/validate.js"),F=e("../zoom/direction.js"),T={arc:e("./arc.js"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.js"),line:e("./line.js"),radial:e("./radial.js"),rect:e("./rect.js"),whisker:e("./whisker.js")};t.exports=function(g){var e=g.returned.nodes||[],t=g.returned.edges||[];g.draw.timing=e.length<g.data.large&&t.length<g.edges.large?g.timing.transitions:0;var n={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",donut:"donut",line:"line",radial:"radial",rect:"rect",square:"rect",whisker:"whisker"},r={};function a(n){if(!n.d3po.id){n.d3po.id="";for(var e=0;e<=g.depth.value;e++)n.d3po.id+=j(g,n,g.id.nesting[e])+"_";n.d3po.id+=l,["x","y","x2","y2"].forEach(function(e){if("discrete"==g[e].scale.value){var t=j(g,n,g[e].value);t.constructor===Date&&(t=t.getTime()),n.d3po.id+="_"+t}}),n.d3po.suffix&&(n.d3po.id+="_"+n.d3po.suffix),n.d3po.id=E(n.d3po.id)}return n}function v(e,t){var n=g.types[g.type.value].scale,r=1;n&&(N[n]&&g.shape.value in n?r=n[g.shape.value]:"function"==typeof n?r=n(g,g.shape.value):"number"==typeof n&&(r=n)),r=t?r:1,e.attr("transform",function(e){return["line","area","coordinates"].indexOf(l)<0?"translate("+(e.d3po.x||0)+","+(e.d3po.y||0)+")scale("+r+")":"scale("+r+")"})}function i(e){e.attr("id",function(e){return"d3po_group_"+e.d3po.id}).attr("class",function(e){var t=g.class.value?" "+j(g,e,g.class.value):"";return"d3po_"+l+t})}for(var o in e.forEach(function(e){var t=e.d3po&&e.d3po.shape?e.d3po.shape:g.shape.value;t in n&&(e.d3po&&(e.d3po.shape=t),r[t=n[t]]||(r[t]=[]),r[t].push(e))}),n)if(!(n[o]in r)||0===d3.keys(r).length){var s=g.g.data.selectAll("g.d3po_"+n[o]);g.draw.timing?s.transition().duration(g.draw.timing).attr("opacity",0).remove():s.remove()}for(var l in r){var u=g.g.data.selectAll("g.d3po_"+l).data(r[l],function(e){return e.d3po||(e.d3po={}),"coordinates"===l?(e.d3po.id=e.id,e.id):(e.d3po.id||(e.values?(e.values.forEach(function(e){(e=a(e)).d3po.shape="circle"}),e.d3po.id=e.key):e=a(e)),!!e.d3po&&e.d3po.id)});if(g.draw.timing)var c=u.exit().transition().duration(g.draw.timing).attr("opacity",0).remove();else c=u.exit().remove();g.draw.timing?u.transition().duration(g.draw.timing).call(v).call(i):u.call(v).call(i);var d=g.draw.timing?0:1,f=u.enter().append("g").attr("opacity",d).call(v).call(i);g.draw.timing&&f.transition().duration(g.draw.timing).attr("opacity",1),u.order(),g.dev.value&&z.time('drawing "'+l+'" shapes'),T[l](g,u,f,c,v),g.dev.value&&z.timeEnd('drawing "'+l+'" shapes'),0<=["rect"].indexOf(l)&&g.types[g.type.value].fill&&(g.dev.value&&z.time('filling "'+l+'" shapes'),A(g,u,f,c,v),g.dev.value&&z.timeEnd('filling "'+l+'" shapes'))}function m(i){if(i&&0<g.g.edges.selectAll("g").size()){g.g.edge_hover.selectAll("*").remove(),g.g.edges.selectAll("g").each(function(e){var t=i[g.id.value],n=e[g.edges.source][g.id.value],r=e[g.edges.target][g.id.value];if(n==t||n=="left_"+t||n=="right_"+t||r==t||r=="left_"+t||r=="right_"+t){var a=g.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(a).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=g.edges.arrows.value;g.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",g.color.primary).style("stroke-width",function(e){return g.edges.path&&e.dy?Math.max(1,e.dy):g.edges.size.value?d3.select(this).style("stroke-width"):2*g.data.stroke.width}).attr("marker-start",function(e){var t=g.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"source"==t&&r?"url(#d3po_edge_marker_highlight"+n+")":"none"}).attr("marker-end",function(e){var t=g.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"target"==t&&r?"url(#d3po_edge_marker_highlight"+n+")":"none"}),g.g.edge_hover.selectAll("text").style("fill",g.color.primary),g.draw.timing?(g.g.edge_hover.transition().duration(g.timing.mouseevents).attr("opacity",1),g.g.edges.transition().duration(g.timing.mouseevents).attr("opacity",.5)):g.g.edge_hover.attr("opacity",1)}else g.draw.timing?(g.g.edge_hover.transition().duration(g.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),g.g.edges.transition().duration(g.timing.mouseevents).attr("opacity",1)):g.g.edge_hover.selectAll("*").remove()}if(m(),g.tooltip.value)g.g.data.selectAll("g").on(b.over,function(e){if(S&&O(g,d3.event),d3.event.buttons||!g.mouse.value||!g.mouse.over.value||g.draw.frozen||e.d3po&&e.d3po.static)M(g.type.value);else{var t="function"!=typeof g.mouse.over.value;if("function"==typeof g.mouse.over.value&&(t=g.mouse.over.value(e,g.self)),t){var n=F(e.d3po_data||e,g),r="function"==typeof g.mouse.viz||"function"==typeof g.mouse.viz[b.click]||g.zoom.value&&(g.types[g.type.value].zoom||e.d3po.threshold&&e.d3po.merged||1===n||-1===n&&g.history.states.length&&!g.tooltip.value.long);if(d3.select(this).style("cursor",r?"pointer":"auto").transition().duration(g.timing.mouseevents).call(v,!0),d3.select(this).selectAll(".d3po_data").transition().duration(g.timing.mouseevents).attr("opacity",1),g.covered=!1,e.values&&g.axes.discrete){var a="x"===g.axes.discrete?0:1,i=d3.mouse(g.container.value.node())[a],o=C(e.values,function(e){return e.d3po[g.axes.discrete]}),s=y(o,i);e.d3po_data=e.values[o.indexOf(s)],e.d3po=e.values[o.indexOf(s)].d3po}var l=e.d3po_data?e.d3po_data:e;x({vars:g,data:l}),"function"==typeof g.mouse.viz?g.mouse.viz(e.d3po_data||e,g):g.mouse.viz[b.over]&&g.mouse.viz[b.over](e.d3po_data||e,g),m(e)}}}).on(b.move,function(e){if(S&&O(g,d3.event),d3.event.buttons||!g.mouse.value||!g.mouse.move.value||g.draw.frozen||e.d3po&&e.d3po.static)M(g.type.value);else{var t="function"!=typeof g.mouse.move.value;if("function"==typeof g.mouse.move.value&&(t=g.mouse.move.value(e,g.self)),t){var n=F(e.d3po_data||e,g),r="function"==typeof g.mouse.viz||"function"==typeof g.mouse.viz[b.click]||g.zoom.value&&(g.types[g.type.value].zoom||e.d3po.threshold&&e.d3po.merged||1===n||-1===n&&g.history.states.length&&!g.tooltip.value.long);d3.select(this).style("cursor",r?"pointer":"auto");g.types[g.type.value].tooltip;if(e.values&&g.axes.discrete){var a="x"===g.axes.discrete?0:1,i=d3.mouse(g.container.value.node())[a],o=C(e.values,function(e){return e.d3po[g.axes.discrete]}),s=y(o,i);e.d3po_data=e.values[o.indexOf(s)],e.d3po=e.values[o.indexOf(s)].d3po}var l=e.d3po_data?e.d3po_data:e;x({vars:g,data:l}),"function"==typeof g.mouse.viz?g.mouse.viz(e.d3po_data||e,g):g.mouse.viz[b.move]&&g.mouse.viz[b.move](e.d3po_data||e,g)}}}).on(b.out,function(e){if(S&&O(g,d3.event),!d3.event.buttons&&g.mouse.value&&g.mouse.out.value){var t="function"!=typeof g.mouse.out.value;if("function"==typeof g.mouse.out.value&&(t=g.mouse.out.value(e,g.self)),t)p(this,d3.event.toElement)||g.draw.frozen||e.d3po&&e.d3po.static||(d3.select(this).transition().duration(g.timing.mouseevents).call(v),d3.select(this).selectAll(".d3po_data").transition().duration(g.timing.mouseevents).attr("opacity",g.data.opacity),g.covered||M(g.type.value),"function"==typeof g.mouse.viz?g.mouse.viz(e.d3po_data||e,g):g.mouse.viz[b.out]&&g.mouse.viz[b.out](e.d3po_data||e,g),m())}else M(g.type.value)});else{function h(){O(g,d3.event)}g.g.data.selectAll("g").on(b.over,h).on(b.move,h).on(b.out,h)}d3.select(window).on("scroll.d3po",function(){M(g.type.value)}),g.g.data.selectAll("g").on(b.click,function(e){if((!g.mouse.viz||!1!==g.mouse.viz.click)&&g.mouse.value&&g.mouse.click.value&&!d3.event.defaultPrevented&&!g.draw.frozen&&(!e.d3po||!e.d3po.static)){var t="function"!=typeof g.mouse.click.value;if("function"==typeof g.mouse.click.value&&(t=g.mouse.click.value(e,g.self)),t){if(e.values&&g.axes.discrete){var n="x"===g.axes.discrete?0:1,r=d3.mouse(g.container.value.node())[n],a=C(e.values,function(e){return e.d3po[g.axes.discrete]}),i=y(a,r);e.d3po_data=e.values[a.indexOf(i)],e.d3po=e.values[a.indexOf(i)].d3po}"function"==typeof g.mouse.viz?g.mouse.viz(e.d3po_data||e,g):g.mouse.viz[b.out]?g.mouse.viz[b.out](e.d3po_data||e,g):g.mouse.viz[b.click]&&g.mouse.viz[b.click](e.d3po_data||e,g);var o=F(e.d3po_data||e,g),s=g.id.solo.value,l=_(g,e)[0],u=k(w(g,e)),c=g.title.sub.value||!1,d=g.title.sub.font.color,f=g.title.total.font.color;if(e.d3po.threshold&&e.d3po.merged&&g.zoom.value)g.history.states.push(function(){g.self.id({solo:s}).title({sub:{font:{color:d},value:c},total:{font:{color:f}}}).draw()}),g.self.id({solo:s.concat(C(e.d3po.merged,g.id.value,j,g))}).title({sub:{font:{color:u},value:l},total:{font:{color:u}}}).draw();else if(1===o&&g.zoom.value){var h=j(g,e.d3po_data||e,g.id.value);g.history.states.push(function(){g.self.depth(g.depth.value-1).id({solo:s}).title({sub:{font:{color:d},value:c},total:{font:{color:f}}}).draw()}),g.self.depth(g.depth.value+1).id({solo:s.concat(h)}).title({sub:{font:{color:u},value:l},total:{font:{color:u}}}).draw()}else if(-1===o&&g.zoom.value&&g.history.states.length&&!g.tooltip.value.long)g.history.back();else if(g.types[g.type.value].zoom&&g.zoom.value)m(),d3.select(this).transition().duration(g.timing.mouseevents).call(v),d3.select(this).selectAll(".d3po_data").transition().duration(g.timing.mouseevents).attr("opacity",g.data.opacity),M(g.type.value),g.draw.update=!1,e&&e[g.id.value]!=g.focus.value[0]?g.self.focus(e[g.id.value]).draw():g.self.focus(!1).draw();else if(g.types[g.type.value].requirements.indexOf("focus")<0){m();var p=e.d3po_data?e.d3po_data:e;x({vars:g,data:p})}}}})}},{"../../../client/pointer.js":38,"../../../client/touch.js":43,"../../../color/legible.js":44,"../../../core/console/print.js":52,"../../../core/fetch/color.js":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.js":67,"../../../object/validate.js":175,"../../../string/strip.js":178,"../../../tooltip/remove.js":206,"../../../util/child.js":208,"../../../util/closest.js":209,"../../../util/uniques.js":213,"../tooltip/create.js":238,"../zoom/direction.js":248,"../zoom/propagation.js":251,"./arc.js":220,"./area.js":221,"./check.js":222,"./coordinates.js":224,"./fill.js":227,"./line.js":229,"./radial.js":231,"./rect.js":232,"./segments.js":233,"./whisker.js":235}],226:[function(e,t,n){var k=e("../../../util/buckets.js"),q=e("../../../geom/offset.js");t.exports=function(O){var e=O.returned.edges||[],C=O.zoom.behavior.scaleExtent()[0];if("string"==typeof O.edges.size.value){var t=d3.extent(e,function(e){return e[O.edges.size.value]}),n=d3.min(O.returned.nodes||[],function(e){return e.d3po.r})*(2*O.edges.size.scale);O.edges.scale=d3.scale.sqrt().domain(t).range([O.edges.size.min,n*C])}else{var r="number"==typeof O.edges.size.value?O.edges.size.value:O.edges.size.min;O.edges.scale=function(){return r}}var a=O.edges.opacity.value,i=typeof a;function o(e){e.attr("opacity",0).style("stroke-width",0).style("stroke",O.background.value).style("fill","none")}function s(e){var r=O.edges.arrows.value;e.attr("opacity",function(e){return"number"==i?a:"function"==i?a(e,O):O.edges.opacity.scale.value(e[a])}).style("stroke-width",function(e){return O.edges.scale(e[O.edges.size.value])}).style("stroke",O.edges.color).attr("marker-start",function(e){var t=O.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"source"==t&&r?"url(#d3po_edge_marker_default"+n+")":"none"}).attr("marker-end",function(e){var t=O.edges.arrows.direction.value;if("bucket"in e.d3po)var n="_"+e.d3po.bucket;else n="";return"target"==t&&r?"url(#d3po_edge_marker_default"+n+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function l(e){e.attr("x1",function(e){return e[O.edges.source].d3po.edges[e[O.edges.target][O.id.value]].x}).attr("y1",function(e){return e[O.edges.source].d3po.edges[e[O.edges.target][O.id.value]].y}).attr("x2",function(e){return e[O.edges.target].d3po.edges[e[O.edges.source][O.id.value]].x}).attr("y2",function(e){return e[O.edges.target].d3po.edges[e[O.edges.source][O.id.value]].y})}O.edges.opacity.changed&&"string"==i&&O.edges.opacity.scale.value.domain(d3.extent(e,function(e){return e[a]})).range([O.edges.opacity.min.value,1]);var u=d3.svg.line().interpolate(O.edges.interpolate.value);function c(e){e.attr("d",function(e){return u(e.d3po.spline)})}function d(e){if(delete e.d3po_label,O.g.edges.selectAll("line, path").size()<O.edges.large&&O.edges.label&&e[O.edges.label]){if("spline"in e.d3po)var t=this.getTotalLength(),n=this.getPointAtLength(t/2),r=this.getPointAtLength(t/2-.1*t),a=this.getPointAtLength(t/2+.1*t),i=Math.atan2(a.y-r.y,a.x-r.x)*(180/Math.PI),o=(this.parentNode.getBBox(),.8*t),s=n.x,l=n.y;else{this.getBBox();var u=e[O.edges.source],c=e[O.edges.target],d=u.d3po.edges[c[O.id.value]].x,f=u.d3po.edges[c[O.id.value]].y,h=c.d3po.edges[u[O.id.value]].x,p=c.d3po.edges[u[O.id.value]].y,g=h-d,v=p-f;n={x:h-g/2,y:p-v/2},i=Math.atan2(v,g)*(180/Math.PI),o=t=Math.sqrt(g*g+v*v),s=n.x,l=n.y}o+=2*O.labels.padding;var m=0;O.edges.arrows.value&&(m="number"==typeof O.edges.arrows.value?O.edges.arrows.value:8,o-=2*(m/=O.zoom.behavior.scaleExtent()[1])),(i<-90||90<i)&&(i-=180),20<o*O.zoom.behavior.scaleExtent()[0]&&(e.d3po_label={x:s,y:l,translate:{x:s,y:l},w:o,h:15+2*O.labels.padding,angle:i,anchor:"middle",valign:"center",color:O.edges.color,resize:!1,names:[O.format.value(e[O.edges.label])],background:1})}}var f=O.edges.arrows.value?"string"==typeof O.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof O.edges.size.value)for(var h=k(O.edges.scale.range(),4),N=[],p=0;p<3;p++)N.push(h[p+1]+(h[1]-h[0])*(p+2)*2);else{var g="number"==typeof O.edges.arrows.value?O.edges.arrows.value:8;N="number"==typeof O.edges.size.value?O.edges.size.value/g:g}function v(e){e.attr("d",function(e){var t=e.split("_");if(2==t.length&&O.edges.scale){t=parseInt(t[1]);var n=N[t]}else n=N;return"target"==O.edges.arrows.direction.value?"M 0,-"+n/2+" L "+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2:"M 0,-"+n/2+" L -"+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2}).attr("fill",function(e){var t=e.split("_")[0];return"default"==t?O.edges.color:"focus"==t?O.color.focus:O.color.primary}).attr("transform","scale("+1/C+")")}var m=O.defs.selectAll(".d3po_edge_marker").data(f,String);O.draw.timing?(m.exit().transition().duration(O.draw.timing).attr("opacity",0).remove(),m.select("path").transition().duration(O.draw.timing).attr("opacity",1).call(v)):(m.exit().remove(),m.select("path").attr("opacity",1).call(v));var y=O.draw.timing?0:1,x=m.enter().append("marker").attr("id",function(e){return"d3po_edge_marker_"+e}).attr("class","d3po_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",y).attr("vector-effect","non-scaling-stroke").call(v);O.draw.timing&&x.transition().duration(O.draw.timing).attr("opacity",1);var F="string"==typeof O.edges.size.value?k(O.edges.scale.domain(),4):null,T=O.edges.arrows.direction.value,b=e.filter(function(e){if(e.d3po||(e.d3po={}),e.d3po.id="edge_"+e[O.edges.source][O.id.value]+"_"+e[O.edges.target][O.id.value],!0===e.d3po.spline)return!1;if(F){var t=e[O.edges.size.value];e.d3po.bucket=t<F[1]?0:t<F[2]?1:2;var n=.85*N[e.d3po.bucket]/C}else{delete e.d3po.bucket;n=.85*N/C}var r=e[O.edges.source],a=e[O.edges.target];if(!r.d3po||!a.d3po)return!1;var i=Math.atan2(r.d3po.y-a.d3po.y,r.d3po.x-a.d3po.x),o=Math.atan2(a.d3po.y-r.d3po.y,a.d3po.x-r.d3po.x),s="source"==T&&O.edges.arrows.value?r.d3po.r+n:r.d3po.r,l="target"==T&&O.edges.arrows.value?a.d3po.r+n:a.d3po.r,u=q(i,s,O.shape.value),c=q(o,l,O.shape.value);return"edges"in r.d3po||(r.d3po.edges={}),r.d3po.edges[a[O.id.value]]={x:r.d3po.x-u.x,y:r.d3po.y-u.y},"edges"in a.d3po||(a.d3po.edges={}),a.d3po.edges[r[O.id.value]]={x:a.d3po.x-c.x,y:a.d3po.y-c.y},!0}),j=O.g.edges.selectAll("g.d3po_edge_line").data(b,function(e){return e.d3po.id}),w=e.filter(function(e){if(e.d3po.spline){if(F){var t=e[O.edges.size.value];e.d3po.bucket=t<F[1]?0:t<F[2]?1:2;var n=.85*N[e.d3po.bucket]/C}else{delete e.d3po.bucket;n=.85*N/C}var r=e[O.edges.source],a=e[O.edges.target],i=r.d3po.edges&&r.d3po.edges[a[O.id.value]]||{},o=a.d3po.edges&&a.d3po.edges[r[O.id.value]]||{},s=O.edges.arrows.value&&"source"==T?n:0,l=O.edges.arrows.value&&"target"==T?n:0,u=r.d3po.x>a.d3po.x?.9:1.1,c=r.d3po.x>a.d3po.x?1.1:.9,d="number"==typeof i.angle?i.angle:Math.atan2(r.d3po.y-a.d3po.y,r.d3po.x-a.d3po.x)*u,f=q(d,r.d3po.r+s,O.shape.value),h="number"==typeof o.angle?o.angle:Math.atan2(a.d3po.y-r.d3po.y,a.d3po.x-r.d3po.x)*c,p=q(h,a.d3po.r+l,O.shape.value),g=[r.d3po.x-f.x,r.d3po.y-f.y],v=!!i.offset&&q(d,i.offset),m=v?[g[0]-v.x,g[1]-v.y]:g,y=[a.d3po.x-p.x,a.d3po.y-p.y],x=!!o.offset&&q(h,o.offset),b=x?[y[0]-x.x,y[1]-x.y]:y,j=b[0]-m[0],w=b[1]-m[1],_="number"==typeof i.radius?i.radius:Math.sqrt(j*j+w*w)/4,k="number"==typeof o.radius?o.radius:Math.sqrt(j*j+w*w)/4,z=q(d,_-r.d3po.r-2*s),M=q(h,k-a.d3po.r-2*l);e.d3po.spline=[g,y];var A=Math.abs(Math.atan2(r.d3po.y-a.d3po.y,r.d3po.x-a.d3po.x)).toFixed(5),E=Math.abs(d).toFixed(5),S=Math.abs(h-Math.PI).toFixed(5);return(E!==S||[E,S].indexOf(A)<0)&&(e.d3po.spline.splice(1,0,[m[0]-z.x,m[1]-z.y],[b[0]-M.x,b[1]-M.y]),v&&e.d3po.spline.splice(1,0,m),x&&e.d3po.spline.splice(e.d3po.spline.length-1,0,b)),!0}return!1}),_=O.g.edges.selectAll("g.d3po_edge_path").data(w,function(e){return e.d3po.id});O.draw.timing?(j.exit().transition().duration(O.draw.timing).attr("opacity",0).remove(),_.exit().transition().duration(O.draw.timing).attr("opacity",0).remove(),j.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(O.draw.timing/2).attr("opacity",0).remove(),_.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(O.draw.timing/2).attr("opacity",0).remove(),j.selectAll("line").data(function(e){return[e]}).transition().duration(O.draw.timing).call(l).call(s).each("end",d),_.selectAll("path").data(function(e){return[e]}).transition().duration(O.draw.timing).call(c).call(s).each("end",d),j.enter().append("g").attr("class","d3po_edge_line").append("line").call(l).call(o).transition().duration(O.draw.timing).call(s).each("end",d),_.enter().append("g").attr("class","d3po_edge_path").append("path").call(c).call(o).transition().duration(O.draw.timing).call(s).each("end",d)):(j.exit().remove(),_.exit().remove(),j.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),_.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),j.selectAll("line").data(function(e){return[e]}).call(l).call(s).call(d),_.selectAll("path").data(function(e){return[e]}).call(c).call(s).call(d),j.enter().append("g").attr("class","d3po_edge_line").append("line").call(l).call(o).call(s).call(d),_.enter().append("g").attr("class","d3po_edge_path").append("path").call(c).call(o).call(s).call(d))}},{"../../../geom/offset.js":163,"../../../util/buckets.js":207}],227:[function(e,t,n){var y=e("../../../util/copy.js"),x=e("../../../core/fetch/color.js"),b=(e("../../../core/fetch/value.js"),e("./segments.js")),j=e("./style.js");t.exports=function(g,e,t,n){function v(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function m(e,n){n=n||0,e.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2-n/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2-n/2}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+n}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+n}).attr("rx",function(e){var t=e.d3po.r?2*e.d3po.r:e.d3po.width;return 0<=["circle"].indexOf(g.shape.value)?(t+n)/2:0}).attr("ry",function(e){var t=e.d3po.r?2*e.d3po.r:e.d3po.height;return 0<=["circle"].indexOf(g.shape.value)?(t+n)/2:0}).attr("shape-rendering",function(e){return 0<=["square"].indexOf(g.shape.value)?g.shape.rendering.value:"auto"})}e.each(function(e){var t=b(g,e,"active"),n=b(g,e,"temp"),r=b(g,e,"total"),a=d3.select(this),i=x(g,e),o=[],s=[];if(r&&g.types[g.type.value].fill){var l;if(n)(l=y(e)).d3po.shape="temp",o.push(l),s=["temp"];if(t&&(t<r||n))(l=y(e)).d3po.shape="active",o.push(l)}function u(e){e.attr("stroke",i).attr("stroke-width",1).attr("shape-rendering",g.shape.rendering.value)}var c=g.defs.selectAll("pattern#d3po_hatch_"+e.d3po.id).data(s);g.draw.timing?(c.selectAll("rect").transition().duration(g.draw.timing).style("fill",i),c.selectAll("line").transition().duration(g.draw.timing).style("stroke",i)):(c.selectAll("rect").style("fill",i),c.selectAll("line").style("stroke",i));var d=c.enter().append("pattern").attr("id","d3po_hatch_"+e.d3po.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");d.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",i).attr("fill-opacity",.25),d.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(u),d.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(u),d.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(u);var f=o.length?[e]:[],h=a.selectAll("#d3po_clip_"+e.d3po.id).data(f);h.enter().insert("clipPath",".d3po_mouse").attr("id","d3po_clip_"+e.d3po.id).append("rect").attr("class","d3po_clipping").call(v),g.draw.timing?(h.selectAll("rect").transition().duration(g.draw.timing).call(m),h.exit().transition().delay(g.draw.timing).remove()):(h.selectAll("rect").call(m),h.exit().remove());var p=a.selectAll("path.d3po_fill").data(o);p.transition().duration(g.draw.timing).call(j,g).call(size),p.enter().insert("path","rect.d3po_mouse").attr("class","d3po_fill").attr("clip-path","url(#d3po_clip_"+e.d3po.id+")").transition().duration(0).call(j,g).call(size,0,void 0,0).transition().duration(g.draw.timing).call(size).call(j,g),p.exit().transition().duration(g.draw.timing).call(size,0,void 0,0).remove()})}},{"../../../core/fetch/color.js":63,"../../../core/fetch/value.js":67,"../../../util/copy.js":210,"./segments.js":233,"./style.js":234}],228:[function(e,t,n){e("../../../util/copy.js");var A=e("../../../core/fetch/text.js"),E=e("../../../core/fetch/value.js"),a=e("../../../color/mix.js"),r=e("../../../core/console/print.js"),S=(e("../../../client/rtl.js"),e("./segments.js")),i=e("./color.js"),O=e("../../../string/list.js"),o=e("../../../color/text.js"),s=e("../../../textwrap/textwrap.js");t.exports=function(w,e){function _(e){e.attr("opacity",function(e){var t=parseFloat(d3.select(this).attr("font-size"),10);return e.visible=2<=t*(w.zoom.scale/M[1]),e.visible?1:0})}function k(e){w.draw.timing?e.transition().duration(w.draw.timing).attr("opacity",0).remove():e.remove()}function z(e){w.labels.valign.value,e.attr("font-weight",w.labels.font.weight).attr("font-family",w.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(e){if(e.color)return e.color;var t=i(e.parent,w),n=o(t),r=e.text?0:1;return a(t,n,.2,r)}).each(function(e){if(e.resize instanceof Array)e.resize[0],e.resize[1];var t=e.resize,n=!0;e.resize instanceof Array||(t=[7,M[1]/M[0]*32],n=e.resize);var r="bottom"===w.labels.valign.value?e.share:0;isNaN(e.percentage)?s().align(e.anchor||w.labels.align.value).container(d3.select(this)).height(e.h*M[1]-e.share).padding(e.padding/2).resize(n).size(t).shape(e.shape||"square").text(e.names).valign(w.labels.valign.value).width(e.w*M[1]).x(e.x-e.w*M[1]/2+e.padding/2).y(e.y-e.h*M[1]/2+e.padding/2+r).draw():s().align(e.anchor||w.labels.align.value).container(d3.select(this)).height(e.h*M[1]-e.share).padding(e.padding/2).resize(n).size(t).shape(e.shape||"square").text(e.names+"\n"+w.format.value(100*e.percentage,{key:"share",vars:w})).valign(w.labels.valign.value).width(e.w*M[1]).x(e.x-e.w*M[1]/2+e.padding/2).y(e.y-e.h*M[1]/2+e.padding/2+r).draw()}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",n=e.angle||0,r=e.translate&&e.translate.x?e.translate.x:0,a=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+n+","+r+","+a+")scale("+1/M[1]+")translate("+(e.x*M[1]-e.x)+","+(e.y*M[1]-e.y)+")"+t})}var M=w.types[w.type.value].zoom?w.zoom.behavior.scaleExtent():[1,1],t=w.g[e].selectAll("g");if("edges"===e||w.labels.value){if(w.dev.value){var n="drawing "+e+" labels";r.time(n)}t.each(function(e){var t=e.d3po&&"label"in e.d3po&&!e.d3po.label,a=e.d3po_label||null,n=e.d3po.text?e.d3po.text:a&&a.names?a.names:w.labels.text.value?E(w,e,w.labels.text.value):A(w,e),r=a&&"group"in a?a.group:d3.select(this),i=w.types[w.type.value].fill;if(n instanceof Array||(n=[n]),a)if(0<=["line","area"].indexOf(w.shape.value))var o=!0;else if(e&&"d3po"in e){var s=S(w,e,"active"),l=S(w,e,"temp"),u=S(w,e,"total");o=!l&&!s||u<=s||!s&&u<=l}if(t||!(a&&a.force||o)&&i)delete e.d3po_label,d3.select(this).selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k),w.g.labels.selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k);else if(a&&(a.resize=!1!==w.labels.resize.value&&(!(a&&"resize"in a)||a.resize),a.padding="number"==typeof a.padding?a.padding:w.labels.padding),a&&20<=a.w*M[1]-a.padding&&10<=a.h*M[1]-a.padding&&n.length){for(var c=w.format.locale.value.ui.and,d=w.format.locale.value.ui.more,f=0;f<n.length;f++)n[f]instanceof Array&&(n[f]=O(n[f],c,3,d));a.names=n,a.share=0,a.percentage=e.d3po.share,a.parent=e;var h=r.selectAll("text#d3po_label_"+e.d3po.id).data([a],function(e){return!!e&&e.names}),p=a.resize?void 0:w.labels.font.size*M[0]+"px";if(w.draw.timing&&1===w.zoom.scale?(h.transition().duration(w.draw.timing/2).call(z).call(_),h.enter().append("text").attr("font-size",p).attr("id","d3po_label_"+e.d3po.id).attr("class","d3po_label").attr("opacity",0).call(z).transition().duration(w.draw.timing/2).delay(w.draw.timing/2).call(_)):(h.attr("opacity",1).call(z).call(_),h.enter().append("text").attr("font-size",p).attr("id","d3po_label_"+e.d3po.id).attr("class","d3po_label").call(z).call(_)),h.exit().call(k),0===h.size()||0===h.selectAll("tspan").size())delete e.d3po_label,d3.select(this).selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k),w.g.labels.selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k);else{if(a.background){var g=["background"],v=h.node().getBBox();(y={height:v.height,width:v.width,x:v.x,y:0<v.y?v.y:-v.height/2}).width+=w.labels.padding*M[0],y.height+=w.labels.padding*M[0],y.x-=w.labels.padding*M[0]/2,y.y-=w.labels.padding*M[0]/2;var m=h.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];1<(m=(m=m.replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(",")).length&&(m=(m=m[m.length-1]).substring(0,m.length-1),y.y+=parseFloat(m))}else{g=[];var y={}}var x=r.selectAll("rect#d3po_label_bg_"+e.d3po.id).data(g),b="number"==typeof a.background?a.background:"string"==typeof a.background?1:.6;function j(e){var t="string"==typeof a.background?a.background:"none"===w.background.value?"#ffffff":w.background.value,n="string"==typeof a.background?a.background:t,r=h.attr("transform").split(")");r.pop(),r.pop(),r.push(""),r=r.join(")"),e.attr("fill",n).attr(y).attr("transform",r)}w.draw.timing?(x.exit().transition().duration(w.draw.timing).attr("opacity",0).remove(),x.transition().duration(w.draw.timing).attr("opacity",b).call(j),x.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+e.d3po.id).attr("class","d3po_label_bg").attr("opacity",0).call(j).transition().duration(w.draw.timing).attr("opacity",b)):(x.exit().remove(),x.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+e.d3po.id).attr("class","d3po_label_bg"),x.attr("opacity",b).call(j))}}else delete e.d3po_label,d3.select(this).selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k),w.g.labels.selectAll("text#d3po_label_"+e.d3po.id+", rect#d3po_label_bg_"+e.d3po.id).call(k)}),w.dev.value&&r.timeEnd(n)}else{if(w.dev.value){n="removing "+e+" labels";r.time(n)}t.selectAll("text.d3po_label, rect.d3po_label_bg").call(k),w.g.labels.selectAll("text.d3po_label, rect.d3po_label_bg").call(k),w.dev.value&&r.timeEnd(n)}}},{"../../../client/rtl.js":40,"../../../color/mix.js":46,"../../../color/text.js":50,"../../../core/console/print.js":52,"../../../core/fetch/text.js":66,"../../../core/fetch/value.js":67,"../../../string/list.js":177,"../../../textwrap/textwrap.js":203,"../../../util/copy.js":210,"./color.js":223,"./segments.js":233}],229:[function(e,t,n){var g=e("../../../util/copy.js"),v=e("../../../util/closest.js"),m=e("../../../client/pointer.js"),y=e("./style.js"),x=e("../../../core/fetch/value.js");function b(e){e.attr("x",function(e){return e.d3po.x}).attr("y",function(e){return e.d3po.y}).attr("width",0).attr("height",0)}function j(e,n){void 0===n&&(n=0),e.attr("x",function(e){var t=e.d3po.r?2*e.d3po.r:e.d3po.width;return e.d3po.x-(t/2+n/2)}).attr("y",function(e){var t=e.d3po.r?2*e.d3po.r:e.d3po.height;return e.d3po.y-(t/2+n/2)}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+n}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+n}).attr("rx",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.width)+n)/2}).attr("ry",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.height)+n)/2})}function w(r,e,a,i){var t=r.draw.timing?r.timing.mouseevents:0;void 0===i&&(i=0),t?(d3.select(e.parentNode).selectAll("path.d3po_line").transition().duration(t).style("stroke-width",function(e){var t=a;if(t.constructor!==Number){var n=x(r,e,a);t=n&&n.length?d3.max(n):r.data.stroke.width}return t+i}),d3.select(e.parentNode).selectAll("rect").transition().duration(t).style("stroke-width",function(e){var t=a;if(t.constructor!==Number){var n=x(r,e,a);t=n&&n.length?d3.max(n):r.data.stroke.width}return t}).call(j,i)):(d3.select(e.parentNode).selectAll("path.d3po_line").style("stroke-width",function(e){var t=a;if(t.constructor!==Number){var n=x(r,e,a);t=n&&n.length?d3.max(n):r.data.stroke.width}return t+i}),d3.select(e.parentNode).selectAll("rect").style("stroke-width",function(e){var t=a;if(t.constructor!==Number){var n=x(r,e,a);t=n&&n.length?d3.max(n):r.data.stroke.width}return t}).call(j,i))}t.exports=function(c,e,t,n){function a(e){var t=f;if(t.constructor!==Number){var n=x(c,e,f);t=n&&n.length?d3.max(n):c.data.stroke.width}return t<15?15:t}var d=d3.svg.line().x(function(e){return e.d3po.x}).y(function(e){return e.d3po.y}).interpolate(c.shape.interpolate.value),f=c.size.value||c.data.stroke.width,h=c[c.axes.discrete],p=h.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});e.each(function(i){var o=!1,s=[],l=[],u=g(i),e=d3.select(this);u.values=[],u.segment_key=u.key,i.values.forEach(function(e,t,n){var r=x(c,e,h.value);r.constructor===Date&&(r=r.getTime());var a=p.indexOf(v(p,r));!1===o||o===a-1?(u.values.push(e),u.segment_key+="_"+a):(1<u.values.length?s.push(u):l.push(u.values[0]),(u=g(i)).values=[e]),t===n.length-1&&(1<u.values.length?s.push(u):l.push(u.values[0])),o=a});var t=e.selectAll("path.d3po_line").data(s,function(e){return e.d3po||(e.d3po={}),e.d3po.shape="line",e.segment_key}),n=e.selectAll("rect.d3po_anchor").data(l,function(e){return e.d3po||(e.d3po={}),e.d3po.r=f,e.d3po.id});c.draw.timing?(t.exit().transition().duration(c.draw.timing).attr("opacity",0).remove(),t.transition().duration(c.draw.timing).attr("d",function(e){return d(e.values)}).call(y,c),t.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round").attr("d",function(e){return d(e.values)}).call(y,c).attr("opacity",0).transition().duration(c.draw.timing).attr("opacity",1),n.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}).call(b).call(y,c),n.transition().duration(c.draw.timing).call(j).call(y,c),n.exit().transition().duration(c.draw.timing).call(b).remove()):(t.exit().remove(),t.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round"),t.attr("d",function(e){return d(e.values)}).call(y,c),n.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}),n.exit().remove(),n.call(j).call(y,c));var r=e.selectAll("path.d3po_mouse").data(s,function(e){return e.segment_key});r.enter().append("path").attr("class","d3po_mouse").attr("d",function(e){return d(e.values)}).style("stroke","black").style("stroke-width",a).style("fill","none").style("stroke-linecap","round").attr("opacity",0),r.on(m.over,function(e){!c.draw.frozen&&c.mouse.value&&c.mouse.over.value&&w(c,this,f,2)}).on(m.out,function(e){!c.draw.frozen&&c.mouse.value&&c.mouse.out.value&&w(c,this,f,0)}),c.draw.timing?r.transition().duration(c.draw.timing).attr("d",function(e){return d(e.values)}).style("stroke-width",a):r.attr("d",function(e){return d(e.values)}).style("stroke-width",a),r.exit().remove()})}},{"../../../client/pointer.js":38,"../../../core/fetch/value.js":67,"../../../util/closest.js":209,"../../../util/copy.js":210,"./style.js":234}],230:[function(e,t,n){t.exports=function(t){var e=t.returned.edges||[],n=t.g.edges.selectAll("g.d3po_edge_path").data(e,function(e){return e.d3po.id="path_"+e[t.edges.source][t.id.value]+"_"+e[t.edges.target][t.id.value],e.d3po.id});function r(e){e.attr("d",t.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3po.x+","+e.d3po.y+")"})}t.draw.timing?(n.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),n.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),n.selectAll("path").data(function(e){return[e]}).transition().duration(t.draw.timing).call(r),n.enter().append("g").attr("class","d3po_edge_path").append("path").style("stroke-width",0).transition().duration(t.draw.timing).call(r)):(n.exit().remove(),n.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),n.selectAll("path").data(function(e){return[e]}).call(r),n.enter().append("g").attr("class","d3po_edge_path").append("path").call(r))}},{}],231:[function(e,t,n){(function(){var d,f,h,s;s=e("./style.js"),h={},d={},f={r:{},a:{}},t.exports=function(o,e,t,n){var r,u,c,a,i;c=o.id.nesting[o.depth.value+1],a=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return e.d3po.r}).angle(function(e){return e.d3po.a}),r=function(e){return o.labels.value&&(e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label),[e]},o.draw.timing?(e.each(function(e){var t,n,r,a,i;for(i=[],n=0,r=(a=e[c]).length;n<r;n++)t=a[n],i.push(t.d3po.id=t[o.id.value]+"_"+t[c]);return i}),u=d3.svg.line.radial().interpolate("linear-closed").radius(function(e,t){return void 0===h[e.d3po.id]&&(h[e.d3po.id]=0),isNaN(h[e.d3po.id])&&(h[e.d3po.id]=e.d3po.r),h[e.d3po.id]}).angle(function(e,t){return void 0===d[e.d3po.id]&&(d[e.d3po.id]=e.d3po.a),isNaN(d[e.d3po.id])&&(d[e.d3po.id]=e.d3po.a),d[e.d3po.id]}),i=function(e,l){return e.attrTween("d",function(a){var e,i,o,t,n,r,s;for(s=a[c],o=t=0,n=s.length;t<n;o=++t)e=(i=s[o]).d3po.a,void 0===l?r=i.d3po.r:0===l&&(r=0),f.a[i.d3po.id]=d3.interpolate(d[i.d3po.id],e),f.r[i.d3po.id]=d3.interpolate(h[i.d3po.id],r);return function(e){var t,n,r;for(r=a[c],o=t=0,n=r.length;t<n;o=++t)i=r[o],d[i.d3po.id]=f.a[i.d3po.id](e),h[i.d3po.id]=f.r[i.d3po.id](e);return u(a[c])}})},t.append("path").attr("class","d3po_data").call(s,o).attr("d",function(e){return u(e[c])}),e.selectAll("path.d3po_data").data(r).transition().duration(o.draw.timing).call(s,o).call(i),n.selectAll("path.d3po_data").transition().duration(o.draw.timing).call(i,0)):(t.append("path").attr("class","d3po_data"),e.selectAll("path.d3po_data").data(r).call(s,o).attr("d",function(e){return a(e[c])}))}}).call(this)},{"./style.js":234}],232:[function(e,t,n){(function(){var s;s=e("./style.js"),t.exports=function(r,e,t,n){var a,i,o;return a=function(e){var t,n;return r.labels.value&&!e.d3po.label?(n=e.d3po.r?2*e.d3po.r:e.d3po.width,t=e.d3po.r?2*e.d3po.r:e.d3po.height,e.d3po_label={w:n,h:t,x:0,y:0},e.d3po_share={w:n,h:t,x:0,y:0},e.d3po_label.shape="circle"===e.d3po.shape?"circle":"square"):e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]},i=function(e){return e.attr("x",function(e){return e.d3po.init&&"x"in e.d3po.init?e.d3po.init.x:e.d3po.init&&"width"in e.d3po.init?-e.d3po.width/2:0}).attr("y",function(e){return e.d3po.init&&"y"in e.d3po.init?e.d3po.init.y:e.d3po.init&&"height"in e.d3po.init?-e.d3po.height/2:0}).attr("width",function(e){return e.d3po.init&&"width"in e.d3po.init?e.d3po.init.width:0}).attr("height",function(e){return e.d3po.init&&"height"in e.d3po.init?e.d3po.init.height:0})},o=function(e){return e.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2}).attr("width",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.width}).attr("height",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3po.shape,n=e.d3po.r?2*e.d3po.r:e.d3po.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3po.shape,t=e.d3po.r?2*e.d3po.r:e.d3po.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3po?"rotate("+e.d3po.rotate+")":""}).attr("shape-rendering",function(e){return"square"!==e.d3po.shape||"rotate"in e.d3po?"auto":r.shape.rendering.value})},r.draw.timing?(t.append("rect").attr("class","d3po_data").call(i).call(s,r),e.selectAll("rect.d3po_data").data(a).transition().duration(r.draw.timing).call(o).call(s,r),n.selectAll("rect.d3po_data").transition().duration(r.draw.timing).call(i)):(t.append("rect").attr("class","d3po_data"),e.selectAll("rect.d3po_data").data(a).call(o).call(s,r))}}).call(this)},{"./style.js":234}],233:[function(e,t,n){(function(){var a;a=e("../../../core/fetch/value.js"),t.exports=function(e,t,n){var r;return(r=e[n].value)?n in t.d3po?t.d3po[n]:a(e,t,r):t.d3po[n]}}).call(this)},{"../../../core/fetch/value.js":67}],234:[function(e,t,n){(function(){var r,a,i;r=e("./color.js"),a=e("../../../client/ie.js"),i=e("../../../core/fetch/value.js"),t.exports=function(e,n){return e.attr("fill",function(e){return e.d3po&&e.d3po.spline?"none":r(e,n)}).style("stroke",function(e){var t;return e.d3po&&e.d3po.stroke?e.d3po.stroke:(t=e.values?r(e.values[0],n):r(e,n,!0),d3.rgb(t).darker(.6))}).style("stroke-width",function(e){var t;if(a&&n.types[n.type.value].zoom)return 0;if("line"===e.d3po.shape&&n.size.value){if(n.size.value.constructor===Number)return n.size.value;if((t=i(n,e,n.size.value))&&t.length)return d3.max(t)}return n.data.stroke.width}).attr("opacity",n.data.opacity).attr("vector-effect","non-scaling-stroke")}}).call(this)},{"../../../client/ie.js":37,"../../../core/fetch/value.js":67,"./color.js":223}],235:[function(e,t,n){(function(){t.exports=function(t,e,n,r){var a,i,o,s,l,u,c,d,f;i=function(e){return e.d3po.text?e.d3po_label={w:d,h:d,x:0,y:0,background:"#fff",resize:!1,angle:0<=["left","right"].indexOf(e.d3po.position)?90:0}:e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]},f=function(e){return e.style("stroke-width",t.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",t.shape.rendering.value)},o=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n;return 0<=["top","bottom"].indexOf(e.d3po.position)?0:(t=e.d3po.offset||0,n=e.d3po.width||0,(t<0?-n:n)+t)}).attr("x2",function(e){return 0<=["top","bottom"].indexOf(e.d3po.position)?0:e.d3po.offset||0}).attr("y1",function(e){var t,n;return 0<=["left","right"].indexOf(e.d3po.position)?0:(n=e.d3po.offset||0,t=e.d3po.height||0,(n<0?-t:t)+n)}).attr("y2",function(e){return 0<=["left","right"].indexOf(e.d3po.position)?0:e.d3po.offset||0}).attr("marker-start","url(#d3po_whisker_marker)")},(s=t.defs.selectAll("#d3po_whisker_marker").data([0])).enter().append("marker").attr("id","d3po_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),a=e.datum(),d=a?(u=a.d3po.position,"horizontal"===(l=0<=["top","bottom"].indexOf(u)?"horizontal":"vertical")?a.d3po.width:a.d3po.height):(l="horizontal",0),s.select("line").attr("x1","horizontal"===l?-d/2:0).attr("x2","horizontal"===l?d/2:0).attr("y1","vertical"===l?-d/2:0).attr("y2","vertical"===l?d/2:0).call(f).style("stroke-width",2*t.data.stroke.width),t.draw.timing?(n.append("line").attr("class","d3po_data").call(f).call(o),e.selectAll("line.d3po_data").data(i).transition().duration(t.draw.timing).call(f).call(c),r.selectAll("line.d3po_data").transition().duration(t.draw.timing).call(o)):(n.append("line").attr("class","d3po_data"),e.selectAll("line.d3po_data").data(i).call(f).call(c))}}).call(this)},{}],236:[function(e,t,n){var r=e("../../../client/pointer.js"),a=e("../../../client/prefix.js"),i=e("../../../core/console/print.js"),o=e("../../../client/touch.js"),s=e("../zoom/propagation.js");t.exports=function(t){t.dev.value&&i.time("creating SVG elements"),t.svg=t.container.value.selectAll("svg#d3po").data([0]),t.svg.enter().insert("svg","#d3po_message").attr("id","d3po").attr("width",t.width.value).attr("height",t.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),t.g.bg=t.svg.selectAll("rect#bg").data(["bg"]),t.g.bg.enter().append("rect").attr("id","bg").attr("fill",t.background.value).attr("stroke","none").attr("width",t.width.value).attr("height",t.height.value),t.g.timeline=t.svg.selectAll("g#timeline").data(["timeline"]),t.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+t.height.value+")"),t.g.legend=t.svg.selectAll("g#key").data(["key"]),t.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+t.height.value+")"),t.g.footer=t.svg.selectAll("g#footer").data(["footer"]),t.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+t.height.value+")");var e="clipping_"+t.container.id;t.g.clipping=t.svg.selectAll("#clipping").data(["clipping"]),t.g.clipping.enter().append("clipPath").attr("id",e).append("rect").attr("width",t.width.viz).attr("height",t.height.viz),t.g.container=t.svg.selectAll("g#container").data(["container"]),t.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+e+")").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.g.zoom=t.g.container.selectAll("g#zoom").data(["zoom"]),t.g.zoom.enter().append("g").attr("id","zoom"),t.g.viz=t.g.zoom.selectAll("g#d3po_viz").data(["d3po_viz"]),t.g.viz.enter().append("g").attr("id","d3po_viz"),t.g.overlay=t.g.viz.selectAll("rect#d3po_overlay").data([{id:"d3po_overlay"}]),t.g.overlay.enter().append("rect").attr("id","d3po_overlay").attr("width",t.width.value).attr("height",t.height.value).attr("opacity",0),t.g.overlay.on(r.move,function(e){o&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",a()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(e){o&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",a()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(e){o&&s(t,d3.event),t.types[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",a()+"grabbing"):d3.select(this).style("cursor","auto")}),t.g.app=t.g.viz.selectAll("g#app").data(["app"]),t.g.app.enter().append("g").attr("id","app"),t.g.edges=t.g.viz.selectAll("g#edges").data(["edges"]),t.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),t.g.edge_focus=t.g.viz.selectAll("g#focus").data(["focus"]),t.g.edge_focus.enter().append("g").attr("id","focus"),t.g.edge_hover=t.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),t.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),t.g.data=t.g.viz.selectAll("g#data").data(["data"]),t.g.data.enter().append("g").attr("id","data").attr("opacity",0),t.g.data_focus=t.g.viz.selectAll("g#data_focus").data(["data_focus"]),t.g.data_focus.enter().append("g").attr("id","data_focus"),t.g.labels=t.g.viz.selectAll("g#d3po_labels").data(["d3po_labels"]),t.g.labels.enter().append("g").attr("id","d3po_labels"),t.defs=t.svg.selectAll("defs").data(["defs"]),t.defs.enter().append("defs"),t.dev.value&&i.timeEnd("creating SVG elements")}},{"../../../client/pointer.js":38,"../../../client/prefix.js":39,"../../../client/touch.js":43,"../../../core/console/print.js":52,"../zoom/propagation.js":251}],237:[function(e,t,n){var r=e("../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.js":52}],238:[function(e,t,n){var Y=e("../../../array/sort.js"),G=e("../../../tooltip/create.js"),X=e("../../../core/data/nest.js"),Z=e("./data.js"),J=e("../../../core/fetch/color.js"),W=e("../../../core/fetch/text.js"),Q=e("../../../core/fetch/value.js"),K=e("../../../object/merge.js"),$=e("../../../tooltip/remove.js"),ee=e("../shapes/segments.js"),o=e("../../../client/scroll.js"),te=e("../../../util/uniques.js"),ne=e("../../../object/validate.js"),s=e("../zoom/direction.js");t.exports=function(C){"d3po"in C.data||(C.data.d3po={});var N=C.vars,F=C.data,T="d3po"in F&&"depth"in F.d3po?F.d3po.depth:N.depth.value,q=(C.ex,!!C.mouseevents&&C.mouseevents),B=!("arrow"in C)||C.arrow,e=Q(N,F,N.id.value),P=C.id||N.type.value;if(!d3.event||"click"!=d3.event.type||!N.tooltip.html.value&&!N.tooltip.value.long||"fullscreen"in C){D=!1;var I=C.anchor||N.tooltip.anchor,t=(L=C.length||"short",s(F,N));if(-1===t){var n=N.id.nesting[T-1];Q(N,e,n)}var r="";if(N.mouse.click.value&&(!N.mouse.viz||!1!==N.mouse.viz.click))if(1===t&&N.zoom.value)r=N.format.value(N.format.locale.value.ui.expand);else if(-1===t&&N.zoom.value&&N.history.states.length&&!N.tooltip.value.long)r=N.format.value(N.format.locale.value.ui.collapse);else if(N.small||"short"!=L||!N.tooltip.html.value&&!N.tooltip.value.long||1===N.focus.value.length&&N.focus.value[0]==e){if("long"==L)r=N.footer.value||""}else var r=N.format.locale.value.ui.moreInfo;V=!!r.length&&N.format.value(r,{key:"footer",vars:N})}else{var D=!0,L=(B=!1,q=!0,"long"),V=N.footer.value;N.covered=!0}if("x"in C)var R=C.x;else if("static"===N.types[N.type.value].tooltip){R=F.d3po.x;N.zoom.translate&&N.zoom.scale&&(R=N.zoom.translate[0]+R*N.zoom.scale),R+=N.margin.left,"long"!==C.length&&(U+=o.x(),R+=N.container.value.node().getBoundingClientRect().left,R+=parseFloat(N.container.value.style("padding-left"),10))}else R=d3.mouse(d3.select("html").node())[0];if("y"in C)var U=C.y;else if("static"==N.types[N.type.value].tooltip){U=F.d3po.y;N.zoom.translate&&N.zoom.scale&&(U=N.zoom.translate[1]+U*N.zoom.scale),U+=N.margin.top,"long"!==C.length&&(U+=o.y(),U+=N.container.value.node().getBoundingClientRect().top,U+=parseFloat(N.container.value.style("padding-top"),10))}else U=d3.mouse(d3.select("html").node())[1];if("offset"in C)var H=C.offset;else if("static"==N.types[N.type.value].tooltip){H=F.d3po.r?F.d3po.r:F.d3po.height/2;N.zoom.scale&&(H*=N.zoom.scale)}else H=3;function a(e){var t,n="depth"in C?C.depth:T,r={},a=N.id.nesting[n+1]in F?n+1:n,i=N.id.nesting[a],o="merged"in F.d3po?F.d3po.merged:F[i];o instanceof Array||(o=[o]);var s=Q(N,F,N.size.value);if(N.tooltip.children.value){if(1<(o=o.slice(0)).length&&ne(o[0])&&(o=X(N,o,[i])),N.size.value&&ne(o[0])){var l=[],u=o.filter(function(e){if(!(null===Q(N,e,N.size.value)||"d3po"in e&&e.d3po.merged))return!0;l.push(e)});Y(u,N.size.value,"desc",[],N),o=u.concat(l)}var c=!0===N.tooltip.children.value?3:N.tooltip.children.value,d="short"===L?c:N.data.large,f=o.length,h=d3.min([f,d]);t={values:[]};for(var p=0;p<h&&o.length;p++){var g=o.shift(),v=W(N,g,a)[0],m=ne(g)?Q(N,g,i,a):g;if(m!==F[N.id.nesting[n]]&&v&&!t[v]){var y=ne(g)?Q(N,g,N.size.value,i):null,x=J(N,g,i);t[v]=!y||y instanceof Array?"":N.format.value(y,{key:N.size.value,vars:N,data:g});var b={};b[v]=t[v],t.values.push(b),x&&(t.d3po_colors||(t.d3po_colors={}),t.d3po_colors[v]=x)}else p--}h<f&&(t.d3poMore=f-h)}function j(e){return"string"==typeof N[e].value?N[e].value:N.format.locale.value.method[e]}F.d3po.tooltip&&(r=K(r,F.d3po.tooltip)),N.tooltip.size.value&&(s&&"number"!=typeof N.size.value&&(r[j("size")]=s),N.axes.opposite&&N[N.axes.opposite].value!==N.size.value&&(r[j(N.axes.opposite)]=Q(N,F,N[N.axes.opposite].value)),N.axes.opposite&&N[N.axes.opposite+"2"].value!==N.size.value&&(r[j(N.axes.opposite+"2")]=Q(N,F,N[N.axes.opposite+"2"].value)),N.color.valueScale&&(r[j("color")]=Q(N,F,N.color.value)));var w=ee(N,F,"active"),_=ee(N,F,"temp"),k=ee(N,F,"total");"number"==typeof w&&0<w&&k&&(r[j("active")]=w+"/"+k+" ("+N.format.value(w/k*100,{key:"share",vars:N,data:F})+")"),"number"==typeof _&&0<_&&k&&(r[j("temp")]=_+"/"+k+" ("+N.format.value(_/k*100,{key:"share",vars:N,data:F})+")"),N.tooltip.share.value&&F.d3po.share&&(r.share=N.format.value(100*F.d3po.share,{key:"share",vars:N,data:F}));a="depth"in C?C.depth:T;var z=C.title||W(N,F,a)[0],M=te(F,N.icon.value,Q,N,N.id.nesting[a]),A=C.titleOnly?[]:Z(N,F,L,r,t,a);if(M=1===M.length&&"string"==typeof M[0]&&M[0],0<A.length||V||!F.d3po_label&&"short"==L&&z||F.d3po_label&&(!("visible"in F.d3po_label)||"visible"in F.d3po_label&&!1===F.d3po_label.visible)){if(z=z||N.format.value(m,{key:N.id.value,vars:N}),(a="d3po"in F&&"merged"in F.d3po?T-1:"depth"in C?C.depth:T)<0&&(a=0),a=N.id.nesting[a],"string"==typeof N.icon.style.value)var E=N.icon.style.value;else if("object"==typeof N.icon.style.value&&N.icon.style.value[a])E=N.icon.style.value[a];else E="default";var S=N.tooltip.small;C.width?S=C.width:D&&(S=N.tooltip.large);var O=!D&&"long"!==C.length||D&&N.tooltip.fullscreen.value?d3.select("body"):N.container.value;!C.description&&F&&N.tooltip.sub.value&&(C.description=Q(N,F,N.tooltip.sub.value)),G({align:I,arrow:B,locale:N.format.locale.value,background:N.tooltip.background,curtain:N.tooltip.curtain.color,curtainopacity:N.tooltip.curtain.opacity,fontcolor:N.tooltip.font.color,fontfamily:N.tooltip.font.family.value,fontsize:N.tooltip.font.size,fontweight:N.tooltip.font.weight,data:A,color:J(N,F),allColors:!0,footer:!1===C.footer?C.footer:V,fullscreen:D,html:e,js:C.js,icon:M,id:P,max_height:C.maxheight,max_width:S,mouseevents:q,offset:H,parent:O,stacked:N.tooltip.stacked.value,style:E,title:z,description:C.description,width:C.width||D||0!=A.length?S:"auto",x:R,y:U})}else $(P)}if(D||"long"===C.length)if("string"==typeof N.tooltip.html.value)a(N.tooltip.html.value);else if("function"==typeof N.tooltip.html.value)a(N.tooltip.html.value(e));else if(N.tooltip.html.value&&"object"==typeof N.tooltip.html.value&&N.tooltip.html.value.url){var i=N.tooltip.html.value.url;"function"==typeof i&&(i=i(e)),d3.json(i,function(e){a(N.tooltip.html.value.callback?N.tooltip.html.value.callback(e):e)})}else a(C.html);else a(C.html)}},{"../../../array/sort.js":34,"../../../client/scroll.js":41,"../../../core/data/nest.js":60,"../../../core/fetch/color.js":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.js":67,"../../../object/merge.js":174,"../../../object/validate.js":175,"../../../tooltip/create.js":204,"../../../tooltip/remove.js":206,"../../../util/uniques.js":213,"../shapes/segments.js":233,"../zoom/direction.js":248,"./data.js":239}],239:[function(e,t,n){var x=e("../../../util/copy.js"),b=e("../../../core/fetch/value.js"),j=e("../../../core/fetch/color.js"),w=e("../../../core/fetch/text.js"),_=e("../../../color/legible.js"),k=e("../../../object/merge.js"),z=e("../../../client/prefix.js"),M=e("../../../string/format.js"),A=e("../../../object/validate.js");t.exports=function(l,u,e,t,n,r){if(l.small)return[];if(!e)e="long";if("long"==e)var a="short";else a="long";var c={};if(t&&"string"==typeof t)t=[t];else if(t&&"object"==typeof t){c=k(c,t);t=[];for(var i in c)t.push(i)}else if(!t)t=[];var d=[];if(l.tooltip.value instanceof Array)var o=l.tooltip.value;else if("string"==typeof l.tooltip.value)o=[l.tooltip.value];else{if(l.tooltip.value[l.id.nesting[r]])o=l.tooltip.value[l.id.nesting[r]];else o=l.tooltip.value;o instanceof Array||(o=o[e]?o[e]:o[a]?[]:k({"":[]},o)),"string"==typeof o?o=[o]:o instanceof Array||(o=k({"":[]},o))}function s(t,e){if(l.attrs.value[e])var n=e;else n=null;e=e&&l.format.value(e);var r=c[t]||b(l,u,t,n);if(A(r))f.push({name:l.format.value(t),value:l.format.value(r.value,{key:r.key,vars:l}),group:e});else if(null!=r&&"undefined"!=r&&!(r instanceof Array)&&("string"==typeof r&&r.indexOf("d3po_other")<0||"string"!=typeof r)){var a=l.format.locale.value.ui[t]?l.format.value(l.format.locale.value.ui[t]):l.format.value(t),i=0<=d.indexOf(t);r instanceof Array?r.forEach(function(e){e=l.format.value(e,{key:t,vars:l,data:u})}):r=l.format.value(r,{key:t,vars:l,data:u});var o={name:a,value:r,highlight:i,group:e};if(l.descs.value)if("function"==typeof l.descs.value){var s=l.descs.value(t);"string"==typeof s&&(o.desc=s)}else t in l.descs.value&&(o.desc=l.descs.value[t]);f.push(o)}}var f=[];if(o.constructor===Array&&(o={"":o}),l.id.nesting.length&&r<l.id.nesting.length-1){o=x(o);l.id.nesting.forEach(function(e,t){r<t&&o[e]&&delete o[e]})}for(var h in o){o[h].constructor!==Array&&(o[h]=[o[h]]);for(var p=t.length;0<p;p--)0<=o[h].indexOf(t[p-1])&&t.splice(p-1,1)}if(l.tooltip.value.long&&"object"==typeof l.tooltip.value.long){for(var h in l.tooltip.value.long)for(p=t.length;0<p;p--){var g=t[p-1];0<=l.tooltip.value.long[h].indexOf(g)&&(o[h]||(o[h]=[]),o[h].push(g),t.splice(p-1,1))}}for(var h in t.length&&(o[""]||(o[""]=[]),o[""]=o[""].concat(t)),o)o[h].forEach(function(e){s(e,h)});if(n){var v=l.format.locale.value.ui.including,m=n.d3po_colors;n.values.forEach(function(e){var t=d3.keys(e)[0];f.push({group:l.format.value(v),highlight:!(!m||!m[t])&&m[t],name:t,value:e[t]})}),n.d3poMore&&f.push({group:l.format.value(v),highlight:!0,name:M(l.format.locale.value.ui.more,n.d3poMore),value:""})}if(l.tooltip.connections.value&&"long"===e){var y=l.edges.connections(u[l.id.value],l.id.value,!0);y.length&&y.forEach(function(t){var e=(e=l.data.viz.filter(function(e){return e[l.id.value]===t[l.id.value]})).length?e[0]:t,n=w(l,e)[0],r=j(l,e),a=l.tooltip.font.size,i="square"==l.shape.value?0:a;styles=["background-color: "+r,"border-color: "+_(r),"border-style: solid","border-width: "+l.data.stroke.width+"px","display: inline-block","height: "+a+"px","left: 0px","position: absolute","width: "+a+"px","top: 0px",z()+"border-radius: "+i+"px"],node="<div style='"+styles.join("; ")+";'></div>";f.push({group:l.format.value(l.format.locale.value.ui.primary),highlight:!1,link:function(){l.self.focus([e[l.id.value]]).draw()},name:"<div id='d3potooltipfocuslink_"+e[l.id.value]+"' class='d3po_tooltip_focus_link' style='position:relative;padding-left:"+1.5*a+"px;'>"+node+n+"</div>"})})}return f}},{"../../../client/prefix.js":39,"../../../color/legible.js":44,"../../../core/fetch/color.js":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.js":67,"../../../object/merge.js":174,"../../../object/validate.js":175,"../../../string/format.js":176,"../../../util/copy.js":210}],240:[function(e,t,n){(function(){var c;c=e("../../../core/console/print.js"),t.exports=function(e){var t,n,r,a,i,o,s,l,u;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,a=!(r=0<=((u=e.types[e.type.value]).requirements||[]).indexOf("data"))||r&&e.data.viz.length,!e.error.internal&&a){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&c.time("running "+t),i=0,o=(s=e.data.viz).length;i<o;i++)(n=s[i]).d3po&&(delete n.d3po.shape,delete n.d3po.label,delete n.d3po.rotate,delete n.d3po.share);l=u(e),e.dev.value&&c.timeEnd("running "+t)}else l=null;e.returned={nodes:[],edges:null},l instanceof Array?e.returned.nodes=l:l&&(l.nodes&&(e.returned.nodes=l.nodes),l.edges&&(e.returned.edges=l.edges))}}).call(this)},{"../../../core/console/print.js":52}],241:[function(e,t,n){var s=e("../../../util/copy.js"),l=e("../../../form/form.js"),u=e("../../../core/console/print.js"),c=e("../../../object/validate.js");t.exports=function(o){var e=o.ui.value&&o.ui.value.length,t=o.ui.position.value;o.dev.value&&e&&u.time("drawing custom UI elements");var n=o.container.value.selectAll("div#d3po_drawer").data(["d3po_drawer"]);n.enter().append("div").attr("id","d3po_drawer");var r={};o.ui.position.accepted.forEach(function(e){r[e]=e==t?o.margin.bottom+"px":"auto"}),n.style("text-align",o.ui.align.value).style("position","absolute").style("width",o.width.value-2*o.ui.padding+"px").style("height","auto").style(r);var a=n.selectAll("div.d3po_drawer_ui").data(e?o.ui.value:[],function(e){return e.method||!1});a.exit().remove(),a.enter().append("div").attr("class","d3po_drawer_ui").style("display","inline-block"),a.style("padding",o.ui.padding+"px").each(function(t){var n,e;t.form||(t.form=l().container(d3.select(this)).data({sort:!1}).id("id").text("text")),"string"==typeof t.method&&t.method in o?(n=o[t.method].value,e=function(e){e!==o[t.method].value&&o.self[t.method](e).draw()}):(n=t.focus||t.value[0],c(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(e=function(e){e!==n&&(n=e,t.focus=e,t.method(e,o.self))}));var r,a=[];t.label?r=t.label:"string"==typeof t.method&&t.method in o&&(r=o.format.locale.value.method[t.method]||t.method),t.value.forEach(function(e){var t={};c(e)?(t.id=e[d3.keys(e)[0]],t.text=o.format.value(d3.keys(e)[0])):(t.id=e,t.text=o.format.value(e)),a.push(t)});var i=s(o.ui.font);i.align=s(o.font.align),i.secondary=s(i),t.form.data(a).font(i).focus(1<t.value.length&&n).focus({callback:e}).format(o.format.locale.language).format({number:o.format.number.value,text:o.format.text.value}).title(o.format.value(r)).type(t.type||"auto").ui({align:o.ui.align.value,border:o.ui.border,color:{primary:o.ui.color.primary.value,secondary:o.ui.color.secondary.value},padding:o.ui.padding,margin:0}).width(t.width||!1).draw()});var i=n.node().offsetHeight||n.node().getBoundingClientRect().height;i&&(o.margin[t]+=i),o.dev.value&&e&&u.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.js":52,"../../../form/form.js":106,"../../../object/validate.js":175,"../../../util/copy.js":210}],242:[function(e,t,n){(function(){var g,v,m,y;g=e("../../../client/pointer.js"),v=e("../../../color/lighter.js"),m=e("../../../core/console/print.js"),y=e("../../../client/css.js"),t.exports=function(t){var e,n,r,a,i,o,s,l,u,c,d,f,h,p;return!t.small&&t.history.value&&0<t.history.states.length?(t.dev.value&&m.time("drawing back button"),e=t.container.value.selectAll("div#d3po_back_button").data(["d3po_back_button"]).style("position","relative").style("z-index",1900),l=t.title.sub.font.size,n=t.title.sub.font.color,a=t.title.sub.font.family.value,p=t.title.sub.font.weight,s=t.title.sub.padding,d=!1,t.title.sub.value&&["start","left"].indexOf(t.title.sub.font.align)<0?d="sub":t.title.total.value&&["start","left"].indexOf(t.title.total.font.align)<0?d="total":t.title.value&&["start","left"].indexOf(t.title.font.align)<0&&(d="title"),d?(u=function(e){var t;return t=(t=(t=(t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0]).replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(","))[t.length-1],parseFloat(t.substring(0,t.length-1))},f=t.svg.select(".d3po_title."+d),h=u(f)+u(f.select("text"))):(h=t.margin.top-t.title.padding,o=l+2*s,t.margin.top+=o),r=parseFloat(t.container.value.style("padding-top"),10),h+=r,r=parseFloat(t.container.value.style("padding-left"),10),i=t.margin.left+l/2+r,c=function(e){return e.style("position","absolute").style("left",i+"px").style("top",h+"px").style("color",n).style("font-family",a).style("font-weight",p).style("font-size",l+"px")},e.enter().append("div").attr("id","d3po_back_button").style("opacity",0).call(c).html(function(){var e;return y("font-awesome")&&0===t.icon.back.value.indexOf("fa-")?(e="<i class='fa "+t.icon.back.value,e+="' style='margin-top:2px;margin-right:4px;'></i>"):e=t.icon.back.value+" ",e+t.format.value(t.format.locale.value.ui.back)}),e.on(g.over,function(){if(!t.small&&0<t.history.states.length)return d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).style("color",v(n,.25))}).on(g.out,function(){if(!t.small&&0<t.history.states.length)return d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).style("color",n)}).on(g.click,function(){return t.history.back()}).transition().duration(t.draw.timing).style("opacity",1).call(c),t.dev.value?m.timeEnd("drawing back button"):void 0):t.container.value.selectAll("div#d3po_back_button").transition().duration(t.draw.timing).style("opacity",0).remove()}}).call(this)},{"../../../client/css.js":36,"../../../client/pointer.js":38,"../../../color/lighter.js":45,"../../../core/console/print.js":52}],243:[function(e,t,n){var q=e("../../../array/sort.js"),B=e("../../../util/buckets.js"),P=e("../../../util/copy.js"),I=e("../tooltip/create.js"),D=e("../../../core/data/nest.js"),L=e("../../../util/dataurl.js"),V=e("../../../client/pointer.js"),R=e("../../../core/fetch/value.js"),U=e("../../../core/fetch/color.js"),H=e("../../../core/fetch/text.js"),Y=e("../../../core/console/print.js"),G=e("../../../tooltip/remove.js"),X=e("../../../color/text.js"),Z=e("../../../util/uniques.js"),J=e("../../../client/scroll.js"),W=e("../../../string/strip.js"),Q=e("../../../textwrap/textwrap.js"),K=(e("../../../client/touch.js"),e("../../../object/validate.js"));t.exports=function(d){var e=!0,f=0;if(!d.error.internal&&d.color.value&&!d.small&&d.legend.value)if(d.color.valueScale)if(d.color.valueScale){d.dev.value&&Y.time("drawing color scale"),d.g.legend.selectAll("g.d3po_color").transition().duration(d.draw.timing).attr("opacity",0).remove();var t=d.color.valueScale.domain();_=d.color.valueScale.range();t.length<=2&&(t=B(t,6));var n=d.g.legend.selectAll("g.d3po_scale").data(["scale"]);n.enter().append("g").attr("class","d3po_scale").attr("opacity",0);var r=d.container.id+"_legend_heatmap",a=n.selectAll("#"+r).data(["heatmap"]);a.enter().append("linearGradient").attr("id",r).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var i=a.selectAll("stop").data(d3.range(0,_.length));i.enter().append("stop").attr("stop-opacity",1),i.attr("offset",function(e){return Math.round(e/(_.length-1)*100)+"%"}).attr("stop-color",function(e){return _[e]}),i.exit().remove();var o=n.selectAll("rect#gradient").data(["gradient"]);o.enter().append("rect").attr("id","gradient").attr("x",function(e){return"middle"==d.legend.align?d.width.value/2:"end"==d.legend.align?d.width.value:0}).attr("y",d.ui.padding).attr("width",0).attr("height",d.legend.gradient.height).attr("stroke",d.legend.font.color).attr("stroke-width",1).style("fill","url(#"+r+")");var s=n.selectAll("text.d3po_tick").data(d3.range(0,t.length));s.enter().append("text").attr("class","d3po_tick").attr("stroke","none").attr("x",function(e){return"middle"==d.legend.align?d.width.value/2:"end"==d.legend.align?d.width.value:0}).attr("y",function(e){return this.getBBox().height+d.legend.gradient.height+2*d.ui.padding});var l=0;if(s.order().attr("font-weight",d.legend.font.weight).attr("font-family",d.legend.font.family.value).attr("font-size",d.legend.font.size+"px").style("text-anchor",d.legend.font.align).attr("fill",d.legend.font.color).text(function(e){return d.format.value(t[e],{key:d.color.value,vars:d})}).attr("y",function(e){return this.getBBox().height+d.legend.gradient.height+2*d.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);l<t&&(l=t)}),l+=2*d.labels.padding,(z=l*(t.length-1))+l<d.width.value){z+l<d.width.value/2&&(z=d.width.value/2,l=z/t.length,z-=l),E="start"==d.legend.align?d.ui.padding:"end"==d.legend.align?d.width.value-d.ui.padding-z:d.width.value/2-z/2,s.transition().duration(d.draw.timing).attr("x",function(e){return E+l*e}),s.exit().transition().duration(d.draw.timing).attr("opacity",0).remove();var u=n.selectAll("rect.d3po_tick").data(d3.range(0,t.length));u.enter().append("rect").attr("class","d3po_tick").attr("x",function(e){return"middle"==d.legend.align?d.width.value/2:"end"==d.legend.align?d.width.value:0}).attr("y",d.ui.padding).attr("width",0).attr("height",d.ui.padding+d.legend.gradient.height).attr("fill",d.legend.font.color),u.transition().duration(d.draw.timing).attr("x",function(e){return E+l*e-(0===e?1:0)}).attr("y",d.ui.padding).attr("width",1).attr("height",d.ui.padding+d.legend.gradient.height).attr("fill",d.legend.font.color),u.exit().transition().duration(d.draw.timing).attr("width",0).remove(),o.transition().duration(d.draw.timing).attr("x",function(e){return"middle"==d.legend.align?d.width.value/2-z/2:"end"==d.legend.align?d.width.value-z-d.ui.padding:d.ui.padding}).attr("y",d.ui.padding).attr("width",z).attr("height",d.legend.gradient.height),n.transition().duration(d.draw.timing).attr("opacity",1),d.dev.value&&Y.timeEnd("drawing color scale")}else e=!1}else e=!1;else{var c;if(d.dev.value&&Y.time("grouping data by colors"),d.nodes.value&&0<=d.types[d.type.value].requirements.indexOf("nodes")){if(c=P(d.nodes.restriced||d.nodes.value),d.data.viz.length)for(var h=0;h<c.length;h++){var p=d.data.viz.filter(function(e){return e[d.id.value]===c[h][d.id.value]});p.length&&(c[h]=p[0])}}else c=d.data.viz;c.length&&"key"in c[0]&&"values"in c[0]&&(c=d3.merge(c.map(function(e){return e.values})));function g(e){return U(d,e,v)}var v=0,m=d.id.value,y=d.id.nesting.indexOf(d.color.value);if(0<=y)v=y,m=d.id.nesting[y];else for(var x=0;x<=d.depth.value;x++){v=x,m=d.id.nesting[x];var b=Z(c,function(e){return R(d,e,m)}),j=Z(c,g);if(b.length>=j.length&&1<j.length)break}var w=[d.color.value],_=D(d,c,w,!1);d.dev.value&&Y.timeEnd("grouping data by color");var k=d.width.value,z=(f=d.legend.size)*_.length+d.ui.padding*(_.length+1);if(f instanceof Array){d.dev.value&&Y.time("calculating legend size");for(h=f[1];h>=f[0];h--)if((z=h*_.length+d.ui.padding*(_.length+1))<=k){f=h;break}d.dev.value&&Y.timeEnd("calculating legend size")}else"number"!=typeof f&&!1!==f&&(f=30);if(k<z||1==_.length)e=!1;else{if(z-=2*d.ui.padding,d.dev.value&&Y.time("sorting legend"),"function"==typeof d.legend.order.value)_=d.legend.order.value(_);else{var M=d[d.legend.order.value].value,A=d.color.value;M?"color"!==d.legend.order.value&&(A=[]):M=d[d.color.value].value,q(_,M,d.legend.order.sort.value,A,d,v)}var E;function S(e){e.attr("transform",function(e,t){return"translate("+(E+t*(d.ui.padding+f))+","+d.ui.padding+")"})}function O(e){e.attr("width",f).attr("height",f).attr("fill",function(e){d3.select(this.parentNode).select("text").remove();var t,n=Z(e,d.icon.value,R,d,m),r=U(d,e,m);if(d.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var a=W(n+"_"+r),i=d.icon.style.value,o=d.defs.selectAll("pattern#"+a).data([a]);r="knockout"==("string"==typeof i?d.icon.style.value:K(i)&&i[m]?i[m]:"default")?r:"none",o.select("rect").transition().duration(d.draw.timing).attr("fill",r).attr("width",f).attr("height",f),o.select("image").transition().duration(d.draw.timing).attr("width",f).attr("height",f);var s=o.enter().append("pattern").attr("id",a).attr("width",f).attr("height",f);return s.append("rect").attr("fill",r).attr("stroke","none").attr("width",f).attr("height",f),s.append("image").attr("xlink:href",n).attr("width",f).attr("height",f).each(function(e){0===n.indexOf("/")||0<=n.indexOf(window.location.hostname)?L(n,function(e){o.select("image").attr("xlink:href",e)}):o.select("image").attr("xlink:href",n)}),"url(#"+a+")"}if(d.legend.labels.value&&1===(t=d.legend.text.value?[R(d,e,d.legend.text.value,v)]:H(d,e,v)).length&&!(t[0]instanceof Array)&&t[0].length){var l=d3.select(this.parentNode).append("text"),u=d.legend.font.size;u instanceof Array||(u=[u]),l.attr("font-size",u[u.length-1]+"px").attr("font-weight",d.legend.font.weight).attr("font-family",d.legend.font.family.value).attr("stroke","none").attr("fill",X(r)).attr("x",0).attr("y",0).each(function(e){Q().align("middle").container(d3.select(this)).height(f).padding(d.ui.padding).resize(1<u.length).size(u).text(t[0]).width(f).valign("middle").draw()}),l.select("tspan").empty()&&l.remove()}return r})}d.dev.value&&Y.timeEnd("sorting legend"),d.dev.value&&Y.time("drawing legend"),E="start"==d.legend.align?d.ui.padding:"end"==d.legend.align?k-d.ui.padding-z:k/2-z/2,d.g.legend.selectAll("g.d3po_scale").transition().duration(d.draw.timing).attr("opacity",0).remove();var C={},N=d.g.legend.selectAll("g.d3po_color").data(_,function(e){var t=U(d,e,m);return t in C||(C[t]=-1),C[t]++,C[t]+"_"+t});N.enter().append("g").attr("class","d3po_color").attr("opacity",0).call(S).append("rect").attr("class","d3po_color").attr("stroke","none").call(O),N.order().transition().duration(d.draw.timing).call(S).attr("opacity",1).selectAll("rect.d3po_color").call(O),N.exit().transition().duration(d.draw.timing).attr("opacity",0).remove(),d.legend.tooltip.value&&N.on(V.over,function(e,t){d3.select(this).style("cursor","pointer");var n,r,a,i=this.getBoundingClientRect(),o=i.left+f/2+J.x(),s=i.top+f/2+J.y()+5,l=R(d,e,m),u=d.id.nesting.indexOf(m);if(n=d.legend.title.value?R(d,e,d.legend.title.value,v):0<=u?H(d,e,u)[0]:d.format.value(R(d,e,d.color.value,m),{key:d.color.value,vars:d,data:e}),d.legend.filters.value&&!(l instanceof Array)){r="<div style='text-align:center;'>";var c=d.format.locale.value;r+="<div class='mute'>"+d.format.value(c.method.mute)+"</div>",r+="<div class='solo'>"+d.format.value(c.method.solo)+"</div>",r+="</div>",a=function(e){var t={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};e.select(".mute").style(t).on(V.over,function(){d3.select(this).style("cursor","pointer")}).on(V.click,function(){var e=d.id.mute.value;d.history.states.push(function(){d.self.id({mute:e}).draw()}),d.self.id({mute:l}).draw()}),e.select(".solo").style(t).on(V.over,function(){d3.select(this).style("cursor","pointer")}).on(V.click,function(){var e=d.id.solo.value;d.history.states.push(function(){d.self.id({solo:e}).draw()}),d.self.id({solo:l}).draw()})}}I({data:e,html:r,js:a,depth:v,footer:!1,vars:d,x:o,y:s,mouseevents:this,title:n,titleOnly:!d.legend.data.value,offset:.4*f})}).on(V.out,function(e){G(d.type.value)}),d.dev.value&&Y.timeEnd("drawing legend")}}else e=!1;if(d.legend.value&&key&&e){if(d.dev.value&&Y.time("positioning legend"),f)var F=f+d.ui.padding;else{var T=d.g.legend.node().getBBox();F=T.height+T.y}0===d.margin.bottom&&(d.margin.bottom+=d.ui.padding),d.margin.bottom+=F,d.g.legend.transition().duration(d.draw.timing).attr("transform","translate(0,"+(d.height.value-d.margin.bottom)+")"),d.dev.value&&Y.timeEnd("positioning legend")}else d.dev.value&&Y.time("hiding legend"),d.g.legend.transition().duration(d.draw.timing).attr("transform","translate(0,"+d.height.value+")"),d.dev.value&&Y.timeEnd("hiding legend")}},{"../../../array/sort.js":34,"../../../client/pointer.js":38,"../../../client/scroll.js":41,"../../../client/touch.js":43,"../../../color/text.js":50,"../../../core/console/print.js":52,"../../../core/data/nest.js":60,"../../../core/fetch/color.js":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.js":67,"../../../object/validate.js":175,"../../../string/strip.js":178,"../../../textwrap/textwrap.js":203,"../../../tooltip/remove.js":206,"../../../util/buckets.js":207,"../../../util/copy.js":210,"../../../util/dataurl.js":212,"../../../util/uniques.js":213,"../tooltip/create.js":238}],244:[function(e,t,n){e("../../../client/pointer.js");var o=e("../../../color/text.js");t.exports=function(t,e){e=t.messages.value?e:null;var n=t.messages.style.value||(e===t.error.internal?"large":t.messages.style.backup);if("large"===n)var r=t.messages,a="center";else{if(t.footer.value)r=t.footer;else if(t.title.value)r=t.title;else if(t.title.sub.value)r=t.title.sub;else if(t.title.total.value)r=t.title.total;else r=t.title.sub;a=r.position}r={color:r.font.color,"font-family":r.font.family.value,"font-weight":r.font.weight,"font-size":r.font.size+"px",padding:r.padding+"px"};var i=t.messages.background.value;i||"none"!==(i=t.background.value)&&"transparent"!==i||(i=o(r.color)),t.g.message=t.container.value.selectAll("div#d3po_message").data(["message"]),t.g.message.enter().append("div").attr("id","d3po_message").attr("opacity",0).append("div").attr("class","d3po_message_text").style("display","block"),t.g.message.select(".d3po_message_text").text(e||t.g.message.text());navigator.onLine;t.g.message.style("display",e?"inline-block":"none").call(function(e){e.style(r).style("position","absolute").style("background-color",i).style("text-align","center").style("left",function(){return"center"==a?"50%":"0px"}).style("width",function(){return"center"==a?"auto":t.width.value+"px"}).style("margin-left",function(){return"center"==a?-this.offsetWidth/2+"px":"0px"}).style("top",function(){return"center"==a?"50%":"top"==a?"0px":"auto"}).style("bottom",function(){return"bottom"==a?"0px":"auto"}).style("margin-top",function(){return"large"!=n?"0px":-(this.offsetHeight||this.getBoundingClientRect().height)/2+"px"})}).style("opacity",e?1:0)}},{"../../../client/pointer.js":38,"../../../color/text.js":50}],245:[function(e,t,n){(function(){var K,$,ee,te,ne,re,ae,ie,oe;K=e("../../../util/closest.js"),$=e("../../../client/css.js"),e("../../../font/sizes.js"),ee=e("../../../client/pointer.js"),te=e("../../../color/mix.js"),re=e("../../../client/prefix.js"),ae=e("../../../core/console/print.js"),ie=e("../../../color/text.js"),oe=e("../../../core/data/time.js"),ne=!1,t.exports=function(a){var e,t,r,i,n,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,J,W,Q;if(!a.timeline.value||a.error.internal&&a.data.missing||a.small||!a.data.time||!(1<a.data.time.values.length))return a.g.timeline.transition().duration(a.draw.timing).attr("transform","translate(0,"+a.height.value+")");if(a.dev.value&&ae.time("drawing timeline"),B={"font-weight":a.ui.font.weight,"font-family":a.ui.font.family.value,"font-size":a.ui.font.size+"px","text-anchor":"middle"},Q=a.data.time.ticks.map(function(e){return new Date(e)}),V=oe(a,{values:Q,style:B}),G=V.values.map(Number),L=V.format,a.time.solo.value.length)for(f=d3.extent(a.time.solo.value),d=h=0,v=f.length;h<v;d=++h)(l=f[d]).constructor!==Date&&(4===(l+="").length&&parseInt(l)+""===l&&(l+="/01/01"),l=new Date(l),f[d]=l);else f=d3.extent(Q);if(W=Q.slice(),Z=d3.max(V.sizes.map(function(e){return e.height})),p=1+~~d3.max(V.sizes.map(function(e){return e.width})),p+=2*a.ui.padding,U=a.timeline.height.value||Z+2*a.ui.padding,Y=p*Q.length,F=(A=U)-2*a.ui.padding>=Z,e=a.width.value-2*a.ui.padding,F&&a.timeline.play.value&&(e-=A+a.ui.padding),!F||G.length<Q.length||e<p*G.length){for(Y=(p=(e-(b=p))/Q.length)*Q.length,I=(H=1)+~~(b/(Y/G.length));I<G.length-1&&(G.length-1)%I!=0;)I++;G=G.filter(function(e,t){return t%I==0})}else H=0,(y=new Date(Q[0]))["set"+(C=a.data.time.stepType)](y["get"+C]()+Q.length),W.push(y);return S=new Date(f[0]),S=K(W,S),u=new Date(f[1]),H||u["set"+a.data.time.stepType](u["get"+a.data.time.stepType]()+1),u=K(W,u),J=W.map(Number),x=J.indexOf(+S),m=J.indexOf(+u),i=[S,u],O="start"===a.timeline.align?a.ui.padding:"end"===a.timeline.align?a.width.value-a.ui.padding-Y:a.width.value/2-Y/2,F&&a.timeline.play.value&&(O+=(A+a.ui.padding)/2),N=function(){return clearInterval(ne),ne=!1,w.call(_,"icon")},o=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(ne&&N(),i=r.extent(),(n=K(W,i[0]))===(t=K(W,i[1]))&&(x=J.indexOf(+n),n<i[0]||0===x?t=W[x+1]:n=W[x-1]),x=J.indexOf(+n),1<=(m=J.indexOf(+t))-x)e=[n,t];else if(x+1<=Q.length)e=[n,W[x+1]];else{for(e=[n],d=1;d<=1;)x+d<=Q.length?e.push(W[x+d]):e.unshift(W[x-(x+d-Q.length)]),d++;e=[e[0],e[e.length-1]]}return i=e,T.attr("fill",q),d3.select(this).call(r.extent(e))}},E=function(){var e;return e=m-x==Q.length-H?[]:(e=J.filter(function(e,t){return x<=t&&t<m+H})).map(function(e){return new Date(e)}),M(),a.self.time({solo:e}).draw()},s=function(){var e,t,n;if(null!==d3.event.sourceEvent&&(a.time.solo.value.length?(n=d3.extent(a.time.solo.value),t=J.indexOf(+K(W,n[0])),e=J.indexOf(+K(W,n[1])),t!==x||e!==m):m-x!=Q.length-H))return E()},z=function(e){return e.attr("width",A+1).attr("height",U+1).attr("fill",a.ui.color.primary.value).attr("stroke",a.ui.color.primary.value).attr("stroke-width",1).attr("x",O-A-1-a.ui.padding).attr("y",a.ui.padding)},(j=a.g.timeline.selectAll("rect.d3po_timeline_play").data(F&&a.timeline.play.value?[0]:[])).enter().append("rect").attr("class","d3po_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(z),j.transition().duration(a.draw.timing).call(z),j.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),w=a.g.timeline.selectAll("text.d3po_timeline_playIcon").data(F&&a.timeline.play.value?[0]:[]),_=function(e,t){var n;return t=a.timeline.play[t],n=$("font-awesome")?(t=t.awesome,"FontAwesome"):(t=t.fallback,"inherit"),e.style("font-family",n).text(t)},k=function(e){var t;return t=U/2+a.ui.padding+1,e.attr("fill",ie(a.ui.color.primary.value)).attr("stroke","none").attr(B).attr("x",O-(A-1)/2-a.ui.padding).attr("y",t).attr("dy","0.5ex").call(_,ne?"pause":"icon")},w.enter().append("text").attr("class","d3po_timeline_playIcon").call(k).style("pointer-events","none").attr("opacity",0),w.call(k).transition().duration(a.draw.timing).attr("opacity",1),w.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),(M=function(){return m-x==Q.length-H?(j.on(ee.hover,null).on(ee.click,null).transition().duration(a.draw.timing).attr("opacity",.3),w.transition().duration(a.draw.timing).attr("opacity",.3)):(j.on(ee.over,function(){return d3.select(this).style("cursor","pointer")}).on(ee.out,function(){return d3.select(this).style("cursor","auto")}).on(ee.click,function(){return ne?N():(w.call(_,"pause"),m===Q.length?(m-=x,x=0):(x++,m++),E(),ne=setInterval(function(){return m===Q.length-H?N():(x++,m++,E())},a.timeline.play.timing.value))}).transition().duration(a.draw.timing).attr("opacity",1),w.transition().duration(a.draw.timing).attr("opacity",1))})(),q=function(e){var t,n,r;return n=H?e<=i[1]:e<i[1],t=e>=i[0]&&n?(r=1,ie(a.ui.color.secondary.value)):(r=.5,ie(a.ui.color.primary.value)),H&&a.background.value&&"none"!==a.background.value&&(t=d3.rgb(ie(a.background.value))),"rgba("+(t=d3.rgb(t)).r+","+t.g+","+t.b+","+r+")"},(t=a.g.timeline.selectAll("rect.d3po_timeline_background").data(["background"])).enter().append("rect").attr("class","d3po_timeline_background").attr("shape-rendering","crispEdges").attr("width",Y+2).attr("height",U+2).attr("fill",a.ui.color.primary.value).attr("x",O-1).attr("y",a.ui.padding),t.transition().duration(a.draw.timing).attr("width",Y+2).attr("height",U+2).attr("fill",a.ui.color.primary.value).attr("x",O-1).attr("y",a.ui.padding),(D=a.g.timeline.selectAll("g#ticks").data(["ticks"])).enter().append("g").attr("id","ticks").attr("transform","translate("+a.width.value/2+","+a.ui.padding+")"),(n=a.g.timeline.selectAll("g#brush").data(["brush"])).enter().append("g").attr("id","brush"),(g=a.g.timeline.selectAll("g#labels").data(["labels"])).enter().append("g").attr("id","labels"),(T=g.selectAll("text").data(Q,function(e,t){return t})).enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),X=d3.time.scale().domain(d3.extent(W)).rangeRound([0,Y]),T.order().attr(B).text(function(e,t){return 0<=G.indexOf(+e)?L(e):""}).attr("opacity",function(e,t){return 0<=a.data.time.dataSteps.indexOf(t)?1:.4}).attr("fill",q).attr("transform",function(e,t){var n,r;return n=O+X(e),H||(n+=p/2),r=U/2+a.ui.padding+1,H&&(r+=U/2+Z),"translate("+Math.round(n)+","+Math.round(r)+")"}),T.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),r=d3.svg.brush().x(X).extent(i).on("brush",o).on("brushend",s),P=a.axes.discrete&&a[a.axes.discrete].value===a.time.value?a[a.axes.discrete].ticks.color:a.x.ticks.color,D.attr("transform","translate("+O+","+(a.ui.padding+1)+")").transition().duration(a.draw.timing).call(d3.svg.axis().scale(X).orient("top").ticks(function(){return W}).tickFormat("").tickSize(-U).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(e){return 0<=G.indexOf(+e)?P:te(P,a.background.value,.4,1)}),D.selectAll("path").attr("fill","none"),n.attr("transform","translate("+O+","+(a.ui.padding+1)+")").attr("opacity",1).call(r),T.attr("pointer-events","none"),n.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",U).attr("shape-rendering","crispEdges").on(ee.move,function(){var e;return e=a.timeline.hover.value,0<=["grab","grabbing"].indexOf(e)&&(e=re()+e),d3.select(this).style("cursor",e)}),n.selectAll("rect.extent").attr("opacity",.75).attr("height",U).attr("fill",a.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(ee.move,function(){var e;return e=a.timeline.hover.value,0<=["grab","grabbing"].indexOf(e)&&(e=re()+e),d3.select(this).style("cursor",e)}),a.timeline.handles.value?((c=n.selectAll("g.resize").selectAll("rect.d3po_handle").data(["d3po_handle"])).enter().insert("rect","rect").attr("class","d3po_handle"),c.attr("fill",a.timeline.handles.color).attr("transform",function(e){return"translate("+("resize e"===this.parentNode.className.baseVal?-a.timeline.handles.size:0)+",0)"}).attr("width",a.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",a.timeline.handles.opacity),n.selectAll("g.resize").selectAll("rect").attr("height",U)):n.selectAll("g.resize").remove(),R=a.g.timeline.node().getBBox(),0===a.margin.bottom&&(a.margin.bottom+=a.ui.padding),a.margin.bottom+=R.height+R.y,a.g.timeline.transition().duration(a.draw.timing).attr("transform","translate(0,"+Math.round(a.height.value-a.margin.bottom-a.ui.padding/2)+")"),a.margin.bottom+=a.ui.padding,a.dev.value?ae.time("drawing timeline"):void 0}}).call(this)},{"../../../client/css.js":36,"../../../client/pointer.js":38,"../../../client/prefix.js":39,"../../../color/mix.js":46,"../../../color/text.js":50,"../../../core/console/print.js":52,"../../../core/data/time.js":62,"../../../font/sizes.js":104,"../../../util/closest.js":209}],246:[function(e,t,n){var v=e("../../../client/pointer.js"),m=e("../../../core/fetch/value.js"),y=e("../../../core/console/print.js"),x=e("../../../client/rtl.js"),b=e("../../../textwrap/textwrap.js");t.exports=function(i){var r=i.size.value?i.size.value:"number"===i.color.type&&i.color.value;if(i.data.viz&&i.title.total.value&&!i.small)if(r){i.dev.value&&y.time("calculating total value");var e=i.data.pool;i.focus.value.length&&(e=i.data.viz.filter(function(e){return e[i.id.value]==i.focus.value[0]}));var t=i.aggs.value[r]||"sum";if(0!==(l=t.constructor===Function?t(e):(e=e.reduce(function(e,t){var n=m(i,t,r);return n instanceof Array?e=e.concat(n):e.push(n),e},[]),d3[t](e)))&&null!=l||(l=!1),"number"==typeof l){var n="";if(i.data.mute.length||i.data.solo.length||i.focus.value.length){var a=d3.sum(i.data.value,function(e){if(0<i.time.solo.value.length)var t=0<=i.time.solo.value.indexOf(m(i,e,i.time.value));else if(0<i.time.mute.value.length)t=i.time.solo.value.indexOf(m(i,e,i.time.value))<0;else t=!0;if(t)return m(i,e,r)});if(l<a){n=l/a*100;var o=i.format.value(a,{key:i.size.value,vars:i});n=" ("+i.format.value(n,{key:"share",vars:i})+" "+i.format.locale.value.dev.of+" "+o+")"}}l=i.format.value(l,{key:i.size.value,vars:i});var s=i.title.total.value;l=(s.prefix||i.format.value(i.format.locale.value.ui.total)+": ")+l,s.suffix&&(l+=s.suffix),l+=n}i.dev.value&&y.timeEnd("calculating total value")}else l=!1;else var l=!1;var u=[];if(i.footer.value&&u.push({link:i.footer.link,style:i.footer,type:"footer",value:i.footer.value}),!i.small){var c;if(i.title.value)"function"==typeof(c=i.title.value)&&(c=c(i.self)),u.push({link:i.title.link,style:i.title,type:"title",value:c});if(i.title.sub.value)"function"==typeof(c=i.title.sub.value)&&(c=c(i.self)),u.push({link:i.title.sub.link,style:i.title.sub,type:"sub",value:c});i.title.total.value&&l&&u.push({link:i.title.total.link,style:i.title.total,type:"total",value:l})}function d(e){e.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(e){return e.link?i.links.font.color:e.style.font.color}).attr("font-family",function(e){return e.link?i.links.font.family.value:e.style.font.family.value}).attr("font-weight",function(e){return e.link?i.links.font.weight:e.style.font.weight}).style("text-decoration",function(e){return e.link?i.links.font.decoration.value:e.style.font.decoration.value}).style("text-transform",function(e){return e.link?i.links.font.transform.value:e.style.font.transform.value})}i.dev.value&&y.time("drawing titles");var f=i.svg.selectAll("g.d3po_title").data(u,function(e){return e.type}),h=i.title.width||i.width.value-i.margin.left-i.margin.right;function p(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!x||"right"==t&&x?"start":"left"==t&&x||"right"==t&&!x?"end":t}f.enter().append("g").attr("class",function(e){return"d3po_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(d),f.each(function(e){var t=d3.select(this).select("text").call(d),n=p(e);b().align(n).container(t).height(i.height.value/2).size(!1).text(e.value).width(h).draw(),e.y=i.margin[e.style.position],i.margin[e.style.position]+=this.getBBox().height+2*e.style.padding}).on(v.over,function(e){e.link&&d3.select(this).transition().duration(i.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",i.links.hover.color).attr("font-family",i.links.hover.family.value).attr("font-weight",i.links.hover.weight).style("text-decoration",i.links.hover.decoration.value).style("text-transform",i.links.hover.transform.value)}).on(v.out,function(e){e.link&&d3.select(this).transition().duration(i.timing.mouseevents).style("cursor","auto").select("text").call(d)}).on(v.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(e){var t=e.style.position,n="top"==t?0+e.y:i.height.value-e.y;"bottom"==t?n-=this.getBBox().height+e.style.padding:n+=e.style.padding;var r=p(e);if("start"===r)var a=i.margin.left+i.title.padding;else{d3.select(this).select("text").node().getBBox().width;a="middle"===r?i.width.value/2-h/2:i.width.value-h-i.margin.right-i.title.padding}return"translate("+a+","+n+")"}),f.exit().transition().duration(i.draw.timing).attr("opacity",0).remove(),0<i.margin.top&&(i.margin.top+=i.title.padding),0<i.margin.bottom&&(i.margin.bottom+=i.title.padding);var g=i.title.height;g&&i.margin[i.title.position]<g&&(i.margin[i.title.position]=g),i.dev.value&&y.timeEnd("drawing titles")}},{"../../../client/pointer.js":38,"../../../client/rtl.js":40,"../../../core/console/print.js":52,"../../../core/fetch/value.js":67,"../../../textwrap/textwrap.js":203}],247:[function(e,t,n){(function(){var d,f;d=e("./labels.js"),f=e("./transform.js"),t.exports=function(e,t,n){var r,a,i,o,s,l,u,c;return t=t||e.zoom.bounds,"number"!=typeof n&&(n=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},c=e.types[e.type.value],r="auto"===(i=e.coords.fit.value)||c.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[i]/e["app_"+i],l=((s=d3.min([e.width.viz,e.height.viz]))-(c.zoom?2*e.coords.padding:0))/s/r,(a=e.zoom.behavior.scaleExtent())[0]!==a[1]&&t!==e.zoom.bounds||e.zoom.behavior.scaleExtent([l,16*l]),(o=e.zoom.behavior.scaleExtent()[1])<l&&(l=o),e.zoom.scale=l,u=[e.width.viz/2-e.zoom.size.width*l/2-t[0][0]*l,e.height.viz/2-e.zoom.size.height*l/2-t[0][1]*l],e.zoom.translate=u,e.zoom.behavior.translate(u).scale(l),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&d(e),f(e,n)}}).call(this)},{"./labels.js":249,"./transform.js":252}],248:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,a;return r=t.id.nesting.length-1,n=t.depth.value,a=t.id.nesting[n+1],!1===t.types[t.type.value].nesting?0:(e.d3po.merged||a in e&&n<r)&&(!e||a in e)?1:!(n===r&&0<n||e&&a&&!(a in e))||!t.small&&t.tooltip.html.value?0:-1}}).call(this)},{}],249:[function(e,n,t){(function(){var t;t=e("../../../core/console/print.js"),n.exports=function(n){var e,r;if(n.dev.value&&t.time("determining label visibility"),r=n.zoom.behavior.scaleExtent(),e=function(e){return e.attr("opacity",function(e){var t;return e=e||{},t=parseFloat(d3.select(this).attr("font-size"),10),e.visible=2<=t*(n.zoom.scale/r[1]),e.visible?1:0})},n.draw.timing?n.g.viz.selectAll("text.d3po_label").transition().duration(n.draw.timing).call(e):n.g.viz.selectAll("text.d3po_label").call(e),n.dev.value)return t.timeEnd("determining label visibility")}}).call(this)},{"../../../core/console/print.js":52}],250:[function(e,t,n){(function(){var f,h,p;f=e("./labels.js"),h=e("../../../tooltip/remove.js"),p=e("./transform.js"),t.exports=function(e){var t,n,r,a,i,o,s,l,u,c,d;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,i=d3.event.translate,a=d3.event.scale,r=e.zoom.bounds,s=0<(l=(e.width.viz-e.zoom.size.width*a)/2)?l:0,o=0<l?e.width.viz-l:e.width.viz,c=0<(d=(e.height.viz-e.zoom.size.height*a)/2)?d:0,u=0<d?e.height.viz-d:e.height.viz,i[0]+r[0][0]*a>s?i[0]=-r[0][0]*a+s:i[0]+r[1][0]*a<o&&(i[0]=o-r[1][0]*a),i[1]+r[0][1]*a>c?i[1]=-r[0][1]*a+c:i[1]+r[1][1]*a<u&&(i[1]=u-r[1][1]*a),e.zoom.behavior.translate(i).scale(a),e.zoom.translate=i,e.zoom.scale=a,"wheel"===n&&h(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===n?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return f(e)},t)):f(e)),p(e,"dblclick"===n?e.timing.transitions:0)}}).call(this)},{"../../../tooltip/remove.js":206,"./labels.js":249,"./transform.js":252}],251:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,a;r=e.zoom,t=t||d3.event,a=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,t.touches&&1<t.touches.length&&n||a||t.stopPropagation()}}).call(this)},{}],252:[function(e,t,n){(function(){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}}).call(this)},{}],253:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,Function,Object,String],mute:e(!0),solo:e(!0),spotlight:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":83}],254:[function(e,t,n){(function(){t.exports={accepted:[Object],objectAccess:!1,value:{}}}).call(this)},{}],255:[function(t,n,e){(function(){var e;e=t("../../core/methods/process/data.js"),n.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:e,value:!1}}).call(this)},{"../../core/methods/process/data.js":89}],256:[function(t,r,e){(function(){var n,e;n=t("../../core/methods/process/margin.js"),e=t("../../core/methods/rendering.js"),r.exports={background:{color:"#fafafa",rendering:e(),stroke:{color:"#ccc",width:1}},margin:{accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),n(t=e,this),t},value:10},mirror:{accepted:[Boolean],value:!1},ticks:{accepted:[Boolean],value:!0}}}).call(this)},{"../../core/methods/process/margin.js":92,"../../core/methods/rendering.js":94}],257:[function(e,t,n){(function(){t.exports={accepted:[String],value:"#ffffff"}}).call(this)},{}],258:[function(e,t,n){(function(){t.exports={accepted:[Function,String],value:!1}}).call(this)},{}],259:[function(n,r,e){(function(){var e,t;e=n("../../core/methods/filter.js"),t=n("../../color/scale.js"),r.exports={accepted:[!1,Array,Function,Object,String],domain:{accepted:[!1,Array],value:!1},focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:e(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3po","category10","category20","category20b","category20c"],process:function(e){return e instanceof Array?d3.scale.ordinal().range(e):"d3po"===e?t:"string"==typeof e?d3.scale[e]():e},value:"d3po"},solo:e(!0),secondary:"#e5b3bb",value:!1}}).call(this)},{"../../color/scale.js":48,"../../core/methods/filter.js":83}],260:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],261:[function(e,t,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],262:[function(e,t,n){(function(){var n;n=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return!1!==e&&("default"===t.container.id&&t.self.container({id:"d3po_"+ +new Date}),n(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):(this.selector=e,d3.select(e).append("div")))},value:!1}}).call(this)},{"../../util/d3selection.js":211}],263:[function(n,r,e){(function(){var e,t;e=n("../../core/methods/filter.js"),t=n("../../core/methods/process/data.js"),r.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:e(!1),padding:20,process:t,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:e(!1),threshold:{accepted:[Number],value:.9},value:!1}}).call(this)},{"../../core/methods/filter.js":83,"../../core/methods/process/data.js":89}],264:[function(e,t,n){(function(){var P,I,D;P=e("../../core/fetch/value.js"),I=e("../../client/ie.js"),D=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B;if(void 0===t.returned)return[];if((e=e||t.cols.value)instanceof Array?i=e:"string"==typeof e&&(i=[e]),s=[],T=[],F=t.title.value?("function"==typeof(F=t.title.value)&&(F=F(t.self)),250,(F=D(F)).substr(0,250)):"d3po Visualization Data",!0===e)for(i=d3.keys(t.data.keys),s.push(i),d=0,p=(S=t.data.value).length;d<p;d++){for(l=S[d],N=[],f=0,g=i.length;f<g;f++)B=l[r=i[f]],"string"===t.data.keys[r]&&(B='"'+B+'"'),N.push(B);s.push(N)}else{for(i||(i=[t.id.value],t.time.value&&i.push(t.time.value),t.size.value&&i.push(t.size.value),t.text.value&&i.push(t.text.value)),h=0,v=i.length;h<v;h++)r=i[h],T.push(t.format.value(r));for(s.push(T),_=0,m=(O=t.returned.nodes).length;_<m;_++)if(null!=(z=O[_]).values&&z.values instanceof Array)for(k=0,y=(C=z.values).length;k<y;k++){for(B=C[k],N=[],M=0,x=i.length;M<x;M++)a=i[M],"string"==typeof(B=P(t,B,a))&&(B='"'+B+'"'),N.push(B);s.push(N)}else{for(N=[],A=0,b=i.length;A<b;A++)a=i[A],N.push(P(t,z,a));s.push(N)}}for(o="",c=E=0,j=s.length;E<j;c=++E)u=(r=s[c]).join(","),o+=c<s.length?u+"\n":u;return n=new Blob([o],{type:"text/csv;charset=utf-8;"}),I?navigator.msSaveBlob(n,F+".csv"):(w=document.createElement("a"),q=URL.createObjectURL(n),w.setAttribute("href",q),w.setAttribute("download",F+".csv"),w.style="visibility:hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)),this.data=s,i},value:void 0}}).call(this)},{"../../client/ie.js":37,"../../core/fetch/value.js":67,"../../string/strip.js":178}],265:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return n(e,t,this)},solo:[],stroke:{width:1},value:!1}}).call(this)},{"../../core/methods/process/data.js":89}],266:[function(e,t,n){(function(){t.exports={accepted:[Function,Number],value:0}}).call(this)},{}],267:[function(e,t,n){(function(){t.exports={accepted:[!1,Function,Object],value:!1}}).call(this)},{}],268:[function(e,t,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],269:[function(e,t,n){var i=e("../../core/console/print.js"),o=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var n=t.format.locale.value.dev.setContainer;i.warning(n,"container")}else if(t.container.value.empty()){n=t.format.locale.value.dev.noContainer;var r=t.container.selector||"";i.warning(o(n,'"'+r+'"'),"container")}else t.dev.value&&i.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var a={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,a[t]=e}),e(a),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":52,"../../string/format.js":176}],270:[function(e,t,n){var r=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(n,r,a){var i=this;if(!i.value)return[];if(!r)r="id";var e=i.restricted||i.value,o=[];if(!n)return e;var t=e.filter(function(e){var t=!1;return e[i.source][r]==n?(t=!0,a&&o.push(e[i.target])):e[i.target][r]==n&&(t=!0,a&&o.push(e[i.source])),t});return a?o:t},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.js":89}],271:[function(e,t,n){(function(){t.exports={accepted:[Boolean,String],value:!1}}).call(this)},{}],272:[function(e,t,n){(function(){t.exports={accepted:[!1,Array,Function,Number,String],process:function(e){return!1===e?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}}).call(this)},{}],273:[function(a,i,e){(function(){var e,t,n,r;e=a("../../core/methods/font/align.js"),t=a("../../core/methods/font/decoration.js"),n=a("../../core/methods/font/family.js"),r=a("../../core/methods/font/transform.js"),i.exports={align:e(),color:"#444444",decoration:t(),family:n(),secondary:{align:e(),color:"#444444",decoration:t(),family:n(),size:12,spacing:0,transform:r(),weight:400},size:12,spacing:0,transform:r(),weight:400}}).call(this)},{"../../core/methods/font/align.js":84,"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],274:[function(r,a,e){(function(){var e,t,n;t=r("../../core/methods/font/family.js"),e=r("../../core/methods/font/decoration.js"),n=r("../../core/methods/font/transform.js"),a.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:e(),family:t(),size:11,transform:n(),weight:400},link:!1,padding:0,position:"bottom",value:!1}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],275:[function(e,t,n){(function(){var a,n,r,i;a=e("../../number/format.js"),n=e("../../core/locale/locale.js"),r=e("../../object/merge.js"),i=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=r(t,n[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,r;return(t=t||{}).locale||(t.locale=this.locale.value),(r=t.vars||{}).time&&r.time.value&&t.key===r.time.value?(n=e.constructor===Date?e:new Date(e),r.data.time.format(n)):"number"==typeof e?(this.number.value||a)(e,t):"string"==typeof e?(this.text.value||i)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":81,"../../number/format.js":173,"../../object/merge.js":174,"../../string/title.js":179}],276:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}}).call(this)},{}],277:[function(o,u,e){(function(){var e,t,n,r,a,i,s,l;e=o("../../../core/methods/font/align.js"),t=o("../../../core/methods/font/decoration.js"),n=o("../../../core/methods/font/family.js"),r=o("../../../core/methods/filter.js"),i=o("../../../core/methods/font/position.js"),s=o("../../../core/methods/rendering.js"),l=o("../../../core/methods/font/transform.js"),a={x:"bottom",x2:"top",y:"left",y2:"right"},u.exports=function(o){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:t(!1),family:n(""),size:!1,spacing:0,transform:l(!1),weight:!1},rendering:s(),value:!0},dataFilter:!0,domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:s(),value:!0},label:{accepted:[Boolean,String],fetch:function(e){return!0===this.value?e.format.value(e[o].value,{key:o,vars:e}):this.value},font:{color:"#444",decoration:t(),family:n(),size:12,spacing:0,transform:l(),weight:400},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:e("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:t(),family:n(),padding:{accepted:[Number],value:10},position:i("middle"),size:12,transform:l(),weight:400},process:Array,rendering:s(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"none"},rendering:s(),width:2,value:!0},mute:r(!0),orient:{accepted:["top","right","bottom","left"],value:a[o]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],process:function(e,t){var n,r,a,i;for(n=0,r=(a=["log","discrete","share"]).length;n<r;n++)(i=a[n])===e?t.axes[i]=o:t.axes[i]===o&&(t.axes[i]=!1);return"discrete"===e&&(t.axes.opposite=0===o.indexOf("x")?"y":"x"),e},value:"linear"},solo:r(!0),stacked:{accepted:[Boolean],process:function(e,t){return e||t.axes.stacked!==o?e&&(t.axes.stacked=o):t.axes.stacked=!1,e},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:t(),family:n(),size:10,spacing:0,transform:l(),weight:400},labels:{accepted:[Boolean,Array],value:!0},rendering:s(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}}).call(this)},{"../../../core/methods/filter.js":83,"../../../core/methods/font/align.js":84,"../../../core/methods/font/decoration.js":85,"../../../core/methods/font/family.js":86,"../../../core/methods/font/position.js":87,"../../../core/methods/font/transform.js":88,"../../../core/methods/rendering.js":94}],278:[function(e,t,n){(function(){t.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}}).call(this)},{}],279:[function(t,n,e){(function(){var e;e=t("../../core/methods/process/icon.js"),n.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:e,rotate:0,value:"fa-angle-left"},style:{accepted:[Object,String],value:"default"},value:!1}}).call(this)},{"../../core/methods/process/icon.js":91}],280:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[Array,String],dataFilter:!0,grouping:{accepted:[Boolean],value:!0},mute:e(!0),nesting:["id"],solo:e(!0),value:"id"}}).call(this)},{"../../core/methods/filter.js":83}],281:[function(r,a,e){(function(){var e,t,n;e=r("../../core/methods/font/decoration.js"),t=r("../../core/methods/font/family.js"),n=r("../../core/methods/font/transform.js"),a.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return 0<=(t=["left","center","right"].indexOf(e))&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:e(),family:t(),size:11,transform:n(),weight:400},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],282:[function(t,n,e){(function(){var e;e=t("../../core/methods/font/family.js"),n.exports={accepted:[Boolean],align:"middle",data:{accepted:[Boolean],value:!0},filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:e(),size:[8,14],weight:400},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text",Function],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},title:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":86}],283:[function(r,a,e){(function(){var e,t,n;e=r("../../core/methods/font/decoration.js"),t=r("../../core/methods/font/family.js"),n=r("../../core/methods/font/transform.js"),a.exports={font:{color:"#444444",decoration:e(),family:t(),transform:n(),weight:400},hover:{color:"#444444",decoration:e(),family:t(),transform:n(),weight:400}}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],284:[function(e,t,n){arguments[4][125][0].apply(n,arguments)},{"../../core/methods/process/margin.js":92,dup:125}],285:[function(r,a,e){(function(){var e,t,n;e=r("../../core/methods/font/decoration.js"),t=r("../../core/methods/font/family.js"),n=r("../../core/methods/font/transform.js"),a.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},font:{color:"#444",decoration:e(),family:t(),size:16,transform:n(),weight:400},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],286:[function(e,t,n){(function(){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}}).call(this)},{}],287:[function(t,n,e){(function(){var e;e=t("../../core/methods/process/data.js"),n.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:e,value:!1}}).call(this)},{"../../core/methods/process/data.js":89}],288:[function(e,t,n){(function(){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},sort:{accepted:["asc","desc"],value:"desc"},value:!1}}).call(this)},{}],289:[function(e,t,n){(function(){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,r){var t,n,a;return!!e&&(t=null,n=function(){var e,t,n;if(n=(t=r.container.value.node().parentNode.getBoundingClientRect()).width,e=t.height,r.self.width(n),r.self.height(e),r.width.changed||r.height.changed)return r.self.draw()},d3.select(window).on("resize."+r.container.id,(a=this,function(e){return clearTimeout(t),t=setTimeout(n,a.timeout)})),e)}}}).call(this)},{}],290:[function(t,n,e){(function(){var e;e=t("../../core/methods/rendering.js"),n.exports={accepted:function(e){var t;return!(t=e.types[e.type.value].shapes)||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],value:"linear"},rendering:e(),value:!1}}).call(this)},{"../../core/methods/rendering.js":94}],291:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,mute:e(!0),scale:{accepted:[Function],domain:{min:{accepted:[!1,Number],value:!1},max:{accepted:[!1,Number],value:!1}},range:{max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3}},value:d3.scale.sqrt()},solo:e(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":83}],292:[function(e,t,n){(function(){t.exports={value:!1}}).call(this)},{}],293:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[!1,Function,Object,String],mute:e(!0),solo:e(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":83}],294:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[Array,Boolean,Function,Object,String],nesting:!0,mute:e(!0),solo:e(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":83}],295:[function(t,n,e){(function(){var e;e=t("../../core/methods/filter.js"),n.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,fixed:{accepted:[Boolean],value:!1},format:{accepted:[!1,Array,Function,String],value:!1},mute:e(!1),solo:e(!1),value:!1}}).call(this)},{"../../core/methods/filter.js":83}],296:[function(e,t,n){(function(){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:"►"},pause:{accepted:[!1,String],awesome:"",fallback:"❚❚"},timing:{accepted:[Number],value:1500},value:!0},value:!0}}).call(this)},{}],297:[function(e,t,n){(function(){t.exports={mouseevents:60,transitions:600,ui:200}}).call(this)},{}],298:[function(a,i,e){(function(){var e,t,r,n;e=a("../../core/methods/font/decoration.js"),t=a("../../core/methods/font/family.js"),n=a("../../core/methods/font/transform.js"),r=a("../../string/strip.js"),i.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:e(),family:t(),size:16,transform:n(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=r(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:e(),family:t(),size:12,transform:n(),weight:400},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],font:{align:"center",color:"#444444",decoration:e(),family:t(),size:12,transform:n(),weight:400,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}}).call(this)},{"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88,"../../string/strip.js":178}],299:[function(n,r,e){(function(){var e,t;e=n("../../core/methods/font/family.js"),t=n("../../core/methods/font/transform.js"),r.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#f4f4f4",children:{accepted:[Boolean,Number],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ddd",opacity:.8},extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:e(),size:12,transform:t(),weight:400},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],300:[function(e,t,n){arguments[4][293][0].apply(n,arguments)},{"../../core/methods/filter.js":83,dup:293}],301:[function(e,t,n){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"treemap"}}).call(this)},{}],302:[function(a,i,e){(function(){var e,t,n,r;n=a("../../core/methods/font/family.js"),e=a("../../core/methods/font/align.js"),t=a("../../core/methods/font/decoration.js"),r=a("../../core/methods/font/transform.js"),i.exports={accepted:[Array,Boolean],align:e("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:t(),family:n(),size:11,transform:r(),weight:400},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}}).call(this)},{"../../core/methods/font/align.js":84,"../../core/methods/font/decoration.js":85,"../../core/methods/font/family.js":86,"../../core/methods/font/transform.js":88}],303:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}}).call(this)},{}],304:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],value:!0},value:!0}},{}],305:[function(t,a,e){(function(){var e,d,f,n,h,p,r;t("../../util/closest.js"),d=t("../../core/fetch/value.js"),f=t("./helpers/graph/draw.js"),n=t("./helpers/graph/nest.js"),h=t("../../array/sort.js"),p=t("./helpers/graph/stack.js"),r=t("../../core/data/threshold.js"),(e=function(e){var t,n,r,a,i,o,s,l,u,c;if(f(e,{buffer:e.axes.opposite,zero:!0}),0<=e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0))return[];for(n=h(e.data.viz,null,null,null,e),r=e[e.axes.discrete],l=e[e.axes.opposite],a=0,o=n.length;a<o;a++)for((u=n[a]).d3po||(u.d3po={}),i=0,s=(c=u.values).length;i<s;i++)(t=c[i]).d3po||(t.d3po={}),t.d3po.x=r.scale.viz(d(e,t,r.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=l.scale.viz(d(e,t,l.value)),t.d3po.y+=e.axes.margin.viz.top,t.d3po.merged instanceof Array&&(u.d3po.merged||(u.d3po.merged=[]),u.d3po.merged=u.d3po.merged.concat(t.d3po.merged)),t.d3po.text&&!u.d3po.text&&(u.d3po.text=t.d3po.text);return p(e,n)}).filter=function(e,t){return n(e,r(e,t,e[e.axes.discrete].value))},e.requirements=["data","x","y"],e.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},e.shapes=["area"],e.threshold=function(e){return 20/e.height.viz},e.tooltip="static",a.exports=e}).call(this)},{"../../array/sort.js":34,"../../core/data/threshold.js":61,"../../core/fetch/value.js":67,"../../util/closest.js":209,"./helpers/graph/draw.js":313,"./helpers/graph/nest.js":319,"./helpers/graph/stack.js":320}],306:[function(t,r,e){(function(){var e,L,V,R,n,U,H,Y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};L=t("../../util/buckets.js"),V=t("../../core/fetch/value.js"),R=t("./helpers/graph/draw.js"),n=t("./helpers/graph/nest.js"),U=t("./helpers/graph/stack.js"),H=t("../../util/uniques.js"),(e=function(e){var t,n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D;if(u="x"===(o=e.axes.discrete)?"height":"width",P="x"===o?"width":"height",S=e.axes.opposite,r="x"===o?"left":"top",k="x"===o?"top":"left",R(e,{buffer:!0,zero:S}),0<=e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0))return[];if(w=e.data.viz,e.axes.stacked)for(f=0,g=w.length;f<g;f++)N=w[f],U(e,N.values);for(q=e.axes[P]/e[e.axes.discrete].ticks.values.length,(C=e[e.axes.discrete].padding.value)<1&&(C*=q),q<2*C&&(C=.1*q),b=q-2*C,e.axes.stacked||(e[o].persist.position.value?(F=e[o].value,z=q/2-(b/=l=0<=Y.call(e.id.nesting,F)?d3.max(w,function(e){return e.values.length}):H(w,e.id.value,V,e).length)/2-C,I=d3.scale.ordinal(),1===l?I.domain([0]).range([0]):I.domain([0,l-1]).range([-z,z])):I=d3.scale.linear()),i=[],M=(A=e[S]).scale.viz.domain().slice(),0===S.indexOf("y")&&(M=M.reverse()),M[0]<=0&&0<=M[1]?D=0:M[0]<0?D(d3.max(M)):D=d3.min(M),e[o].persist.position.value&&!e.axes.stacked&&(d=H(d3.merge(w.map(function(e){return e.values})),e.id.value,V,e,e.id.value,!1),I.domain(d),1===d.length?I.range([0]):I.range(L(I.range(),d.length))),x=d3.max(w,function(e){return e.values.length}),h=0,v=w.length;h<v;h++)for(O=w[h],e.axes.stacked?(t=1,_=b):e[o].persist.position.value?(t=l,_=b):(t=O.values.length,z=e[o].persist.size.value?q/2-(_=b/x)/2*(x-t)-_/2-C:q/2-(_=b/t)/2-C,I.domain([0,t-1]),I.range([-z,z])),c=p=0,m=(T=O.values).length;p<m;c=++p){if(a=T[c],A=e[S],j=e.axes.stacked?0:e[o].persist.position.value?I(V(e,a,e.id.value)):I(c%t),e.axes.stacked)B=a.d3po[S],n=a.d3po[S+"0"];else{if(null===(E=V(e,a,A.value))&&(A=e[S+"2"],E=V(e,a,A.value)),0===E)continue;"log"===A.scale.value&&(D=E<0?-1:1),B=A.scale.viz(E),n=A.scale.viz(D)}s=V(e,a,e[o].value),a.d3po[o]=e[o].scale.viz(s),a.d3po[o]+=e.axes.margin.viz[r]+j,y=n-B,a.d3po[S]=n-y/2,e.axes.stacked||(a.d3po[S]+=e.axes.margin.viz[k]),delete a.d3po.r,a.d3po[P]=_,a.d3po[u]=Math.abs(y),a.d3po.init={},a.d3po.init[S]=A.scale.viz(D),a.d3po.init[S]-=a.d3po[S],a.d3po.init[S]+=e.axes.margin.viz[k],a.d3po.init[P]=a.d3po[P],e.text.value?delete a.d3po.label:a.d3po.label=!1,i.push(a)}return i}).filter=function(e,t){return n(e,t,e[e.axes.discrete].value)},e.requirements=["data","x","y"],e.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},e.shapes=["square"],r.exports=e}).call(this)},{"../../core/fetch/value.js":67,"../../util/buckets.js":207,"../../util/uniques.js":213,"./helpers/graph/draw.js":313,"./helpers/graph/nest.js":319,"./helpers/graph/stack.js":320}],307:[function(n,r,e){(function(){var e,K,t,$,ee,te;K=n("../../core/fetch/value.js"),t=n("./helpers/graph/draw.js"),$=n("../../string/format.js"),ee=n("../../string/strip.js"),te=n("../../util/uniques.js"),(e=function(O){var C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,e,J,W,Q;return t(O,{buffer:!0}),0<=O.x.domain.viz.concat(O.y.domain.viz).indexOf(void 0)?[]:(F=O.axes.discrete,H=O.axes.opposite,N="x"===F?O.axes.margin.viz.left:O.axes.margin.viz.top,U="x"===H?O.axes.margin.viz.left:O.axes.margin.viz.top,T="x"===F?"height":"width",Q="x"===F?"width":"height",J=O.axes[Q]/O[F].ticks.values.length,e="number"==typeof(e=O.size.value)?e:100,J=d3.min([J-2*O.labels.padding,e]),(V=O.type.mode.value)instanceof Array||(V=[V,V]),R=!(D=function(e){var t,n,r;for(t in n={},O.data.keys)r=te(e,t,K,O),n[t]=1===r.length?r[0]:r;return n}),P=[],q=O.format.value(O.format.locale.value.ui.iqr),B=O.format.value(O.format.locale.value.ui.max),L=O.format.value(O.format.locale.value.ui.min),Y=O.format.value(O.format.locale.value.ui.percentile),C=O.format.value(O.format.locale.value.ui.tukey_bottom),W=O.format.value(O.format.locale.value.ui.tukey_top),G=O.format.value(O.format.locale.value.ui.quartile_first),X=O.format.value(O.format.locale.value.ui.quartile_third),I=O.format.value(O.format.locale.value.ui.median),Z=[],d3.nest().key(function(e){return K(O,e,O[F].value)}).rollup(function(e){var t,n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S;for(b=O[H].scale.viz,(A=e.map(function(e){return K(O,e,O[H].value)})).sort(function(e,t){return e-t}),te(A),l=d3.quantile(A,.25),g=d3.quantile(A,.5),j=d3.quantile(A,.75),w={},"tukey"===V[1]?(_=j-1.5*(l-j),k=W):"extent"===V[1]?(_=d3.max(A),k=B):"number"==typeof V[1]&&(_=d3.quantile(A,(100-V[1])/100),k=$(Y,V[1])),_=d3.min([d3.max(A),_]),O.tooltip.extent.value&&(w[k]={key:O[H].value,value:_}),O.tooltip.iqr.value&&(w[X]={key:O[H].value,value:j},w[I]={key:O[H].value,value:g},w[G]={key:O[H].value,value:l}),"tukey"===V[0]?(t=l+1.5*(l-j),n=C):"extent"===V[0]?(t=d3.min(A),n=L):"number"==typeof V[0]&&(t=d3.quantile(A,V[0]/100),k=$(Y,V[0])),t=d3.max([d3.min(A),t]),O.tooltip.extent.value&&(w[n]={key:O[H].value,value:t}),a=[],r=[],z=[],x=[],u=0,h=e.length;u<h;u++)i=e[u],l<=(M=K(O,i,O[H].value))&&M<=j?a.push(i):t<=M&&M<l?r.push(i):M<=_&&j<M?z.push(i):x.push(i);for(d=K(O,e[0],O[F].value),E=O[F].scale.viz(d),E+=N,f=O.format.value(d,{key:O[F].value,vars:O}),d.constructor===Date&&(d=d.getTime()),d=ee(d),(a=D(a)).d3po={color:"white",id:"box_"+d,init:{},label:!1,shape:"square",stroke:"#444",text:$(q,f)},a.d3po[Q]=J,a.d3po.init[Q]=J,a.d3po[T]=Math.abs(b(l)-b(j)),a.d3po[F]=E,S=d3.min([b(l),b(j)])+a.d3po[T]/2,S+=U,a.d3po[H]=S,a.d3po.tooltip=w,Z.push(a),m={d3po:{id:"median_line_"+d,position:"height"==T?"top":"right",shape:"whisker",static:!0}},f={background:"#fff",names:[O.format.value(g,{key:O[H].value,vars:O})],padding:0,resize:!1,x:0,y:0},o=Math.abs(b(g)-b(l)),s=Math.abs(b(g)-b(j)),y=2*d3.min([o,s]),v=2*O.data.stroke.width+2*O.labels.padding,f["width"==Q?"w":"h"]=J-v,f["width"==T?"w":"h"]=y-v,m.d3po.label=f,m.d3po[Q]=J,m.d3po[F]=E,m.d3po[H]=b(g)+U,Z.push(m),(r=D(r)).d3po={id:"bottom_whisker_line_"+d,offset:a.d3po[T]/2,position:"height"==T?"bottom":"left",shape:"whisker",static:!0},"x"===H&&(r.d3po.offset*=-1),r.d3po[T]=Math.abs(b(t)-b(l)),r.d3po[Q]=J,r.d3po[F]=E,r.d3po[H]=S,Z.push(r),(z=D(z)).d3po={id:"top_whisker_line_"+d,offset:a.d3po[T]/2,position:"height"==T?"top":"right",shape:"whisker",static:!0},"y"===H&&(z.d3po.offset*=-1),z.d3po[T]=Math.abs(b(_)-b(j)),z.d3po[Q]=J,z.d3po[F]=E,z.d3po[H]=S,Z.push(z),c=0,p=x.length;c<p;c++)(i=x[c]).d3po[F]=E,i.d3po[H]=b(K(O,i,O.y.value)),i.d3po[H]+=U,i.d3po.r=4,i.d3po.shape=O.shape.value;return R=!x.length&&_-t==0,P.push(g),Z=Z.concat(x),e}).entries(O.data.viz),R&&1===te(P).length?[]:Z)}).modes=["tukey","extent",Array,Number],e.requirements=["data","x","y"],e.shapes=["circle","square"],e.setup=function(e){var t;if(!e.axes.discrete)return t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})},r.exports=e}).call(this)},{"../../core/fetch/value.js":67,"../../string/format.js":176,"../../string/strip.js":178,"../../util/uniques.js":213,"./helpers/graph/draw.js":313}],308:[function(t,n,e){(function(){var q,e,B,P,I,D,L;q=t("../../array/sort.js"),I=t("../../core/fetch/value.js"),B=t("../../core/fetch/color.js"),P=t("../../core/fetch/text.js"),L=t("../../color/legible.js"),D=t("../../core/data/group.js"),(e=function(t){var e,n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T;if(u=D(t,t.data.viz),j=(o=(u=q(u,null,null,null,t)).length)<4?(r=o,1):(w=t.width.viz/t.height.viz,r=Math.ceil(Math.sqrt(o*w)),Math.ceil(Math.sqrt(o/w))),0<o)for(;o<=(j-1)*r;)j--;for(n=t.width.viz/r,e=t.height.viz/j,s=t.size.value?(S=t.size.scale.domain.min.value,E=t.size.scale.domain.max.value,["number"==typeof S?S:d3.min(t.data.viz,function(e){return I(t,e,t.size.value,t.id.value,"min")}),"number"==typeof E?E:d3.max(t.data.viz,function(e){return I(t,e,t.size.value,t.id.value)})]):[0,0],5,k=d3.min([n,e])/2-10,k-=p=t.labels.value&&!t.small&&40<=k?d3.max([20,d3.min([.25*k,50])]):0,z=d3.min([k,t.size.scale.range.min.value]),_=t.size.scale.value.domain(s).rangeRound([z,k]),x=d3.layout.pack().children(function(e){return e.values}).padding(5).radius(function(e){return _(e)}).size([n-10,e-10-p]).value(function(e){return e.value}),i=[],c=d=b=0,g=u.length;d<g;c=++d){for(a=u[c],A=x.nodes(a),C=n*c%t.width.viz,T=e*b,f=0,v=A.length;f<v;f++)(M=A[f]).children?(y={d3po:{}})[t.id.value]=M.key:y=M.d3po,y.d3po.depth=t.id.grouping.value?M.depth:t.depth.value,y.d3po.x=M.x,y.d3po.xOffset=C,y.d3po.y=M.y,y.d3po.yOffset=T+p,y.d3po.r=M.r,i.push(y);(c+1)%r==0&&b++}for(l=k/d3.max(i,function(e){return e.d3po.r}),O=x.size()[0]/2,F=x.size()[1]/2,h=0,m=i.length;h<m;h++)(a=i[h]).d3po.x=(a.d3po.x-O)*l+O+a.d3po.xOffset,a.d3po.y=(a.d3po.y-F)*l+F+a.d3po.yOffset,a.d3po.r=a.d3po.r*l,delete a.d3po.xOffset,delete a.d3po.yOffset,a.d3po.static=a.d3po.depth<t.depth.value&&t.id.grouping.value,!p||0!==a.d3po.depth&&!1!==t.id.grouping.value?delete a.d3po.label:(a.d3po.text=P(t,a[t.id.value],a.d3po.depth),N=p>3*t.labels.padding?t.labels.padding:0,a.d3po.label={x:0,y:-(k+N+p/2),w:2*k,h:p-N,padding:0,resize:!0,color:L(B(t,a,a.d3po.depth)),force:!0});return i.sort(function(e,t){return e.d3po.depth-t.d3po.depth})}).fill=!0,e.requirements=["data"],e.scale=1.05,e.shapes=["circle","donut"],n.exports=e}).call(this)},{"../../array/sort.js":34,"../../color/legible.js":44,"../../core/data/group.js":57,"../../core/fetch/color.js":63,"../../core/fetch/text.js":66,"../../core/fetch/value.js":67}],309:[function(n,r,e){(function(){var l,e,t,u;l=n("../../array/comparator.js"),e=n("../../core/data/threshold.js"),u=n("../../core/data/group.js"),(t=function(n){var e,t,r,a,i,o,s;for(t=d3.layout.pie().value(function(e){return e.value}).sort(function(e,t){return n.order.value?l(e.d3po,t.d3po,[n.order.value],n.order.sort.value,[],n):1<n.id.nesting.length?l(e.d3po,t.d3po,n.id.nesting.concat([n.size.value]),void 0,[],n):l(e.d3po,t.d3po,[n.size.value],"desc",[],n)})(u(n,n.data.viz,[])),s=[],o=d3.min([n.width.viz,n.height.viz])/2-2*n.labels.padding,r=0,i=t.length;r<i;r++)(a=(e=t[r]).data.d3po).d3po.startAngle=e.startAngle,a.d3po.endAngle=e.endAngle,a.d3po.r_inner=o/3,a.d3po.r_outer=o,a.d3po.x=n.width.viz/2,a.d3po.y=n.height.viz/2,a.d3po.share=(e.endAngle-e.startAngle)/(2*Math.PI),s.push(a);return s}).filter=e,t.requirements=["data","size"],t.shapes=["arc"],t.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},r.exports=t}).call(this)},{"../../array/comparator.js":32,"../../core/data/group.js":57,"../../core/data/threshold.js":61}],310:[function(e,t,n){(function(){var e;(e=function(t){var e,n,r,a,i;return e=t.coords.value,r=t.coords.key||d3.keys(e.objects)[0],n=topojson.feature(e,e.objects[r]).features,i=t.coords.solo.value,a=t.coords.mute.value,n=n.filter(function(e){return e[t.id.value]=e.id,i.length?0<=i.indexOf(e.id):!a.length||a.indexOf(e.id)<0})}).libs=["topojson"],e.nesting=!1,e.requirements=["coords"],e.scale=1,e.shapes=["coordinates"],e.zoom=!0,t.exports=e}).call(this)},{}],311:[function(n,r,e){(function(){var l,e,u,t;l=n("../../array/comparator.js"),e=n("../../core/data/threshold.js"),u=n("../../core/data/group.js"),(t=function(n){var e,t,r,a,i,o,s;for(t=d3.layout.pie().value(function(e){return e.value}).startAngle(function(e){return Math.PI/180*-90}).endAngle(function(e){return Math.PI/180*90}).sort(function(e,t){return n.order.value?l(e.d3po,t.d3po,[n.order.value],n.order.sort.value,[],n):1<n.id.nesting.length?l(e.d3po,t.d3po,n.id.nesting.concat([n.size.value]),void 0,[],n):l(e.d3po,t.d3po,[n.size.value],"desc",[],n)})(u(n,n.data.viz,[])),s=[],o=d3.min([n.width.viz/2,n.height.viz])-2*n.labels.padding,r=0,i=t.length;r<i;r++)(a=(e=t[r]).data.d3po).d3po.startAngle=e.startAngle,a.d3po.endAngle=e.endAngle,a.d3po.r_inner=o/3,a.d3po.r_outer=o,a.d3po.x=n.width.viz/2,a.d3po.y=n.height.viz,a.d3po.share=(e.endAngle-e.startAngle)/(2*Math.PI),s.push(a);return s}).filter=e,t.requirements=["data","size"],t.shapes=["arc"],t.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},r.exports=t}).call(this)},{"../../array/comparator.js":32,"../../core/data/group.js":57,"../../core/data/threshold.js":61}],312:[function(e,t,n){(function(){var h,p,g;h=e("../../../../core/fetch/color.js"),p=e("../../../../color/legible.js"),g=e("../../../../core/console/print.js"),t.exports=function(n){var r,e,t,a,i,o,s,l,u,c,d,f;for(r=n.axes,s=n.axes.margin.viz,f=2*(a=r.stacked||!r.ticks.value?[]:n.data.viz).length>n.data.large?0:n.draw.timing,u=function(e,t){return 0===t.indexOf("y")?e.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3po.y-s.top}).attr("y2",function(e){return e.d3po.y-s.top}):e.attr("x1",function(e){return e.d3po.x-s.left}).attr("x2",function(e){return e.d3po.x-s.left}).attr("y1",r.height+2).attr("y2",r.height+8),e.style("stroke",function(e){return p(h(n,e))}).style("stroke-width",n.data.stroke.width).attr("shape-rendering",n.shape.rendering.value)},n.dev.value&&g.time("creating axis tick groups"),(d=n.group.select("g#d3po_graph_plane").selectAll("g.d3po_data_tick").data(a,function(e){var t;return t=r.discrete?"_"+e.d3po[r.discrete]:"","tick_"+e[n.id.value]+"_"+e.d3po.depth+t})).enter().append("g").attr("class","d3po_data_tick").attr("opacity",0),n.dev.value&&g.timeEnd("creating axis tick groups"),i=0,o=(l=["x","y"]).length;i<o;i++)e=l[i],n.dev.value&&f&&g.time("creating "+e+" ticks"),t=f&&e!==r.discrete?a:[],c=d.selectAll("line.d3po_data_"+e).data(t,function(e){return"tick_"+e[n.id.value]+"_"+e.d3po.depth}),n.dev.value&&f&&g.timeEnd("creating "+e+" ticks"),n.dev.value&&f&&g.time("styling "+e+" ticks"),0<f?c.transition().duration(f).call(u,e):c.call(u,e),c.enter().append("line").attr("class","d3po_data_"+e).call(u,e),n.dev.value&&f&&g.timeEnd("styling "+e+" ticks");0<f?(d.transition().duration(f).attr("opacity",1),d.exit().transition().duration(f).attr("opacity",0).remove()):(d.attr("opacity",1),d.exit().remove())}}).call(this)},{"../../../../color/legible.js":44,"../../../../core/console/print.js":52,"../../../../core/fetch/color.js":63}],313:[function(e,t,n){(function(){var n,r,a,i;n=e("./includes/axes.js"),r=e("./includes/svg.js"),a=e("./includes/mouse.js"),i=e("./includes/plot.js"),t.exports=function(e,t){void 0===t&&(t={}),n(e,t),i(e,t),r(e,t),e.mouse.viz=!0===t.mouse&&a}}).call(this)},{"./includes/axes.js":314,"./includes/mouse.js":316,"./includes/plot.js":317,"./includes/svg.js":318}],314:[function(e,t,n){(function(){var N,p,l,g,v,o,F,m,y,x,b,T;N=e("../../../../../array/sort.js"),g=e("./buffer.js"),l=e("../../../../../util/buckets.js"),o=e("../../../../../core/fetch/data.js"),F=e("../../../../../core/fetch/value.js"),x=e("../../../../../core/console/print.js"),T=e("../../../../../util/uniques.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h;for(!(a=v(e))&&e.axes.dataset||(e.axes.dataset=m(e)),e.axes.scale=!(!t.buffer||!0===t.buffer)&&b(e,t.buffer),o=0,l=(n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;o<l;o++)c=0===(r=n[o]).indexOf("x")?"y":"x",f=e.order.changed||e.order.sort.changed||!0===e.order.value&&e[c].changed,e[r].value&&(!e[r].ticks.values||a||f||e[r].value===e.time.value&&e.time.fixed.value)&&(e.dev.value&&x.time("calculating "+r+" axis"),e[r].reset=!0,e[r].ticks.values=!1,r===e.axes.discrete&&e[r].value!==e.time.value&&(e[r].ticks.values=T(e.axes.dataset,e[r].value,F,e)),h=!0===t.zero||0===r.indexOf(t.zero),d=p(e,r,h),0===r.indexOf("y")&&(d=d.reverse()),e[r].scale.viz=y(e,r,d),e[r].domain.viz=d,e.dev.value&&x.timeEnd("calculating "+r+" axis"));if(e.axes.mirror.value&&(i=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=i,e.x.scale.viz.domain(i),i=i.slice().reverse(),e.y.domain.viz=i,e.y.scale.viz.domain(i)),t.buffer)for(s=0,u=n.length;s<u;s++)(r=n[s])!==e.axes.discrete&&g(e,r,t.buffer)},v=function(e){var t,n,r,a,i,o,s,l,u,c,d,f;if(n=(n=!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed))||(e.id.solo.changed||e.id.mute.changed))return n;for(a=0,s=(r=["data","time","id","depth","type","width","height","x","y","x2","y2"]).length;a<s;a++)if(e[r[a]].changed){n=!0;break}if(n)return n;for(f=["mute","range","scale","solo","stacked","zerofill"],i=0,l=(c=["x","y","x2","y2"]).length;i<l;i++)for(t=c[i],o=0,u=f.length;o<u;o++)if(d=f[o],e[t][d].changed){n=!0;break}return n},m=function(r){var a,i;return r.time.fixed.value?(i=d3.range(0,r.id.nesting.length),d3.merge(d3.merge([function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)a=i[e],n.push(o(r,"all",a));return n}()]))):r.data.viz},p=function(n,r,e,t){var a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C;if(j=0===r.indexOf("x")?"y":"x",n[r].range.value&&2===n[r].range.value.length)return n[r].range.value.slice();if("share"===n[r].scale.value)return n[r].ticks.values=d3.range(0,1.1,.1),[0,1];if(n[r].stacked.value){for(E=[],d=0,g=(w=n.axes.dataset).length;d<g;d++)(c=w[d]).values?E=E.concat(c.values):E.push(c);return l=d3.nest().key(function(e){return F(n,e,n[j].value)}).rollup(function(e){var t;return t=d3.sum(e,function(e){var t;return 0<(t=F(n,e,n[r].value))?t:0}),[d3.sum(e,function(e){var t;return(t=F(n,e,n[r].value))<0?t:0}),t]}).entries(E),C=d3.merge(l.map(function(e){return e.values})),d3.extent(C)}if(n[r].value===n.time.value)return n.time.solo.value.length?d3.extent(n.time.solo.value).map(function(e){return e.constructor!==Date?(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(n.data.time.ticks);for(C=[],f=0,v=(_=n.axes.dataset).length;f<v;f++)c=_[f],(O=F(n,c,n[r].value))instanceof Array?C=C.concat(O):C.push(O);if(C=C.filter(function(e){return null!==e}),r!==n.axes.discrete)return C.sort(function(e,t){return e-t}),"log"===n[r].scale.value&&(0===C[0]&&(C[0]=1),0===C[C.length-1]&&(C[C.length-1]=-1)),e&&(s=C.every(function(e){return 0<e}),o=C.every(function(e){return e<0}),(s||o)&&(b=s?1:-1,C.push("log"===n[r].scale.value?b:0))),d3.extent(C);if(A=!0===n.order.value?n[j].value:n.order.value){for(M=n.order.sort.value,i=typeof(a=n.order.agg.value||n.aggs.value[A]||"max"),u=C.reduce(function(e,t){return e[t]=[],e},{}),p=0,m=(k=n.axes.dataset).length;p<m;p++)if((c=k[p]).values)for(x=0,y=(z=c.values).length;x<y;x++)S=z[x],u[F(n,S,n[r].value)].push(F(n,S,A));else u[F(n,c,n[r].value)].push(F(n,c,A));for(h in u)S=u[h],"string"==i?u[h]=d3[a](S):"function"==i&&(u[h]=a(S,A));return u=(u=N(d3.entries(u),"value",M)).reduce(function(e,t){return e.push(t.key),e},[])}return C[0].constructor===String?T(C).sort(function(e,t){return""+e.localeCompare(""+t)}):T(C).sort(function(e,t){return e-t})},y=function(e,t,n){var r,a,i,o,s;return a=0===t.indexOf("x")?e.width.viz:e.height.viz,o=e[t].scale.value,0<=["discrete","share"].indexOf(o)&&(o="linear"),s=10,"string"==typeof n[0]?(o="ordinal",r=l([0,a],n.length)):(r=[0,a],"linear"===e[t].scale.value&&(s=Math.floor(a/(4*e[t].ticks.font.size)))),e[t].scale.ticks=s,"clamp"in(i=d3.scale[o]().domain(n).range(r))&&i.clamp(!0),i},b=function(t,n){var e,r,a;return!0===n&&(n="size"),n in t&&(n=t[n].value),"function"==typeof(a=t.size.scale.range.min.value)&&(a=a(t)),"function"==typeof(r=t.size.scale.range.max.value)&&(r=r(t)),!1===n?t.size.scale.value.domain([0,1]).rangeRound([r,r]):"number"==typeof n?t.size.scale.value.domain([0,1]).rangeRound([n,n]):n?(t.dev.value&&x.time("calculating buffer scale"),(e=d3.extent(t.axes.dataset,function(e){return F(t,e,n)||0}))[0]===e[1]&&(a=r),t.dev.value&&x.timeEnd("calculating buffer scale"),t.size.scale.value.domain(e).rangeRound([a,r])):void 0}}).call(this)},{"../../../../../array/sort.js":34,"../../../../../core/console/print.js":52,"../../../../../core/fetch/data.js":64,"../../../../../core/fetch/value.js":67,"../../../../../util/buckets.js":207,"../../../../../util/uniques.js":213,"./buffer.js":315}],315:[function(e,t,n){(function(){var F,T;F=e("../../../../../util/buckets.js"),T=e("../../../../../util/closest.js"),t.exports=function(e,t,n){var r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if("clamp"in(M=e[t].scale.viz.copy())&&M.clamp(!1),t===e.axes.discrete){if("string"==typeof(d=M.domain())[0]){for(g=d.length;0<=g;)d.splice(g,0,"d3po_buffer_"+g),g--;return w=M.range(),w=F(d3.extent(w),d.length),e[t].scale.viz.domain(d).range(w)}if(0===t.indexOf("y")&&(d=d.slice().reverse()),1===e[t].ticks.values.length)d=[d[0],d[0]],e[t].value===e.time.value&&1!==e.data.time.ticks.length?(s=T(e.data.time.ticks,d[0]),0<(A=e.data.time.ticks.indexOf(s))?d[0]=e.data.time.ticks[A-1]:(c=e.data.time.ticks[A+1]-s,d[0]=new Date(s.getTime()-c)),A<e.data.time.ticks.length-1?d[1]=e.data.time.ticks[A+1]:(c=s-e.data.time.ticks[A-1],d[1]=new Date(s.getTime()+c))):(d[0]-=1,d[1]+=1);else if(e.axes.scale)a=Math.abs(d[1]-d[0])/(e[t].ticks.values.length-1),a/=2,_=M.range()[1],b=1.5*e.axes.scale.range()[1],p=M.invert(-b),h=M.invert(_+b),d[0]-a<p?(d[0]=d[0]-a,d[d.length-1]=d[d.length-1]+a):(d=[p,h],0===t.indexOf("y")&&(d=d.reverse()),(f=(f=M.domain())[1]-f[0])||(d[0]-=1,d[1]+=1));else if(e[t].value===e.time.value)a=Math.abs(d[1]-d[0])/(e[t].ticks.values.length-1),a/=2,d[0]=d[0]-a,d[1]=d[1]+a;else{for(r=Math.abs(d[1]-d[0])/2,g=d.length,j=d.slice();0<=g;)u=g?j[g-1]+r:j[g]-r,d.splice(g,0,u),g--;w=M.range(),w=F(d3.extent(w),d.length),e[t].scale.viz.domain(d).range(w)}return 0===t.indexOf("y")&&(d=d.reverse()),e[t].scale.viz.domain(d)}if("x"===n&&0===t.indexOf("x")||"y"===n&&0===t.indexOf("y")||!0===n)return o=0<=(d=M.domain())[0]&&0<=d[1],i=d[0]<=0&&d[1]<=0,"log"===e[t].scale.value?(N=o?1:-1,o&&0===t.indexOf("y")&&(d=d.slice().reverse()),y=Math.pow(10,parseInt(Math.abs(d[0])).toString().length-1)*N,(v=m=d[0]%y)&&v/y<=.1&&(v+=y*N),x=0==m?y:v,d[0]-=x,0===d[0]&&(d[0]=N),O=Math.pow(10,parseInt(Math.abs(d[1])).toString().length-1)*N,S=d[1]%O,E=Math.abs(O-S),S&&E/O<=.1&&(E+=O*N),C=0==S?O:E,d[1]+=C,0===d[1]&&(d[1]=N),o&&0===t.indexOf("y")&&(d=d.reverse())):((N=0)===t.indexOf("y")&&(d=d.slice().reverse()),z=d.filter(function(e){return e.constructor===String}),a=.05*Math.abs(d[1]-d[0])||1,z.length||(d[0]=d[0]-a,d[1]=d[1]+a,(o&&d[0]<N||i&&d[0]>N)&&(d[0]=N),(o&&d[1]<N||i&&d[1]>N)&&(d[1]=N)),0===t.indexOf("y")&&(d=d.reverse())),e[t].scale.viz.domain(d);if(e.axes.scale)return l=!1,e.axes.mirror.value&&(l=e[0===t.indexOf("y")?"x":"y"].scale.viz,k=e.width.viz>e.height.viz?"x":"y"),t===k&&l?d=l.domain().slice().reverse():(_=M.range()[1],b=e.axes.scale.range()[1],d=[p=M.invert(1.5*-b),h=M.invert(_+1.5*b)],0===t.indexOf("y")&&(d=d.reverse()),(f=(f=M.domain())[1]-f[0])||(d[0]-=1,d[1]+=1),0===t.indexOf("y")&&(d=d.reverse())),e[t].scale.viz.domain(d)}}}).call(this)},{"../../../../../util/buckets.js":207,"../../../../../util/closest.js":209}],316:[function(e,t,n){(function(){var j,w,_,k,z;e("../../../../../util/copy.js"),j=e("../../../../../client/pointer.js"),w=e("../../../../../core/fetch/color.js"),_=e("../../../../../core/fetch/value.js"),k=e("../../../../../color/legible.js"),z=e("../../../../../color/text.js"),t.exports=function(r,a){var e,t,n,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b;return e=d3.event.type===j.click&&(a.tooltip.value.long||a.tooltip.html.value),n=0<=[j.over,j.move].indexOf(d3.event.type),x=r.d3po.x,b=r.d3po.y,f=r.d3po.r||0,g=a.types[a.type.value].scale||1,f*=g,i=a.axes,d=a.axes.margin.viz,y=a.draw.timing?a.timing.mouseevents:0,o=!e&&n?(t=k(w(a,r)),["x","y","x2","y2"].filter(function(e){var t;return(t=_(a,r,a[e].value))&&!(t instanceof Array)&&e!==a.axes.stacked&&a[e].mouse.value})):[],s=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?x:x-f}).attr("y1",function(e){return 0===e.indexOf("y")?b:b+f}).attr("x2",function(e){return 0===e.indexOf("x")?x:x-f}).attr("y2",function(e){return 0===e.indexOf("y")?b:b+f}).attr("opacity",0)},l=function(e){return e.style("stroke",function(e){return"area"===a.shape.value?"white":t}).attr("stroke-dasharray",function(e){return a[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return a[e].mouse.rendering.value}).style("stroke-width",function(e){return a[e].mouse.width})},u=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?x:x-f}).attr("y1",function(e){return 0===e.indexOf("y")?b:b+f}).attr("x2",function(e){return 0===e.indexOf("x")?x:r.d3po.x0?r.d3po.x0:"y"===e?d.left-a[e].ticks.size:d.left+i.width+a[e].ticks.size}).attr("y2",function(e){return 0===e.indexOf("y")?b:r.d3po.y0?r.d3po.y0:"x"===e?i.height+d.top+a[e].ticks.size:d.top-a[e].ticks.size}).style("opacity",1)},c=a.g.labels.selectAll("line.d3po_mouse_axis_label").data(o),y?(c.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(s).call(l),c.transition().duration(y).call(u).call(l),c.exit().transition().duration(y).call(s).remove()):(c.call(u).call(l),c.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(s).call(l),c.exit().remove()),v=function(e){return e.attr("font-size",function(e){return a[e].ticks.font.size+"px"}).attr("font-family",function(e){return a[e].ticks.font.family.value}).attr("font-weight",function(e){return a[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?x:"y"===e?d.left-5-a[e].ticks.size:d.left+i.width+5+a[e].ticks.size}).attr("y",function(e){return 0===e.indexOf("y")?b:r.d3po.y0?r.d3po.y+(r.d3po.y0-r.d3po.y)/2+d.top-6:"x"===e?i.height+d.top+5+a[e].ticks.size:d.top-5-a[e].ticks.size-1.35*a[e].ticks.font.size}).attr("fill","area"===a.shape.value?"white":z(t))},(m=a.g.labels.selectAll("text.d3po_mouse_axis_label").data(o)).enter().append("text").attr("class","d3po_mouse_axis_label").attr("id",function(e){return e+"_d3pomouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*a[e].ticks.font.size:a[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(v),m.text(function(e){var t,n;return t=a.axes.stacked||e,n=_(a,r,a[t].value),a.format.value(n,{key:a[t].value,vars:a,labels:a[t].affixes.value})}),y?(m.transition().duration(y).delay(y).attr("opacity",1).call(v),m.exit().transition().duration(y).attr("opacity",0).remove()):(m.attr("opacity",1).call(v),m.exit().remove()),h=function(e){var n;return n=function(e){var t;return(t=d3.select("text#"+e+"_d3pomouseaxislabel")).size()?t.node().getBBox():{width:0,height:0}},e.attr("x",function(e){var t;return t=n(e).width,0===e.indexOf("x")?x-t/2-5:"y"===e?d.left-a[e].ticks.size-t-10:d.left+i.width+a[e].ticks.size}).attr("y",function(e){var t;return t=n(e).height,0===e.indexOf("y")?b-(t/2+5):r.d3po.y0?r.d3po.y+(r.d3po.y0-r.d3po.y)/2+d.top-(t/2+5):"x"===e?i.height+d.top+a[e].ticks.size:d.top-a[e].ticks.size-t-10}).attr("width",function(e){return n(e).width+10}).attr("height",function(e){return n(e).height+10}).style("stroke","area"===a.shape.value?"transparent":t).attr("fill",t).attr("shape-rendering",function(e){return a[e].mouse.rendering.value}).style("stroke-width",function(e){return a[e].mouse.width})},p=a.g.labels.selectAll("rect.d3po_mouse_axis_label").data(o),y?(p.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(h),p.transition().duration(y).delay(y).attr("opacity",1).call(h),p.exit().transition().duration(y).attr("opacity",0).remove()):(p.attr("opacity",1).call(h),p.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(h),p.exit().remove())}}).call(this)},{"../../../../../client/pointer.js":38,"../../../../../color/legible.js":44,"../../../../../color/text.js":50,"../../../../../core/fetch/color.js":63,"../../../../../core/fetch/value.js":67,"../../../../../util/copy.js":210}],317:[function(e,t,n){(function(){var C,w,_,k,N,F,z,T,M;C=e("../../../../../util/buckets.js"),w=e("./buffer.js"),k=e("../../../../../core/fetch/value.js"),N=e("../../../../../font/sizes.js"),T=e("../../../../../textwrap/textwrap.js"),M=e("../../../../../core/data/time.js"),e("../../../../../util/uniques.js"),t.exports=function(e,t){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j;for(e.axes.margin.viz={top:e.axes.margin.top,right:e.axes.margin.right,bottom:e.axes.margin.bottom,left:e.axes.margin.left},e.axes.height=e.height.viz,e.axes.width=e.width.viz,o=0,u=(n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;o<u;o++)if(e[r=n[o]].value){if(!1===e[r].ticks.values)if(e[r].value===e.time.value){for(x=(x=e.time.solo.value).length?x.map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,i=d3.extent(x),v=e.data.time.stepType,x=[i[0]],y=i[0];y<i[1];)f=new Date(y),y=new Date(f["set"+v](f["get"+v]()+1)),x.push(y);e[r].ticks.values=x}else 1===r.indexOf("2")?(p=e[r.slice(0,1)].scale.viz,g=e[r].scale.viz,x=e[r.slice(0,1)].scale.ticks,e[r].ticks.values=p.ticks(x).map(function(e){return parseFloat(d3.format(".5f")(g.invert(p(e))))})):e[r].ticks.values=e[r].scale.viz.ticks(e[r].scale.ticks);e[r].ticks.values.length||((j=k(e,e.data.viz,e[r].value))instanceof Array||(j=[j]),e[r].ticks.values=j),h=0===r.indexOf("x")?"y":"x",(1===e[r].ticks.values.length||t.buffer&&t.buffer!==h&&r===e.axes.discrete&&!0===e[r].reset)&&w(e,r,t.buffer),e[r].reset=!1,e[r].value===e.time.value?(a={"font-family":e[r].ticks.font.family.value,"font-weight":e[r].ticks.font.weight,"font-size":e[r].ticks.font.size+"px","text-transform":e[r].ticks.font.transform.value,"letter-spacing":e[r].ticks.font.spacing+"px"},b=M(e,{values:e[r].ticks.values,limit:e.width.viz,style:a}),e[r].ticks.value?e[r].ticks.visible=e[r].ticks.value.map(Number):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value.map(Number):e[r].ticks.visible=b.values.map(Number),e[r].ticks.format=b.format):e[r].ticks.value?(e[r].ticks.values=e[r].ticks.value,e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:e[r].ticks.visible=e[r].ticks.value):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:"log"===e[r].scale.value?(m=(x=e[r].ticks.values).filter(function(e){return"1"===Math.abs(e).toString().charAt(0)})).length<3?e[r].ticks.visible=x:e[r].ticks.visible=m:e[r].ticks.visible=e[r].ticks.values,e[r].value===e.time.value&&(e[r].ticks.visible=e[r].ticks.visible.map(function(e){return e.constructor===Number&&4<(""+e).length?e:(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime())}))}if(e.small)for(e.axes.width-=e.axes.margin.viz.left+e.axes.margin.viz.right,e.axes.height-=e.axes.margin.viz.top+e.axes.margin.viz.bottom,s=0,c=n.length;s<c;s++)e[r=n[s]].label.height=0;else e.small||z(e);for(l=0,d=n.length;l<d;l++)e[r=n[l]].axis.svg=_(e,r)},z=function(n){var r,e,t,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O;for(v=n.x.scale.viz.domain(),M=n.y.scale.viz.domain(),n.x2.value&&(f=n.x2.scale.viz.domain()),n.y2.value&&(_=n.y2.scale.viz.domain()),e=0,i=(l=["y","y2"]).length;e<i;e++)n[r=l[e]].value&&(s="y"===r?"left":"right",k={"font-size":n[r].ticks.font.size+"px","font-family":n[r].ticks.font.family.value,"font-weight":n[r].ticks.font.weight,"text-transform":n[r].ticks.font.transform.value,"letter-spacing":n[r].ticks.font.spacing+"px"},O=n[r].ticks.visible,S="log"===n[r].scale.value?O.map(function(e){return F(e)}):"share"===n[r].scale.value?O.map(function(e){return n.format.value(100*e,{key:"share",vars:n,output:r})}):n[r].value===n.time.value?O.map(function(e,t){return n[r].ticks.format(new Date(e))}):("string"==typeof O[0]&&(O=n[r].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),O.map(function(e){return n.format.value(e,{key:n[r].value,vars:n,labels:n[r].affixes.value,output:r})})),n[r].ticks.labels.value?(n[r].ticks.hidden=!1,(z=d3.max(N(S,k),function(e){return e.width}))&&(z=Math.ceil(z+n.labels.padding),n.axes.margin.viz[s]+=z)):n[r].ticks.hidden=!0,(A=n[r].label.fetch(n))?(E={"font-family":n[r].label.font.family.value,"font-weight":n[r].label.font.weight,"font-size":n[r].label.font.size+"px","text-transform":n[r].label.font.transform.value,"letter-spacing":n[r].label.font.spacing+"px"},n[r].label.height=N([A],E)[0].height):n[r].label.height=0,n[r].label.value&&(n.axes.margin.viz[s]+=n[r].label.height,n.axes.margin.viz[s]+=2*n[r].label.padding));for(n.axes.width-=n.axes.margin.viz.left+n.axes.margin.viz.right,n.x.scale.viz.range(C([0,n.axes.width],v.length)),f&&n.x2.scale.viz.range(C([0,n.axes.width],f.length)),t=0,o=(u=["x","x2"]).length;t<o;t++)n[r=u[t]].value&&(s="x"===r?"bottom":"top",n[r].ticks.labels.value?(n[r].ticks.hidden=!1,h={"font-size":n[r].ticks.font.size+"px","font-family":n[r].ticks.font.family.value,"font-weight":n[r].ticks.font.weight,"text-transform":n[r].ticks.font.transform.value,"letter-spacing":n[r].ticks.font.spacing+"px"},w=n[r].ticks.visible,j="log"===n[r].scale.value?w.map(function(e){return F(e)}):"share"===n[r].scale.value?w.map(function(e){return n.format.value(100*e,{key:"share",vars:n,output:r})}):n[r].value===n.time.value?w.map(function(e,t){return n[r].ticks.format(new Date(e))}):("string"==typeof w[0]&&(w=n[r].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),w.map(function(e){return n.format.value(e,{key:n[r].value,vars:n,labels:n[r].affixes.value,output:r})})),b=N(j,h),g=d3.max(b,function(e){return e.width}),p=d3.max(b,function(e){return e.height}),(x=1===w.length?n.axes.width:(x=n[r].scale.viz(w[1])-n[r].scale.viz(w[0]),Math.abs(x)))<g&&0<j.join("").indexOf(" ")?(n[r].ticks.wrap=!0,b=N(j,h,{mod:function(e){return T().container(d3.select(e)).height(n.axes.height/2).width(x).draw()}}),g=d3.max(b,function(e){return e.width}),p=d3.max(b,function(e){return e.height})):n[r].ticks.wrap=!1,n[r].ticks.baseline="auto",g<=x?n[r].ticks.rotate=0:g<n.axes.height/2?(b=N(j,h,{mod:function(e){return T().container(d3.select(e)).width(n.axes.height/2).height(x).draw()}}),p=d3.max(b,function(e){return e.width}),g=d3.max(b,function(e){return e.height}),n[r].ticks.rotate=-90):p=g=0,g&&p||(n[r].ticks.hidden=!0,n[r].ticks.rotate=0),g=Math.ceil(g),p=Math.ceil(p),n[r].ticks.maxHeight=p,n[r].ticks.maxWidth=g,p&&(n.axes.margin.viz[s]+=p+n.labels.padding),a=n[r].ticks.visible[n[r].ticks.visible.length-1],c=n[r].scale.viz(a),(c+=g/2+n.axes.margin.viz.left)>n.width.value&&(d=c-n.width.value+n.axes.margin.viz.right,n.axes.width-=d,n.axes.margin.viz.right+=d)):n[r].ticks.hidden=!0,(m=n[r].label.fetch(n))?(y={"font-family":n[r].label.font.family.value,"font-weight":n[r].label.font.weight,"font-size":n[r].label.font.size+"px","text-transform":n[r].label.font.transform.value,"letter-spacing":n[r].label.font.spacing+"px"},n[r].label.height=N([m],y)[0].height):n[r].label.height=0,n[r].label.value&&(n.axes.margin.viz[s]+=n[r].label.height,n.axes.margin.viz[s]+=2*n[r].label.padding));if(n.axes.height-=n.axes.margin.viz.top+n.axes.margin.viz.bottom,n.x.scale.viz.range(C([0,n.axes.width],v.length)),f&&n.x2.scale.viz.range(C([0,n.axes.width],f.length)),n.y.scale.viz.range(C([0,n.axes.height],M.length)),_)return n.y2.scale.viz.range(C([0,n.axes.height],_.length))},_=function(a,i){return d3.svg.axis().tickSize(a[i].ticks.size).tickPadding(5).orient(a[i].orient.value).scale(a[i].scale.viz).tickValues(a[i].ticks.values).tickFormat(function(e,t){var n,r;return a[i].ticks.hidden?null:(r=a[i].scale.value,n=e.constructor===Date?+e:e,0<=a[i].ticks.visible.indexOf(n)?"share"===r?a.format.value(100*e,{key:"share",vars:a,labels:a[i].affixes.value,output:i}):e.constructor===Date?a[i].ticks.format(e):"log"===r?F(e):a.format.value(e,{key:a[i].value,vars:a,labels:a[i].affixes.value,output:i}):null)})},F=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return"⁰¹²³⁴⁵⁶⁷⁸⁹"[e]}).join(""),"1"!==r&&(t=r+" x "+t),e<0?"-"+t:t}}).call(this)},{"../../../../../core/data/time.js":62,"../../../../../core/fetch/value.js":67,"../../../../../font/sizes.js":104,"../../../../../textwrap/textwrap.js":203,"../../../../../util/buckets.js":207,"../../../../../util/uniques.js":213,"./buffer.js":315}],318:[function(e,t,n){(function(){var oe,se,le;oe=e("../../../../../color/mix.js"),se=e("../../../../../textwrap/textwrap.js"),le=e("../../../../../object/validate.js"),t.exports=function(o){var e,r,n,t,a,i,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,J,W,Q,K,$,ee,te,ne,re,ae,ie;if(0<=o.x.domain.viz.concat(o.y.domain.viz).indexOf(void 0))return null;for(l={width:o.axes.width,height:o.axes.height,fill:o.axes.background.color,stroke:o.axes.background.stroke.color,"stroke-width":o.axes.background.stroke.width,"shape-rendering":o.axes.background.rendering.value},r={left:"start",center:"middle",right:"end"},t=o.small?[]:[0],te=function(e,t){return e.attr("x1",function(e){return 0===t.indexOf("x")?o.x.scale.viz(e):0}).attr("x2",function(e){return 0===t.indexOf("x")?o.x.scale.viz(e):o.axes.width}).attr("y1",function(e){return 0===t.indexOf("y")?o.y.scale.viz(e):0}).attr("y2",function(e){return 0===t.indexOf("y")?o.y.scale.viz(e):o.axes.height})},ne=function(e,t,n){var r,a,i;return r=n?o[t].grid.color:o[t].ticks.color,a="log"===o[t].scale.value,i=o[t].ticks.visible||[],e.attr("stroke",function(e){return 0===e?o[t].axis.color:(e.constructor===Date&&(e=+e),!(0<=i.indexOf(e))||a&&"1"!==Math.abs(e).toString().charAt(0)?n&&"transparent"!==o.axes.background.color?oe(r,o.axes.background.color,.4,1):"transparent"!==o.background.value?oe(r,o.background.value,.4,1):oe(r,"white",.4,1):r)}).attr("stroke-width",o[t].ticks.width).attr("shape-rendering",o[t].ticks.rendering.value)},d=function(e,t,n){var r;return r=0===t?"axis":"ticks",(t=o[e][r].font[n])&&(t.length||"number"==typeof t)?t:o[e].ticks.font[n]},ee=function(e,n){var r;return r="log"===o[n].scale.value,e.attr("font-size",function(e){return d(n,e,"size")+"px"}).attr("stroke","none").attr("fill",function(e){var t;return t=d(n,e,"color"),r&&"1"!==Math.abs(e).toString().charAt(0)?oe(t,o.background.value,.4,1):t}).attr("font-family",function(e){return d(n,e,"family").value}).attr("font-weight",function(e){return d(n,e,"weight")}).style("text-transform",function(e){return d(n,e,"transform").value}).style("letter-spacing",function(e){return d(n,e,"spacing")+"px"})},C=function(e,t){var n,r;return n=0===t.indexOf("x")?"height":"width",r=0===t.indexOf("x")?"y":"x",e.attr(r+"1",0).attr(r+"2",o.axes[n]).attr(t+"1",function(e){return e.coords.line}).attr(t+"2",function(e){return e.coords.line}).attr("stroke",function(e){return e.color||o[t].lines.color}).attr("stroke-width",o[t].lines.width).attr("shape-rendering",o[t].lines.rendering.value).attr("stroke-dasharray",o[t].lines.dasharray.value)},E=function(e,t){var n;return n=0===t.indexOf("x")?"y":"x",e.attr(n,function(e){return e.coords.text[n]+"px"}).attr(t,function(e){return e.coords.text[t]+"px"}).attr("dy",o[t].lines.font.position.value).attr("text-anchor",r[o[t].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",o[t].lines.font.size+"px").attr("fill",function(e){return e.color||o[t].lines.color}).attr("font-family",o[t].lines.font.family.value).attr("font-weight",o[t].lines.font.weight)},D="translate("+o.axes.margin.viz.left+","+o.axes.margin.viz.top+")",(I=o.group.selectAll("g#d3po_graph_plane").data([0])).transition().duration(o.draw.timing).attr("transform",D),I.enter().append("g").attr("id","d3po_graph_plane").attr("transform",D),(s=I.selectAll("rect#d3po_graph_background").data([0])).transition().duration(o.draw.timing).attr(l),s.enter().append("rect").attr("id","d3po_graph_background").attr("x",0).attr("y",0).attr(l),(q=I.selectAll("path#d3po_graph_mirror").data([0])).enter().append("path").attr("id","d3po_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),q.transition().duration(o.draw.timing).attr("opacity",function(){return o.axes.mirror.value?1:0}).attr("d",function(){var e,t;return"M "+(t=l.width)+" "+(e=l.height)+" L 0 "+e+" L "+t+" 0 Z"}),Z=0!==o.x.ticks.rotate,ae=function(e,n){var t,r;return r="x"===n?o.axes.height:0,(t=e.attr("transform","translate(0,"+r+")").call(o[n].axis.svg.scale(o[n].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(e){var t;return e.constructor===Date&&(e=+e),t=d3.select(this).attr("y2"),0<=o[n].ticks.visible.indexOf(e)?t:t/2}),t.select("text").style("text-anchor",Z&&"x"===n?"end":Z?"start":"middle").call(ee,n).each(function(e){if(d3.select(this).attr("dy","0px").attr("font-size",function(e){return d(n,e,"size")+"px"}),e.constructor===Date&&(e=+e),!o[n].ticks.hidden&&0<=o[n].ticks.visible.indexOf(e))return se().container(d3.select(this)).rotate(o[n].ticks.rotate).align(Z?"end":"center").valign(Z?"middle":"x"===n?"top":"bottom").width(o[n].ticks.maxWidth+2).height(o[n].ticks.maxHeight).padding(0).x(-o[n].ticks.maxWidth/2).y("x2"===n?-(o[n].ticks.maxHeight+2*o.labels.padding):0).draw()})},ie=function(e,t){var n,r;return r="y2"===t?o.axes.width:0,(n=e.attr("transform","translate("+r+", 0)").call(o[t].axis.svg.scale(o[t].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(e){var t;return e.constructor===Date&&(e=+e),t=d3.select(this).attr("y2"),0<=o.x.ticks.visible.indexOf(e)?t:t/2}),n.select("text").call(ee,t)},g=0,j=(H=["x","x2","y","y2"]).length;g<j;g++)W=0===(n=H[g]).indexOf("x")?ae:ie,V=t.length&&o[n].value?[0]:[],(a=I.selectAll("g#d3po_graph_"+n+"ticks").data(V)).transition().duration(o.draw.timing).call(W,n),a.selectAll("line").transition().duration(o.draw.timing).call(ne,n),(p=a.enter().append("g").attr("id","d3po_graph_"+n+"ticks").call(W,n)).selectAll("path").attr("fill","none").attr("stroke","none"),p.selectAll("line").call(ne,n),a.exit().transition().duration(o.data.timing).attr("opacity",0).remove();for(b=function(e,t){return e.attr("x",0===t.indexOf("x")?o.width.viz/2:-(o.axes.height/2+o.axes.margin.viz.top)).attr("y","x"===t?o.height.viz-o[t].label.height/2-o[t].label.padding:"y2"===t?o.width.viz-o[t].label.height/2-o[t].label.padding:o[t].label.height/2+o[t].label.padding).attr("transform",0===t.indexOf("y")?"rotate(-90)":null).attr("font-family",o[t].label.font.family.value).attr("font-weight",o[t].label.font.weight).attr("font-size",o[t].label.font.size+"px").attr("fill",o[t].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",o[t].label.font.transform.value).style("letter-spacing",o[t].label.font.spacing+"px")},v=0,w=(Y=["x","y"]).length;v<w;v++)o[n=Y[v]].grid.value?h=o[n].ticks.value?o[n].ticks.value:o[n].ticks.values:(h=[],P="x"===n?"y":"x",0<=o[n].ticks.values.indexOf(0)&&o[P].axis.value&&(h=[0])),o[n].value===o.time.value&&(h=h.map(function(e){return 4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime()})),(f=I.selectAll("g#d3po_graph_"+n+"grid").data([0])).enter().append("g").attr("id","d3po_graph_"+n+"grid"),(N=f.selectAll("line").data(h,function(e,t){return e.constructor===Date?e.getTime():e})).transition().duration(o.draw.timing).call(te,n).call(ne,n,!0),N.enter().append("line").style("opacity",0).call(te,n).call(ne,n,!0).transition().duration(o.draw.timing).delay(o.draw.timing/2).style("opacity",1),N.exit().transition().duration(o.draw.timing/2).style("opacity",0).remove();for(m=0,_=(G=["x","x2","y","y2"]).length;m<_;m++)o[n=G[m]].value?(i=o[n].label.fetch(o),x=t&&i&&!o.small?[0]:[],e=o.format.affixes.value[o[n].value],i&&!o[n].affixes.value&&e&&(!0===(J=o[n].affixes.separator.value)?J=["[","]"]:!1===J&&(J=["",""]),i+=" "+J[0]+e[0]+" "+e[1]+J[1])):(i="",x=[]),(y=o.group.selectAll("text#d3po_graph_"+n+"label").data(x)).text(i).transition().duration(o.draw.timing).call(b,n),y.enter().append("text").attr("stroke","none").attr("id","d3po_graph_"+n+"label").text(i).call(b,n),y.exit().transition().duration(o.data.timing).attr("opacity",0).remove();for(T=0,k=(X=["x","y","x2","y2"]).length;T<k;T++)if(o[n=X[T]].value){for((S=I.selectAll("g#d3po_graph_"+n+"_userlines").data([0])).enter().append("g").attr("id","d3po_graph_"+n+"_userlines"),c=o[n].scale.viz.domain(),0===n.indexOf("y")&&(c=c.slice().reverse()),Q=[],A=[],B=0,z=(re=o[n].lines.value||[]).length;B<z;B++)M=re[B],u=le(M)?M.position:M,(n===o.axes.discrete?0<=c.indexOf(u):u>=c[0]&&u<=c[1])&&((u=le(M)?M:{position:u}).coords={line:o[n].scale.viz(u.position)},A.push(u),u.text&&(u.axis=n,u.padding=.5*o[n].lines.font.padding.value,u.align=o[n].lines.font.align.value,K="middle"===(L=o[n].lines.font.position.text)?0:2*u.padding,"top"===L&&(K=-K),0===n.indexOf("x")?($="left"===u.align?o.axes.height:"center"===u.align?o.axes.height/2:0,"left"===u.align&&($-=2*u.padding),"right"===u.align&&($+=2*u.padding)):($="left"===u.align?0:"center"===u.align?o.axes.width/2:o.axes.width,"right"===u.align&&($-=2*u.padding),"left"===u.align&&($+=2*u.padding)),u.coords.text={},u.coords.text[0===n.indexOf("x")?"y":"x"]=$,u.coords.text[n]=o[n].scale.viz(u.position)+K,u.transform=0===n.indexOf("x")?"rotate(-90,"+u.coords.text.x+","+u.coords.text.y+")":null,Q.push(u)));(N=S.selectAll("line.d3po_graph_"+n+"line").data(A,function(e){return e.position})).enter().append("line").attr("class","d3po_graph_"+n+"line").attr("opacity",0).call(C,n),N.transition().duration(o.draw.timing).attr("opacity",1).call(C,n),N.exit().transition().duration(o.draw.timing).attr("opacity",0).remove(),(F=S.selectAll("text.d3po_graph_"+n+"line_text").data(Q,function(e){return e.position})).enter().append("text").attr("class","d3po_graph_"+n+"line_text").attr("id",function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),"d3po_graph_"+n+"line_text_"+t}).attr("opacity",0).call(E,n),F.text(function(e){return e.text}).transition().duration(o.draw.timing).attr("opacity",1).call(E,n),F.exit().transition().duration(o.draw.timing).attr("opacity",0).remove(),U=function(e){var t;return t=function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),I.select("text#d3po_graph_"+e.axis+"line_text_"+t).node().getBBox()},e.attr("x",function(e){return t(e).x-e.padding}).attr("y",function(e){return t(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return t(e).width+2*e.padding}).attr("height",function(e){return t(e).height+2*e.padding}).attr("fill","transparent"!==o.axes.background.color?o.axes.background.color:"white")},R=o[n].lines.font.background.value?Q:[],(O=S.selectAll("rect.d3po_graph_"+n+"line_rect").data(R,function(e){return e.position})).enter().insert("rect","text.d3po_graph_"+n+"line_text").attr("class","d3po_graph_"+n+"line_rect").attr("pointer-events","none").attr("opacity",0).call(U),O.transition().delay(o.draw.timing).each("end",function(e){return d3.select(this).transition().duration(o.draw.timing).attr("opacity",1).call(U)}),O.exit().transition().duration(o.draw.timing).attr("opacity",0).remove()}}}).call(this)},{"../../../../../color/mix.js":46,"../../../../../object/validate.js":175,"../../../../../textwrap/textwrap.js":203}],319:[function(e,t,n){(function(){var y,s,x;y=e("../../../../core/fetch/value.js"),s=e("../../../../string/strip.js"),x=e("../../../../util/uniques.js"),t.exports=function(f,e,o){var h,t,p,g,n,v,m;return void 0===o?o=f.id.nesting.slice(0,f.depth.value+1):o.constructor!==Array&&(o=[o]),void 0===t&&(t=[]),e=e||f.data.viz,h=f[f.axes.discrete],g=f[f.axes.opposite],(m=h.value===f.time.value)?(v=f.data.time.ticks,p=f.time.solo.value.length?"solo":"mute",f.time[p].value.length&&(n=f.time[p].value.slice().map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),v=v.filter(function(e){return"solo"===p?0<=n.indexOf(+e):n.indexOf(+e)<0}))):v=h.ticks.values?h.ticks.values:x(e,h.value,y,f),d3.nest().key(function(e){var t,n,r,a,i;for(a="nesting",n=0,r=o.length;n<r;n++)t=o[n],(i=y(f,e,t))instanceof Array&&(i=i.join("_")),a+="_"+s(i);return a}).rollup(function(e){var t,n,r,a,i,o,s,l,u,c,d;if((t=x(e,h.value,y,f)).length&&t[0].constructor===Date&&(t=t.map(Number)),h.zerofill.value)for(n="log"===h.scale.value?g.scale.viz.domain().every(function(e){return e<0})?-1:1:0,r=a=0,o=v.length;a<o;r=++a)if(d=v[r],c=m?+d:d,t.indexOf(c)<0){for(l={d3po:{}},i=0,s=(u=f.id.nesting).length;i<s;i++)(p=u[i])in e[0]&&(l[p]=e[0][p]);l[h.value]=d,l[g.value]=0,l[g.value]=n,e.splice(r,0,l)}return"string"==typeof e[0][h.value]?e:e.sort(function(e,t){var n;return(n=y(f,e,h.value)-y(f,t,h.value))?n:y(f,e,g.value)-y(f,t,g.value)})}).entries(e)}}).call(this)},{"../../../../core/fetch/value.js":67,"../../../../string/strip.js":178,"../../../../util/uniques.js":213}],320:[function(e,t,n){(function(){var y;y=e("../../../../core/fetch/value.js"),t.exports=function(r,e){var t,a,n,i,o,s,l,u,c,d,f,h,p,g,v,m;for(v=r.axes.stacked||r.axes.opposite,a=r[v].scale.viz(0),p=r[v].scale.value,f="x"===v?"y":"x",l="y"===v?r.axes.margin.viz.top:r.axes.margin.viz.left,d="share"===p?"expand":"zero",g=d3.layout.stack().values(function(e){return e.values||[e]}).offset(d).x(function(e){return e.d3po[f]}).y(function(e){return a-r[v].scale.viz(y(r,e,r[v].value))}).out(function(e,t,n){return y(r,e,r[v].value)<0,"share"===p?(e.d3po[v+"0"]=(1-t)*a,e.d3po[v]=e.d3po[v+"0"]-n*a):(e.d3po[v+"0"]=a,r.axes.stacked&&(e.d3po[v+"0"]-=t),e.d3po[v]=e.d3po[v+"0"]-n),e.d3po[v]+=l,e.d3po[v+"0"]+=l}),h=[],c=[],n=0,o=e.length;n<o;n++)if(t=e[n],(m=y(r,t,r[v].value))instanceof Array){for(u=!0,i=0,s=m.length;i<s;i++)if(0<=m[i]){u=!1;break}u?c.push(t):h.push(t)}else 0<=m&&h.push(t),m<0&&c.push(t);return 0===h.length||0===c.length?g(e):(h.length&&(h=g(h)),c.length&&(c=g(c)),h.concat(c))}}).call(this)},{"../../../../core/fetch/value.js":67}],321:[function(t,r,e){(function(){var c,d,e,n,f,h;c=t("../../core/fetch/value.js"),d=t("./helpers/graph/draw.js"),n=t("./helpers/graph/nest.js"),f=t("../../array/sort.js"),h=t("./helpers/graph/stack.js"),(e=function(e){var t,n,r,a,i,o,s,l,u;if(d(e,{buffer:e.axes.opposite,mouse:!0}),0<=e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0))return[];for(r=0,i=(n=f(e.data.viz,null,null,null,e)).length;r<i;r++)for(a=0,o=(s=n[r].values).length;a<o;a++)t=s[a],null!==(l=c(e,t,e.x.value))?(t.d3po.x2=!1,t.d3po.x=e.x.scale.viz(l)):(t.d3po.x2=!0,t.d3po.x=e.x2.scale.viz(c(e,t,e.x2.value))),t.d3po.x+=e.axes.margin.viz.left,null!==(u=c(e,t,e.y.value))?(t.d3po.y2=!1,t.d3po.y=e.y.scale.viz(u)):(t.d3po.y2=!0,t.d3po.y=e.y2.scale.viz(c(e,t,e.y2.value))),t.d3po.y+=e.axes.margin.viz.top;return e.axes.stacked?h(e,n):n}).filter=function(e,t){return n(e,t)},e.requirements=["data","x","y"],e.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},e.shapes=["line"],e.tooltip="static",r.exports=e}).call(this)},{"../../array/sort.js":34,"../../core/fetch/value.js":67,"./helpers/graph/draw.js":313,"./helpers/graph/nest.js":319,"./helpers/graph/stack.js":320}],322:[function(e,t,n){function r(a){var e=a.nodes.restricted||a.nodes.value,t=a.edges.restricted||a.edges.value||[],n=d3.extent(e,function(e){return e.x}),r=d3.extent(e,function(e){return e.y}),i=[1,1];if("number"==typeof a.size.value?i=[a.size.value,a.size.value]:a.size.value&&(i=d3.extent(e,function(e){var t=v(a,e,a.size.value);return 0===t?null:t})),void 0===i[0]&&(i=[1,1]),"number"==typeof a.size.value)var o=a.size.value,s=a.size.value;else{var l=(o=g(e,{accessor:function(e){return[e.x,e.y]}}))/2;if(o*=a.size.value?a.nodes.overlap:.4,a.edges.arrows.value&&(o*=.5),i[0]===i[1]){s=l;o=l}else{var u=n[1]+1.1*o-(n[0]-1.1*o),c=r[1]+1.1*o-(r[0]-1.1*o);if(u/c<a.width.viz/a.height.viz)var d=a.height.viz/c;else d=a.width.viz/u;(s=.25*o)*d<2&&(s=2/d)}}var f=a.size.scale.value.domain(i).range([s,o]);a.zoom.bounds=[[n[0]-1.1*o,r[0]-1.1*o],[n[1]+1.1*o,r[1]+1.1*o]];var h=[],p={};return e.forEach(function(t){var e=a.data.viz.filter(function(e){return e[a.id.value]==t[a.id.value]})[0]||{};e[a.id.value]=t[a.id.value],e.d3po={},e.d3po.x=t.x,e.d3po.y=t.y;var n=v(a,e,a.size.value);e.d3po.r=n?f(n):f.range()[0],p[e[a.id.value]]={x:e.d3po.x,y:e.d3po.y,r:e.d3po.r},h.push(e)}),h.sort(function(e,t){return t.d3po.r-e.d3po.r}),t.forEach(function(e,t){e.d3po&&delete e.d3po.spline,e[a.edges.source].d3po={};var n=p[e[a.edges.source][a.id.value]];void 0!==n?(e[a.edges.source].d3po.r=n.r,e[a.edges.source].d3po.x=n.x,e[a.edges.source].d3po.y=n.y):delete e[a.edges.source].d3po,e[a.edges.target].d3po={};var r=p[e[a.edges.target][a.id.value]];void 0!==r?(e[a.edges.target].d3po.r=r.r,e[a.edges.target].d3po.x=r.x,e[a.edges.target].d3po.y=r.y):delete e[a.edges.target].d3po}),{nodes:h,edges:t}}var g=e("../../network/smallestgap.js"),v=e("../../core/fetch/value.js");r.nesting=!1,r.requirements=["nodes"],r.scale=1.05,r.shapes=["circle"],r.tooltip="static",r.zoom=!0,t.exports=r},{"../../core/fetch/value.js":67,"../../network/smallestgap.js":171}],323:[function(e,t,n){(function(){var ue,b,j,ce,de=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};b=e("../../network/shortestpath.js"),ue=e("../../core/fetch/value.js"),j=e("../../util/uniques.js"),(ce=function(t){var e,n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,J,W,Q,K,$,ee,te,ne,re,ae,ie,oe,se,le;for(d=[],(V={})[t.focus.value[0]]=0,V[t.focus.value[1]]=0,R={all:[[t.focus.value[0]],[t.focus.value[1]]]},L=p=0,b=(G=ce.paths).length;p<b;L=++p)for(D=G[L],d=d.concat(D.edges),x=t.focus.value[0],R[L]=[x],c=g=0,j=(X=D.edges).length;g<j;c=++g)(u=X[c])[t.edges.source]=t.data.viz.filter(function(e){return u[t.edges.source][t.id.value]===e[t.id.value]})[0],u[t.edges.target]=t.data.viz.filter(function(e){return u[t.edges.target][t.id.value]===e[t.id.value]})[0],F=u[t.edges.source][t.id.value]===x?"target":"source",void 0===V[T=u[t.edges[F]][t.id.value]]&&(V[T]=L),R[L].push(T),x=T;for(L in te=0,R)if(D=R[L],"all"!==L){for(f=v=C=0,w=D.length;v<w;f=++v)if(h=D[f],0!==f&&f!==D.length-1&&V[h]===parseFloat(L)){for(U=D[f-(C=1)],N=D[f+1],q=H=null,o=E=0,_=(Z=R.all).length;E<_;o=++E)i=Z[o],0<=de.call(i,U)&&(H=o),0<=de.call(i,N)&&(q=o);null!==H&&null===q?H+1===R.all.length-1?R.all.splice(H+1,0,[h]):R.all[H+1].push(h):q-H==1?R.all.splice(q,0,[h]):1<q-H&&R.all[q-1].push(h)}te+=C}for(ee=Math.floor(t.height.viz/te),le=[],f=0;f<te;)f%2==0?le.push(f):le.unshift(f),f++;for(m=t.size.value&&!t.small?30:0,se=d3.scale.ordinal().domain(le).range(d3.range(ee/2-m,t.height.viz+ee/2-m,(t.height.viz-ee)/(te-1))),l=R.all.length,s=Math.floor(t.width.viz/l),ie=d3.scale.linear().domain([0,l-1]).rangeRound([s/2,t.width.viz-s/2]),5,S=.4*d3.min([s,ee-m]),re=d3.extent(t.data.viz,function(e){return ue(t,e,t.size.value)||0}),ne=t.size.scale.value.domain(re).rangeRound([5,S]),O=0,k=(J=t.data.viz).length;O<k;O++){for(null==(B=J[O]).d3po&&(B.d3po={}),o=P=0,z=(W=R.all).length;P<z;o=++P)i=W[o],Q=B[t.id.value],0<=de.call(i,Q)&&(B.d3po.x=ie(o));B.d3po.y=se(V[B[t.id.value]]),t.size.value?(ae=ue(t,B,t.size.value),B.d3po.r=ae?ne(ae):5):B.d3po.r=S,B.d3po.r<.1*s&&!t.small?B.d3po.label={x:0,y:B.d3po.r+2*t.labels.padding,w:.6*s,h:m+S-B.d3po.r,resize:!1}:delete B.d3po.label}for(L=I=0,M=(K=ce.paths).length;I<M;L=++I)for(D=K[L],x=t.focus.value[0],c=Y=0,A=($=D.edges).length;Y<A;c=++Y)y="target"===(F=(u=$[c])[t.edges.source][t.id.value]===x?"target":"source")?"source":"target",T=u[t.edges[F]][t.id.value],V[x]!==V[T]?(u.d3po={spline:!0},null==(e=u[t.edges.source]).d3po&&(e.d3po={}),null==(n=u[t.edges.source].d3po).edges&&(n.edges={}),null==(r=u[t.edges.target]).d3po&&(r.d3po={}),null==(a=u[t.edges.target].d3po).edges&&(a.edges={}),oe=u[F].d3po.x-u[y].d3po.x,u[y].d3po.edges[u[F][t.id.value]]={angle:Math.PI,radius:s/2},u[F].d3po.edges[u[y][t.id.value]]={angle:0,radius:s/2,offset:oe-s}):delete u.d3po,x=T;return{nodes:t.data.viz,edges:d}}).filter=function(t,e){var n,r,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x;for(i=t.edges.filtered||t.edges.value,ce.paths=b(i,t.focus.value[0],{target:t.focus.value[1],distance:t.edges.size.value||void 0,nodeid:t.id.value,startpoint:t.edges.source,endpoint:t.edges.target,K:t.edges.limit.value||5}),ce.nodes=[],n=[],l=0,d=(g=ce.paths).length;l<d;l++)for(u=0,f=(v=g[l].edges).length;u<f;u++)y=(a=v[u])[t.edges.source],x=a[t.edges.target],n.indexOf(y[t.id.value])<0&&(ce.nodes.push(y),n.push(y[t.id.value])),n.indexOf(x[t.id.value])<0&&(ce.nodes.push(x),n.push(x[t.id.value]));for(m=[],c=0,h=(s=j(ce.nodes,t.id.value,ue,t)).length;c<h;c++)o=s[c],(r=e.filter(function(e){return e[t.id.value]===o}))[0]?m.push(r[0]):((p={d3po:{}})[t.id.value]=o,m.push(p));return m},ce.nesting=!1,ce.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],ce.scale=1,ce.shapes=["circle","square"],ce.tooltip="static",t.exports=ce}).call(this)},{"../../core/fetch/value.js":67,"../../network/shortestpath.js":170,"../../util/uniques.js":213}],324:[function(n,r,e){(function(){var l,e,u,t;l=n("../../array/comparator.js"),e=n("../../core/data/threshold.js"),u=n("../../core/data/group.js"),(t=function(n){var e,t,r,a,i,o,s;for(i=d3.layout.pie().value(function(e){return e.value}).sort(function(e,t){return n.order.value?l(e.d3po,t.d3po,[n.order.value],n.order.sort.value,[],n):1<n.id.nesting.length?l(e.d3po,t.d3po,n.id.nesting.concat([n.size.value]),void 0,[],n):l(e.d3po,t.d3po,[n.size.value],"desc",[],n)})(u(n,n.data.viz,[])),s=[],o=d3.min([n.width.viz,n.height.viz])/2-2*n.labels.padding,t=0,a=i.length;t<a;t++)(r=(e=i[t]).data.d3po).d3po.startAngle=e.startAngle,r.d3po.endAngle=e.endAngle,r.d3po.r_inner=0,r.d3po.r_outer=o,r.d3po.x=n.width.viz/2,r.d3po.y=n.height.viz/2,r.d3po.share=(e.endAngle-e.startAngle)/(2*Math.PI),s.push(r);return s}).filter=e,t.requirements=["data","size"],t.shapes=["arc"],t.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},r.exports=t}).call(this)},{"../../array/comparator.js":32,"../../core/data/group.js":57,"../../core/data/threshold.js":61}],325:[function(t,n,e){(function(){var K,$,ee,te,ne,e,re,ae;t("../../array/comparator.js"),t("../../array/sort.js"),t("../../core/data/threshold.js"),$=t("../../core/fetch/text.js"),ee=t("../../core/fetch/value.js"),te=t("../../font/sizes.js"),ne=t("../../geom/offset.js"),re=t("../../textwrap/textwrap.js"),K=t("../../util/buckets.js"),ae=t("../../util/uniques.js"),(e=function(r){var e,t,n,a,i,o,s,l,u,c,d,f,h,p,g,v,m,y,x,b,j,w,_,k,z,M,A,E,S,O,C,N,F,T,q,B,P,I,D,L,V,R,U,H,Y,G,X,Z,J,W,Q;for(u=r.data.viz,q=r.depth.value+1,B=r.id.nesting[q],s=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)l=u[e],n.push(l[B]);return n}(),Q=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)l=u[e],n.push(ae(u,B,ee,r,q));return n}(),Q=ae(d3.merge(Q)).length,a=2*Math.PI/Q,F=d3.min([r.width.viz,r.height.viz])/2,z=w=0,M=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)o=s[e],n.push($(r,o,q)[0]);return n}(),M=ae(d3.merge(M)),r.labels.value&&(c=ne(Math.PI/2,F),G=ne(a+Math.PI/2,F),w=c.x-G.x-2*r.labels.padding,J={fill:r.x.ticks.font.color,"font-family":r.x.ticks.font.family.value,"font-weight":r.x.ticks.font.weight,"font-size":r.x.ticks.font.size+"px"},X=te(M,J,{mod:function(e){return re().container(d3.select(e)).width(r.height.viz/8).height(w).draw()}}),F-=z=d3.max(X,function(e){return e.width}),F-=2*r.labels.padding),N=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)o=s[e],n.push(function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)l=o[e],n.push(ee(r,l,r.size.value));return n}());return n}(),N=d3.max(d3.merge(N)),D=d3.scale.linear().domain([0,N]).range([0,F]),g=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)o=s[e],n.push(ee(r,o,B));return n}(),g=ae(d3.merge(g)),p=d3.scale.ordinal().domain(g).range(d3.range(0,g.length)),m=0,A=u.length;m<A;m++)for((l=u[m]).d3po.x=r.width.viz/2+r.margin.top,l.d3po.y=r.height.viz/2+r.margin.left,h=y=0,E=(L=l[B]).length;y<E;h=++y)(e=L[h]).d3po||(e.d3po={}),e.d3po.r=D(ee(r,e,r.size.value)),e.d3po.a=p(ee(r,e,B))*a;for(v=1,C=0,S=(V=[10,5,4,2]).length;C<S;C++)if(20<=F/(h=V[C])){v=h;break}for((U=K([F/v,F],v-1).reverse()).length===v&&U.shift(),H=function(e){return e.attr("fill",function(e,t){return 0===t?r.axes.background.color:"transparent"}).attr("cx",r.width.viz/2+r.margin.top).attr("cy",r.height.viz/2+r.margin.left).attr("stroke",r.x.grid.value?r.x.grid.color:"transparent")},(Y=r.group.selectAll(".d3po_radar_rings").data(U,function(e,t){return t})).enter().append("circle").attr("class","d3po_radar_rings").call(H).attr("r",0),Y.transition().duration(r.draw.timing).call(H).attr("r",function(e){return e}),Y.exit().transition().duration(r.draw.timing).attr("opacity",0).remove(),_=d3.scale.ordinal().domain(M).range(d3.range(0,M.length)),b=[],T=0,O=M.length;T<O;T++)n=(e=(t=a*_(x=M[T])-Math.PI/2)*(180/Math.PI))<-90||90<e?(e-=180,i=-(F+2*r.labels.padding+z),"end"):(i=F+2*r.labels.padding,"start"),W=t<0||t>Math.PI,R=t<Math.PI/2,I=F,r.labels.value&&(I+=r.labels.padding),(P=ne(t,I)).x,P.y,R||z,W&&w,0<=[0,Math.PI].indexOf(a*_(x))&&z/2,b.push({text:x,angle:e,x:i,anchor:n,offset:P});return(j=r.group.selectAll("g.d3po_radar_label_group").data([0])).enter().append("g").attr("class","d3po_radar_label_group").attr("transform","translate("+r.width.viz/2+","+r.height.viz/2+")"),j.transition().duration(r.draw.timing).attr("transform","translate("+r.width.viz/2+","+r.height.viz/2+")"),k=function(e){return e.attr(J).each(function(e,t){return re().container(d3.select(this)).height(w).width(z).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-w/2).draw()}).attr("transform",function(e){var t;return(t=d3.select(this).attr("transform")||"").length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},(Z=j.selectAll(".d3po_radar_labels").data(r.labels.value?b:[],function(e,t){return t})).call(k),Z.enter().append("text").attr("class","d3po_radar_labels").attr("opacity",0).call(k).transition().duration(r.draw.timing).attr("opacity",1),Z.exit().transition().duration(r.draw.timing).attr("opacity",0).remove(),f=function(e){return e.attr("stroke",r.x.grid.color).attr("x1",r.width.viz/2+r.margin.left).attr("y1",r.height.viz/2+r.margin.top)},(d=r.group.selectAll(".d3po_radar_lines").data(b,function(e,t){return t})).enter().append("line").attr("class","d3po_radar_lines").call(f).attr("x2",r.width.viz/2+r.margin.left).attr("y2",r.height.viz/2+r.margin.top),d.transition().duration(r.draw.timing).call(f).attr("x2",function(e){return r.width.viz/2+r.margin.left+e.offset.x}).attr("y2",function(e){return r.height.viz/2+r.margin.top+e.offset.y}),d.exit().transition().duration(r.draw.timing).attr("opacity",0).remove(),r.mouse.viz={click:!1},u}).requirements=["data","size"],e.shapes=["radial"],n.exports=e}).call(this)},{"../../array/comparator.js":32,"../../array/sort.js":34,"../../core/data/threshold.js":61,"../../core/fetch/text.js":66,"../../core/fetch/value.js":67,"../../font/sizes.js":104,"../../geom/offset.js":163,"../../textwrap/textwrap.js":203,"../../util/buckets.js":207,"../../util/uniques.js":213}],326:[function(e,t,n){function r(u){var n=d3.min([u.height.viz,u.width.viz])/2,s=u.small||!u.labels.value?(n-2*u.labels.padding)/2:n/3,c=u.small||!u.labels.value?1.4*s:s,d=2*s,o=[],l=[],f=u.data.viz.filter(function(e){return e[u.id.value]===u.focus.value[0]})[0];f||((f={d3po:{}})[u.id.value]=u.focus.value[0]),f.d3po.x=u.width.viz/2,f.d3po.y=u.height.viz/2,f.d3po.r=.65*c;var h=[],i=[u.focus.value[0]];u.edges.connections(u.focus.value[0],u.id.value).forEach(function(e){var t=e[u.edges.source][u.id.value]==u.focus.value[0]?e[u.edges.target]:e[u.edges.source],n=u.data.viz.filter(function(e){return e[u.id.value]===t[u.id.value]})[0];n||((n={d3po:{}})[u.id.value]=t[u.id.value]),n.d3po.edges=u.edges.connections(n[u.id.value],u.id.value).filter(function(e){return e[u.edges.source][u.id.value]!=u.focus.value[0]&&e[u.edges.target][u.id.value]!=u.focus.value[0]}),n.d3po.edge=e,i.push(n[u.id.value]),h.push(n)});var r=u.order.value||u.color.value||u.size.value||u.id.value;h.sort(function(e,t){var n=e.d3po.edges.length-t.d3po.edges.length;return n||z([e,t],r,u.order.sort.value,u.color.value||[],u)}),"number"==typeof u.edges.limit.value?h=h.slice(0,u.edges.limit.value):"function"==typeof u.edges.limit.value&&(h=u.edges.limit.value(h));var p=[],g=0;h.forEach(function(e){var a=e[u.id.value];e.d3po.edges=e.d3po.edges.filter(function(e){var t=e[u.edges.source][u.id.value],n=e[u.edges.target][u.id.value];return i.indexOf(t)<0&&n==a||i.indexOf(n)<0&&t==a}),g+=e.d3po.edges.length||1,e.d3po.edges.forEach(function(e){var t=e[u.edges.source],n=e[u.edges.target],r=n[u.id.value]==a?t:n;i.push(r[u.id.value])})}),z(h,r,u.order.sort.value,u.color.value||[],u);var v=0,m=2*Math.PI;h.forEach(function(o,e){var s=o.d3po.edges.length||1,t=m/g*s;0==e&&(l,v-=t/2);var l=v+t/2;l-=m/4,o.d3po.radians=l,o.d3po.x=u.width.viz/2+c*Math.cos(l),o.d3po.y=u.height.viz/2+c*Math.sin(l),v+=t,o.d3po.edges.sort(function(e,t){e=e[u.edges.source][u.id.value]==o[u.id.value]?e[u.edges.target]:e[u.edges.source],t=t[u.edges.source][u.id.value]==o[u.id.value]?t[u.edges.target]:t[u.edges.source];return z([e,t],r,u.order.sort.value,u.color.value||[],u)}),o.d3po.edges.forEach(function(e,t){var n=e[u.edges.source][u.id.value]==o[u.id.value]?e[u.edges.target]:e[u.edges.source],r=m/g,i=u.data.viz.filter(function(e){return e[u.id.value]===n[u.id.value]})[0];i||((i={d3po:{}})[u.id.value]=n[u.id.value]),a=l-r*s/2+r/2+r*t,i.d3po.radians=a,i.d3po.x=u.width.viz/2+d*Math.cos(a),i.d3po.y=u.height.viz/2+d*Math.sin(a),p.push(i)})});var y=C(h,{accessor:function(e){return[e.d3po.x,e.d3po.y]}}),x=C(p,{accessor:function(e){return[e.d3po.x,e.d3po.y]}});if(x=x||s/4,(y=y||s/2)/2-4<8)var e=d3.min([y/2,8]);else e=y/2-4;if(x/2-4<4)var t=d3.min([x/2,4]);else t=x/2-4;s/10<t&&(t=s/10),e<t&&10<t&&(t=.75*e),1.5*t<e&&(e=1.5*t),e=Math.floor(e),t=Math.floor(t);var b=F(h,u.id.value,A,u);(b=b.concat(F(p,u.id.value,A,u))).push(u.focus.value[0]);var j=u.data.viz.filter(function(e){return 0<=b.indexOf(e[u.id.value])});if(u.size.value){var w=d3.extent(j,function(e){return A(u,e,u.size.value)});w[0]==w[1]&&(w[0]=0);n=d3.scale.linear().domain(w).rangeRound([3,d3.min([e,t])]);var _=A(u,f,u.size.value);f.d3po.r=n(_)}else{n=d3.scale.linear().domain([1,2]).rangeRound([e,t]);u.edges.label&&(f.d3po.r=1.5*n(1))}p.forEach(function(e){e.d3po.ring=2;var t=u.size.value?A(u,e,u.size.value):2;e.d3po.r=n(t)}),h.forEach(function(e){e.d3po.ring=1;var t=u.size.value?A(u,e,u.size.value):1;e.d3po.r=n(t)}),l=[f].concat(h).concat(p),h.forEach(function(i,e){var t=[u.edges.source,u.edges.target],n=i.d3po.edge;t.forEach(function(t){n[t]=l.filter(function(e){return e[u.id.value]==n[t][u.id.value]})[0]}),delete n.d3po,o.push(n),u.edges.connections(i[u.id.value],u.id.value).forEach(function(r){var t=r[u.edges.source][u.id.value]==i[u.id.value]?r[u.edges.target]:r[u.edges.source];if(t[u.id.value]!=f[u.id.value]){var a=p.filter(function(e){return e[u.id.value]==t[u.id.value]})[0];if(a);else{a=h.filter(function(e){return e[u.id.value]==t[u.id.value]})[0]}if(a)r.d3po={spline:!0,translate:{x:u.width.viz/2,y:u.height.viz/2}},[u.edges.source,u.edges.target].forEach(function(t,e){r[t]=l.filter(function(e){return e[u.id.value]==r[t][u.id.value]})[0],void 0===r[t].d3po.edges&&(r[t].d3po.edges={});var n=0===e?r[u.edges.target][u.id.value]:r[u.edges.source][u.id.value];r[t][u.id.value]==i[u.id.value]?r[t].d3po.edges[n]={angle:i.d3po.radians+Math.PI,radius:s/2}:r[t].d3po.edges[n]={angle:a.d3po.radians,radius:s/2}}),o.push(r)}})});var k=!1;return u.background.value&&["transparent","none"].indexOf(u.background.value)<0&&d3.hsl(u.background.value).l<.5&&(k=N(u.background.value)),l.forEach(function(e){if(!u.small&&u.labels.value)if(e[u.id.value]!=u.focus.value[0]){e.d3po.rotate=e.d3po.radians*(180/Math.PI);var t=e.d3po.rotate,n=s-3*u.labels.padding-e.d3po.r;if(t<-90||90<t){t-=180;var r=-(e.d3po.r+n/2+u.labels.padding),a="end"}else r=e.d3po.r+n/2+u.labels.padding,a="start";var i=0<=h.indexOf(e),o=1==e.d3po.ring?y:x;e.d3po.label={x:r,y:0,w:n,h:o,angle:t,anchor:a,valign:"center",color:k||S(E(u,e)),resize:[8,u.labels.font.size],background:i,mouse:!0}}else if(u.size.value||u.edges.label){o=c-2*e.d3po.r-2*u.labels.padding;e.d3po.label={x:0,y:e.d3po.r+o/2,w:c,h:o,color:k||S(E(u,e)),resize:[10,40],background:!0,mouse:!0}}else delete e.d3po.rotate,delete e.d3po.label;else delete e.d3po.rotate,delete e.d3po.label}),u.mouse.viz={},u.mouse.viz[M.click]=function(e){if(e[u.id.value]!=u.focus.value[0]){O(u.type.value);var t=u.focus.value[0];u.history.states.push(function(){u.self.focus(t).draw()}),u.self.focus(e[u.id.value]).draw()}},{edges:o,nodes:l,data:j}}var z=e("../../array/sort.js"),M=e("../../client/pointer.js"),A=e("../../core/fetch/value.js"),E=e("../../core/fetch/color.js"),S=e("../../color/legible.js"),O=e("../../tooltip/remove.js"),C=e("../../network/smallestgap.js"),N=e("../../color/text.js"),F=e("../../util/uniques.js");r.filter=function(r,a){var e=r.edges.connections(r.focus.value[0],r.id.value,!0),t=[];e.forEach(function(e){t=t.concat(r.edges.connections(e[r.id.value],r.id.value,!0))});var n=e.concat(t),i=F(n,r.id.value,A,r),o=[];return i.forEach(function(t){var e=a.filter(function(e){return e[r.id.value]==t})[0];if(e)o.push(e);else{var n={d3po:{}};n[r.id.value]=t,o.push(n)}}),o},r.nesting=!1,r.scale=1,r.shapes=["circle","square","donut"],r.requirements=["edges","focus"],r.tooltip="static",t.exports=r},{"../../array/sort.js":34,"../../client/pointer.js":38,"../../color/legible.js":44,"../../color/text.js":50,"../../core/fetch/color.js":63,"../../core/fetch/value.js":67,"../../network/smallestgap.js":171,"../../tooltip/remove.js":206,"../../util/uniques.js":213}],327:[function(t,n,e){(function(){var g,v,m,e;g=t("./sankey.js"),v=t("../../client/pointer.js"),m=t("../../tooltip/remove.js"),t("../../util/uniques.js"),(e=function(r){var e,t,a,n,i,o,s,l,u,c,d,f,h,p;for(a=r.focus.value[0],d=2*r.data.stroke.width,p=r.size.value.constructor===Number?r.size.value:20,t=r.edges.connections(a,r.id.value).filter(function(e){return e[r.edges.source][r.id.value]!==a||e[r.edges.target][r.id.value]!==a}),c=[],f=[],t=t.map(function(e){var t,n;return n=e[r.edges.target][r.id.value]===a?(t={id:"left_"+e[r.edges.source][r.id.value],dupe:"left",data:e[r.edges.source],value:e[r.edges.strength.value]},e[r.edges.target]):(t=e[r.edges.source],{id:"right_"+e[r.edges.target][r.id.value],dupe:"right",data:e[r.edges.target],value:e[r.edges.strength.value]}),f.indexOf(t.id)<0&&c.push(t),f.indexOf(n.id)<0&&c.push(n),f.push(t.id),f.push(n.id),{source:t,target:n,value:e[r.edges.strength.value]||1}}),o=g().nodeWidth(p).nodePadding(r.data.padding.value).size([r.width.viz-2*d,r.height.viz-2*d]).nodes(c).links(t).layout(2),h=[],n=0,s=c.length;n<s;n++)(e={id:(e=(u=c[n]).data||u)[r.id.value]}).d3po={x:u.x+u.dx/2+d,y:u.y+u.dy/2+d,width:u.dx,height:u.dy,suffix:u.dupe},e.id!==a&&(e[r.edges.strength.value]=u.value),h.push(e);for(r.edges.path=o.link(),i=0,l=t.length;i<l;i++)t[i].d3po={x:d,y:d};return r.mouse.viz={},r.mouse.viz[v.click]=function(e){var t;if(e[r.id.value]!==r.focus.value[0])return m(r.type.value),t=r.focus.value[0],r.history.states.push(function(){return r.self.focus(t).draw()}),r.self.focus(e[r.id.value]).draw()},{nodes:h,edges:t}}).requirements=["edges","focus","nodes"],e.shapes=["square"],n.exports=e}).call(this)},{"../../client/pointer.js":38,"../../tooltip/remove.js":206,"../../util/uniques.js":213,"./sankey.js":327}],328:[function(t,n,e){(function(){var i,o,e,s,l;i=t("../../core/fetch/value.js"),o=t("./helpers/graph/draw.js"),t("../../core/console/print.js"),s=t("../../array/sort.js"),l=t("./helpers/graph/dataticks.js"),(e=function(e){var t,n,r,a;if(o(e,{buffer:"size",mouse:!0}),0<=e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0))return[];for(n=0,r=(a=e.data.viz).length;n<r;n++)(t=a[n]).d3po.x=e.x.scale.viz(i(e,t,e.x.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=e.y.scale.viz(i(e,t,e.y.value)),t.d3po.y+=e.axes.margin.viz.top,"number"!=typeof e.size.value&&e.size.value?t.d3po.r=e.axes.scale(i(e,t,e.size.value)):t.d3po.r=e.axes.scale(0);return l(e),s(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)}).fill=!0,e.requirements=["data","x","y"],e.scale=1.1,e.setup=function(e){if(e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value))return e.self.y({scale:"discrete"})},e.shapes=["circle"],e.tooltip="static",n.exports=e}).call(this)},{"../../array/sort.js":34,"../../core/console/print.js":52,"../../core/fetch/value.js":67,"./helpers/graph/dataticks.js":312,"./helpers/graph/draw.js":313}],329:[function(n,r,e){(function(){var e,l,u,t;e=n("../../core/data/threshold.js"),l=n("../../core/data/group.js"),u=n("../../object/merge.js"),(t=function(e){var t,n,r,a,i,o,s;if(r=l(e,e.data.viz),(n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return 0==(n=e.value-t.value)?e.id<t.id:n}).nodes({name:"root",values:r}).filter(function(e){return!e.values&&e.area})).length){for(s=n[0];s.parent;)s=s.parent;for(o=[],a=0,i=n.length;a<i;a++)(t=n[a]).d3po.d3po=u(t.d3po.d3po,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/s.value}),o.push(t.d3po)}return o}).filter=e,t.modes=["squarify","slice","dice","slice-dice"],t.requirements=["data","size"],t.shapes=["square"],t.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},r.exports=t}).call(this)},{"../../core/data/group.js":57,"../../core/data/threshold.js":61,"../../object/merge.js":174}],330:[function(n,a,e){(function(){var e,t,r,u,c,d;e=n("../core/methods/attach.js"),t=n("./methods/helpers/axis.js"),u=n("./helpers/ui/message.js"),c=n("./helpers/drawSteps.js"),d=n("../core/console/print.js"),r=n("./helpers/container.js"),n("../object/validate.js"),a.exports=function(){var l;return l={g:{apps:{}},types:{area:n("./types/area.js"),bar:n("./types/bar.js"),bubbles:n("./types/bubbles.js"),box:n("./types/box.js"),donut:n("./types/donut.js"),geomap:n("./types/geomap.js"),halfdonut:n("./types/halfdonut.js"),line:n("./types/line.js"),network:n("./types/network.js"),paths:n("./types/paths.js"),pie:n("./types/pie.js"),radar:n("./types/radar.js"),rings:n("./types/rings.js"),sankey:n("./types/sankey.js"),scatter:n("./types/scatter.js"),stacked:n("./types/area.js"),treemap:n("./types/treemap.js")},self:function(e){return e.each(function(){var a,i,o,e,t,n,s;l.draw.frozen=!0,l.error.internal=null,"timing"in l.draw||(l.draw.timing=l.timing.transitions),l.error.value&&(l.draw.timing=0),r(l),n=l.width.value<=l.width.small,t=l.height.value<=l.height.small,l.small=n||t,l.width.viz=l.width.value,l.height.viz=l.height.value,a=!1,i=function(){s.length?e():l.dev.value&&(d.groupEnd(),d.timeEnd("total draw time"),d.log("\n"))},o=function(e,t){e[t=t||"function"]instanceof Array?e[t].forEach(function(e){e(l,i)}):"function"==typeof e[t]&&e[t](l,i),e.wait||i()},e=function(){var e,t,n,r;r=s.shift(),n=l.g.message&&a===r.message,"function"==typeof(t=!("check"in r)||r.check)&&(t=t(l)),t?n?o(r):(l.dev.value&&(!1!==a&&d.groupEnd(),d.group(r.message)),e="string"==typeof l.messages.value?(a=l.messages.value,l.messages.value):(a=r.message,l.format.value(r.message)),l.draw.update?(u(l,e),l.error.value?o(r):setTimeout(function(){return o(r)},10)):o(r)):"otherwise"in r?l.error.value?o(r,"otherwise"):setTimeout(function(){return o(r,"otherwise")},10):i()},l.messages.style.backup=l.group&&"1"===l.group.attr("opacity")?"small":"large",s=c(l),e()}),l.self}},e(l,{active:n("./methods/active.js"),aggs:n("./methods/aggs.js"),attrs:n("./methods/attrs.js"),axes:n("./methods/axes.js"),background:n("./methods/background.js"),class:n("./methods/class.js"),color:n("./methods/color.js"),cols:n("./methods/cols.js"),config:n("./methods/config.js"),container:n("./methods/container.js"),coords:n("./methods/coords.js"),csv:n("./methods/csv.js"),data:n("./methods/data.js"),depth:n("./methods/depth.js"),descs:n("./methods/descs.js"),dev:n("./methods/dev.js"),draw:n("./methods/draw.js"),edges:n("./methods/edges.js"),error:n("./methods/error.js"),focus:n("./methods/focus.js"),font:n("./methods/font.js"),footer:n("./methods/footer.js"),format:n("./methods/format.js"),height:n("./methods/height.js"),history:n("./methods/history.js"),icon:n("./methods/icon.js"),id:n("./methods/id.js"),labels:n("./methods/labels.js"),legend:n("./methods/legend.js"),links:n("./methods/links.js"),margin:n("./methods/margin.js"),messages:n("./methods/messages.js"),mouse:n("./methods/mouse.js"),nodes:n("./methods/nodes.js"),order:n("./methods/order.js"),resize:n("./methods/resize.js"),shape:n("./methods/shape.js"),size:n("./methods/size.js"),style:n("./methods/style.js"),temp:n("./methods/temp.js"),text:n("./methods/text.js"),time:n("./methods/time.js"),timeline:n("./methods/timeline.js"),timing:n("./methods/timing.js"),title:n("./methods/title.js"),tooltip:n("./methods/tooltip.js"),total:n("./methods/total.js"),type:n("./methods/type.js"),ui:n("./methods/ui.js"),width:n("./methods/width.js"),x:t("x"),x2:t("x2"),y:t("y"),y2:t("y2"),zoom:n("./methods/zoom.js")}),l.self}}).call(this)},{"../core/console/print.js":52,"../core/methods/attach.js":82,"../object/validate.js":175,"./helpers/container.js":214,"./helpers/drawSteps.js":215,"./helpers/ui/message.js":244,"./methods/active.js":253,"./methods/aggs.js":254,"./methods/attrs.js":255,"./methods/axes.js":256,"./methods/background.js":257,"./methods/class.js":258,"./methods/color.js":259,"./methods/cols.js":260,"./methods/config.js":261,"./methods/container.js":262,"./methods/coords.js":263,"./methods/csv.js":264,"./methods/data.js":265,"./methods/depth.js":266,"./methods/descs.js":267,"./methods/dev.js":268,"./methods/draw.js":269,"./methods/edges.js":270,"./methods/error.js":271,"./methods/focus.js":272,"./methods/font.js":273,"./methods/footer.js":274,"./methods/format.js":275,"./methods/height.js":276,"./methods/helpers/axis.js":277,"./methods/history.js":278,"./methods/icon.js":279,"./methods/id.js":280,"./methods/labels.js":281,"./methods/legend.js":282,"./methods/links.js":283,"./methods/margin.js":284,"./methods/messages.js":285,"./methods/mouse.js":286,"./methods/nodes.js":287,"./methods/order.js":288,"./methods/resize.js":289,"./methods/shape.js":290,"./methods/size.js":291,"./methods/style.js":292,"./methods/temp.js":293,"./methods/text.js":294,"./methods/time.js":295,"./methods/timeline.js":296,"./methods/timing.js":297,"./methods/title.js":298,"./methods/tooltip.js":299,"./methods/total.js":300,"./methods/type.js":301,"./methods/ui.js":302,"./methods/width.js":303,"./methods/zoom.js":304,"./types/area.js":305,"./types/bar.js":306,"./types/box.js":307,"./types/bubbles.js":308,"./types/donut.js":309,"./types/geomap.js":310,"./types/halfdonut.js":311,"./types/line.js":321,"./types/network.js":322,"./types/paths.js":323,"./types/pie.js":324,"./types/radar.js":325,"./types/rings.js":326,"./types/sankey.js":327,"./types/scatter.js":328,"./types/treemap.js":329}]},{},[166,165]);